import{d as e,u as t,aD as n,ad as o,r as s,eK as r,a7 as a,e as i,o as p,g as l,a4 as d,j as u,k as m,l as c,m as _,t as f,p as j,q as y,fe as g,n as v,eL as b,ah as x}from"./index-920db443.js";import{B as I}from"./BasicLeftTree-cd55d444.js";import{u as T,B as k}from"./useTable-dc8c9d84.js";import{T as w}from"./TableAction-adbe36f2.js";import{u as C}from"./index-143f5813.js";import{u as h}from"./index-999abbee.js";import{_ as D}from"./Form.vue_vue_type_script_setup_true_lang-bfef796d.js";import{_ as F}from"./index.vue_vue_type_script_setup_true_lang-6ce1dbcf.js";import"./useForm-1d28ee0b.js";import"./componentMap-c91676b4.js";import"./visualDev-8f54ab4b.js";import"./index.vue_vue_type_script_setup_true_lang-69353133.js";import"./index-9c138ba5.js";import"./ArrowLeftOutlined-3fbf15bc.js";import"./log-2a5f2c26.js";import"./Parser.vue_vue_type_script_setup_true_lang-6ddfe448.js";import"./Item.vue_vue_type_script_setup_true_lang-fef56f78.js";import"./Form.vue_vue_type_script_setup_true_lang-63005a4d.js";import"./createAsyncComponent-7e8f72ac.js";import"./DataLogList.vue_vue_type_script_setup_true_lang-c225eb8c.js";import"./index-0be8277c.js";import"./jquery-6353a699.js";import"./useDefineSetting-7df030ff.js";import"./CustomForm.vue_vue_type_script_setup_true_lang-1aa664f4.js";import"./config-06ca91cd.js";import"./upperFirst-2cd1a2f7.js";import"./useTabs-ceeccdba.js";import"./uniqBy-e868edd7.js";import"./useWindowSizeFn-05f906e2.js";import"./sortable.esm-02d0fe44.js";import"./SettingOutlined-dd6150a2.js";import"./index-1cfe4e28.js";import"./Form.vue_vue_type_script_setup_true_lang-c070ff9d.js";import"./formValidate-c8ab8d29.js";const R={class:"jnpf-content-wrapper"},S={class:"jnpf-content-wrapper-left"},L={class:"jnpf-content-wrapper-center"},M={class:"jnpf-content-wrapper-content"},O=e({name:"systemData-dictionary",__name:"index",setup(e){const{createMessage:O}=x(),{t:A}=t(),B=n(),[K,{openModal:P}]=C(),[q,{openDrawer:N}]=h(),z=o({typeId:"",isTree:0}),E=o({expand:!1}),G=[{label:"分类管理",onClick:function(){N(!0)}}],H=s(null),J=s(!1),Q=s([]),[V,{reload:W,setLoading:U,getForm:X}]=T({api:r,columns:[{title:"名称",dataIndex:"fullName"},{title:"编码",dataIndex:"enCode"},{title:"排序",dataIndex:"sortCode",width:70,align:"center"},{title:"状态",dataIndex:"enabledMark",width:70,align:"center"}],immediate:!1,pagination:!1,isTreeTable:!0,useSearchForm:!0,formConfig:{schemas:[{field:"keyword",label:A("common.keyword"),component:"Input",componentProps:{placeholder:A("common.enterKeyword"),submitOnPressEnter:!0}}]},actionColumn:{width:100,title:"操作",dataIndex:"action"}});function Y(e){return[{label:A("common.editText"),onClick:te.bind(null,e.id)},{label:A("common.delText"),color:"error",modelConfirm:{onOk:ne.bind(null,e.id)}}]}function Z(e=!1){J.value=!0,e&&U(!0),g().then((t=>{Q.value=t.data.list,v((()=>{e&&(z.typeId=m(Q)[0].id,z.isTree=m(Q)[0].isTree);const t=m(H);t?.setSelectedKeys([z.typeId]),E.expand=!!z.isTree,e&&z.typeId&&W(),J.value=!1}))}))}function $(){Q.value=[],Z()}function ee(e){if(!e||z.typeId===e)return;z.typeId=e;const t=m(H),n=t?.getSelectedNode(z.typeId);z.isTree=n.isTree,E.expand=!!z.isTree,X().resetFields()}function te(e=""){P(!0,{id:e,...z})}function ne(e){b(e).then((e=>{O.success(e.msg),B.setDictionaryList(),W()}))}function oe(e){e||$()}return a((()=>{Z(!0)})),(e,t)=>{const n=i("a-button"),o=i("a-tag");return p(),l("div",R,[d("div",S,[u(m(I),{title:"字典分类",ref_key:"leftTreeRef",ref:H,treeData:Q.value,loading:J.value,onReload:$,onSelect:ee,dropDownActions:G},null,8,["treeData","loading"])]),d("div",L,[d("div",M,[u(m(k),{onRegister:m(V),searchInfo:z,tableSetting:E},{tableTitle:c((()=>[u(n,{type:"primary",preIcon:"icon-ym icon-ym-btn-add",onClick:t[0]||(t[0]=e=>te()),disabled:"0"===z.typeId||"1"===z.typeId},{default:c((()=>[_(f(m(A)("common.addText")),1)])),_:1},8,["disabled"])])),bodyCell:c((({column:e,record:t})=>["enabledMark"===e.key?(p(),j(o,{key:0,color:1==t.enabledMark?"success":"error"},{default:c((()=>[_(f(1==t.enabledMark?"启用":"禁用"),1)])),_:2},1032,["color"])):y("",!0),"action"===e.key?(p(),j(m(w),{key:1,actions:Y(t)},null,8,["actions"])):y("",!0)])),_:1},8,["onRegister","searchInfo","tableSetting"])])]),u(D,{onRegister:m(K),onReload:m(W)},null,8,["onRegister","onReload"]),u(F,{onRegister:m(q),onOpenChange:oe},null,8,["onRegister"])])}}});export{O as default};
