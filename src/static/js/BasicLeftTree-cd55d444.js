import{d as e,ek as a,M as t,el as l,o as n,g as o,j as s,aR as c,k as r,l as d,aL as i,bz as u,cl as p,bA as f,F as y,h,q as A,a4 as k,cr as v,af as L,em as _,u as S,en as m,V as b,m as T,t as E,p as g,eo as C,r as D,aY as w,w as x,ee as N,aS as B,aT as R,e1 as K,n as M,a5 as U}from"./index-920db443.js";const H={key:0,class:"flex items-center flex-1 cursor-pointer justify-self-stretch"},I=e({__name:"LeftTreeHeader",props:{helpMessage:{type:[String,Array],default:""},title:{type:String,default:""},showToolbar:{type:Boolean,default:!1},checkable:{type:Boolean,default:!1},search:{type:Boolean,default:!1},searchText:{type:String,default:""},checkAll:{type:Function,default:void 0},expandAll:{type:Function,default:void 0},dropDownActions:{type:Array,default:()=>[]},isAsync:{type:Boolean,default:!1}},emits:["strictly-change","reload","clearSearch"],setup(e,{emit:D}){const[w]=_("basic-left-tree"),x=e,N=D,B=a(),{t:R}=S(),K=t((()=>{const{checkable:e}=x,a=[{label:R("component.tree.reload"),value:l.RELOAD},{label:R("component.tree.expandAll"),value:l.EXPAND_ALL},{label:R("component.tree.unExpandAll"),value:l.UN_EXPAND_ALL,divider:e}];let t=e?[{label:R("component.tree.selectAll"),value:l.SELECT_ALL},{label:R("component.tree.unSelectAll"),value:l.UN_SELECT_ALL,divider:e},...a,{label:R("component.tree.checkStrictly"),value:l.CHECK_STRICTLY},{label:R("component.tree.checkUnStrictly"),value:l.CHECK_UN_STRICTLY}]:a;return x.isAsync&&(t=t.filter((e=>e.value!==l.EXPAND_ALL&&e.value!==l.RELOAD))),t}));function M(e){const{value:a}=e;switch(a){case l.RELOAD:N("reload");break;case l.SELECT_ALL:x.checkAll?.(!0);break;case l.UN_SELECT_ALL:x.checkAll?.(!1);break;case l.EXPAND_ALL:N("clearSearch"),x.expandAll?.(!0);break;case l.UN_EXPAND_ALL:N("clearSearch"),x.expandAll?.(!1);break;case l.CHECK_STRICTLY:N("strictly-change",!1);break;case l.CHECK_UN_STRICTLY:N("strictly-change",!0);break;default:e.onClick?.()}}return(e,a)=>(n(),o("div",{class:L(r(w)("header"))},[s(r(v),{helpMessage:e.helpMessage,content:e.title,class:"px-10px"},c({action:d((()=>[e.showToolbar||e.dropDownActions.length?(n(),o("div",H,[s(r(u),{onClick:a[0]||(a[0]=p((()=>{}),["prevent"]))},{overlay:d((()=>[s(r(f),null,{default:d((()=>[e.showToolbar?(n(!0),o(y,{key:0},h(K.value,(e=>(n(),o(y,{key:e.value},[s(r(m),b({ref_for:!0},{key:e.value},{onClick:a=>M(e)}),{default:d((()=>[T(E(e.label),1)])),_:2},1040,["onClick"]),e.divider?(n(),g(r(C),{key:0})):A("",!0)],64)))),128)):A("",!0),e.dropDownActions.length?(n(!0),o(y,{key:1},h(e.dropDownActions,((e,a)=>(n(),g(r(m),{key:a,onClick:a=>M(e)},{default:d((()=>[T(E(e.label),1)])),_:2},1032,["onClick"])))),128)):A("",!0)])),_:1})])),default:d((()=>[a[1]||(a[1]=k("i",{class:"icon-ym icon-ym-mpMenu"},null,-1))])),_:1,__:[1]})])):A("",!0)])),_:2},[r(B).headerTitle?{name:"content",fn:d((()=>[i(e.$slots,"headerTitle")])),key:"0"}:void 0]),1032,["helpMessage","content"])],2))}}),P=U(e({__name:"BasicLeftTree",props:{helpMessage:{type:[String,Array],default:""},title:{type:String,default:""},showToolbar:{type:Boolean,default:!0},showSearch:{type:Boolean,default:!0},fieldNames:{type:Object,default:()=>({key:"id",title:"fullName"})},dropDownActions:{type:Array,default:()=>[]},treeData:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},defaultExpandAll:{type:Boolean,default:!0},loadData:{type:Function},actionList:{type:Array,default:()=>[]}},emits:["select","reload"],setup(e,{expose:t,emit:l}){const u=e,p=l,[f]=_("basic-left-tree"),y=a(),{t:h}=S(),k=D(""),v=D(!1),m=D(null),b=w((function(e){T().setSearchValue(e)}),200);function T(){const e=r(m);if(!e)throw new Error("tree is null!");return e}function E(e){T().expandAll(e)}function C(e){T().checkAll(e)}function U(e){v.value=e}function H(){k.value="",p("reload")}function P(e,{node:a}){if(!e.length)return;const t=function(e){let a=[];const t={...e.dataRef};if(a.push(t),e.parent){a=[...e.parent.nodes,...a]}return a}(a);p("select",e[0],a,t)}return x((()=>k.value),(e=>{b(e)})),x((()=>u.treeData),(()=>{M((()=>{u.defaultExpandAll&&E(!0)}))})),t({setSelectedKeys:function(e){T().setSelectedKeys(e)},getSelectedNode:function(e){return T().getSelectedNode(e)},updateNodeByKey:function(e,a){return T().updateNodeByKey(e,a)},setExpandedKeys:function(e){return T().setExpandedKeys(e)}}),(a,t)=>(n(),o("div",{class:L([r(f)(),"h-full"])},[e.title||e.dropDownActions.length?(n(),g(I,{key:0,title:e.title,helpMessage:e.helpMessage,showToolbar:e.showToolbar,dropDownActions:e.dropDownActions,expandAll:E,checkAll:C,onStrictlyChange:U,onReload:H,onClearSearch:t[0]||(t[0]=e=>k.value=""),isAsync:!!e.loadData},c({_:2},[r(y).headerTitle?{name:"headerTitle",fn:d((()=>[i(a.$slots,"headerTitle",{},void 0,!0)])),key:"0"}:void 0]),1032,["title","helpMessage","showToolbar","dropDownActions","isAsync"])):A("",!0),e.showSearch?(n(),o("div",{key:1,class:L(r(f)("search"))},[s(r(N),{placeholder:r(h)("common.leftTreeSearchText"),allowClear:"",value:k.value,"onUpdate:value":t[1]||(t[1]=e=>k.value=e)},null,8,["placeholder","value"])],2)):A("",!0),s(r(K),{clickRowToExpand:!1,treeData:e.treeData,fieldNames:e.fieldNames,checkStrictly:v.value,"load-data":e.loadData,onSelect:P,class:"tree-main",ref_key:"treeRef",ref:m,defaultExpandAll:e.defaultExpandAll,actionList:e.actionList,loading:e.loading},c({_:2},[r(y).title?{name:"title",fn:d((e=>[i(a.$slots,"title",B(R(e)),void 0,!0)])),key:"0"}:void 0]),1032,["treeData","fieldNames","checkStrictly","load-data","defaultExpandAll","actionList","loading"])],2))}}),[["__scopeId","data-v-9039d0b0"]]);export{P as B};
