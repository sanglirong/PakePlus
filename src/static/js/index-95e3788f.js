import{u as e,B as t}from"./useTable-dc8c9d84.js";import{T as o}from"./TableAction-adbe36f2.js";import{d as n,u as s,aD as i,co as a,a7 as r,e as p,o as m,g as c,a4 as l,j as u,l as d,m as _,t as g,k as j,p as f,q as y,ah as T}from"./index-920db443.js";import{g as w,_ as v,d as h,e as x}from"./Detail.vue_vue_type_script_setup_true_lang-6c8f713b.js";import{u as S}from"./index-143f5813.js";import"./useForm-1d28ee0b.js";import"./componentMap-c91676b4.js";import"./visualDev-8f54ab4b.js";import"./index.vue_vue_type_script_setup_true_lang-69353133.js";import"./index-9c138ba5.js";import"./ArrowLeftOutlined-3fbf15bc.js";import"./log-2a5f2c26.js";import"./index-999abbee.js";import"./Parser.vue_vue_type_script_setup_true_lang-6ddfe448.js";import"./Item.vue_vue_type_script_setup_true_lang-fef56f78.js";import"./Form.vue_vue_type_script_setup_true_lang-63005a4d.js";import"./createAsyncComponent-7e8f72ac.js";import"./DataLogList.vue_vue_type_script_setup_true_lang-c225eb8c.js";import"./index-0be8277c.js";import"./jquery-6353a699.js";import"./useDefineSetting-7df030ff.js";import"./CustomForm.vue_vue_type_script_setup_true_lang-1aa664f4.js";import"./config-06ca91cd.js";import"./upperFirst-2cd1a2f7.js";import"./useTabs-ceeccdba.js";import"./uniqBy-e868edd7.js";import"./useWindowSizeFn-05f906e2.js";import"./sortable.esm-02d0fe44.js";import"./SettingOutlined-dd6150a2.js";import"./index-1cfe4e28.js";const b={class:"jnpf-content-wrapper"},D={class:"jnpf-content-wrapper-center"},k={class:"jnpf-content-wrapper-content"},C=n({name:"msgCenter-msgMonitor",__name:"index",setup(n){const{t:C}=s(),R=i(),{createMessage:M,createConfirm:H}=T(),[I,{openModal:P}]=S(),[F,{reload:Y,getSelectRows:O,clearSelectedRowKeys:A,getForm:L}]=e({api:w,columns:[{title:"消息类型",dataIndex:"messageType",width:100},{title:"消息来源",dataIndex:"messageSource",width:100},{title:"消息标题",dataIndex:"title"},{title:"发送时间",dataIndex:"sendTime",width:150,format:"date|YYYY-MM-DD HH:mm:ss"}],useSearchForm:!0,formConfig:{schemas:[{field:"keyword",label:C("common.keyword"),component:"Input",componentProps:{placeholder:C("common.enterKeyword"),submitOnPressEnter:!0}},{field:"messageType",label:"消息类型",component:"Select",componentProps:{placeholder:"请选择"}},{field:"messageSource",label:"消息来源",component:"Select",componentProps:{placeholder:"请选择"}},{field:"pickerVal",label:"发送时间",component:"DateRange",componentProps:{format:"YYYY-MM-DD HH:mm:ss",showTime:{defaultValue:[a("00:00:00","HH:mm:ss"),a("23:59:59","HH:mm:ss")]},placeholder:["开始时间","结束时间"]}}],fieldMapToTime:[["pickerVal",["startTime","endTime"]]]},actionColumn:{width:60,title:"操作",dataIndex:"action"},rowSelection:{type:"checkbox"},clickToRowSelect:!1});function q(e){return[{label:C("common.detailText"),onClick:V.bind(null,e.id)}]}function B(){const e=O()||[];if(!e.length)return M.error(C("common.selectDataTip"));H({iconType:"warning",title:C("common.tipTitle"),content:C("common.batchDelTip"),onOk:()=>{const t={ids:e.map((e=>e.id))};h(t).then((e=>{M.success(e.msg),A(),Y()}))}})}function K(){H({iconType:"warning",title:C("common.tipTitle"),content:"您确定要清空全部数据吗, 是否继续?",onOk:()=>{x().then((e=>{M.success(e.msg),Y()}))}})}function V(e){P(!0,{id:e})}return r((()=>{!async function(){let e=await R.getDictionaryData("msgSendType");e.map((e=>e.id=e.enCode)),L().updateSchema([{field:"messageType",componentProps:{options:e}}]);let t=await R.getDictionaryData("msgSourceType");t.map((e=>e.id=e.enCode)),L().updateSchema([{field:"messageSource",componentProps:{options:t}}])}()})),(e,n)=>{const s=p("a-button");return m(),c("div",b,[l("div",D,[l("div",k,[u(j(t),{onRegister:j(F)},{tableTitle:d((()=>[u(s,{type:"error",preIcon:"icon-ym icon-ym-btn-clearn",onClick:B},{default:d((()=>[_(g(j(C)("common.delText")),1)])),_:1}),u(s,{type:"link",danger:"",onClick:K},{default:d((()=>n[0]||(n[0]=[_("一键清空 ")]))),_:1,__:[0]})])),bodyCell:d((({column:e,record:t})=>["action"===e.key?(m(),f(j(o),{key:0,actions:q(t)},null,8,["actions"])):y("",!0)])),_:1},8,["onRegister"])])]),u(v,{onRegister:j(I),onReload:j(Y)},null,8,["onRegister","onReload"])])}}});export{C as default};
