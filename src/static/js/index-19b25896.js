import{E as e,F as t,G as o,H as i,I as n}from"./visualDev-8f54ab4b.js";import{u as s,B as a}from"./useTable-dc8c9d84.js";import{T as r}from"./TableAction-adbe36f2.js";import{d as l,aD as p,u,r as d,ad as m,e5 as _,a7 as c,e as f,o as j,g,a4 as y,j as v,l as b,F as R,h as w,m as h,t as x,k as M,bN as k,p as C,q as D,ea as T,ah as I}from"./index-920db443.js";import{u as S}from"./index-143f5813.js";import{_ as O}from"./Form.vue_vue_type_script_setup_true_lang-71b02822.js";import{_ as P}from"./ViewForm.vue_vue_type_script_setup_true_lang-931e39b0.js";import{_ as F}from"./CreateMenuModal.vue_vue_type_script_setup_true_lang-e8626c27.js";import{_ as N}from"./ShortLinkModal.vue_vue_type_style_index_0_lang-34ec3e2a.js";import{_ as A}from"./DownloadModal.vue_vue_type_script_setup_true_lang-722cccb7.js";import L from"./AiCreateModal-db0eb9ba.js";import{P as Y}from"./index-c37d2476.js";import"./useForm-1d28ee0b.js";import"./componentMap-c91676b4.js";import"./index.vue_vue_type_script_setup_true_lang-69353133.js";import"./index-9c138ba5.js";import"./ArrowLeftOutlined-3fbf15bc.js";import"./log-2a5f2c26.js";import"./index-999abbee.js";import"./Parser.vue_vue_type_script_setup_true_lang-6ddfe448.js";import"./Item.vue_vue_type_script_setup_true_lang-fef56f78.js";import"./Form.vue_vue_type_script_setup_true_lang-63005a4d.js";import"./createAsyncComponent-7e8f72ac.js";import"./DataLogList.vue_vue_type_script_setup_true_lang-c225eb8c.js";import"./index-0be8277c.js";import"./jquery-6353a699.js";import"./useDefineSetting-7df030ff.js";import"./CustomForm.vue_vue_type_script_setup_true_lang-1aa664f4.js";import"./config-06ca91cd.js";import"./upperFirst-2cd1a2f7.js";import"./useTabs-ceeccdba.js";import"./uniqBy-e868edd7.js";import"./useWindowSizeFn-05f906e2.js";import"./sortable.esm-02d0fe44.js";import"./SettingOutlined-dd6150a2.js";import"./index-1cfe4e28.js";import"./dataSource-ed26da12.js";import"./dataModel-ea807f46.js";import"./formValidate-c8ab8d29.js";import"./TableModal.vue_vue_type_script_setup_true_lang-34dab00f.js";import"./FormGenerator.vue_vue_type_script_setup_true_lang-948e37f5.js";import"./vuedraggable.umd-11acc51f.js";import"./componentMap-a7ede5fc.js";import"./Parser.vue_vue_type_script_lang-80b37b11.js";import"./CopyOutlined-8d46c8b2.js";import"./index-3b5bee70.js";import"./InitiatorUserSelect.vue_vue_type_script_setup_true_lang-dfa9afb0.js";import"./template-c6142676.js";import"./define-8efdf20f.js";import"./ComplexHeaderModal.vue_vue_type_style_index_0_lang-cb4acf18.js";import"./FlowModal.vue_vue_type_script_setup_true_lang-b2e7f9ad.js";import"./Main.vue_vue_type_style_index_0_lang-0afb53a3.js";import"./componentMap-7e15a185.js";import"./task-ee77df5a.js";import"./BatchOperate-c1982233.js";/* empty css                                                                     */import"./index-7e2f1b8c.js";import"./aiUtils-9712c454.js";import"./useRedo-dab275e6.js";import"./BasicColumnDesign.vue_vue_type_style_index_0_lang-4969526a.js";import"./config-a2a35532.js";import"./shortLink-5c58d9bb.js";import"./PreviewModal.vue_vue_type_script_setup_true_lang-d0fb777b.js";import"./BasicLeftTree-cd55d444.js";import"./DiffPreviewModal.vue_vue_type_style_index_0_lang-3333aa4d.js";import"./AliasModal.vue_vue_type_script_setup_true_lang-1a1a8529.js";import"./billRule-0363563b.js";import"./import-e198d900.js";import"./tip-b30e67af.js";const B={class:"jnpf-content-wrapper"},H={class:"jnpf-content-wrapper-center"},q={class:"jnpf-content-wrapper-content"},G=l({name:"onlineDev-webDesign",__name:"index",setup(l){const{createMessage:G}=I(),U=p(),{t:E}=u(),[V,{openModal:z}]=S(),[K,{openModal:Q}]=S(),[W,{openModal:$}]=S(),[J,{openModal:X}]=S(),[Z,{openModal:ee}]=S(),[te,{openModal:oe}]=S(),[ie,{openModal:ne}]=S(),se=[{fullName:"表单",id:2},{fullName:"视图",id:4}],ae=d([]),re=m({type:1}),le=_(),[pe,{reload:ue,getForm:de}]=s({api:e,columns:[{title:"名称",dataIndex:"fullName",width:200},{title:"编码",dataIndex:"enCode",width:200},{title:"分类",dataIndex:"category",width:150},{title:"类型",dataIndex:"webType",width:100,align:"center",customRender:({record:e})=>4==e.webType?"视图":"表单"},{title:"创建人",dataIndex:"creatorUser",width:120},{title:"创建时间",dataIndex:"creatorTime",width:150,format:"date|YYYY-MM-DD HH:mm:ss"},{title:"最后修改时间",dataIndex:"lastModifyTime",width:150,format:"date|YYYY-MM-DD HH:mm:ss"},{title:"排序",dataIndex:"sortCode",width:70,align:"center"},{title:"状态",dataIndex:"isRelease",width:80,align:"center"}],searchInfo:re,useSearchForm:!0,formConfig:{schemas:[{field:"keyword",label:E("common.keyword"),component:"Input",componentProps:{placeholder:E("common.enterKeyword"),submitOnPressEnter:!0}},{field:"category",label:"分类",component:"Select",componentProps:{placeholder:"请选择",showSearch:!0}},{field:"webType",label:"类型",component:"Select",componentProps:{placeholder:"请选择",options:se}},{field:"isRelease",label:"状态",component:"Select",componentProps:{placeholder:"请选择",options:[{fullName:"未发布",id:0},{fullName:"已发布",id:1},{fullName:"已修改",id:2}]}}]},actionColumn:{width:220,title:"操作",dataIndex:"action"}});function me(e){return[{label:E("common.editText"),onClick:ce.bind(null,e.id,e.webType)},{label:"发布",color:"error",modelConfirm:{title:"发布确认",content:"发布表单会覆盖当前线上版本, 是否继续?",onOk:ge.bind(null,e.id)}},{label:"代码生成",disabled:!e.isRelease,onClick:je.bind(null,e)}]}function _e(e){return[{label:"预览表单",onClick:ve.bind(null,e.id,e.isRelease)},{label:"生成菜单",ifShow:!!e.isRelease,onClick:ye.bind(null,e.id)},{label:"复制表单",modelConfirm:{content:"您确定要复制该功能表单, 是否继续?",onOk:we.bind(null,e.id)}},{label:"导出表单",modelConfirm:{content:"您确定要导出该功能表单, 是否继续?",onOk:he.bind(null,e.id)}},{label:"外链设置",ifShow:!!e.isRelease&&4!=e.webType,onClick:be.bind(null,e.id)},{label:"数据管理",ifShow:!!e.isRelease&&2==e.webType,onClick:Re.bind(null,e.id)},{label:"删除表单",modelConfirm:{onOk:fe.bind(null,e.id)}}]}function ce(e="",t){if(4==t)return Q(!0,{id:e,...re,categoryList:ae});z(!0,{id:e,...re,categoryList:ae})}function fe(e){t(e).then((e=>{G.success(e.msg),ue()}))}function je(e){oe(!0,{tables:e.tables,id:e.id,hasPackage:e.hasPackage,fullName:e.fullName,webType:e.webType})}function ge(e){o(e).then((e=>{G.success(e.msg),ue()}))}function ye(e){$(!0,{id:e})}function ve(e,t){ee(!0,{type:"webDesign",id:e,isRelease:t})}function be(e){X(!0,{id:e})}function Re(e){e&&le(`/dataManage?isDataManage=1&id=${e}`)}function we(e){i(e).then((e=>{G.success(e.msg),ue()}))}function he(e){n(e).then((e=>{T({url:e.data.url})}))}function xe({key:e}){ce("",e)}function Me(){ne(!0,{categoryList:ae})}function ke(e){ce(e,2),ue()}return c((()=>{!async function(){const e=await U.getDictionaryData("businessType");ae.value=e,de().updateSchema({field:"category",componentProps:{options:e}})}()})),(e,t)=>{const o=f("a-menu-item"),i=f("a-menu"),n=f("a-button"),s=f("a-dropdown"),l=f("jnpf-upload-btn"),p=f("a-tag");return j(),g("div",B,[y("div",H,[y("div",q,[v(M(a),{onRegister:M(pe)},{tableTitle:b((()=>[v(s,null,{overlay:b((()=>[v(i,{onClick:xe},{default:b((()=>[(j(),g(R,null,w(se,(e=>v(o,{key:e.id},{default:b((()=>[h(x(e.fullName),1)])),_:2},1024))),64))])),_:1})])),default:b((()=>[v(n,{type:"primary",preIcon:"icon-ym icon-ym-btn-add"},{default:b((()=>[h(x(M(E)("common.addText")),1),v(M(k))])),_:1})])),_:1}),v(n,{type:"primary",preIcon:"icon-ym icon-ym-ai-form",onClick:Me},{default:b((()=>t[0]||(t[0]=[h("AI建表")]))),_:1,__:[0]}),v(l,{url:"/api/visualdev/OnlineDev/Actions/Import",accept:".vdd",onOnSuccess:M(ue)},null,8,["onOnSuccess"])])),bodyCell:b((({column:e,record:t})=>["isRelease"===e.key?(j(),C(p,{key:0,color:1==t.isRelease?"success":2==t.isRelease?"warning":""},{default:b((()=>[h(x(1==t.isRelease?"已发布":2==t.isRelease?"已修改":"未发布"),1)])),_:2},1032,["color"])):D("",!0),"action"===e.key?(j(),C(M(r),{key:1,actions:me(t),dropDownActions:_e(t)},null,8,["actions","dropDownActions"])):D("",!0)])),_:1},8,["onRegister"])])]),v(O,{onRegister:M(V),onReload:M(ue)},null,8,["onRegister","onReload"]),v(P,{onRegister:M(K),onReload:M(ue)},null,8,["onRegister","onReload"]),v(F,{onRegister:M(W),onReload:M(ue)},null,8,["onRegister","onReload"]),v(N,{onRegister:M(J),onReload:M(ue)},null,8,["onRegister","onReload"]),v(A,{onRegister:M(te)},null,8,["onRegister"]),v(M(Y),{onRegister:M(Z)},null,8,["onRegister"]),v(L,{onRegister:M(ie),onReload:ke},null,8,["onRegister"])])}}});export{G as default};
