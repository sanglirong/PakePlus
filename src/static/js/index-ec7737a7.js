import{u as t,B as e}from"./useTable-dc8c9d84.js";import{T as o}from"./TableAction-adbe36f2.js";import{d as s,e as r}from"./task-ed891400.js";import{u as i}from"./index-9c138ba5.js";import{d as n,u as a,e as m,o as p,g as d,a4 as l,j as u,l as c,m as _,t as j,k as f,p as y,q as g,ah as x}from"./index-920db443.js";import{_ as v}from"./Form.vue_vue_type_script_setup_true_lang-c7816912.js";import{_ as b}from"./Log.vue_vue_type_script_setup_true_lang-80f287e3.js";import"./useForm-1d28ee0b.js";import"./componentMap-c91676b4.js";import"./visualDev-8f54ab4b.js";import"./index.vue_vue_type_script_setup_true_lang-69353133.js";import"./index-143f5813.js";import"./useWindowSizeFn-05f906e2.js";import"./log-2a5f2c26.js";import"./index-999abbee.js";import"./ArrowLeftOutlined-3fbf15bc.js";import"./Parser.vue_vue_type_script_setup_true_lang-6ddfe448.js";import"./Item.vue_vue_type_script_setup_true_lang-fef56f78.js";import"./Form.vue_vue_type_script_setup_true_lang-63005a4d.js";import"./createAsyncComponent-7e8f72ac.js";import"./DataLogList.vue_vue_type_script_setup_true_lang-c225eb8c.js";import"./index-0be8277c.js";import"./jquery-6353a699.js";import"./useDefineSetting-7df030ff.js";import"./CustomForm.vue_vue_type_script_setup_true_lang-1aa664f4.js";import"./config-06ca91cd.js";import"./upperFirst-2cd1a2f7.js";import"./useTabs-ceeccdba.js";import"./uniqBy-e868edd7.js";import"./sortable.esm-02d0fe44.js";import"./SettingOutlined-dd6150a2.js";import"./index-1cfe4e28.js";import"./index-c37d2476.js";import"./BasicLeftTree-cd55d444.js";import"./billRule-0363563b.js";import"./import-e198d900.js";import"./tip-b30e67af.js";import"./dataSource-ed26da12.js";import"./dataModel-ea807f46.js";import"./index-3b5bee70.js";import"./CopyOutlined-8d46c8b2.js";import"./formValidate-c8ab8d29.js";const w={class:"jnpf-content-wrapper"},k={class:"jnpf-content-wrapper-center"},Y={class:"jnpf-content-wrapper-content"},M=n({name:"system-task",__name:"index",setup(n){const{t:M}=a(),{createMessage:D}=x(),[h,{openPopup:C}]=i(),[I,{openPopup:T}]=i(),[R,{reload:H}]=t({api:s,columns:[{title:"任务标题",dataIndex:"fullName"},{title:"任务编码",dataIndex:"enCode",width:200},{title:"执行次数",dataIndex:"runCount",width:100},{title:"任务开始时间",dataIndex:"startTime",width:150,format:"date|YYYY-MM-DD HH:mm:ss"},{title:"任务结束时间",dataIndex:"endTime",width:150,format:"date|YYYY-MM-DD HH:mm:ss"},{title:"最后执行时间",dataIndex:"lastRunTime",width:150,format:"date|YYYY-MM-DD HH:mm:ss"},{title:"下次运行时间",dataIndex:"nextRunTime",width:150,format:"date|YYYY-MM-DD HH:mm:ss"},{title:"状态",dataIndex:"enabledMark",width:70}],useSearchForm:!0,formConfig:{schemas:[{field:"keyword",label:M("common.keyword"),component:"Input",componentProps:{placeholder:M("common.enterKeyword"),submitOnPressEnter:!0}}]},actionColumn:{width:150,title:"操作",dataIndex:"action"}});function F(t){return[{label:M("common.editText"),onClick:L.bind(null,t.id)},{label:M("common.delText"),color:"error",modelConfirm:{onOk:P.bind(null,t.id)}}]}function A(t){return[{label:"任务日志",onClick:O.bind(null,t.id,t.fullName)}]}function L(t=""){C(!0,{id:t})}function O(t="",e=""){T(!0,{id:t,title:e})}function P(t){r(t).then((t=>{D.success(t.msg),H()}))}return(t,s)=>{const r=m("a-button"),i=m("a-tag");return p(),d("div",w,[l("div",k,[l("div",Y,[u(f(e),{onRegister:f(R)},{tableTitle:c((()=>[u(r,{type:"primary",preIcon:"icon-ym icon-ym-btn-add",onClick:s[0]||(s[0]=t=>L())},{default:c((()=>[_(j(f(M)("common.addText")),1)])),_:1})])),bodyCell:c((({column:t,record:e})=>["enabledMark"===t.key?(p(),y(i,{key:0,color:1==e.enabledMark?"success":"error"},{default:c((()=>[_(j(1==e.enabledMark?"启用":"禁用"),1)])),_:2},1032,["color"])):g("",!0),"action"===t.key?(p(),y(f(o),{key:1,actions:F(e),dropDownActions:A(e)},null,8,["actions","dropDownActions"])):g("",!0)])),_:1},8,["onRegister"])])]),u(v,{onRegister:f(h),onReload:f(H)},null,8,["onRegister","onReload"]),u(b,{onRegister:f(I)},null,8,["onRegister"])])}}});export{M as default};
