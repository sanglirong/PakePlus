import{u as e}from"./useFlowForm-3cb03b53.js";import{f as a}from"./formValidate-c8ab8d29.js";import{d as l,r as t,ad as d,a0 as o,k as r,a7 as s,e as i,o as u,g as n,a4 as p,t as v,j as m,l as f,p as y,q as b,F as g,h as c,m as T,ae as _}from"./index-920db443.js";import"./billRule-0363563b.js";const D={class:"flow-form"},U={class:"flow-com-title"},h={class:"number"},w=l({name:"LeaveApply",__name:"index",props:["config"],emits:["setPageLoad","eventReceiver"],setup(l,{expose:w,emit:F}){const k=l,j=F,P=["事假","病假","婚假","产假","丧假","年假","调休","其他"],R=t(),S=d({dataForm:{flowId:"",id:"",billNo:"",flowTitle:"",flowUrgent:1,applyUser:"",applyDate:0,applyDept:"",applyPost:"",leaveType:"事假",leaveReason:"",leaveStartTime:void 0,leaveEndTime:void 0,leaveDayCount:"",leaveHour:"",fileJson:""},dataRule:{flowTitle:[{required:!0,message:"流程标题不能为空",trigger:"blur"}],leaveType:[{required:!0,message:"请假类别不能为空",trigger:"change"}],leaveReason:[{required:!0,message:"请假原因不能为空",trigger:"blur"}],leaveStartTime:[{required:!0,message:"起始时间不能为空",trigger:"change"},{validator:async(e,a)=>S.dataForm.leaveEndTime?S.dataForm.leaveEndTime<a?Promise.reject("起始日期应该小于结束日期"):(R.value?.validateFields("leaveEndTime"),Promise.resolve()):Promise.resolve(),trigger:"change"}],leaveEndTime:[{required:!0,message:"结束时间不能为空",trigger:"change"},{validator:async(e,a)=>S.dataForm.leaveStartTime&&S.dataForm.leaveStartTime>a?Promise.reject("结束日期应该大于起始日期"):Promise.resolve(),trigger:"change"}],leaveDayCount:[{required:!0,message:"请假天数不能为空",trigger:"blur"},{validator:a("allDate","请假时间必须是整数和0.5的倍数"),trigger:"blur"}],leaveHour:[{required:!0,message:"请假小时不能为空",trigger:"blur"},{validator:a("allDate","请假小时必须是整数和0.5的倍数"),trigger:"blur"}]},billEnCode:"WF_LeaveApplyNo",fileList:[]}),{dataForm:E,dataRule:H,fileList:C}=o(S),{init:q,getUserInfo:Y,judgeShow:x,judgeWrite:I,dataFormSubmit:N}=e({config:k.config,selfState:S,emit:j,formRef:R,selfInit:function(){if(S.dataForm.applyDate=+new Date,S.dataForm.flowTitle=r(Y).userName+"的请假申请",S.dataForm.applyUser=r(Y).userName+"/"+r(Y).userAccount,S.dataForm.applyDept=r(Y).organizeName,r(Y).positionIds&&r(Y).positionIds.length){let e=r(Y).positionIds.map((e=>e.name));S.dataForm.applyPost=e.join(",")}}});return w({dataFormSubmit:N}),s((()=>{q()})),(e,a)=>{const t=i("a-input"),d=i("a-form-item"),o=i("a-col"),s=i("jnpf-date-picker"),w=i("a-radio"),F=i("a-radio-group"),k=i("jnpf-textarea"),j=i("a-input-number"),S=i("jnpf-upload-file"),q=i("a-row"),Y=i("a-form");return u(),n("div",D,[p("div",U,[a[12]||(a[12]=p("h1",null,"请假申请",-1)),p("span",h,"流程编码："+v(r(E).billNo),1)]),m(Y,{colon:!1,labelCol:{style:{width:"100px"}},model:r(E),rules:r(H),ref_key:"formRef",ref:R,disabled:l.config.disabled},{default:f((()=>[m(q,null,{default:f((()=>[r(x)("flowTitle")?(u(),y(o,{key:0,span:12},{default:f((()=>[m(d,{label:"流程标题",name:"flowTitle"},{default:f((()=>[m(t,{value:r(E).flowTitle,"onUpdate:value":a[0]||(a[0]=e=>r(E).flowTitle=e),placeholder:"流程标题",disabled:r(I)("flowTitle")},null,8,["value","disabled"])])),_:1})])),_:1})):b("",!0),r(x)("applyUser")?(u(),y(o,{key:1,span:12},{default:f((()=>[m(d,{label:"申请人员",name:"applyUser"},{default:f((()=>[m(t,{value:r(E).applyUser,"onUpdate:value":a[1]||(a[1]=e=>r(E).applyUser=e),placeholder:"申请人员",readonly:"",disabled:r(I)("applyUser")},null,8,["value","disabled"])])),_:1})])),_:1})):b("",!0),r(x)("applyDate")?(u(),y(o,{key:2,span:12},{default:f((()=>[m(d,{label:"申请日期",name:"applyDate"},{default:f((()=>[m(s,{value:r(E).applyDate,"onUpdate:value":a[2]||(a[2]=e=>r(E).applyDate=e),placeholder:"申请日期",disabled:""},null,8,["value"])])),_:1})])),_:1})):b("",!0),r(x)("applyDept")?(u(),y(o,{key:3,span:12},{default:f((()=>[m(d,{label:"申请部门",name:"applyDept"},{default:f((()=>[m(t,{value:r(E).applyDept,"onUpdate:value":a[3]||(a[3]=e=>r(E).applyDept=e),placeholder:"申请部门",readonly:"",disabled:r(I)("applyDept")},null,8,["value","disabled"])])),_:1})])),_:1})):b("",!0),r(x)("applyPost")?(u(),y(o,{key:4,span:12},{default:f((()=>[m(d,{label:"申请职位",name:"applyPost"},{default:f((()=>[m(t,{value:r(E).applyPost,"onUpdate:value":a[4]||(a[4]=e=>r(E).applyPost=e),placeholder:"申请职位",readonly:"",disabled:r(I)("applyPost")},null,8,["value","disabled"])])),_:1})])),_:1})):b("",!0),r(x)("leaveType")?(u(),y(o,{key:5,span:24},{default:f((()=>[m(d,{label:"请假类别",name:"leaveType"},{default:f((()=>[m(F,{value:r(E).leaveType,"onUpdate:value":a[5]||(a[5]=e=>r(E).leaveType=e),disabled:r(I)("leaveType")},{default:f((()=>[(u(),n(g,null,c(P,(e=>m(w,{value:e,key:e},{default:f((()=>[T(v(e),1)])),_:2},1032,["value"]))),64))])),_:1},8,["value","disabled"])])),_:1})])),_:1})):b("",!0),r(x)("leaveReason")?(u(),y(o,{key:6,span:24},{default:f((()=>[m(d,{label:"请假原因",name:"leaveReason"},{default:f((()=>[m(k,{value:r(E).leaveReason,"onUpdate:value":a[6]||(a[6]=e=>r(E).leaveReason=e),placeholder:"请假原因",disabled:r(I)("leaveReason")},null,8,["value","disabled"])])),_:1})])),_:1})):b("",!0),r(x)("leaveStartTime")?(u(),y(o,{key:7,span:12},{default:f((()=>[m(d,{label:"起始时间",name:"leaveStartTime"},{default:f((()=>[m(s,{value:r(E).leaveStartTime,"onUpdate:value":a[7]||(a[7]=e=>r(E).leaveStartTime=e),format:"YYYY-MM-DD HH:mm:ss",placeholder:"选择日期",disabled:r(I)("leaveStartTime")},null,8,["value","disabled"])])),_:1})])),_:1})):b("",!0),r(x)("leaveEndTime")?(u(),y(o,{key:8,span:12},{default:f((()=>[m(d,{label:"结束时间",name:"leaveEndTime"},{default:f((()=>[m(s,{value:r(E).leaveEndTime,"onUpdate:value":a[8]||(a[8]=e=>r(E).leaveEndTime=e),format:"YYYY-MM-DD HH:mm:ss",placeholder:"选择日期",disabled:r(I)("leaveEndTime")},null,8,["value","disabled"])])),_:1})])),_:1})):b("",!0),r(x)("leaveDayCount")?(u(),y(o,{key:9,span:12},{default:f((()=>[m(d,{label:"请假天数",name:"leaveDayCount"},{default:f((()=>[m(j,{value:r(E).leaveDayCount,"onUpdate:value":a[9]||(a[9]=e=>r(E).leaveDayCount=e),min:0,placeholder:"请假天数",addonAfter:"天",disabled:r(I)("leaveDayCount")},null,8,["value","disabled"])])),_:1})])),_:1})):b("",!0),r(x)("leaveHour")?(u(),y(o,{key:10,span:12},{default:f((()=>[m(d,{label:"请假小时",name:"leaveHour"},{default:f((()=>[m(j,{value:r(E).leaveHour,"onUpdate:value":a[10]||(a[10]=e=>r(E).leaveHour=e),min:0,placeholder:"请假小时",addonAfter:"小时",disabled:r(I)("leaveHour")},null,8,["value","disabled"])])),_:1})])),_:1})):b("",!0),r(x)("fileJson")?(u(),y(o,{key:11,span:24},{default:f((()=>[m(d,{label:"相关附件",name:"fileJson"},{default:f((()=>[m(S,{value:r(C),"onUpdate:value":a[11]||(a[11]=e=>_(C)?C.value=e:null),type:"workFlow",disabled:r(I)("fileJson")},null,8,["value","disabled"])])),_:1})])),_:1})):b("",!0)])),_:1})])),_:1},8,["model","rules","disabled"])])}}});export{w as default};
