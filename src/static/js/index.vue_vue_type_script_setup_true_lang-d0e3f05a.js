import{g as e,d as t}from"./commonFields-6e52637f.js";import{_ as a}from"./Form.vue_vue_type_script_setup_true_lang-a8a1e6a7.js";import{a as l,B as i}from"./index-999abbee.js";import{u as n,B as o}from"./useTable-dc8c9d84.js";import{T as d}from"./TableAction-adbe36f2.js";import{u as s}from"./index-143f5813.js";import{d as r,u as m,e as u,o as c,g as f,j as p,l as b,k as g,m as x,t as h,p as _,q as y,V as N,F as T,bb as w,b8 as R,ah as j}from"./index-920db443.js";const k=r({__name:"index",setup(r){const{createMessage:k}=j(),{t:I}=m(),[C,{}]=l(),[v,{openModal:F}]=s(),B=[{title:"列名",dataIndex:"field"},{title:"说明",dataIndex:"fieldName",width:150},{title:"类型",dataIndex:"dataType",width:80},{title:"长度",dataIndex:"dataLength",width:60},{title:"允许空",dataIndex:"allowNull",width:60,align:"center",customRender:({record:e})=>w(R,{checked:1===e.allowNull})}],M=[{fullName:"字符串",id:"varchar"},{fullName:"整型",id:"int"},{fullName:"日期时间",id:"datetime"},{fullName:"浮点",id:"decimal"},{fullName:"长整型",id:"bigint"},{fullName:"文本",id:"text"}],[O,{reload:q}]=n({api:e,columns:B,pagination:!1,resizeHeightOffset:-10,actionColumn:{width:100,title:"操作",dataIndex:"action"},afterFetch:e=>e.map((e=>({...e,dataType:z(e.dataType)})))});function z(e){let t=M.filter((t=>t.id==e))[0];return t&&t.fullName?t.fullName:""}function A(e){return[{label:I("common.editText"),onClick:H.bind(null,e.id)},{label:I("common.delText"),color:"error",modelConfirm:{onOk:L.bind(null,e.id)}}]}function H(e=""){F(!0,{id:e})}function L(e){t(e).then((e=>{k.success(e.msg),q()}))}return(e,t)=>{const l=u("a-button");return c(),f(T,null,[p(g(i),N(e.$attrs,{onRegister:g(C),title:"常用字段管理",width:"700px",class:"full-drawer"}),{default:b((()=>[p(g(o),{onRegister:g(O)},{tableTitle:b((()=>[p(l,{type:"primary",preIcon:"icon-ym icon-ym-btn-add",onClick:t[0]||(t[0]=e=>H())},{default:b((()=>[x(h(g(I)("common.addText")),1)])),_:1})])),bodyCell:b((({column:e,record:t})=>["action"===e.key?(c(),_(g(d),{key:0,actions:A(t)},null,8,["actions"])):y("",!0)])),_:1},8,["onRegister"])])),_:1},16,["onRegister"]),p(a,{onRegister:g(v),onReload:g(q)},null,8,["onRegister","onReload"])],64)}}});export{k as _};
