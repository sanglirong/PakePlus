import{u as t,B as e}from"./useTable-dc8c9d84.js";import{d as o,e as i,f as a}from"./productModal.vue_vue_type_script_setup_true_lang-e7cc7642.js";import{d as n,ad as s,a0 as r,u as d,e as l,o as c,g as p,a4 as m,j as u,l as _,m as f,t as h,k as x,bN as y,p as g,q as j,ah as w,a5 as I}from"./index-920db443.js";import{u as v}from"./index-9c138ba5.js";import S from"./Form-553a0d08.js";import"./useForm-1d28ee0b.js";import"./componentMap-c91676b4.js";import"./visualDev-8f54ab4b.js";import"./index.vue_vue_type_script_setup_true_lang-69353133.js";import"./index-143f5813.js";import"./useWindowSizeFn-05f906e2.js";import"./log-2a5f2c26.js";import"./index-999abbee.js";import"./ArrowLeftOutlined-3fbf15bc.js";import"./Parser.vue_vue_type_script_setup_true_lang-6ddfe448.js";import"./Item.vue_vue_type_script_setup_true_lang-fef56f78.js";import"./Form.vue_vue_type_script_setup_true_lang-63005a4d.js";import"./createAsyncComponent-7e8f72ac.js";import"./DataLogList.vue_vue_type_script_setup_true_lang-c225eb8c.js";import"./index-0be8277c.js";import"./jquery-6353a699.js";import"./useDefineSetting-7df030ff.js";import"./CustomForm.vue_vue_type_script_setup_true_lang-1aa664f4.js";import"./config-06ca91cd.js";import"./upperFirst-2cd1a2f7.js";import"./useTabs-ceeccdba.js";import"./uniqBy-e868edd7.js";import"./sortable.esm-02d0fe44.js";import"./SettingOutlined-dd6150a2.js";import"./index-1cfe4e28.js";import"./BasicLeftTree-cd55d444.js";const b={class:"jnpf-content-wrapper h-full"},k={class:"jnpf-content-wrapper-center"},R={class:"sale-order-content"},T={class:"sale-order-footer bg-white"},L=I(n({name:"extend-saleOrder",__name:"index",setup(n){const I=s({activeId:"",productList:[],productDetailList:[]}),{productList:L,productDetailList:C}=r(I),{t:D}=d(),{createMessage:N,createConfirm:F}=w(),[P,{reload:M,getSelectRows:q,clearSelectedRowKeys:O}]=t({api:o,columns:[{title:"订单编号",dataIndex:"code",width:150},{title:"客户名称",dataIndex:"customerName",width:150},{title:"审核状态",dataIndex:"auditState",width:80},{title:"发货通知状态",dataIndex:"goodsState",width:80},{title:"关闭状态",dataIndex:"closeState",width:80},{title:"关闭日期",dataIndex:"closeDate",width:120,format:"date|YYYY-MM-DD HH:mm:ss"},{title:"业务员",dataIndex:"business",width:120},{title:"送货地址",dataIndex:"address",width:120},{title:"联系方式",dataIndex:"contactTel",width:120}],useSearchForm:!0,formConfig:{schemas:[{field:"code",label:"订单编号",component:"Input",componentProps:{placeholder:"请输入"}},{field:"customerName",label:"客户名称",component:"Input",componentProps:{placeholder:"请输入"}},{field:"auditState",label:"审核状态",component:"Select",componentProps:{placeholder:"请选择",options:[{id:0,fullName:"全部"},{id:1,fullName:"未审核"},{id:2,fullName:"已审核"}]}},{field:"closeState",label:"关闭状态",component:"Select",componentProps:{placeholder:"请选择",options:[{id:0,fullName:"全部"},{id:1,fullName:"未审核"},{id:2,fullName:"已审核"}]}},{field:"creatorUser",label:"制单人",component:"Input",componentProps:{placeholder:"请输入"}}]},rowSelection:{type:"checkbox"},isCanResizeParent:!0,clickToRowSelect:!1}),[B]=t({columns:[{title:"产品编号",dataIndex:"productCode",width:100},{title:"产品名称",dataIndex:"productName",width:100},{title:"发货通知数",dataIndex:"qty",width:100},{title:"订货类型",dataIndex:"type",width:100},{title:"活动",dataIndex:"activity",width:100}],useSearchForm:!1,immediate:!1,showTableSetting:!1,pagination:!1}),[Y]=t({columns:[{title:"产品规格",dataIndex:"productSpecification",width:100},{title:"数量",dataIndex:"qty",width:100},{title:"单价",dataIndex:"price",width:100},{title:"折后单价",dataIndex:"money",width:100},{title:"控制方式",dataIndex:"commandType",width:100},{title:"单位",dataIndex:"util",width:100}],useSearchForm:!1,immediate:!1,showTableSetting:!1,pagination:!1}),[z,{openPopup:A}]=v();function H(t){I.activeId!==t.id&&(I.activeId=t.id,i(I.activeId).then((t=>{I.productList=t.data.list})))}function K(t){I.productDetailList=t.dataList||[]}return(t,o)=>{const i=l("a-button"),n=l("a-tag");return c(),p("div",b,[m("div",k,[m("div",R,[u(x(e),{onRegister:x(P),onRowClick:H},{tableTitle:_((()=>[u(i,{type:"primary",preIcon:"icon-ym icon-ym-btn-add",onClick:o[0]||(o[0]=t=>{A(!0,{})})},{default:_((()=>[f(h(x(D)("common.addText")),1)])),_:1}),u(i,{type:"link",preIcon:"icon-ym icon-ym-btn-edit",onClick:o[1]||(o[1]=t=>function(){const t=q();if(1!=t.length)return N.error("请只选择一条数据");A(!0,{id:t[0].id})}())},{default:_((()=>[f(h(x(D)("common.editText")),1)])),_:1}),u(i,{type:"link",preIcon:"icon-ym icon-ym-delete",onClick:o[2]||(o[2]=t=>function(){const t=q();if(1!=t.length)return N.error("请只选择一条数据");F({iconType:"warning",title:D("common.tipTitle"),content:D("common.delTip"),onOk:()=>{a(t[0].id).then((t=>{M(),I.productList=[],I.productDetailList=[],O(),N.success(t.msg)}))}})}())},{default:_((()=>[f(h(x(D)("common.delText")),1)])),_:1}),u(i,{type:"link"},{default:_((()=>[u(x(y),{class:"icon-more",style:{"margin-right":"-8px"}}),f(h(x(D)("common.moreText")),1)])),_:1})])),bodyCell:_((({column:t})=>["auditState"===t.key?(c(),g(n,{key:0,color:"error"},{default:_((()=>o[3]||(o[3]=[f("未审核")]))),_:1,__:[3]})):j("",!0),"goodsState"===t.key?(c(),g(n,{key:1,color:"error"},{default:_((()=>o[4]||(o[4]=[f("未通知")]))),_:1,__:[4]})):j("",!0),"closeState"===t.key?(c(),g(n,{key:2,color:"error"},{default:_((()=>o[5]||(o[5]=[f("未关闭")]))),_:1,__:[5]})):j("",!0)])),_:1},8,["onRegister"])]),m("div",T,[u(x(e),{onRegister:x(B),"data-source":x(L),onRowClick:K},null,8,["onRegister","data-source"]),u(x(e),{class:"ml-10px",onRegister:x(Y),"data-source":x(C)},null,8,["onRegister","data-source"])])]),u(S,{onRegister:x(z),onReload:x(M)},null,8,["onRegister","onReload"])])}}}),[["__scopeId","data-v-7c733f27"]]);export{L as default};
