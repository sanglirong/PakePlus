import{u as t,B as e}from"./useTable-dc8c9d84.js";import{T as a}from"./TableAction-adbe36f2.js";import{a as i,d as s}from"./table-3a9e3e55.js";import{u as n}from"./index-143f5813.js";import{d as r,ad as o,u as d,aD as m,a7 as p,e as l,o as u,g as c,a4 as _,j,l as y,m as f,t as x,k as w,p as g,q as h,F as I,h as b,ah as v}from"./index-920db443.js";import{_ as T}from"./index.vue_vue_type_script_setup_true_lang-4b369dea.js";import"./useForm-1d28ee0b.js";import"./componentMap-c91676b4.js";import"./visualDev-8f54ab4b.js";import"./index.vue_vue_type_script_setup_true_lang-69353133.js";import"./index-9c138ba5.js";import"./ArrowLeftOutlined-3fbf15bc.js";import"./log-2a5f2c26.js";import"./index-999abbee.js";import"./Parser.vue_vue_type_script_setup_true_lang-6ddfe448.js";import"./Item.vue_vue_type_script_setup_true_lang-fef56f78.js";import"./Form.vue_vue_type_script_setup_true_lang-63005a4d.js";import"./createAsyncComponent-7e8f72ac.js";import"./DataLogList.vue_vue_type_script_setup_true_lang-c225eb8c.js";import"./index-0be8277c.js";import"./jquery-6353a699.js";import"./useDefineSetting-7df030ff.js";import"./CustomForm.vue_vue_type_script_setup_true_lang-1aa664f4.js";import"./config-06ca91cd.js";import"./upperFirst-2cd1a2f7.js";import"./useTabs-ceeccdba.js";import"./uniqBy-e868edd7.js";import"./useWindowSizeFn-05f906e2.js";import"./sortable.esm-02d0fe44.js";import"./SettingOutlined-dd6150a2.js";import"./index-1cfe4e28.js";const D={class:"jnpf-content-wrapper"},F={class:"jnpf-content-wrapper-center"},k={class:"jnpf-content-wrapper-content"},C=r({name:"extend-tableDemo-statisticsTable",__name:"index",setup(r){const C=o({industryTypeList:[],list:[]}),{t:L}=d(),N=m(),{createMessage:M}=v(),R=[{title:"项目名称",dataIndex:"projectName",width:200},{title:"项目编码",dataIndex:"projectCode",width:160},{title:"项目类型",dataIndex:"projectType",width:120,customRender:({record:t})=>{let e=C.industryTypeList.filter((e=>e.id==t.projectType))[0];return e&&e.fullName?e.fullName:""}},{title:"项目阶段",dataIndex:"projectPhase",width:120},{title:"客户名称",dataIndex:"customerName",width:200},{title:"负责人",dataIndex:"principal",width:80},{title:"立项人",dataIndex:"jackStands",width:80},{title:"交互时间",dataIndex:"interactionDate",width:100,format:"date|YYYY-MM-DD"},{title:"费用金额",dataIndex:"costAmount",width:100},{title:"已用金额",dataIndex:"tunesAmount",width:100},{title:"预计收入",dataIndex:"projectedIncome",width:100},{title:"登记人",dataIndex:"registrant",width:80},{title:"登记时间",dataIndex:"registerDate",width:150,format:"date|YYYY-MM-DD HH:mm:ss"},{title:"备注",dataIndex:"description",width:100}],[Y,{openModal:A}]=n(),[S,{reload:O}]=t({api:i,columns:R,useSearchForm:!0,formConfig:{schemas:[{field:"keyword",label:L("common.keyword"),component:"Input",componentProps:{placeholder:L("common.enterKeyword"),submitOnPressEnter:!0}}]},actionColumn:{width:100,title:"操作",dataIndex:"action"},afterFetch:t=>(C.list=t,t)});function P(t){return[{label:L("common.editText"),onClick:q.bind(null,t.id)},{label:L("common.delText"),color:"error",modelConfirm:{onOk:B.bind(null,t.id)}}]}function q(t=""){A(!0,{id:t,industryTypeList:C.industryTypeList})}function B(t){s(t).then((t=>{M.success(t.msg),O()}))}function E(){const t=[];return w(R).forEach(((e,a)=>{if(7===a||12===a)return t[a]="";let i=C.list.reduce(((t,a)=>t+parseFloat(a[e.dataIndex])),0);i=Number.isNaN(i)?"":i,t[a]=i&&!Number.isInteger(i)?i.toFixed(2):i})),t}return p((()=>async function(){C.industryTypeList=await N.getDictionaryData("IndustryType")}())),(t,i)=>{const s=l("a-button"),n=l("a-table-summary-cell"),r=l("a-table-summary-row"),o=l("a-table-summary");return u(),c("div",D,[_("div",F,[_("div",k,[j(w(e),{onRegister:w(S)},{tableTitle:y((()=>[j(s,{type:"primary",preIcon:"icon-ym icon-ym-btn-add",onClick:i[0]||(i[0]=t=>q())},{default:y((()=>[f(x(w(L)("common.addText")),1)])),_:1})])),bodyCell:y((({column:t,record:e})=>["action"===t.key?(u(),g(w(a),{key:0,actions:P(e)},null,8,["actions"])):h("",!0)])),summary:y((()=>[j(o,{fixed:""},{default:y((()=>[j(r,null,{default:y((()=>[j(n,{index:0},{default:y((()=>i[1]||(i[1]=[f("合计")]))),_:1,__:[1]}),(u(!0),c(I,null,b(E(),((t,e)=>(u(),g(n,{key:e,index:e+1},{default:y((()=>[f(x(t),1)])),_:2},1032,["index"])))),128))])),_:1})])),_:1})])),_:1},8,["onRegister"])])]),j(T,{onRegister:w(Y),onReload:w(O)},null,8,["onRegister","onReload"])])}}});export{C as default};
