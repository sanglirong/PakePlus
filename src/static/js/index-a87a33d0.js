import{di as e,d as a,ad as t,a0 as o,a7 as s,a8 as l,e as r,a9 as n,i,k as d,o as m,g as u,j as c,l as p,a4 as g,m as y,t as f,e0 as x,a5 as b}from"./index-920db443.js";import{C as _}from"./index-62d2a1e8.js";import"./useECharts-1e384526.js";import"./index-fea1d737.js";const h={class:"monitor-container"},v={class:"title"},k={class:"info"},I={class:"footer"},P={class:"footer"},C={class:"footer"},A=b(a({name:"system-monitor",__name:"index",setup(a){const b=t({loading:!0,monitor:null,data:{system:{os:"",day:"",ip:""},cpu:{name:"",package:"",core:"",coreNumber:"",logic:"",used:"",idle:""},memory:{total:"",available:"",used:"",usageRate:""},disk:{total:"",available:"",used:"",usageRate:""}},cpuPercentage:0,memoryPercentage:0,diskPercentage:0,cpuInfo:{tooltip:{trigger:"axis"},grid:{top:"10%",left:"2%",right:"10%",bottom:"2%",containLabel:!0},xAxis:{type:"category",name:"时间",boundaryGap:!1,axisLine:{symbol:["none","arrow"]},data:[]},yAxis:{type:"value",name:"使用率(%)",min:0,max:100,axisLine:{symbol:["none","arrow"]},interval:20},series:[{data:[],type:"line",areaStyle:{color:"rgb(32, 160, 255)"},itemStyle:{color:"#6fbae1",lineStyle:{color:"#6fbae1"}}}]},memoryInfo:{tooltip:{trigger:"axis"},grid:{top:"10%",left:"2%",right:"10%",bottom:"2%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,name:"时间",axisLine:{symbol:["none","arrow"]},data:[]},yAxis:{type:"value",name:"使用率(%)",min:0,max:100,interval:20,axisLine:{symbol:["none","arrow"]}},series:[{data:[],type:"line",areaStyle:{color:"rgb(32, 160, 255)"},itemStyle:{color:"#6fbae1",lineStyle:{color:"#6fbae1"}}}]}}),{loading:A,data:w,cpuPercentage:R,memoryPercentage:L,diskPercentage:N,cpuInfo:S,memoryInfo:j}=o(b);function H(){e.get({url:"/api/system/Monitor"}).then((e=>{b.data=e.data,b.cpuPercentage="0.00"==b.data.cpu.used?0:Number(b.data.cpu.used),b.memoryPercentage="0.00"==b.data.memory.usageRate?0:Number(b.data.memory.usageRate),b.diskPercentage="0.00"==b.data.disk.usageRate?0:Number(b.data.disk.usageRate),b.cpuInfo.xAxis.data.length>=8&&(b.cpuInfo.xAxis.data.shift(),b.memoryInfo.xAxis.data.shift(),b.cpuInfo.series[0].data.shift(),b.memoryInfo.series[0].data.shift()),b.cpuInfo.xAxis.data.push(x(b.data.time,"HH:mm:ss")),b.memoryInfo.xAxis.data.push(x(b.data.time,"HH:mm:ss")),b.cpuInfo.series[0].data.push(parseFloat(b.data.memory.used)),b.memoryInfo.series[0].data.push(parseFloat(b.data.memory.usageRate)),b.loading=!1})).catch((()=>{b.loading=!1}))}function F(e){return e<70?"#5cb87a":e<90?"#e6a23c":"#f56c6c"}return s((()=>{H(),b.monitor=setInterval(H,5e3)})),l((()=>{b.monitor&&clearInterval(b.monitor)})),(e,a)=>{const t=r("a-progress"),o=r("a-tooltip"),s=r("a-col"),l=r("a-row"),x=r("a-card"),b=n("loading");return i((m(),u("div",h,[c(l,{gutter:10},{default:p((()=>[c(s,{span:24},{default:p((()=>[c(x,{shadow:"never",bordered:!1},{title:p((()=>[g("div",v,[a[0]||(a[0]=y(" 服务器信息 ")),g("span",null,"系统："+f(d(w).system.os),1),g("span",null,"IP："+f(d(w).system.ip),1),g("span",null,"项目已不间断运行："+f(d(w).system.day),1)])])),default:p((()=>[g("div",k,[c(l,null,{default:p((()=>[c(s,{xs:24,sm:24,md:8,lg:8,xl:8},{default:p((()=>[a[1]||(a[1]=g("h3",null,"CPU使用率",-1)),c(o,{placement:"top"},{title:p((()=>[g("p",null,f(d(w).cpu.name),1),g("p",null,f(d(w).cpu.packageName),1),g("p",null,f(d(w).cpu.core),1),g("p",null,f(d(w).cpu.logic),1)])),default:p((()=>[c(t,{class:"content",type:"circle",percent:d(R),strokeColor:F(d(R))},null,8,["percent","strokeColor"])])),_:1}),g("div",I,f(d(w).cpu.coreNumber)+" 核心",1)])),_:1,__:[1]}),c(s,{xs:24,sm:24,md:8,lg:8,xl:8},{default:p((()=>[a[2]||(a[2]=g("h3",null,"内存使用率",-1)),c(o,{placement:"top"},{title:p((()=>[g("p",null,"总量："+f(d(w).memory.total),1),g("p",null,"已使用："+f(d(w).memory.used),1),g("p",null,"空闲："+f(d(w).memory.available),1)])),default:p((()=>[c(t,{class:"content",type:"circle",percent:d(L),strokeColor:F(d(L))},null,8,["percent","strokeColor"])])),_:1}),g("div",P,f(d(w).memory.used)+" / "+f(d(w).memory.total),1)])),_:1,__:[2]}),c(s,{xs:24,sm:24,md:8,lg:8,xl:8},{default:p((()=>[a[3]||(a[3]=g("h3",null,"磁盘使用率",-1)),c(o,{placement:"top"},{title:p((()=>[g("p",null,"总量："+f(d(w).disk.total),1),g("p",null,"空闲："+f(d(w).disk.available),1)])),default:p((()=>[c(t,{class:"content",type:"circle",percent:d(N),strokeColor:F(d(N))},null,8,["percent","strokeColor"])])),_:1}),g("div",C,f(d(w).disk.used)+" / "+f(d(w).disk.total),1)])),_:1,__:[3]})])),_:1})])])),_:1})])),_:1})])),_:1}),c(l,{gutter:10},{default:p((()=>[c(s,{xs:24,sm:24,md:12,lg:12,xl:12,style:{"margin-top":"10px"}},{default:p((()=>[c(x,{shadow:"never",bordered:!1,title:"CPU"},{default:p((()=>[c(d(_),{options:d(S),loading:d(A)},null,8,["options","loading"])])),_:1})])),_:1}),c(s,{xs:24,sm:24,md:12,lg:12,xl:12,style:{"margin-top":"10px"}},{default:p((()=>[c(x,{shadow:"never",bordered:!1,title:"内存"},{default:p((()=>[c(d(_),{options:d(j),loading:d(A)},null,8,["options","loading"])])),_:1})])),_:1})])),_:1})])),[[b,d(A)]])}}}),[["__scopeId","data-v-d63665f0"]]);export{A as default};
