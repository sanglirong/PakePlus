import{b as e,B as a}from"./index-143f5813.js";import{d as l,a6 as s,r as t,ad as n,a0 as i,M as o,e as r,o as d,p,l as u,j as m,k as g,g as c,F as f,q as v,m as b,V as h,n as y}from"./index-920db443.js";const k=l({__name:"ActionModal",emits:["register","confirm"],setup(l,{emit:k}){const _=k,I=s(),F=t(),L=n({dataForm:{handleOpinion:"",handleIds:"",nodeCode:"",fileList:[],signImg:"",pause:0},properties:{},eventType:"",title:"",label:"",assignNodeList:[],pauseType:!1}),{dataForm:T,eventType:j,label:C,properties:O,pauseType:U}=i(L),[w,{changeOkLoading:N}]=e((function(e){N(!1),L.dataForm={handleOpinion:"",handleIds:"",nodeCode:"",fileList:[],signImg:"",pause:0},L.properties=e.properties,L.eventType=e.eventType,L.pauseType=e.pauseType,L.properties.hasSign&&(L.dataForm.signImg=g(x).signImg);switch(L.assignNodeList=(e.assignNodeList||[]).map((e=>({id:e.nodeCode,fullName:e.nodeName}))),e.eventType){case"transfer":L.title="processing"===e.properties?.type?"转办":"转审",L.label="processing"===e.properties?.type?"转办":"转审";break;case"assist":L.title="协办",L.label="协办";break;case"revoke":L.title="撤销申请",L.label="撤销";break;case"launchRecall":L.title="撤回流程",L.label="撤回";break;case"auditRecall":L.title="撤回审核",L.label="撤回";break;case"assign":L.title="指派",L.label="指派";break;case"cancel":L.title="终止流程",L.label="终止";break;case"pause":L.title="暂停流程",L.label="暂停";break;case"resurgence":L.title="复活流程",L.label="复活"}y((()=>{F.value?.clearValidate()}))})),x=o((()=>I.getUserInfo||{}));async function R(){try{if(!(await(F.value?.validate())))return;N(!0),_("confirm",{...L.dataForm,handleIds:"assist"==L.eventType?L.dataForm.handleIds.join(","):L.dataForm.handleIds})}catch(e){}}return(e,l)=>{const s=r("jnpf-select"),t=r("a-form-item"),n=r("jnpf-user-select"),i=r("a-select-option"),o=r("a-select"),y=r("jnpf-textarea"),k=r("jnpf-sign"),_=r("jnpf-upload-file"),I=r("a-form");return d(),p(g(a),h(e.$attrs,{onRegister:g(w),title:L.title,onOk:R,minHeight:52}),{default:u((()=>[m(I,{colon:!1,labelCol:{style:{width:"80px"}},model:g(T),ref_key:"formElRef",ref:F},{default:u((()=>[["transfer","assign","assist"].includes(g(j))?(d(),c(f,{key:0},["assign"===g(j)?(d(),p(t,{key:0,label:"指派节点",name:"nodeCode",rules:[{required:!0,message:"必填",trigger:"change"}]},{default:u((()=>[m(s,{value:g(T).nodeCode,"onUpdate:value":l[0]||(l[0]=e=>g(T).nodeCode=e),options:L.assignNodeList,showSearch:""},null,8,["value","options"])])),_:1})):v("",!0),["transfer","assign","assist"].includes(g(j))?(d(),p(t,{key:1,label:g(C)+"给谁",name:"handleIds",rules:[{required:!0,message:"必填",trigger:"change"}]},{default:u((()=>[m(n,{value:g(T).handleIds,"onUpdate:value":l[1]||(l[1]=e=>g(T).handleIds=e),multiple:"assist"==g(j)},null,8,["value","multiple"])])),_:1},8,["label"])):v("",!0)],64)):v("",!0),"pause"===g(j)?(d(),p(t,{key:1,label:"暂停类型",name:"pause"},{default:u((()=>[m(o,{value:g(T).pause,"onUpdate:value":l[2]||(l[2]=e=>g(T).pause=e),placeholder:"请选择"},{default:u((()=>[m(i,{value:0},{default:u((()=>l[6]||(l[6]=[b("全部流程暂停")]))),_:1,__:[6]}),g(U)?(d(),p(i,{key:0,value:1},{default:u((()=>l[7]||(l[7]=[b("主流程暂停")]))),_:1,__:[7]})):v("",!0)])),_:1},8,["value"])])),_:1})):v("",!0),m(t,{label:`${g(C)}原因`,name:"handleOpinion"},{default:u((()=>[m(y,{value:g(T).handleOpinion,"onUpdate:value":l[3]||(l[3]=e=>g(T).handleOpinion=e),placeholder:"请输入"},null,8,["value"])])),_:1},8,["label"]),g(O)?.hasSign?(d(),p(t,{key:2,label:"手写签名",name:"signImg"},{default:u((()=>[m(k,{value:g(T).signImg,"onUpdate:value":l[4]||(l[4]=e=>g(T).signImg=e),isInvoke:""},null,8,["value"])])),_:1})):v("",!0),g(O)?.hasFile?(d(),p(t,{key:3,label:`${g(C)}附件`,name:"fileList"},{default:u((()=>[m(_,{value:g(T).fileList,"onUpdate:value":l[5]||(l[5]=e=>g(T).fileList=e),type:"workFlow",limit:3},null,8,["value"])])),_:1},8,["label"])):v("",!0)])),_:1},8,["model"])])),_:1},16,["onRegister","title"])}}});export{k as _};
