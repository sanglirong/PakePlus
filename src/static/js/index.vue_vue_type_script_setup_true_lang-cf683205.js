import{u as e,B as a}from"./useTable-dc8c9d84.js";import{d as l,u as t,M as o,e as n,o as u,p as d,l as i,q as s,g as r,F as p,m as c,k as f,ah as y}from"./index-920db443.js";const m=l({__name:"index",props:{list:{type:Array,default:()=>[]},activeStep:{type:Number,default:0},hasPage:{type:Number,default:0},sourceDisabled:{type:Boolean,default:!1},fieldTreeData:{type:Array,default:()=>[]},parameterJson:{type:Array,default:()=>[]}},setup(l){const m=l,{t:v}=t(),{createConfirm:h}=y(),g=[{fullName:"字符串",id:"varchar"},{fullName:"整型",id:"int"},{fullName:"日期时间",id:"datetime"},{fullName:"浮点",id:"decimal"}],C=[{field:"currentPage"},{field:"pageSize"},{field:"keyword"}],k=[{field:"showKey"},{field:"showValue"}],[b]=e({columns:[{title:"参数名",dataIndex:"field"},{title:"类型",dataIndex:"dataType"},{title:"来源",dataIndex:"source"},{title:"参数值",dataIndex:"defaultValue"},{title:"操作",dataIndex:"action",width:50}],showIndexColumn:!1,immediate:!1,pagination:!1,useSearchForm:!1,showTableSetting:!1,isCanResizeParent:!0}),N=o((()=>{const e=[{fullName:"变量",id:2},{fullName:"自定义",id:3}],a={fullName:"接口参数",id:1};return m.hasPage?[a,1==m.activeStep?{fullName:"分页参数",id:4}:{fullName:"回显参数",id:5},...e]:[a,...e]}));function U(e,a,l){"source"===l&&(e.defaultValue=""),m.list[a]=e}return(e,t)=>{const o=n("a-input"),y=n("jnpf-select"),w=n("jnpf-tree-select"),V=n("a-button");return u(),d(f(a),{onRegister:f(b),dataSource:l.list},{bodyCell:i((({column:e,record:a,index:n})=>["field"===e.key?(u(),d(o,{key:0,value:a.field,"onUpdate:value":e=>a.field=e,placeholder:"请输入",allowClear:"",onChange:e=>U(a,n)},null,8,["value","onUpdate:value","onChange"])):s("",!0),"dataType"===e.key?(u(),d(y,{key:1,value:a.dataType,"onUpdate:value":e=>a.dataType=e,options:g,placeholder:"请选择",onChange:e=>U(a,n)},null,8,["value","onUpdate:value","onChange"])):s("",!0),"source"===e.key?(u(),d(y,{key:2,value:a.source,"onUpdate:value":e=>a.source=e,options:N.value,placeholder:"请选择",disabled:l.sourceDisabled,onChange:e=>U(a,n,"source")},null,8,["value","onUpdate:value","options","disabled","onChange"])):s("",!0),"defaultValue"===e.key?(u(),r(p,{key:3},[1===a.source||4==a.source||5==a.source?(u(),d(y,{key:0,value:a.defaultValue,"onUpdate:value":e=>a.defaultValue=e,options:1===a.source?l.parameterJson:4===a.source?C:k,fieldNames:{label:"field",value:"field"},placeholder:"请选择",allowClear:"",onChange:e=>U(a,n)},null,8,["value","onUpdate:value","options","onChange"])):2===a.source?(u(),d(w,{key:1,value:a.defaultValue,"onUpdate:value":e=>a.defaultValue=e,options:l.fieldTreeData,placeholder:"请选择",lastLevel:"",allowClear:"",lastLevelKey:"type",lastLevelValue:1,onChange:e=>U(a,n)},null,8,["value","onUpdate:value","options","onChange"])):3===a.source?(u(),d(o,{key:2,value:a.defaultValue,"onUpdate:value":e=>a.defaultValue=e,placeholder:"请输入",allowClear:"",onChange:e=>U(a,n)},null,8,["value","onUpdate:value","onChange"])):s("",!0)],64)):s("",!0),"action"===e.key?(u(),d(V,{key:4,class:"action-btn",type:"link",color:"error",onClick:e=>function(e){h({iconType:"warning",title:v("common.tipTitle"),content:"此操作删除该数据, 是否继续?",onOk:()=>{m.list.splice(e,1)}})}(n),size:"small"},{default:i((()=>t[0]||(t[0]=[c("删除")]))),_:2,__:[0]},1032,["onClick"])):s("",!0)])),_:1},8,["onRegister","dataSource"])}}});export{m as _};
