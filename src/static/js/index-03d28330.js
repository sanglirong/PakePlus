import{u as e,B as t}from"./useTable-dc8c9d84.js";import{T as o}from"./TableAction-adbe36f2.js";import{b as n,e as a,d as r}from"./billRule-0363563b.js";import{u as s}from"./index-143f5813.js";import{d as i,u as l,aD as p,r as m,a7 as d,e as u,o as c,g as _,a4 as j,j as f,l as y,m as b,t as g,k as x,p as v,q as w,ea as h,ah as k}from"./index-920db443.js";import{_ as I}from"./Form.vue_vue_type_script_setup_true_lang-50689784.js";import"./useForm-1d28ee0b.js";import"./componentMap-c91676b4.js";import"./visualDev-8f54ab4b.js";import"./index.vue_vue_type_script_setup_true_lang-69353133.js";import"./index-9c138ba5.js";import"./ArrowLeftOutlined-3fbf15bc.js";import"./log-2a5f2c26.js";import"./index-999abbee.js";import"./Parser.vue_vue_type_script_setup_true_lang-6ddfe448.js";import"./Item.vue_vue_type_script_setup_true_lang-fef56f78.js";import"./Form.vue_vue_type_script_setup_true_lang-63005a4d.js";import"./createAsyncComponent-7e8f72ac.js";import"./DataLogList.vue_vue_type_script_setup_true_lang-c225eb8c.js";import"./index-0be8277c.js";import"./jquery-6353a699.js";import"./useDefineSetting-7df030ff.js";import"./CustomForm.vue_vue_type_script_setup_true_lang-1aa664f4.js";import"./config-06ca91cd.js";import"./upperFirst-2cd1a2f7.js";import"./useTabs-ceeccdba.js";import"./uniqBy-e868edd7.js";import"./useWindowSizeFn-05f906e2.js";import"./sortable.esm-02d0fe44.js";import"./SettingOutlined-dd6150a2.js";import"./index-1cfe4e28.js";const M={class:"jnpf-content-wrapper"},D={class:"jnpf-content-wrapper-center"},C={class:"jnpf-content-wrapper-content"},T=i({name:"system-task",__name:"index",setup(i){const{t:T}=l(),S=p(),{createMessage:F}=k(),R=m([]),[O,{openModal:Y}]=s(),[A,{reload:P,getForm:H}]=e({api:n,columns:[{title:"业务名称",dataIndex:"fullName"},{title:"业务编码",dataIndex:"enCode",width:200},{title:"业务分类",dataIndex:"category",width:150},{title:"当前流水号",dataIndex:"outputNumber",width:200},{title:"创建人",dataIndex:"creatorUser",width:120},{title:"创建时间",dataIndex:"creatorTime",width:150,format:"date|YYYY-MM-DD HH:mm:ss"},{title:"最后修改时间",dataIndex:"lastModifyTime",width:150,format:"date|YYYY-MM-DD HH:mm:ss"},{title:"排序",dataIndex:"sortCode",width:70,align:"center"},{title:"状态",dataIndex:"enabledMark",width:70,align:"center"}],useSearchForm:!0,formConfig:{schemas:[{field:"keyword",label:T("common.keyword"),component:"Input",componentProps:{placeholder:T("common.enterKeyword"),submitOnPressEnter:!0}},{field:"categoryId",label:"业务分类",component:"Select",componentProps:{placeholder:"请选择"}},{field:"enabledMark",label:"状态",component:"Select",componentProps:{placeholder:"请选择",options:[{fullName:"启用",id:1},{fullName:"禁用",id:0}]}}]},actionColumn:{width:150,title:"操作",dataIndex:"action"}});function L(e){return[{label:T("common.editText"),onClick:B.bind(null,e.id)},{label:T("common.delText"),color:"error",modelConfirm:{onOk:z.bind(null,e.id)}}]}function N(e){return[{label:T("common.exportText"),modelConfirm:{content:"您确定要导出该单据模板, 是否继续?",onOk:q.bind(null,e.id)}}]}function B(e=""){Y(!0,{id:e,categoryList:R.value})}function q(e){a(e).then((e=>{h({url:e.data.url})}))}function z(e){r(e).then((e=>{F.success(e.msg),P()}))}return d((()=>{!async function(){R.value=await S.getDictionaryData("businessType"),H().updateSchema({field:"categoryId",componentProps:{options:R.value}})}()})),(e,n)=>{const a=u("a-button"),r=u("jnpf-upload-btn"),s=u("a-tag");return c(),_("div",M,[j("div",D,[j("div",C,[f(x(t),{onRegister:x(A)},{tableTitle:y((()=>[f(a,{type:"primary",preIcon:"icon-ym icon-ym-btn-add",onClick:n[0]||(n[0]=e=>B())},{default:y((()=>[b(g(x(T)("common.addText")),1)])),_:1}),f(r,{url:"/api/system/BillRule/Actions/Import",accept:".bb",onOnSuccess:x(P)},null,8,["onOnSuccess"])])),bodyCell:y((({column:e,record:t})=>["enabledMark"===e.key?(c(),v(s,{key:0,color:1==t.enabledMark?"success":"error"},{default:y((()=>[b(g(1==t.enabledMark?"启用":"禁用"),1)])),_:2},1032,["color"])):w("",!0),"action"===e.key?(c(),v(x(o),{key:1,actions:L(t),dropDownActions:N(t)},null,8,["actions","dropDownActions"])):w("",!0)])),_:1},8,["onRegister"])])]),f(I,{onRegister:x(O),onReload:x(P)},null,8,["onRegister","onReload"])])}}});export{T as default};
