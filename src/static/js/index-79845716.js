import{d as e,u as t,aD as o,fg as n,gg as r,a7 as i,e as s,o as a,g as l,a4 as p,j as m,l as u,m as d,t as c,k as _,p as f,q as j,gh as g,ah as y}from"./index-920db443.js";import{u as b,B as v}from"./useTable-dc8c9d84.js";import{T as x}from"./TableAction-adbe36f2.js";import{u as w}from"./index-143f5813.js";import{_ as k}from"./Form.vue_vue_type_script_setup_true_lang-49a4115a.js";import{_ as h}from"./GlobalMember.vue_vue_type_script_setup_true_lang-88ed7e95.js";import{u as M}from"./index-9c138ba5.js";import C from"./Permission-c66b6a38.js";import"./useForm-1d28ee0b.js";import"./componentMap-c91676b4.js";import"./visualDev-8f54ab4b.js";import"./index.vue_vue_type_script_setup_true_lang-69353133.js";import"./index-999abbee.js";import"./ArrowLeftOutlined-3fbf15bc.js";import"./log-2a5f2c26.js";import"./Parser.vue_vue_type_script_setup_true_lang-6ddfe448.js";import"./Item.vue_vue_type_script_setup_true_lang-fef56f78.js";import"./Form.vue_vue_type_script_setup_true_lang-63005a4d.js";import"./createAsyncComponent-7e8f72ac.js";import"./DataLogList.vue_vue_type_script_setup_true_lang-c225eb8c.js";import"./index-0be8277c.js";import"./jquery-6353a699.js";import"./useDefineSetting-7df030ff.js";import"./CustomForm.vue_vue_type_script_setup_true_lang-1aa664f4.js";import"./config-06ca91cd.js";import"./upperFirst-2cd1a2f7.js";import"./useTabs-ceeccdba.js";import"./uniqBy-e868edd7.js";import"./useWindowSizeFn-05f906e2.js";import"./sortable.esm-02d0fe44.js";import"./SettingOutlined-dd6150a2.js";import"./index-1cfe4e28.js";import"./formValidate-c8ab8d29.js";import"./userRelation-654fbd05.js";import"./permissionGroup-129512c4.js";const I={class:"jnpf-content-wrapper"},R={class:"jnpf-content-wrapper-center"},D={class:"jnpf-content-wrapper-content"},T=e({name:"permission-group",__name:"index",setup(e){const{createMessage:T}=y(),{t:S}=t(),F=o(),P=n(),[N,{openModal:A}]=w(),[O,{openModal:G}]=w(),[L,{openPopup:Y}]=M(),[q,{reload:B,getForm:H}]=b({api:r,columns:[{title:"分组名称",dataIndex:"fullName",width:200},{title:"分组编码",dataIndex:"enCode",width:150},{title:"分组类型",dataIndex:"type",width:90},{title:"说明",dataIndex:"description"},{title:"创建时间",dataIndex:"creatorTime",width:150,format:"date|YYYY-MM-DD HH:mm:ss"},{title:"排序",dataIndex:"sortCode",width:70,align:"center"},{title:"状态",dataIndex:"enabledMark",width:70,align:"center"}],useSearchForm:!0,formConfig:{schemas:[{field:"keyword",label:S("common.keyword"),component:"Input",componentProps:{placeholder:S("common.enterKeyword"),submitOnPressEnter:!0}},{field:"type",label:"类型",component:"Select",componentProps:{placeholder:"请选择"}},{field:"enabledMark",label:"状态",component:"Select",componentProps:{placeholder:"请选择",options:[{fullName:"启用",id:1},{fullName:"禁用",id:0}]}}]},actionColumn:{width:150,title:"操作",dataIndex:"action"}});function z(e){return[{label:S("common.editText"),onClick:J.bind(null,e.id)},{label:S("common.delText"),color:"error",modelConfirm:{onOk:Q.bind(null,e.id)}}]}function E(e){return e.enabledMark?[{label:"组内成员",onClick:V.bind(null,e)},{label:"查看权限",onClick:K.bind(null,e.id,e.fullName)}]:[]}function K(e,t){Y(!0,{id:e,fullName:t,objectType:"group"})}function J(e=""){G(!0,{id:e})}function Q(e){g(e).then((e=>{T.success(e.msg),P.resetState(),B()}))}function V(e){const{id:t,fullName:o}=e;A(!0,{id:t,fullName:o,type:"Group"})}return i((()=>{!async function(){const e=await F.getDictionaryData("groupType");H().updateSchema({field:"type",componentProps:{options:e}})}()})),(e,t)=>{const o=s("a-button"),n=s("a-tag");return a(),l("div",I,[p("div",R,[p("div",D,[m(_(v),{onRegister:_(q)},{tableTitle:u((()=>[m(o,{type:"primary",preIcon:"icon-ym icon-ym-btn-add",onClick:t[0]||(t[0]=e=>J())},{default:u((()=>[d(c(_(S)("common.addText")),1)])),_:1})])),bodyCell:u((({column:e,record:t})=>["enabledMark"===e.key?(a(),f(n,{key:0,color:1==t.enabledMark?"success":"error"},{default:u((()=>[d(c(1==t.enabledMark?"启用":"禁用"),1)])),_:2},1032,["color"])):j("",!0),"action"===e.key?(a(),f(_(x),{key:1,actions:z(t),dropDownActions:E(t)},null,8,["actions","dropDownActions"])):j("",!0)])),_:1},8,["onRegister"])])]),m(k,{onRegister:_(O),onReload:_(B)},null,8,["onRegister","onReload"]),m(h,{onRegister:_(N)},null,8,["onRegister"]),m(C,{onRegister:_(L)},null,8,["onRegister"])])}}});export{T as default};
