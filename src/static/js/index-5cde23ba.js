import{u as e,B as t}from"./useTable-dc8c9d84.js";import{T as o}from"./TableAction-adbe36f2.js";import{d as n,u as a,aD as s,co as r,a7 as i,e as l,o as m,g as p,a4 as d,j as c,l as u,m as _,t as f,k as j,p as g,q as b,ah as y}from"./index-920db443.js";import{b as h,e as M,f as w}from"./message-22b8b6a8.js";import{u as x}from"./index-143f5813.js";import{u as D}from"./index-9c138ba5.js";import H from"./Detail-4e2b49fe.js";import{_ as Y}from"./Form.vue_vue_type_script_setup_true_lang-96549916.js";import"./useForm-1d28ee0b.js";import"./componentMap-c91676b4.js";import"./visualDev-8f54ab4b.js";import"./index.vue_vue_type_script_setup_true_lang-69353133.js";import"./index-999abbee.js";import"./ArrowLeftOutlined-3fbf15bc.js";import"./log-2a5f2c26.js";import"./Parser.vue_vue_type_script_setup_true_lang-6ddfe448.js";import"./Item.vue_vue_type_script_setup_true_lang-fef56f78.js";import"./Form.vue_vue_type_script_setup_true_lang-63005a4d.js";import"./createAsyncComponent-7e8f72ac.js";import"./DataLogList.vue_vue_type_script_setup_true_lang-c225eb8c.js";import"./index-0be8277c.js";import"./jquery-6353a699.js";import"./useDefineSetting-7df030ff.js";import"./CustomForm.vue_vue_type_script_setup_true_lang-1aa664f4.js";import"./config-06ca91cd.js";import"./upperFirst-2cd1a2f7.js";import"./useTabs-ceeccdba.js";import"./uniqBy-e868edd7.js";import"./useWindowSizeFn-05f906e2.js";import"./sortable.esm-02d0fe44.js";import"./SettingOutlined-dd6150a2.js";import"./index-1cfe4e28.js";import"./sendConfig-5e58278e.js";import"./MsgModal.vue_vue_type_script_setup_true_lang-65704aaa.js";const v={class:"jnpf-content-wrapper"},k={class:"jnpf-content-wrapper-center"},T={class:"jnpf-content-wrapper-content"},C=n({name:"system-notice",__name:"index",setup(n){const{t:C}=a(),{createMessage:I}=y(),P=s(),[R,{openModal:S}]=x(),[F,{openPopup:A}]=D(),[N,{reload:O,getForm:U}]=e({api:h,columns:[{title:"标题",dataIndex:"title"},{title:"类型",dataIndex:"category",width:60,align:"center"},{title:"失效时间",dataIndex:"expirationTime",width:150,format:"date|YYYY-MM-DD HH:mm:ss"},{title:"创建人",dataIndex:"creatorUser",width:120},{title:"创建时间",dataIndex:"creatorTime",width:150,format:"date|YYYY-MM-DD HH:mm:ss"},{title:"发布人",dataIndex:"releaseUser",width:120},{title:"发布时间",dataIndex:"releaseTime",width:150,format:"date|YYYY-MM-DD HH:mm:ss"},{title:"状态",dataIndex:"enabledMark",width:80,align:"center"}],useSearchForm:!0,formConfig:{schemas:[{field:"keyword",label:C("common.keyword"),component:"Input",componentProps:{placeholder:C("common.enterKeyword"),submitOnPressEnter:!0}},{field:"type",label:"类型",component:"Select",componentProps:{placeholder:"请选择",multiple:!0,showSearch:!0,fieldNames:{value:"enCode"}}},{field:"enabledMark",label:"状态",component:"Select",componentProps:{placeholder:"请选择",multiple:!0,options:[{id:"0",fullName:"存草稿"},{id:"1",fullName:"已发送"},{id:"2",fullName:"已过期"}]}},{field:"releaseUser",label:"发布人",component:"UserSelect",componentProps:{placeholder:"请选择",multiple:!0}},{field:"releaseTime",label:"发布时间",component:"DateRange",componentProps:{format:"YYYY-MM-DD HH:mm:ss",showTime:{defaultValue:[r("00:00:00","HH:mm:ss"),r("23:59:59","HH:mm:ss")]},placeholder:["开始时间","结束时间"]}},{field:"expirationTime",label:"失效时间",component:"DateRange",componentProps:{format:"YYYY-MM-DD HH:mm:ss",showTime:{defaultValue:[r("00:00:00","HH:mm:ss"),r("23:59:59","HH:mm:ss")]},placeholder:["开始时间","结束时间"]}},{field:"creatorUser",label:"创建人",component:"UserSelect",componentProps:{placeholder:"请选择",multiple:!0}},{field:"creatorTime",label:"创建时间",component:"DateRange",componentProps:{format:"YYYY-MM-DD HH:mm:ss",showTime:{defaultValue:[r("00:00:00","HH:mm:ss"),r("23:59:59","HH:mm:ss")]},placeholder:["开始时间","结束时间"]}}]},actionColumn:{width:150,title:"操作",dataIndex:"action"}});function L(e){return[{label:C("common.editText"),disabled:0!=e.enabledMark,onClick:E.bind(null,e.id)},{label:C("common.delText"),color:"error",modelConfirm:{onOk:q.bind(null,e.id)}}]}function V(e){return[{label:C("common.detailText"),onClick:z.bind(null,e.id)},{label:"发布",ifShow:0==e.enabledMark,modelConfirm:{content:"您确定要发布当前公告, 是否继续?",onOk:B.bind(null,e.id)}}]}function q(e){M(e).then((e=>{I.success(e.msg),O()}))}function B(e){w(e).then((e=>{I.success(e.msg),O()}))}function z(e){S(!0,{id:e})}function E(e=""){A(!0,{id:e})}return i((()=>{!async function(){const e=await P.getDictionaryData("NoticeType");U().updateSchema({field:"type",componentProps:{options:e}})}()})),(e,n)=>{const a=l("a-button"),s=l("a-tag");return m(),p("div",v,[d("div",k,[d("div",T,[c(j(t),{onRegister:j(N)},{tableTitle:u((()=>[c(a,{type:"primary",preIcon:"icon-ym icon-ym-btn-add",onClick:n[0]||(n[0]=e=>E())},{default:u((()=>[_(f(j(C)("common.addText")),1)])),_:1})])),bodyCell:u((({column:e,record:t})=>["enabledMark"===e.key?(m(),g(s,{key:0,color:1==t.enabledMark?"success":0==t.enabledMark?"warning":""},{default:u((()=>[_(f(1==t.enabledMark?"已发送":0==t.enabledMark?"存草稿":"已过期"),1)])),_:2},1032,["color"])):b("",!0),"action"===e.key?(m(),g(j(o),{key:1,actions:L(t),dropDownActions:V(t)},null,8,["actions","dropDownActions"])):b("",!0)])),_:1},8,["onRegister"])])]),c(H,{onRegister:j(R)},null,8,["onRegister"]),c(Y,{onRegister:j(F),onReload:j(O)},null,8,["onRegister","onReload"])])}}});export{C as default};
