import{d as e,r as a,ad as t,a0 as o,u as l,M as d,g_ as r,e as s,o as n,p as m,l as i,j as u,k as c,m as g,g as p,F as f,h as F,V as _,g$ as h,h0 as v,ah as y}from"./index-920db443.js";import{b as C,B as L}from"./index-143f5813.js";const b=e({__name:"Form",emits:["register","reload"],setup(e,{emit:b}){const x={id:"",type:0,enCode:"",map:{}},j=b,R=a(),k=t({dataForm:{id:"",type:0,enCode:"",map:{}},formRules:{enCode:[{required:!0,message:"必填",trigger:"change"},{pattern:/^[a-zA-Z][a-zA-Z0-9._-]*$/,message:"只能输入字母、数字、点、横线和下划线，且以字母开头",trigger:"change"}]},categoryList:[]}),{dataForm:U,formRules:M,categoryList:O}=o(k),[$,{closeModal:w,changeLoading:z,changeOkLoading:A}]=C((function(e){z(!0),A(!1),k.dataForm={...x},R.value?.resetFields(),k.dataForm.id=e.id,k.categoryList=e.categoryList,k.dataForm.id?r(k.dataForm.id).then((e=>{k.dataForm=e.data;for(let[a,t]of Object.entries(e.data.map||{}))k.dataForm[a]=t;z(!1)})):z(!1)})),{createMessage:T}=y(),{t:Z}=l(),q=d((()=>k.dataForm.id?Z("common.editText"):Z("common.addText")));async function B(){try{if(!(await(R.value?.validate())))return;k.dataForm.map||(k.dataForm.map={});for(let e=0;e<k.categoryList.length;e++)k.dataForm.map[k.categoryList[e].enCode]=k.dataForm[k.categoryList[e].enCode]||"";(k.dataForm.id?h:v)(k.dataForm).then((e=>{T.success(e.msg),A(!1),w(),j("reload")})).catch((()=>{A(!1)}))}catch(e){}}return(e,a)=>{const t=s("a-select-option"),o=s("a-select"),l=s("a-form-item"),d=s("jnpf-input"),r=s("a-form");return n(),m(c(L),_(e.$attrs,{onRegister:c($),title:q.value,onOk:B}),{default:i((()=>[u(r,{colon:!1,labelCol:{style:{width:"80px"}},model:c(U),rules:c(M),ref_key:"formElRef",ref:R},{default:i((()=>[u(l,{label:"翻译分类",name:"type"},{default:i((()=>[u(o,{value:c(U).type,"onUpdate:value":a[0]||(a[0]=e=>c(U).type=e),placeholder:"请选择"},{default:i((()=>[u(t,{value:0},{default:i((()=>a[2]||(a[2]=[g("客户端")]))),_:1,__:[2]}),u(t,{value:1},{default:i((()=>a[3]||(a[3]=[g("服务端")]))),_:1,__:[3]})])),_:1},8,["value"])])),_:1}),u(l,{label:"翻译标记",name:"enCode"},{default:i((()=>[u(d,{value:c(U).enCode,"onUpdate:value":a[1]||(a[1]=e=>c(U).enCode=e),placeholder:"请输入"},null,8,["value"])])),_:1}),(n(!0),p(f,null,F(c(O),(e=>(n(),m(l,{label:e.fullName,name:e.enCode},{default:i((()=>[u(d,{value:c(U)[e.enCode],"onUpdate:value":a=>c(U)[e.enCode]=a,placeholder:"请输入"},null,8,["value","onUpdate:value"])])),_:2},1032,["label","name"])))),256))])),_:1},8,["model","rules"])])),_:1},16,["onRegister","title"])}}});export{b as _};
