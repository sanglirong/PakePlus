import{d as e,M as l,k as a,e as o,o as t,g as n,j as i,V as s,a4 as u,l as d,af as p,t as r,q as f,F as c,p as m,a5 as y,r as v,m as h,aN as w,aH as b,a3 as F}from"./index-920db443.js";import{a as N}from"./index-c37d2476.js";import{s as k,t as U,i as C,a as g}from"./define-8efdf20f.js";const I=["title"],T={class:"required-sign"},x=y(e({__name:"SelectInterface",props:{value:{type:String,default:""},title:{type:String,default:""},templateJson:{type:Array,default:[]},fieldOptions:{type:Array,default:[]},type:{type:Number,default:1},isFlow:{type:Boolean,default:!1},showSystemFormId:{type:Boolean,default:!0},showSystemFullLabel:{type:Boolean,default:!1},fieldWidth:{type:String,default:"full"}},emits:["update:value","change","fieldChange"],setup(e,{emit:y}){const v=e,h=y,w=l((()=>2==v.type?k.filter((e=>1!=e.id)):3==v.type?k.filter((e=>4!=e.id)):k)),b=l((()=>a(w).filter((e=>3!=e.id)))),F=l((()=>{if(v.isFlow)return[{id:"@flowId",fullName:"流程ID",label:"@flowId(流程ID)"},{id:"@taskId",fullName:"任务ID",label:"@taskId(任务ID)"},{id:"@taskNodeId",fullName:"节点ID",label:"@taskNodeId(节点ID)"},{id:"@flowFullName",fullName:"流程名称",label:"@flowFullName(流程名称)"},{id:"@taskFullName",fullName:"任务标题",label:"@taskFullName(任务标题)"},{id:"@launchUserId",fullName:"发起用户ID",label:"@launchUserId(发起用户ID)"},{id:"@launchUserName",fullName:"发起用户名",label:"@launchUserName(发起用户名)"},{id:"@flowOperatorUserId",fullName:"当前操作用户ID",label:"@flowOperatorUserId(当前操作用户ID)"},{id:"@flowOperatorUserName",fullName:"当前操作用户名",label:"@flowOperatorUserName(当前操作用户名)"}];let e=C;return v.showSystemFormId?e:e.filter((e=>"@formId"!=e.id))})),g=l((()=>v.fieldOptions.filter((e=>e.__config__&&e.__config__.required)).map((e=>({...e,label:e.fullName?e.id+"("+e.fullName+")":e.id})))));function x(e,l){h("update:value",e),h("change",e,l)}function _(e){e.relationField=4==e.sourceType?a(F)[0]?.id:""}return(l,y)=>{const v=o("jnpf-select"),k=o("jnpf-input-number"),C=o("jnpf-date-picker"),S=o("a-input"),L=o("a-table");return t(),n(c,null,[i(a(N),s({value:e.value,title:e.title},l.$attrs,{onChange:x}),null,16,["value","title"]),y[1]||(y[1]=u("div",{class:"ant-form-item-label !mt-12px"},[u("label",{class:"ant-form-item-no-colon"},"参数设置:")],-1)),i(L,{"data-source":e.templateJson,columns:a(U),size:"small",pagination:!1},{bodyCell:d((({column:l,record:a})=>["field"===l.key?(t(),n("div",{key:0,class:p(["interface-field-box",`w-${e.fieldWidth}`]),title:a.field+(a.fieldName?"("+a.fieldName+")":"")},[u("span",T,r(a.required?"*":""),1),u("span",null,r(a.field)+r(a.fieldName?"("+a.fieldName+")":""),1)],10,I)):f("",!0),"sourceType"===l.key?(t(),n(c,{key:1},[a.required?(t(),m(v,{key:0,value:a.sourceType,"onUpdate:value":e=>a.sourceType=e,options:b.value,class:"!w-100px",onChange:e=>_(a)},null,8,["value","onUpdate:value","options","onChange"])):(t(),m(v,{key:1,value:a.sourceType,"onUpdate:value":e=>a.sourceType=e,options:w.value,class:"!w-100px",onChange:e=>_(a)},null,8,["value","onUpdate:value","options","onChange"]))],64)):f("",!0),"relationField"===l.key?(t(),n(c,{key:2},[1===a.sourceType?(t(),m(v,{key:0,value:a.relationField,"onUpdate:value":e=>a.relationField=e,options:a.required&&e.isFlow?g.value:e.fieldOptions,allowClear:"",showSearch:"",fieldNames:{label:"label",options:"children"},optionLabelProp:"label",class:"!w-204px",onChange:e=>{h("fieldChange",e,a)}},null,8,["value","onUpdate:value","options","onChange"])):2===a.sourceType?(t(),n(c,{key:1},[["int","decimal"].includes(a.dataType)?(t(),m(k,{key:0,value:a.relationField,"onUpdate:value":e=>a.relationField=e,placeholder:"请输入",allowClear:""},null,8,["value","onUpdate:value"])):"datetime"==a.dataType?(t(),m(C,{key:1,class:"!w-full",value:a.relationField,"onUpdate:value":e=>a.relationField=e,placeholder:"请选择",format:"YYYY-MM-DD HH:mm:ss",allowClear:""},null,8,["value","onUpdate:value"])):(t(),m(S,{key:2,value:a.relationField,"onUpdate:value":e=>a.relationField=e,placeholder:"请输入",allowClear:""},null,8,["value","onUpdate:value"]))],64)):4===a.sourceType?(t(),m(v,{key:2,value:a.relationField,"onUpdate:value":e=>a.relationField=e,options:F.value,fieldNames:{label:e.showSystemFullLabel?"label":"fullName",options:"options1"},optionLabelProp:e.showSystemFullLabel?"label":"fullName",allowClear:"",class:"!w-204px"},null,8,["value","onUpdate:value","options","fieldNames","optionLabelProp"])):f("",!0)],64)):f("",!0)])),emptyText:d((()=>y[0]||(y[0]=[u("p",{class:"leading-60px"},"暂无数据",-1)]))),_:1},8,["data-source","columns"])],64)}}}),[["__scopeId","data-v-fe4e41c1"]]),_={class:"jnpf-content-wrapper"},S={class:"required-sign"},L=e({inheritAttrs:!1,__name:"SelectInterfaceBtn",props:{templateJson:{type:Array,default:[]},fieldOptions:{type:Array,default:[]},type:{type:Number,default:1},showSystemFormId:{type:Boolean,default:!0},showSystemFullLabel:{type:Boolean,default:!1},showFieldFullLabel:{type:Boolean,default:!1},isFlow:{type:Boolean,default:!1}},emits:["update:value","change","fieldChange"],setup(e,{emit:s}){const p=e,y=s,F=v(!1),N=l((()=>{const e=(p.isFlow?g:C).map((e=>({...e,label:e.fullName?e.id+"("+e.fullName+")":e.id})));return p.showSystemFormId?e:e.filter((e=>"@formId"!=e.id))})),I=l((()=>2==p.type?k.filter((e=>1!=e.id)):3==p.type?k.filter((e=>4!=e.id)):k)),T=l((()=>a(I).filter((e=>3!=e.id))));function x(){F.value=!0}function L(){F.value=!1}function D(){L()}function j(e){e.relationField=4==e.sourceType?a(N)[0]?.id:""}return(l,s)=>{const p=o("a-button"),v=o("jnpf-select"),k=o("jnpf-input-number"),C=o("jnpf-date-picker"),g=o("a-input"),O=o("a-table");return t(),n(c,null,[i(p,{class:"!w-full",onClick:x},{default:d((()=>s[1]||(s[1]=[h("设置")]))),_:1,__:[1]}),i(a(b),{class:"interface-template-json-modal",open:F.value,"onUpdate:open":s[0]||(s[0]=e=>F.value=e),title:"参数设置",width:600,onOk:D,onCancel:L,maskClosable:!1,centered:""},{closeIcon:d((()=>[i(w,{canFullscreen:!1,onCancel:L})])),default:d((()=>[u("div",_,[i(O,{class:"w-full","data-source":e.templateJson,columns:a(U),size:"small",pagination:!1,scroll:{x:"max-content",y:"calc(40vh - 39px)"}},{bodyCell:d((({column:l,record:a})=>["field"===l.key?(t(),n(c,{key:0},[u("span",S,r(a.required?"*":""),1),h(" "+r(a.field)+r(a.fieldName?"("+a.fieldName+")":""),1)],64)):f("",!0),"sourceType"===l.key?(t(),n(c,{key:1},[a.required?(t(),m(v,{key:0,value:a.sourceType,"onUpdate:value":e=>a.sourceType=e,options:T.value,class:"!w-100px",onChange:e=>j(a)},null,8,["value","onUpdate:value","options","onChange"])):(t(),m(v,{key:1,value:a.sourceType,"onUpdate:value":e=>a.sourceType=e,options:I.value,class:"!w-100px",onChange:e=>j(a)},null,8,["value","onUpdate:value","options","onChange"]))],64)):f("",!0),"relationField"===l.key?(t(),n(c,{key:2},[1===a.sourceType?(t(),m(v,{key:0,value:a.relationField,"onUpdate:value":e=>a.relationField=e,options:e.fieldOptions,allowClear:"",showSearch:"",fieldNames:{label:e.showFieldFullLabel?"label":"fullName",options:"options1"},optionLabelProp:e.showFieldFullLabel?"label":"fullName",class:"!w-204px",onChange:e=>{y("fieldChange",e,a)}},null,8,["value","onUpdate:value","options","fieldNames","optionLabelProp","onChange"])):2===a.sourceType?(t(),n(c,{key:1},[["int","decimal"].includes(a.dataType)?(t(),m(k,{key:0,value:a.relationField,"onUpdate:value":e=>a.relationField=e,placeholder:"请输入",allowClear:""},null,8,["value","onUpdate:value"])):"datetime"==a.dataType?(t(),m(C,{key:1,class:"!w-full",value:a.relationField,"onUpdate:value":e=>a.relationField=e,placeholder:"请选择",format:"YYYY-MM-DD HH:mm:ss",allowClear:""},null,8,["value","onUpdate:value"])):(t(),m(g,{key:2,value:a.relationField,"onUpdate:value":e=>a.relationField=e,placeholder:"请输入",allowClear:""},null,8,["value","onUpdate:value"]))],64)):4===a.sourceType?(t(),m(v,{key:2,value:a.relationField,"onUpdate:value":e=>a.relationField=e,options:N.value,fieldNames:{label:e.showSystemFullLabel?"label":"fullName",options:"options1"},optionLabelProp:e.showSystemFullLabel?"label":"fullName",allowClear:"",class:"!w-204px"},null,8,["value","onUpdate:value","options","fieldNames","optionLabelProp"])):f("",!0)],64)):f("",!0)])),emptyText:d((()=>s[2]||(s[2]=[u("p",{class:"leading-60px"},"暂无数据",-1)]))),_:1},8,["data-source","columns"])])])),_:1},8,["open"])],64)}}}),D=F(x),j=F(L);export{D as S,j as a};
