import{a as e,B as t}from"./index-9c138ba5.js";import{d as a,u as o,ad as n,a0 as r,aD as s,M as l,w as i,n as d,e as c,o as m,p,l as u,a4 as y,j as f,k as b,m as k,g,af as _,q as w,t as h,V as I,ah as M}from"./index-920db443.js";import{u as x,B as Q}from"./useForm-1d28ee0b.js";import"./componentMap-c91676b4.js";import{u as R,B as j}from"./useTable-dc8c9d84.js";import{T as v}from"./TableAction-adbe36f2.js";import{o as T,p as C}from"./portal-935b0b1b.js";import{u as D}from"./index-143f5813.js";import{_ as A}from"./TransferModal.vue_vue_type_script_setup_true_lang-01248fc8.js";import{_ as Y}from"./Form.vue_vue_type_script_setup_true_lang-0531bcd3.js";const P={class:"jnpf-content-wrapper-search-box ml-10px mt-10px"},W=a({__name:"index",setup(a){const{createMessage:W}=M(),{t:B}=o(),L=n({listQuery:{platform:"Web",category:"",enabledMark:"",keyword:""},systemId:"",title:"",parentId:"",categoryList:[]}),{listQuery:H,title:K}=r(L),N=s(),S=l((()=>({keyword:L.listQuery.keyword,category:L.listQuery.category,enabledMark:L.listQuery.enabledMark,platform:L.listQuery.platform,systemId:L.systemId}))),F=[{title:"门户名称",dataIndex:"fullName",width:200},{title:"分类",dataIndex:"categoryName",width:150},{title:"说明",dataIndex:"description",width:200},{title:"创建人",dataIndex:"creatorUser",width:120},{title:"创建时间",dataIndex:"creatorTime",width:150,format:"date|YYYY-MM-DD HH:mm:ss"},{title:"最后修改时间",dataIndex:"lastModifyTime",width:150,format:"date|YYYY-MM-DD HH:mm:ss"},{title:"排序",dataIndex:"sortCode",width:70,align:"center"},{title:"状态",dataIndex:"enabledMark",width:70,align:"center"}],[O]=e((async function(e){L.systemId=e.id,L.title=e.title+"的门户管理",L.listQuery.platform="Web",L.categoryList=await N.getDictionaryData("businessType"),q([{field:"category",componentProps:{options:L.categoryList||[]}}]),d((()=>J({page:1})))})),[U,{updateSchema:q}]=x({baseColProps:{span:6},showActionButtonGroup:!0,showAdvancedButton:!0,compact:!0,schemas:[{field:"keyword",label:B("common.keyword"),component:"Input",componentProps:{placeholder:B("common.enterKeyword"),submitOnPressEnter:!0}},{field:"category",label:"分类",component:"Select",labelWidth:40,componentProps:{placeholder:"请选择"}},{field:"enabledMark",label:"状态",component:"Select",componentProps:{placeholder:"请选择",options:[{fullName:"启用",id:1},{fullName:"禁用",id:0}]}}]}),[E,{openModal:G}]=D(),[V,{openModal:$}]=D(),[z,{reload:J}]=R({api:T,immediate:!1,actionColumn:{width:150,title:"操作",dataIndex:"action"}}),[X,{reload:Z}]=R({api:T,immediate:!1,actionColumn:{width:150,title:"操作",dataIndex:"action"}});function ee(e){return[{label:B("common.editText"),onClick:re.bind(null,e.id)},{label:B("common.delText"),color:"error",disabled:1==e.isMain,modelConfirm:{onOk:se.bind(null,e.id)}}]}function te(e){return[{label:"授权",onClick:le.bind(null,e)}]}function ae(e){L.listQuery.keyword=e?.keyword||"",L.listQuery.category=e?.category||"",L.listQuery.enabledMark=e?.enabledMark,ne()}function oe(){L.listQuery.keyword="",L.listQuery.category="",L.listQuery.enabledMark="",ne()}function ne(){d((()=>ie()))}function re(e){G(!0,{id:e,categoryList:L.categoryList,systemId:L.systemId,platform:L.listQuery.platform})}function se(e){C(e).then((e=>{W.success(e.msg),ie()}))}function le(e){$(!0,{id:e.id,systemId:L.systemId})}function ie(){"Web"==L.listQuery.platform?J({page:1}):Z({page:1})}return i((()=>L.listQuery.platform),(()=>{d((()=>ie()))}),{deep:!0}),(e,a)=>{const o=c("a-button"),n=c("a-tag"),r=c("a-tab-pane"),s=c("a-tabs");return m(),p(b(t),I(e.$attrs,{onRegister:b(O),title:b(K),class:"full-popup","destroy-on-close":""}),{default:u((()=>[y("div",P,[f(b(Q),{class:"search-form",onRegister:b(U),onSubmit:ae,onReset:oe},null,8,["onRegister"])]),f(s,{activeKey:b(H).platform,"onUpdate:activeKey":a[2]||(a[2]=e=>b(H).platform=e),class:"jnpf-content-wrapper-tabs",destroyInactiveTabPane:""},{default:u((()=>[f(r,{key:"Web",tab:"Web门户"},{default:u((()=>[f(b(j),{onRegister:b(z),columns:F,searchInfo:S.value},{tableTitle:u((()=>[f(o,{type:"primary",preIcon:"icon-ym icon-ym-btn-add",onClick:a[0]||(a[0]=e=>re())},{default:u((()=>a[3]||(a[3]=[k("添加")]))),_:1,__:[3]})])),bodyCell:u((({column:e,record:t})=>["icon"===e.key?(m(),g("i",{key:0,class:_(t.icon+" table-icon")},null,2)):w("",!0),"enabledMark"===e.key?(m(),p(n,{key:1,color:1==t.enabledMark?"success":"error"},{default:u((()=>[k(h(1==t.enabledMark?"启用":"禁用"),1)])),_:2},1032,["color"])):w("",!0),"action"===e.key?(m(),p(b(v),{key:2,actions:ee(t),dropDownActions:te(t)},null,8,["actions","dropDownActions"])):w("",!0)])),_:1},8,["onRegister","searchInfo"])])),_:1}),f(r,{key:"App",tab:"App门户"},{default:u((()=>[f(b(j),{onRegister:b(X),columns:F,searchInfo:S.value},{tableTitle:u((()=>[f(o,{type:"primary",preIcon:"icon-ym icon-ym-btn-add",onClick:a[1]||(a[1]=e=>re())},{default:u((()=>a[4]||(a[4]=[k("添加")]))),_:1,__:[4]})])),bodyCell:u((({column:e,record:t})=>["icon"===e.key?(m(),g("i",{key:0,class:_(t.icon+" table-icon")},null,2)):w("",!0),"enabledMark"===e.key?(m(),p(n,{key:1,color:1==t.enabledMark?"success":"error"},{default:u((()=>[k(h(1==t.enabledMark?"启用":"禁用"),1)])),_:2},1032,["color"])):w("",!0),"action"===e.key?(m(),p(b(v),{key:2,actions:ee(t),dropDownActions:te(t)},null,8,["actions","dropDownActions"])):w("",!0)])),_:1},8,["onRegister","searchInfo"])])),_:1})])),_:1},8,["activeKey"]),f(Y,{onRegister:b(E),onReload:ie},null,8,["onRegister"]),f(A,{onRegister:b(V),multiple:!0,onChange:ie},null,8,["onRegister"])])),_:1},16,["onRegister","title"])}}});export{W as _};
