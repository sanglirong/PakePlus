import{a as e,u as a,B as t}from"./index-9c138ba5.js";import{g as l}from"./sendConfig-5e58278e.js";import{u as s,B as d}from"./useTable-dc8c9d84.js";import{T as n}from"./TableAction-adbe36f2.js";import{d as o,ad as i,a0 as m,u as r,aD as u,e as c,o as p,g as f,j as g,l as b,k as _,a4 as k,t as y,p as T,q as h,V as C,F as x}from"./index-920db443.js";import{_ as w}from"./Detail.vue_vue_type_script_setup_true_lang-e8c6d5aa.js";const F={class:"msg-pane"},M={class:"list"},N=o({__name:"Detail",setup(o){const N=i({dataForm:{id:"",fullName:"",enCode:"",description:"",enabledMark:1,sortCode:0,messageSource:"",templateType:0,sendConfigTemplateList:[]},messageTypeList:[]}),{dataForm:j}=m(N),{t:L}=r(),v=u(),[I,{changeLoading:R}]=e((function(e){(async function(){N.messageTypeList=await v.getDictionaryData("msgSendType"),N.messageTypeList.map((e=>e.id=e.enCode))})(),N.dataForm.id=e.id||"",N.dataForm.id&&(R(!0),l(N.dataForm.id).then((a=>{R(!1),N.dataForm=a.data,N.dataForm.enabledMark=Number(N.dataForm.enabledMark),N.dataForm.messageSourceName=e.messageSourceName})).catch((()=>{R(!1)})))})),[S,{openPopup:D}]=a(),A=[{title:"消息类型",dataIndex:"messageType",key:"messageType",width:150,customRender:({record:e})=>N.messageTypeList.find((a=>e.messageType==a.enCode)).fullName},{title:"模板编码",dataIndex:"templateCode",width:150},{title:"模板名称",dataIndex:"templateName",width:150},{title:"账号编码",dataIndex:"accountCode",width:150},{title:"账号名称",dataIndex:"accountName",width:150},{title:"状态",dataIndex:"enabledMark",width:70,align:"center"}],[U]=s({columns:A,useSearchForm:!1,pagination:!1,canResize:!1,showTableSetting:!1,actionColumn:{width:150,title:"操作",dataIndex:"action"}});function V(e){return[{label:L("common.detailText"),onClick:z.bind(null,e.templateId)}]}function z(e){D(!0,{id:e,msgTypeList:N.messageTypeList})}return(e,a)=>{const l=c("a-form-item"),s=c("a-col"),o=c("jnpf-switch"),i=c("a-switch"),m=c("a-row"),r=c("a-form");return p(),f(x,null,[g(_(t),C(e.$attrs,{onRegister:_(I),title:_(L)("common.detailText"),"destroy-on-close":""}),{default:b((()=>[g(r,{class:"!mx-20px",colon:!1,model:_(j),labelCol:{style:{width:"100px"}}},{default:b((()=>[g(m,{gutter:20},{default:b((()=>[g(s,{span:12},{default:b((()=>[g(l,{label:"名称",name:"fullName"},{default:b((()=>[k("p",null,y(_(j).fullName),1)])),_:1})])),_:1}),g(s,{span:12},{default:b((()=>[g(l,{label:"编码",name:"enCode"},{default:b((()=>[k("p",null,y(_(j).enCode),1)])),_:1})])),_:1}),g(s,{span:12},{default:b((()=>[g(l,{label:"模板类型"},{default:b((()=>[k("p",null,y("0"==_(j).templateType?"自定义模板":"系统模板"),1)])),_:1})])),_:1}),g(s,{span:12},{default:b((()=>[g(l,{label:"消息来源",name:"messageSource"},{default:b((()=>[k("p",null,y(_(j).messageSourceName),1)])),_:1})])),_:1}),g(s,{span:12},{default:b((()=>[g(l,{label:"排序",name:"sortCode"},{default:b((()=>[k("p",null,y(_(j).sortCode),1)])),_:1})])),_:1}),g(s,{span:12},{default:b((()=>[g(l,{label:"状态",name:"enabledMark"},{default:b((()=>[g(o,{value:_(j).enabledMark,"onUpdate:value":a[0]||(a[0]=e=>_(j).enabledMark=e),disabled:""},null,8,["value"])])),_:1})])),_:1}),g(s,{span:24},{default:b((()=>[g(l,{label:"说明",name:"description"},{default:b((()=>[k("p",null,y(_(j).description),1)])),_:1})])),_:1}),g(s,{span:24},{default:b((()=>[k("div",F,[k("div",M,[g(_(d),{onRegister:_(U),"data-source":_(j).sendConfigTemplateList,size:"small"},{bodyCell:b((({column:e,record:a})=>["enabledMark"===e.key?(p(),T(i,{key:0,checked:a.enabledMark,"onUpdate:checked":e=>a.enabledMark=e,checkedValue:1,unCheckedValue:0,disabled:""},null,8,["checked","onUpdate:checked"])):h("",!0),"action"===e.key?(p(),T(_(n),{key:1,actions:[{label:L("common.editText"),disabled:!0},{label:L("common.delText"),disabled:!0,color:"error"}],dropDownActions:V(a)},null,8,["actions","dropDownActions"])):h("",!0)])),_:1},8,["onRegister","data-source"])])])])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},16,["onRegister","title"]),g(w,{onRegister:_(S)},null,8,["onRegister"])],64)}}});export{N as _};
