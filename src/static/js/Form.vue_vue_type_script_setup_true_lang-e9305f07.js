import{a as e,u as o,c as s}from"./commonWords-8e03a6e1.js";import{b as a,B as t}from"./index-143f5813.js";import{u as n,B as m}from"./useForm-1d28ee0b.js";import"./componentMap-c91676b4.js";import{d as i,ad as r,a0 as l,u as d,M as c,k as u,e as p,o as f,p as y,l as T,g,j as b,ae as h,q as W,V as x,ah as v}from"./index-920db443.js";const C={key:0,class:"float-left mt-5px"},j=i({__name:"Form",emits:["register","reload"],setup(i,{emit:j}){const k=j,N=r({id:"",submitType:0,commonWordsType:0,systemNames:[],isContinue:!1}),{id:w,submitType:F}=l(N),[M,{setFieldsValue:V,resetFields:R,validate:S}]=n({schemas:[{field:"commonWordsText",label:"常用语",component:"Input",componentProps:{placeholder:"请输入",maxlength:50},rules:[{required:!0,trigger:"blur",message:"必填"}]},{field:"sortCode",label:"排序",defaultValue:0,component:"InputNumber",componentProps:{min:0,max:999999},ifShow:({values:e})=>0===e.commonWordsType},{field:"enabledMark",label:"状态",defaultValue:1,component:"Switch"},{field:"commonWordsType",label:"类型",defaultValue:0,component:"InputNumber",ifShow:!1}]}),[_,{closeModal:I,changeLoading:q,changeOkLoading:B}]=a((function(o){N.submitType=0,q(!0),B(!1),N.systemNames=[],N.isContinue=!1,R(),N.id=o.id,N.id?e(N.id).then((e=>{V(e.data),N.systemNames=e.data.systemNames||[],N.commonWordsType=e.data.commonWordsType||0,q(!1)})):(V({commonWordsType:o.commonWordsType||0}),N.commonWordsType=o.commonWordsType||0,q(!1))})),{createMessage:L}=v(),{t:O}=d(),P=c((()=>u(w)?O("common.editText"):O("common.addText")));async function J(){const e=await S();if(!e)return;B(!0);const a={...e,id:N.id};(N.id?o:s)(a).then((e=>{L.success(e.msg),B(!1),1==N.submitType?(R(),V({commonWordsType:N.commonWordsType||0}),N.isContinue=!0):(I(),k("reload"))})).catch((()=>{B(!1)}))}function U(){N.isContinue&&k("reload")}return(e,o)=>{const s=p("JnpfCheckboxSingle");return f(),y(u(t),x(e.$attrs,{onRegister:u(_),title:P.value,onOk:J,onCancel:U}),{insertFooter:T((()=>[u(w)?W("",!0):(f(),g("div",C,[b(s,{value:u(F),"onUpdate:value":o[0]||(o[0]=e=>h(F)?F.value=e:null),label:"确定并新增"},null,8,["value"])]))])),default:T((()=>[b(u(m),{onRegister:u(M)},null,8,["onRegister"])])),_:1},16,["onRegister","title"])}}});export{j as _};
