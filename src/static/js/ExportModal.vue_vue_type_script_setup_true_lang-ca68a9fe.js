import{b as e,B as a}from"./index-143f5813.js";import{e as l}from"./employee-882117ce.js";import{d as u,r as t,e as o,o as n,p as d,l as i,j as s,m as r,a4 as m,g as f,F as v,h as c,t as p,V as g,k as h,ea as N,ah as _}from"./index-920db443.js";const k=u({__name:"ExportModal",setup(u){const[k,{closeModal:x,changeOkLoading:y}]=e((function(e){j.value=0,M.value=w.value.map((e=>e.id)),R(M.value),U.value=e.listQuery})),{createMessage:b}=_(),j=t(0),C=t(!1),T=t(!1),w=t([{fullName:"工号",id:"enCode"},{fullName:"姓名",id:"fullName"},{fullName:"性别",id:"gender"},{fullName:"部门",id:"departmentName"},{fullName:"岗位",id:"positionName"},{fullName:"用工性质",id:"workingNature"},{fullName:"身份证号",id:"idNumber"},{fullName:"联系电话",id:"telephone"},{fullName:"出生年月",id:"birthday"},{fullName:"参加工作",id:"attendWorkTime"},{fullName:"最高学历",id:"education"},{fullName:"所学专业",id:"major"},{fullName:"毕业院校",id:"graduationAcademy"},{fullName:"毕业时间",id:"graduationTime"},{fullName:"创建时间",id:"creatorTime"}]),M=t([]),O=t([]),U=t({});function A(e){const a=e.target.checked;M.value=a?w.value.map((e=>e.id)):O.value,C.value=!a&&!!O.value.length}function R(e){const a=e.length;T.value=a===w.value.length,C.value=!!a&&a<w.value.length}function B(){if(!M.value.length)return b.warning("请至少选择一个导出字段");y(!0);let e={...U.value,dataType:j.value,selectKey:M.value.join(",")};l(e).then((e=>{y(!1),e.data.url&&(N({url:e.data.url}),x())})).catch((()=>{y(!1)}))}return(e,l)=>{const u=o("a-radio"),t=o("a-radio-group"),N=o("a-form-item"),_=o("a-checkbox"),x=o("a-checkbox-group"),y=o("a-form");return n(),d(h(a),g(e.$attrs,{onRegister:h(k),title:"导出",okText:"导出",onOk:B,destroyOnClose:"",class:"export-modal"}),{default:i((()=>[s(y,{colon:!1,labelAlign:"left",labelCol:{style:{width:"90px"}}},{default:i((()=>[s(N,null,{default:i((()=>[s(t,{value:j.value,"onUpdate:value":l[0]||(l[0]=e=>j.value=e)},{default:i((()=>[s(u,{value:0},{default:i((()=>l[3]||(l[3]=[r("当前页面数据")]))),_:1,__:[3]}),s(u,{value:1},{default:i((()=>l[4]||(l[4]=[r("全部页面数据")]))),_:1,__:[4]})])),_:1},8,["value"])])),_:1}),l[6]||(l[6]=m("div",{class:"export-line"},[m("p",{class:"export-label"},[r("导出数据"),m("span",null,"请选择导出字段")])],-1)),s(_,{indeterminate:C.value,checked:T.value,"onUpdate:checked":l[1]||(l[1]=e=>T.value=e),onChange:A},{default:i((()=>l[5]||(l[5]=[r("全选")]))),_:1,__:[5]},8,["indeterminate","checked"]),s(x,{value:M.value,"onUpdate:value":l[2]||(l[2]=e=>M.value=e),class:"options-list",onChange:R},{default:i((()=>[(n(!0),f(v,null,c(w.value,(e=>(n(),d(_,{key:e.id,value:e.id,class:"options-item"},{default:i((()=>[r(p(e.fullName),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1,__:[6]})])),_:1},16,["onRegister"])}}});export{k as _};
