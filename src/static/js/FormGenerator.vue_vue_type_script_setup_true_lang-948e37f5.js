import{d as defineComponent,dF as DeleteOutlined,u as useI18n,j as createVNode,e as resolveComponent,m as createTextVNode,Y as isVNode,r as ref,o as openBlock,p as createBlock,l as withCtx,g as createElementBlock,F as Fragment,q as createCommentVNode,t as toDisplayString,k as unref,fG as getDataTypeText,a4 as createBaseVNode,V as mergeProps,ah as useMessage,e1 as _sfc_main$15,s as inject,M as computed,ad as reactive,a0 as toRefs,n as nextTick,c as cloneDeep,h as renderList,fH as getMenuSelectorFormTree,fE as getDataInterfaceInfo,bn as buildUUID,fI as TreeSelect,eg as buildBitUUID,fJ as defaultMaskOptions,aN as ModalClose,ae as isRef,i as withDirectives,v as vShow,aH as Modal,fK as useTextMask,bN as DownOutlined,ec as getDictionaryDataSelector,dn as getParamList,ci as getDataInterfaceRes,aY as useDebounceFn,a5 as _export_sfc,a7 as onMounted,bb as h,ef as PlusOutlined,af as normalizeClass,aa as resolveDynamicComponent,cd as useGeneratorStore,fL as mergeNumberOfExps,fM as validExp,aw as useGlobSetting,fh as AMapLoader,fN as getInputTips,fO as getSignatureSelector,U as useAttrs,w as watch,aS as normalizeProps,aT as guardReactiveProps,ab as ScrollContainer,fl as getDictionaryTypeSelector,di as defHttp,aD as useBaseStore,dz as LoadingOutlined,T as useDesign,K as provide,dC as isUrl}from"./index-920db443.js";import{d as draggable}from"./vuedraggable.umd-11acc51f.js";import{i as inputComponents,s as selectComponents,a as systemComponents,l as layoutComponents,f as formConf}from"./componentMap-a7ede5fc.js";import{c as noAllowSelectList,e as noAllowRelationList,f as noTableAllowList,g as noVModelList,v as vModelIgnoreList}from"./config-06ca91cd.js";import{r as render,_ as _sfc_main$19}from"./Parser.vue_vue_type_script_lang-80b37b11.js";import{C as CopyOutlined}from"./CopyOutlined-8d46c8b2.js";import{b as getDataModelInfo,c as addTableFields,a as getDataModelFieldList}from"./dataModel-ea807f46.js";import{n as getPrintDevSelector}from"./jquery-6353a699.js";import{b as useModalInner,B as BasicModal,u as useModal}from"./index-143f5813.js";import{M as MonacoEditor}from"./index-3b5bee70.js";import{_ as _sfc_main$16}from"./InitiatorUserSelect.vue_vue_type_script_setup_true_lang-dfa9afb0.js";import{v as getVisualDevSelector,w as getFormDataFields,c as getConfigDataByMenuId,a as getConfigData,x as getAiInfo}from"./visualDev-8f54ab4b.js";import{a as InterfaceModal,B as BillRuleModal}from"./index-c37d2476.js";import{t as templateJsonColumns,i as interfaceSystemOptions,s as sourceTypeOptions}from"./define-8efdf20f.js";import{_ as _sfc_main$17,a as _sfc_main$18}from"./ComplexHeaderModal.vue_vue_type_style_index_0_lang-cb4acf18.js";import{B as BatchOperate}from"./BatchOperate-c1982233.js";import{a as SelectInterfaceBtn}from"./index-7e2f1b8c.js";import{F as FormOutlined}from"./useTable-dc8c9d84.js";import{A as ArrowLeftOutlined}from"./ArrowLeftOutlined-3fbf15bc.js";import{S as Sortable}from"./sortable.esm-02d0fe44.js";import{u as upperFirst}from"./upperFirst-2cd1a2f7.js";import{u as useForm,B as BasicForm}from"./useForm-1d28ee0b.js";import"./componentMap-c91676b4.js";import{f as formValidate}from"./formValidate-c8ab8d29.js";import{b as buildAiFields}from"./aiUtils-9712c454.js";import{u as useRedo}from"./useRedo-dab275e6.js";const index="",rightPanel="",_imports_0="/static/png/emptyElement-43246a1a.png";function _isSlot(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!isVNode(e)}const _sfc_main$14=defineComponent({inheritAttrs:!1,components:{CopyOutlined:CopyOutlined,DeleteOutlined:DeleteOutlined,draggable:draggable,render:render},props:["element","index","drawingList","activeId","formConf","showType"],setup(e,{attrs:t}){const{t:a}=useI18n();let o={};const l=["text","link","alert","groupTitle","button","barcode","qrcode"],n={itemBtns(o,l,n,i=!1){const c="colFormItem"===o.__config__?.layout&&e.formConf?.gutter?e.formConf.gutter:0,{onCopyItem:r,onDeleteItem:d}=t;return createVNode("div",{class:"drawing-item-action",style:{"--rightDistance":c+10+"px"}},[((e,a)=>{const{onAddRow:o,onAddCol:l}=t;return a?[createVNode("span",{class:"drawing-item-action-item drawing-item-add-row",title:"插入行",onClick:t=>{o(e),t.stopPropagation()}},[createVNode("i",{class:"icon-ym icon-ym-generator-insertRow"},null)]),createVNode("span",{class:" drawing-item-action-item drawing-item-add-col",title:"插入列",onClick:t=>{l(e),t.stopPropagation()}},[createVNode("i",{class:"icon-ym icon-ym-generator-insertCol"},null)])]:null})(o,i),createVNode("span",{class:"drawing-item-action-item drawing-item-copy",title:a("common.copyText"),onClick:e=>{r(o,n),e.stopPropagation()}},[createVNode(resolveComponent("copy-outlined"),null,null)]),createVNode(resolveComponent("a-popconfirm"),{title:a("formGenerator.delComponentTip"),class:"drawing-item-action-item drawing-item-delete",onConfirm:e=>{d(l,n)}},{default:()=>[createVNode("span",{title:a("common.delText")},[createVNode(resolveComponent("delete-outlined"),null,null)])]})])},cellSetting(e,a,o){const{onHandleTableSetting:l,onHandleShowMenu:n,mergeLeftColDisabled:i,mergeRightColDisabled:c,mergeWholeRowDisabled:r,mergeAboveRowDisabled:d,mergeBelowRowDisabled:s,mergeWholeColDisabled:_,undoMergeRowDisabled:u,undoMergeColDisabled:p,deleteWholeColDisabled:f,deleteWholeRowDisabled:m}=t,v={overlay:()=>createVNode(resolveComponent("a-menu"),{onClick:({key:t})=>{l(t,e)}},{default:()=>[createVNode(resolveComponent("a-menu-item"),{key:"1"},{default:()=>[createTextVNode("插入左侧列")]}),createVNode(resolveComponent("a-menu-item"),{key:"2"},{default:()=>[createTextVNode("插入右侧列")]}),createVNode(resolveComponent("a-menu-item"),{key:"3"},{default:()=>[createTextVNode("插入上方行")]}),createVNode(resolveComponent("a-menu-item"),{key:"4"},{default:()=>[createTextVNode("插入下方行")]}),createVNode(resolveComponent("a-menu-divider"),null,null),createVNode(resolveComponent("a-menu-item"),{key:"5",disabled:i},{default:()=>[createTextVNode("向左合并")]}),createVNode(resolveComponent("a-menu-item"),{key:"6",disabled:c},{default:()=>[createTextVNode("向右合并")]}),createVNode(resolveComponent("a-menu-item"),{key:"7",disabled:r},{default:()=>[createTextVNode("合并整行")]}),createVNode(resolveComponent("a-menu-divider"),null,null),createVNode(resolveComponent("a-menu-item"),{key:"8",disabled:d},{default:()=>[createTextVNode("向上合并")]}),createVNode(resolveComponent("a-menu-item"),{key:"9",disabled:s},{default:()=>[createTextVNode("向下合并")]}),createVNode(resolveComponent("a-menu-item"),{key:"10",disabled:_},{default:()=>[createTextVNode("合并整列")]}),createVNode(resolveComponent("a-menu-divider"),null,null),createVNode(resolveComponent("a-menu-item"),{key:"11",disabled:u},{default:()=>[createTextVNode("撤销行合并")]}),createVNode(resolveComponent("a-menu-item"),{key:"12",disabled:p},{default:()=>[createTextVNode("撤销列合并")]}),createVNode(resolveComponent("a-menu-divider"),null,null),createVNode(resolveComponent("a-menu-item"),{key:"13",disabled:f},{default:()=>[createTextVNode("删除整列")]}),createVNode(resolveComponent("a-menu-item"),{key:"14",disabled:m},{default:()=>[createTextVNode("删除整行")]})]})};return[createVNode("span",{class:"drawing-item-cell"},[createVNode(resolveComponent("a-dropdown"),{trigger:"click",onOpenChange:t=>{t&&n(e,a,o)}},{default:()=>[createVNode("i",{class:"icon-ym icon-ym-generator-TableSettings"},null)],...v})])]}},i={colFormItem(a,o,i){const{onActiveItem:c}=t,r=a.__config__,d=e.activeId===r.formId?"drawing-item active-from-item":"drawing-item",s=e.formConf.labelWidth;let _={};if("top"!==e.formConf.labelPosition&&r.showLabel){const e=(r.labelWidth||s)+"px";_={style:{width:e}}}"location"==r.jnpfKey&&(a.useAutoLocation=!1);const u="app"!==e.showType||l.includes(r.jnpfKey)?createVNode(render,{key:r.renderKey,conf:a,size:a.size?a.size:e.formConf.size,"onUpdate:value":e=>{r.defaultValue=e}},null):createVNode("span",null,[a.__vModel__]);let p=null;r.label&&r.tipLabel&&(p=createVNode(resolveComponent("BasicHelp"),{text:r.tipLabel},null));const f=!r.isSubTable&&e.formConf.labelSuffix?e.formConf.labelSuffix:"",m={label:()=>r.showLabel?createVNode("span",null,[r.label?r.label+f:"",p]):null};return createVNode(resolveComponent("a-col"),{class:d,span:"app"===e.showType?24:r.span,"data-draggable":!0,draggable:!1,onClick:e=>{c(a),e.stopPropagation()}},{default:()=>[createVNode(resolveComponent("a-form-item"),{required:r.required,labelCol:_},{default:()=>[u],...m}),n.itemBtns(a,o,i)]})},rowFormItem(a,l,i){const{onActiveItem:d,put:s,end:_}=t,u=a.__config__,p=e.activeId===u.formId?"drawing-row-item active-from-item":"drawing-row-item";if("tab"===u.jnpfKey){let t;return createVNode(resolveComponent("a-col"),{span:"app"===e.showType?24:u.span,"data-draggable":!0,draggable:!1,onClick:e=>{d(a),e.stopPropagation()}},{default:()=>[createVNode(resolveComponent("a-row"),{class:p},{default:()=>[createVNode(resolveComponent("a-tabs"),{type:a.type,size:e.formConf.size,tabPosition:"app"===e.showType?"top":a.tabPosition,activeKey:u.active,"onUpdate:activeKey":e=>u.active=e},_isSlot(t=u.children.map((t=>{const a={name:"componentsGroup",put:(...e)=>s(...e,t)},l=(...e)=>_(...e,o,t),n={item:({element:e,index:a})=>r(e,a,t.__config__.children)};let i=null;return t.__config__.children.length||(i=createVNode("div",{class:"row-tip"},[createTextVNode("请将组件拖到此区域(可拖多个组件)")])),createVNode(resolveComponent("a-tab-pane"),{key:t.name,tab:t.title},{default:()=>[createVNode(resolveComponent("a-col"),null,{default:()=>[i,createVNode(resolveComponent("a-row"),{gutter:e.formConf.gutter||15},{default:()=>[createVNode(draggable,{modelValue:t.__config__.children,"onUpdate:modelValue":e=>t.__config__.children=e,"item-key":"renderKey",animation:300,group:a,onEnd:l,class:"drag-wrapper",style:"padding-top:12px"},n)]})]})]})})))?t:{default:()=>[t]}),n.itemBtns(a,l,i)]})]})}if("collapse"===u.jnpfKey){let t;return createVNode(resolveComponent("a-col"),{span:"app"===e.showType?24:u.span,"data-draggable":!0,draggable:!1,onClick:e=>{d(a),e.stopPropagation()}},{default:()=>[createVNode(resolveComponent("a-row"),{class:p},{default:()=>[createVNode(resolveComponent("a-collapse"),{ghost:!0,expandIconPosition:"end",accordion:a.accordion,activeKey:u.active,"onUpdate:activeKey":e=>u.active=e},_isSlot(t=u.children.map((t=>{const a={name:"componentsGroup",put:(...e)=>s(...e,t)},l=(...e)=>_(...e,o,t),n={item:({element:e,index:a})=>r(e,a,t.__config__.children)};let i=null;return t.__config__.children.length||(i=createVNode("div",{class:"row-tip"},[createTextVNode("请将组件拖到此区域(可拖多个组件)")])),createVNode(resolveComponent("a-collapse-panel"),{key:t.name,header:t.title},{default:()=>[createVNode(resolveComponent("a-col"),null,{default:()=>[i,createVNode(resolveComponent("a-row"),{gutter:e.formConf.gutter||15},{default:()=>[createVNode(draggable,{modelValue:t.__config__.children,"onUpdate:modelValue":e=>t.__config__.children=e,"item-key":"renderKey",animation:300,group:a,onEnd:l,class:"drag-wrapper"},n)]})]})]})})))?t:{default:()=>[t]}),n.itemBtns(a,l,i)]})]})}if("steps"===u.jnpfKey){let t;return createVNode(resolveComponent("a-col"),{span:"app"===e.showType?24:u.span,"data-draggable":!0,draggable:!1,onClick:e=>{d(a),e.stopPropagation()}},{default:()=>[createVNode(resolveComponent("a-row"),{class:p},{default:()=>[createVNode("div",{class:"w-full p-10px"},[createVNode(resolveComponent("a-steps"),{size:e.formConf.size,type:a.simple?"navigation":"default",status:a.processStatus,current:u.active,"onUpdate:current":e=>u.active=e},_isSlot(t=u.children.map((e=>{const t={};return e.icon&&(t.icon=()=>createVNode("span",{class:e.icon+" custom-icon"},null)),createVNode(resolveComponent("a-step"),{title:e.title},t)})))?t:{default:()=>[t]}),u.children.map(((t,a)=>{const l={name:"componentsGroup",put:(...e)=>s(...e,t)},n=(...e)=>_(...e,o,t),i={item:({element:e,index:a})=>r(e,a,t.__config__.children)};let c=null;return t.__config__.children.length||(c=createVNode("div",{class:"row-tip"},[createTextVNode("请将组件拖到此区域(可拖多个组件)")])),u.active!=a?null:createVNode(resolveComponent("a-col"),null,{default:()=>[c,createVNode(resolveComponent("a-row"),{gutter:e.formConf.gutter||15},{default:()=>[createVNode(draggable,{modelValue:t.__config__.children,"onUpdate:modelValue":e=>t.__config__.children=e,"item-key":"renderKey",animation:300,group:l,onEnd:n,class:"drag-wrapper",style:"padding-top:12px"},i)]})]})}))]),n.itemBtns(a,l,i)]})]})}if("tableGrid"===a.__config__.jnpfKey)return"app"===e.showType?createVNode(resolveComponent("a-col"),{span:24,"data-draggable":!0,draggable:!1},{default:()=>[createVNode(resolveComponent("a-row"),{gutter:a.__config__.gutter,class:p+" pt-30px",onClick:e=>{d(a),e.stopPropagation()}},{default:()=>[createVNode("span",{class:"component-name"},[u.label]),createVNode("div",{class:"drag-wrapper tableGrid-app-wrapper"},[createVNode("div",{class:"row-tip"},[createTextVNode("请在桌面端设计表格（移动端不支持）")])]),n.itemBtns(a,l,i)]})]}):createVNode(resolveComponent("a-col"),{span:u.span,"data-draggable":!0,draggable:!1},{default:()=>[createVNode(resolveComponent("a-row"),{class:p+" drawing-row-item-row drawing-row-item-table-grid",onClick:e=>{d(a),e.stopPropagation()}},{default:()=>[createVNode("table",{class:"table-grid"},[createVNode("tbody",null,[a.__config__.children.map(((t,l)=>createVNode("tr",null,[t.__config__.children.map(((t,i)=>{const c={item:({element:e,index:a})=>r(e,a,t.__config__.children)};let u={name:"componentsGroup",put:(...e)=>s(...e,t)};const p=(...e)=>_(...e,o,t),f=e.activeId===t.__config__.formId?"drawing-row-item active-from-item":"drawing-row-item";return t.__config__.merged?"":createVNode("td",{class:f,colspan:t.__config__.colspan||1,rowspan:t.__config__.rowspan||1,onClick:e=>{d(t),e.stopPropagation()}},[createVNode(resolveComponent("a-col"),null,{default:()=>[createVNode(resolveComponent("a-row"),null,{default:()=>[createVNode(draggable,{modelValue:t.__config__.children,"onUpdate:modelValue":e=>t.__config__.children=e,"item-key":"renderKey",animation:300,group:u,onEnd:p,class:"drag-wrapper table-cell"},c)]})]}),n.cellSetting(a,l,i)])}))])))])]),n.itemBtns(a,l,i,!0)]})]});const f={name:"componentsGroup",put:(...e)=>s(...e,a)},m=(...e)=>_(...e,o,a),v={item:({element:e,index:t})=>r(e,t,u.children)};let h=null;if(u.children.length||(h=createVNode("div",{class:"row-tip"},[createTextVNode("请将组件拖到此区域(可拖多个组件)")])),"row"===u.jnpfKey||"app"===e.showType&&"card"===u.jnpfKey)return createVNode(resolveComponent("a-col"),{span:"app"===e.showType?24:u.span,"data-draggable":!0,draggable:!1,onClick:e=>{d(a),e.stopPropagation()}},{default:()=>[createVNode(resolveComponent("a-row"),{class:p+" drawing-row-item-row"},{default:()=>[createVNode("span",{class:"component-name"},["card"===u.jnpfKey?u.label:u.componentName]),createVNode(resolveComponent("a-col"),null,{default:()=>[createVNode(resolveComponent("a-row"),{gutter:e.formConf.gutter||15,class:"child-drawing-row"},{default:()=>[h,createVNode(draggable,{modelValue:u.children,"onUpdate:modelValue":e=>u.children=e,"item-key":"renderKey",animation:300,group:f,onEnd:m,class:"drag-wrapper",style:"padding-top:30px"},v)]})]}),n.itemBtns(a,l,i)]})]});if("table"===u.jnpfKey){let t=null;return u.label&&u.tipLabel&&(t=createVNode(resolveComponent("BasicHelp"),{text:u.tipLabel},null)),createVNode(resolveComponent("a-col"),{span:"app"===e.showType?24:u.span,"data-draggable":!0,draggable:!1,onClick:e=>{d(a),e.stopPropagation()}},{default:()=>[createVNode(resolveComponent("a-row"),{class:p+" drawing-row-item-table"},{default:()=>[createVNode("span",{class:"component-name"},[u.label,t]),h,createVNode(resolveComponent("a-form"),{colon:!1,layout:"app"===e.showType?"top"===e.formConf.labelPosition?"vertical":"horizontal":"vertical",labelAlign:"right"===e.formConf.labelPosition?"right":"left"},{default:()=>[createVNode(draggable,{modelValue:u.children,"onUpdate:modelValue":e=>u.children=e,"item-key":"renderKey",animation:300,group:f,onEnd:m,clone:c,class:"drag-wrapper table-wrapper "+("app"===e.showType?"":"table-wrapper-web")},v)]}),n.itemBtns(a,l,i)]})]})}if("card"===u.jnpfKey){let t=null;u.tipLabel&&(t=createVNode(resolveComponent("BasicHelp"),{text:u.tipLabel},null));const o={title:()=>a.header?createVNode("span",null,[a.header,t]):null};return createVNode(resolveComponent("a-col"),{span:"app"===e.showType?24:u.span,"data-draggable":!0,draggable:!1,onClick:e=>{d(a),e.stopPropagation()}},{default:()=>[createVNode(resolveComponent("a-row"),{class:p},{default:()=>[createVNode(resolveComponent("a-card"),{size:e.formConf.size,hoverable:"hover"===a.shadow},{default:()=>[createVNode(resolveComponent("a-col"),null,{default:()=>[createVNode(resolveComponent("a-row"),{gutter:e.formConf.gutter||15,class:"child-drawing-row"},{default:()=>[h,createVNode(draggable,{modelValue:u.children,"onUpdate:modelValue":e=>u.children=e,"item-key":"renderKey",animation:300,group:f,onEnd:m,class:"drag-wrapper"},v)]})]})],...o}),n.itemBtns(a,l,i)]})]})}return null}};function c(e){return o=e,e}function r(e,t,a){const o=i[e.__config__.layout];return o?o(e,t,a):null}return()=>{const t=i[e.element.__config__.layout];return t?t(e.element,e.index,e.drawingList):null}}}),_sfc_main$13=defineComponent({__name:"FieldModal",emits:["register","updateOptions"],setup(e,{emit:t}){const a=[{fullName:"字符串",id:"varchar"},{fullName:"整型",id:"int"},{fullName:"日期时间",id:"datetime"},{fullName:"浮点",id:"decimal"},{fullName:"长整型",id:"bigint"},{fullName:"文本",id:"text"}],o=t,[l,{changeLoading:n,changeOkLoading:i,closeModal:c}]=useModalInner((function(e){d.value=e.linkId,n(!0),getDataModelInfo(e.linkId,e.tableName).then((e=>{s.value={...e.data.tableInfo,newTable:e.data.tableInfo.table};let t=e.data.tableFieldList.map(((e,t)=>({...e,index:t,primaryKey:!!e.primaryKey,allowNull:!!e.allowNull,disabled:!0})));_.value=t,n(!1)}))})),{createMessage:r}=useMessage(),d=ref(""),s=ref({}),_=ref([]),u=[{width:50,title:"序号",align:"center",customRender:({index:e})=>e+1},{title:"列名",dataIndex:"field",key:"field"},{title:"类型",dataIndex:"dataType",key:"dataType"},{title:"长度",dataIndex:"dataLength",key:"dataLength"},{title:"允许空",dataIndex:"allowNull",key:"allowNull",align:"center",width:80},{title:"说明",dataIndex:"fieldName",key:"fieldName"},{title:"操作",dataIndex:"action",key:"action",width:50}];async function p(){const e=_.value.filter((e=>!e.disabled));if(!e.length)return r.error("请至少新增一个字段");if(!function(){let e=!0;for(let t=0;t<_.value.length;t++){const a=_.value[t];if(a.disabled)continue;if(!a.field){r.error(`第${t+1}行列名不能为空`),e=!1;break}const o=/^\d+,?\d*$/;if(!/(^_([a-zA-Z0-9]_?)*$)|(^[a-zA-Z](_?[a-zA-Z0-9])*_?$)/.test(a.field)){r.error(`第${t+1}行列名格式错误，请重新输入`),e=!1;break}if(_.value.filter((e=>e.field==a.field)).length>1){r.error(`第${t+1}行列名'${a.field}'已重复`),e=!1;break}if("decimal"==a.dataType&&!o.test(a.dataLength)){r.error(`第${t+1}行请输入数字`),e=!1;break}if(!a.fieldName){r.error(`第${t+1}行说明不能为空`),e=!1;break}}return e}())return;i(!0);const t={tableFieldList:e.map((e=>({...e,primaryKey:e.primaryKey?1:0,allowNull:e.allowNull?1:0}))),tableInfo:s.value};addTableFields(unref(d),t).then((e=>{r.success(e.msg),i(!1),c(),o("updateOptions",_.value)})).catch((()=>{i(!1)}))}return(e,t)=>{const o=resolveComponent("a-checkbox"),n=resolveComponent("a-input"),i=resolveComponent("a-input-number"),c=resolveComponent("jnpf-select"),r=resolveComponent("a-button"),d=resolveComponent("a-table");return openBlock(),createBlock(unref(BasicModal),mergeProps(e.$attrs,{onRegister:unref(l),title:"字段设置",width:1e3,onOk:p,class:"field-modal"}),{default:withCtx((()=>[createVNode(d,{"data-source":_.value,columns:u,size:"small",pagination:!1,scroll:{y:"calc(70vh - 93px)"}},{bodyCell:withCtx((({column:e,record:l,index:d})=>[l.disabled?(openBlock(),createElementBlock(Fragment,{key:0},[["primaryKey","allowNull"].includes(e.key)?(openBlock(),createBlock(o,{key:0,checked:l[e.key]},null,8,["checked"])):createCommentVNode("",!0),"dataType"===e.key?(openBlock(),createElementBlock(Fragment,{key:1},[createTextVNode(toDisplayString(unref(getDataTypeText)(l[e.key])),1)],64)):createCommentVNode("",!0)],64)):(openBlock(),createElementBlock(Fragment,{key:1},["field"===e.key?(openBlock(),createBlock(n,{key:0,value:l.field,"onUpdate:value":e=>l.field=e,placeholder:"请输入",maxlength:50},null,8,["value","onUpdate:value"])):createCommentVNode("",!0),"dataLength"===e.key?(openBlock(),createElementBlock(Fragment,{key:1},["decimal"==l.dataType?(openBlock(),createBlock(n,{key:0,value:l.dataLength,"onUpdate:value":e=>l.dataLength=e,placeholder:"请输入"},null,8,["value","onUpdate:value"])):(openBlock(),createBlock(i,{key:1,value:l.dataLength,"onUpdate:value":e=>l.dataLength=e,placeholder:"请输入",disabled:"varchar"!==l.dataType&&"decimal"!==l.dataType},null,8,["value","onUpdate:value","disabled"]))],64)):createCommentVNode("",!0),"dataType"===e.key?(openBlock(),createBlock(c,{key:2,value:l.dataType,"onUpdate:value":e=>l.dataType=e,placeholder:"请选择",options:a},null,8,["value","onUpdate:value"])):createCommentVNode("",!0),"allowNull"===e.key?(openBlock(),createBlock(o,{key:3,checked:l.allowNull,"onUpdate:checked":e=>l.allowNull=e},null,8,["checked","onUpdate:checked"])):createCommentVNode("",!0),"fieldName"===e.key?(openBlock(),createBlock(n,{key:4,value:l.fieldName,"onUpdate:value":e=>l.fieldName=e,placeholder:"请输入",maxlength:50},null,8,["value","onUpdate:value"])):createCommentVNode("",!0)],64)),"action"===e.key?(openBlock(),createElementBlock(Fragment,{key:2},[l.disabled?createCommentVNode("",!0):(openBlock(),createBlock(r,{key:0,class:"action-btn",type:"link",color:"error",onClick:e=>function(e){_.value.splice(e,1)}(d),size:"small"},{default:withCtx((()=>t[1]||(t[1]=[createTextVNode("删除")]))),_:2,__:[1]},1032,["onClick"]))],64)):createCommentVNode("",!0)])),_:1},8,["data-source"]),createBaseVNode("div",{class:"table-add-action",onClick:t[0]||(t[0]=e=>function(e){const t=_.value.length;let a={};a=e?{field:e.field,dataType:e.dataType,dataLength:e.dataLength,allowNull:!!e.allowNull,fieldName:e.fieldName,primaryKey:!1,index:t}:{field:"",dataType:"varchar",dataLength:50,allowNull:!0,primaryKey:!1,fieldName:"",index:t},_.value.push(a)}())},[createVNode(r,{type:"link",preIcon:"icon-ym icon-ym-btn-add"},{default:withCtx((()=>t[2]||(t[2]=[createTextVNode("新增一行")]))),_:1,__:[2]})])])),_:1},16,["onRegister"])}}}),FieldModal_vue_vue_type_style_index_0_lang="",_hoisted_1$o={class:"form-script-modal-body"},_hoisted_2$n={class:"left-board"},_hoisted_3$g={class:"main-board"},_hoisted_4$f={class:"main-board-editor"},_hoisted_5$a={class:"main-board-tips"},_sfc_main$12=defineComponent({__name:"FormScript",props:["treeTitle","drawingList","type"],emits:["register","confirm"],setup(e,{emit:t}){const a=e,o=t,[l,{closeModal:n}]=useModalInner((function(e){r.value=e.text,function(){let e=[];const t=(a,o)=>{if(a&&(a.__config__&&"table"!==a.__config__.jnpfKey&&a.__config__.children&&Array.isArray(a.__config__.children)&&t(a.__config__.children),Array.isArray(a)&&a.forEach((e=>t(e))),a.__vModel__))if("table"===a.__config__.jnpfKey){let t={id:a.__vModel__,fullName:a.__config__.label,children:[]},o=[];if(a.__config__.children&&Array.isArray(a.__config__.children)&&a.__config__.children.length)for(let e=0;e<a.__config__.children.length;e++){const t=a.__config__.children[e];t.__vModel__&&o.push({id:a.__vModel__+"."+t.__vModel__,fullName:t.__config__.label})}t.children=o,e.push(t)}else e.push({id:a.__vModel__,fullName:a.__config__.label})};t(unref(a.drawingList));const o={id:(+new Date).toString(),fullName:a.treeTitle,top:!0,children:e};d.value=[o]}()})),i=ref(null),c=ref(null),r=ref(""),d=ref([]);function s(e){if(!e.length)return;const t=unref(c),a=t?.getSelectedNode(e[0]);a.top||a.children||i.value?.insert(e[0])}function _(){o("confirm",r.value),n()}return(t,a)=>(openBlock(),createBlock(unref(BasicModal),mergeProps(t.$attrs,{onRegister:unref(l),title:"表单脚本",helpMessage:"小程序不支持在线JS脚本",width:1e3,onOk:_,destroyOnClose:"",class:"form-script-modal"}),{default:withCtx((()=>[createBaseVNode("div",_hoisted_1$o,[createBaseVNode("div",_hoisted_2$n,[createVNode(unref(_sfc_main$15),{ref_key:"leftTreeRef",ref:c,class:"remove-active-tree",treeData:d.value,defaultExpandAll:"",onSelect:s},null,8,["treeData"])]),createBaseVNode("div",_hoisted_3$g,[createBaseVNode("div",_hoisted_4$f,[createVNode(unref(MonacoEditor),{ref_key:"editorRef",ref:i,modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=e=>r.value=e)},null,8,["modelValue"])]),createBaseVNode("div",_hoisted_5$a,[createBaseVNode("p",null,[a[1]||(a[1]=createTextVNode("请从左侧面板选择的字段名，支持JavaScript的脚本，")),createVNode(_sfc_main$16,{type:e.type},null,8,["type"])])])])])])),_:1},16,["onRegister"]))}}),orgList=["organizeSelect","depSelect","posSelect","userSelect","usersSelect","groupSelect","roleSelect"],systemList=["createUser","createTime","modifyUser","modifyTime","currOrganize","currPosition","billRule"],layoutList=["groupTitle","divider","collapse","tab","row","card","table","link","button","text","alert","tableGrid","tableGridTr","tableGridTd","steps"],noWithList=[...layoutList,"switch","radio","checkbox","uploadFile","uploadImg","colorPicker","rate","qrcode","barcode","editor"],_sfc_main$11=defineComponent({__name:"StylePane",props:["activeData","formConf","drawingList","formInfo","dbType"],setup(e){const t={2:2,4:4,6:6,8:8,10:10,12:12,14:14,16:16,18:18,20:20,22:22,24:24},a=[{id:"pc",fullName:"Web"},{id:"app",fullName:"App"}],o=[{id:"pc",fullName:"Web"}],l=[{id:"none",fullName:"无"},{id:"left",fullName:"左冻结"},{id:"right",fullName:"右冻结"}],n=[{id:"left",fullName:"左对齐"},{id:"center",fullName:"居中对齐"},{id:"right",fullName:"右对齐"}],i=e,c=inject("getShowType"),r=computed((()=>c())),d=computed((()=>unref(i.activeData).__config__)),s=computed((()=>unref(i.activeData).__config__?.jnpfKey)),_=computed((()=>unref(i.formConf).classNames.map((e=>({id:e,fullName:e}))))),u=computed((()=>"iframe"==unref(s)?o:a));return(a,o)=>{const i=resolveComponent("jnpf-checkbox"),c=resolveComponent("a-form-item"),p=resolveComponent("a-divider"),f=resolveComponent("jnpf-radio"),m=resolveComponent("a-input-number"),v=resolveComponent("a-slider"),h=resolveComponent("BasicHelp"),g=resolveComponent("a-input"),C=resolveComponent("jnpf-select"),N=resolveComponent("a-form");return openBlock(),createBlock(N,{colon:!1,layout:"vertical",class:"right-board-form"},{default:withCtx((()=>[createVNode(c,{label:"多端显示"},{default:withCtx((()=>[createVNode(i,{value:e.activeData.__config__.visibility,"onUpdate:value":o[0]||(o[0]=t=>e.activeData.__config__.visibility=t),options:u.value},null,8,["value","options"])])),_:1}),d.value.isSubTable&&"pc"===r.value?(openBlock(),createElementBlock(Fragment,{key:0},[createVNode(p,{class:"!mt-0"},{default:withCtx((()=>o[8]||(o[8]=[createTextVNode("表格布局配置")]))),_:1,__:[8]}),createVNode(c,{label:"冻结方式"},{default:withCtx((()=>[createVNode(f,{value:e.activeData.__config__.tableFixed,"onUpdate:value":o[1]||(o[1]=t=>e.activeData.__config__.tableFixed=t),options:l,optionType:"button","button-style":"solid",class:"right-radio"},null,8,["value"])])),_:1}),createVNode(c,{label:"对齐方式"},{default:withCtx((()=>[createVNode(f,{value:e.activeData.__config__.tableAlign,"onUpdate:value":o[2]||(o[2]=t=>e.activeData.__config__.tableAlign=t),options:n,optionType:"button","button-style":"solid",class:"right-radio"},null,8,["value"])])),_:1}),createVNode(c,{label:"列宽度"},{default:withCtx((()=>[createVNode(m,{value:e.activeData.__config__.columnWidth,"onUpdate:value":o[3]||(o[3]=t=>e.activeData.__config__.columnWidth=t),placeholder:"请输入",min:0},null,8,["value"])])),_:1}),createVNode(p,null,{default:withCtx((()=>o[9]||(o[9]=[createTextVNode("平铺布局配置")]))),_:1,__:[9]})],64)):createCommentVNode("",!0),createVNode(c,{label:"控件栅格"},{default:withCtx((()=>[createVNode(v,{value:e.activeData.__config__.span,"onUpdate:value":o[4]||(o[4]=t=>e.activeData.__config__.span=t),max:24,min:2,step:2,marks:t},null,8,["value"])])),_:1}),unref(layoutList).includes(s.value)?createCommentVNode("",!0):(openBlock(),createBlock(c,{key:1,label:"标题宽度"},{default:withCtx((()=>[createVNode(m,{value:e.activeData.__config__.labelWidth,"onUpdate:value":o[5]||(o[5]=t=>e.activeData.__config__.labelWidth=t),placeholder:"请输入",min:0},null,8,["value"])])),_:1})),!unref(noWithList).includes(s.value)&&e.activeData.style&&"pc"===r.value?(openBlock(),createBlock(c,{key:2},{label:withCtx((()=>[o[10]||(o[10]=createTextVNode(" 控件宽度 ")),createVNode(h,{text:"支持%和px两种宽度设置"})])),default:withCtx((()=>[createVNode(g,{value:e.activeData.style.width,"onUpdate:value":o[6]||(o[6]=t=>e.activeData.style.width=t),placeholder:"请输入"},null,8,["value"])])),_:1})):createCommentVNode("",!0),createVNode(c,null,{label:withCtx((()=>[o[11]||(o[11]=createTextVNode("控件Class")),createVNode(h,{text:"不支持代码生成"})])),default:withCtx((()=>[createVNode(C,{value:e.activeData.__config__.className,"onUpdate:value":o[7]||(o[7]=t=>e.activeData.__config__.className=t),multiple:"",allowClear:"",options:_.value,showSearch:""},null,8,["value","options"])])),_:1})])),_:1})}}}),_hoisted_1$n={class:"form-script-modal-body"},_hoisted_2$m={class:"main-board"},_hoisted_3$f={class:"main-board-editor"},_sfc_main$10=defineComponent({__name:"StyleScript",emits:["register","confirm"],setup(e,{emit:t}){const a=t,[o,{closeModal:l}]=useModalInner((function(e){i.value=e.text})),n=ref(null),i=ref("");function c(){a("confirm",i.value),l()}return(e,t)=>(openBlock(),createBlock(unref(BasicModal),mergeProps(e.$attrs,{onRegister:unref(o),title:"表单样式",width:1e3,onOk:c,destroyOnClose:"",class:"form-script-modal"}),{default:withCtx((()=>[createBaseVNode("div",_hoisted_1$n,[createBaseVNode("div",_hoisted_2$m,[createBaseVNode("div",_hoisted_3$f,[createVNode(unref(MonacoEditor),{ref_key:"editorRef",ref:n,modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),language:"css"},null,8,["modelValue"])]),t[1]||(t[1]=createBaseVNode("div",{class:"main-board-tips"},[createBaseVNode("p",null,"示例："),createBaseVNode("p",null,".text {"),createBaseVNode("p",{style:{"text-indent":"2em"}},"background-color: #fff;"),createBaseVNode("p",{style:{"text-indent":"2em"}},"font-size: 18px;"),createBaseVNode("p",null,"}")],-1))])])])),_:1},16,["onRegister"]))}}),_sfc_main$$=defineComponent({__name:"BusinessKeyCfgModal",emits:["register","confirm"],setup(e,{emit:t}){const a=t,o=ref(),l=reactive({dataForm:{businessKeyList:[],businessKeyTip:""},formRules:{businessKeyList:[{required:!0,message:"必填",trigger:"change",type:"array"}],businessKeyTip:[{required:!0,message:"必填",trigger:"change"}]},options:[]}),{dataForm:n,formRules:i,options:c}=toRefs(l),[r,{closeModal:d}]=useModalInner((function(e){(function(e){let t=[];const a=(e,o)=>{e&&(e.__config__&&"table"!==e.__config__?.jnpfKey&&e.__config__.children&&Array.isArray(e.__config__.children)&&a(e.__config__.children),Array.isArray(e)&&e.forEach((e=>a(e))),e.__vModel__&&s.includes(e.__config__.jnpfKey)&&t.push({id:e.__vModel__,fullName:e.__config__.label}))};a(e),t=t.filter((e=>e.id.indexOf("_jnpf_")<0)),l.options=t})(e.drawingList||[]),nextTick((()=>{o.value?.clearValidate(),l.dataForm.businessKeyList=e.businessKeyList,l.dataForm.businessKeyTip=e.businessKeyTip}))})),s=["input","textarea","inputNumber","radio","checkbox","select","cascader","treeSelect","datePicker","timePicker","organizeSelect","depSelect","posSelect","groupSelect","roleSelect","userSelect","usersSelect","areaSelect","location"];async function _(){try{if(!(await(o.value?.validate())))return;a("confirm",{...l.dataForm}),d()}catch(e){}}return(e,t)=>{const a=resolveComponent("jnpf-select"),l=resolveComponent("a-form-item"),d=resolveComponent("jnpf-input"),s=resolveComponent("a-form");return openBlock(),createBlock(unref(BasicModal),mergeProps(e.$attrs,{onRegister:unref(r),title:"规则设置",onOk:_,minHeight:100}),{default:withCtx((()=>[createVNode(s,{colon:!1,labelCol:{style:{width:"80px"}},model:unref(n),rules:unref(i),ref_key:"formElRef",ref:o},{default:withCtx((()=>[t[2]||(t[2]=createBaseVNode("p",{class:"business-tip"},"选择需要设为业务主键的表单字段",-1)),createVNode(l,{label:"联合字段",name:"businessKeyList"},{default:withCtx((()=>[createVNode(a,{value:unref(n).businessKeyList,"onUpdate:value":t[0]||(t[0]=e=>unref(n).businessKeyList=e),options:unref(c),multiple:"",showSearch:""},null,8,["value","options"])])),_:1}),createVNode(l,{label:"提示语",name:"businessKeyTip"},{default:withCtx((()=>[createVNode(d,{value:unref(n).businessKeyTip,"onUpdate:value":t[1]||(t[1]=e=>unref(n).businessKeyTip=e),placeholder:"请输入"},null,8,["value"])])),_:1})])),_:1,__:[2]},8,["model","rules"])])),_:1},16,["onRegister"])}}}),BusinessKeyCfgModal_vue_vue_type_style_index_0_lang="",_hoisted_1$m={class:"required-sign"},_hoisted_2$l={class:"form-script-editor"},_hoisted_3$e={class:"form-script-tips"},_hoisted_4$e={class:"required-sign"},_sfc_main$_=defineComponent({__name:"CustomBtnCfg",emits:["register","confirm"],setup(e,{emit:t}){const a=t,{createMessage:o}=useMessage(),{t:l}=useI18n(),[n,{closeModal:i}]=useModalInner((function(e){_.value=e.showType||"pc",u.item=e.data,u.dataForm={...cloneDeep(s),...cloneDeep(e.data.actionConfig),label:e.data.label,labelI18nCode:e.data.labelI18nCode},function(e){let t=[];const a=(e,o)=>{e&&(e.__config__&&"table"!==e.__config__?.jnpfKey&&e.__config__.children&&Array.isArray(e.__config__.children)&&a(e.__config__.children),Array.isArray(e)&&e.forEach((e=>a(e))),e.__vModel__&&!y.includes(e.__config__.jnpfKey)&&t.push({id:e.__vModel__,fullName:e.__config__.label}))};a(e),h.value=t,g.value=[{fullName:"@表单ID",id:"@formId"},...h.value]}(e.drawingList||[]),function(e){let t=[];const a=(e,o)=>{if(e&&(e.__config__&&e.__config__.children&&Array.isArray(e.__config__.children)&&a(e.__config__.children,e),Array.isArray(e)&&e.forEach((e=>a(e,o))),e.__vModel__&&"table"!=e.__config__.jnpfKey)){const a=o&&o.__config__&&"table"===o.__config__.jnpfKey;t.push({id:a?o.__vModel__+"-"+e.__vModel__:e.__vModel__,fullName:a?o.__config__.label+"-"+e.__config__.label:e.__config__.label,__config__:{isSubTable:e.__config__.isSubTable}})}};a(e),C.value=[{fullName:"@表单ID",id:"@formId"},...t]}(e.drawingList||[]),getVisualDevSelector({type:1,webType:"1,2",enableFlow:0,isRelease:1}).then((e=>{m.value=e.data.list})),b()})),c=[{id:"dialog",fullName:"居中弹窗"},{id:"drawer",fullName:"右侧弹窗"}],r=["600px","800px","1000px","40%","50%","60%","70%","80%"],d=[{width:50,title:"序号",align:"center",customRender:({index:e})=>e+1},{title:"当前表单值",dataIndex:"currentField",key:"currentField",width:250},{title:"赋值给",dataIndex:"type",key:"type",align:"center"},{title:"弹窗表单值",dataIndex:"field",key:"field",width:250},{title:"操作",dataIndex:"action",key:"action",width:50}],s={btnType:1,modelId:"",popupTitle:"自定义操作",popupType:"dialog",popupWidth:"800px",formOptions:[],customBtn:!1,func:"({ data, onlineUtils }) => {\r\n   \r\n}",interfaceId:"",interfaceName:"",templateJson:[],useConfirm:!1,confirmTitle:"此操作将通过接口处理",label:"",labelI18nCode:"",launchFlow:{flowId:"",flowName:"",currentUser:1,customUser:0,initiator:[],transferList:[],formFieldList:[]}},_=ref("pc"),u=reactive({dataForm:cloneDeep(s),formRules:{label:[{required:!0,message:"必填",trigger:"change"}],btnType:[{required:!0,message:"必填",trigger:"change"}],modelId:[{required:!0,message:"必填",trigger:"change"}],popupTitle:[{required:!0,message:"必填",trigger:"change"}],interfaceId:[{required:!0,message:"必填",trigger:"change"}],confirmTitle:[{required:!0,message:"必填",trigger:"change"}]},item:{}}),{dataForm:p,formRules:f}=toRefs(u),m=ref([]),v=ref([]),h=ref([]),g=ref([]),C=ref([]),N=ref(),y=noAllowSelectList.filter((e=>"billRule"!=e));function V(){u.dataForm={...u.dataForm,modelId:"",popupTitle:"自定义操作",popupType:"dialog",popupWidth:"800px",formOptions:[],customBtn:!1,func:"({ data, onlineUtils }) => {\r\n   \r\n}",interfaceId:"",interfaceName:"",templateJson:[],useConfirm:!1,confirmTitle:"此操作将通过接口处理",isRefresh:!1},u.dataForm.formOptions=[],u.dataForm.templateJson=[],v.value=[],N.value?.clearValidate()}function k(e){u.dataForm.formOptions=u.dataForm.formOptions.map((e=>({...e,field:""}))),u.dataForm.templateJson=u.dataForm.templateJson.map((e=>({...e,relationField:1===e.sourceType?"":e.relationField}))),e?b():v.value=[]}function b(){u.dataForm.modelId&&getFormDataFields(u.dataForm.modelId,1).then((e=>{v.value=e.data.list.map((e=>({...e,id:e.vmodel,fullName:e.label})))}))}function w(e){e&&(u.dataForm.modelId||o.warning("请先选择关联功能"))}function x(e,t){if(!e)return u.dataForm.interfaceId="",u.dataForm.interfaceName="",void(u.dataForm.templateJson=[]);u.dataForm.interfaceId!==e&&(u.dataForm.interfaceId=e,u.dataForm.interfaceName=t.fullName,u.dataForm.templateJson=t.templateJson?t.templateJson.map((e=>({...e,relationField:"",sourceType:1}))):[])}async function D(){try{if(!(await(N.value?.validate())))return;if(1==u.dataForm.btnType){if(!u.dataForm.formOptions.length)return o.warning("赋值规则不能为空");for(let e=0;e<u.dataForm.formOptions.length;e++){const t=u.dataForm.formOptions[e];if(!t.currentField)return o.warning(`赋值规则第${e+1}行当前表单值不能为空`);if(!t.field)return o.warning(`赋值规则第${e+1}行弹窗表单值不能为空`)}}if(4==u.dataForm.btnType){const e=u.dataForm.launchFlow;if(!e.transferList.length)return o.warning("请至少设置一个字段");for(let t=0;t<e.transferList.length;t++){const a=e.transferList[t];if(!a.targetField)return o.warning(`第${t+1}行目标表单值不能为空`);if(!a.sourceValue)return o.warning(`第${t+1}行值不能为空`)}if(e.customUser&&!e.initiator?.length)return o.warning("请选择自定义发起人")}const e=cloneDeep(u.dataForm);u.item.label=e.label,u.item.labelI18nCode=e.labelI18nCode,delete e.label,delete e.labelI18nCode,u.item.actionConfig=e,a("confirm",u.item),i()}catch(e){}}function B(e){e.relationField=4==e.sourceType?interfaceSystemOptions[0]?.id:""}function T(e){return e?sourceTypeOptions.filter((e=>3!=e.id)):sourceTypeOptions}return(e,t)=>{const a=resolveComponent("jnpf-i18n-input"),o=resolveComponent("a-form-item"),i=resolveComponent("jnpf-group-title"),s=resolveComponent("a-radio"),y=resolveComponent("a-radio-group"),b=resolveComponent("jnpf-tree-select"),U=resolveComponent("a-input"),I=resolveComponent("jnpf-select"),F=resolveComponent("a-select-option"),M=resolveComponent("a-select"),S=resolveComponent("a-button"),$=resolveComponent("a-table"),L=resolveComponent("a-switch"),R=resolveComponent("jnpf-input-number"),A=resolveComponent("jnpf-date-picker"),j=resolveComponent("a-form");return openBlock(),createBlock(unref(BasicModal),mergeProps(e.$attrs,{onRegister:unref(n),title:"按钮事件配置",helpMessage:"小程序不支持在线JS脚本",width:800,onOk:D,destroyOnClose:"",class:"btn-event-modal"}),{default:withCtx((()=>[createVNode(j,{colon:!1,labelAlign:"left",labelCol:{style:{width:"90px"}},model:unref(p),rules:unref(f),ref_key:"formElRef",ref:N,hideRequiredMark:""},{default:withCtx((()=>[createVNode(o,{label:"按钮名称",name:"label"},{default:withCtx((()=>[createVNode(a,{value:unref(p).label,"onUpdate:value":t[0]||(t[0]=e=>unref(p).label=e),i18n:unref(p).labelI18nCode,"onUpdate:i18n":t[1]||(t[1]=e=>unref(p).labelI18nCode=e),placeholder:"请输入",maxlength:10},null,8,["value","i18n"])])),_:1}),createVNode(i,{content:"动作设置",bordered:!1}),createVNode(o,{label:"类型选择",name:"btnType"},{default:withCtx((()=>[createVNode(y,{value:unref(p).btnType,"onUpdate:value":t[2]||(t[2]=e=>unref(p).btnType=e),onChange:V},{default:withCtx((()=>[createVNode(s,{value:1},{default:withCtx((()=>t[12]||(t[12]=[createTextVNode("弹窗配置")]))),_:1,__:[12]}),createVNode(s,{value:2},{default:withCtx((()=>t[13]||(t[13]=[createTextVNode("JS脚本")]))),_:1,__:[13]}),createVNode(s,{value:3},{default:withCtx((()=>t[14]||(t[14]=[createTextVNode("数据接口")]))),_:1,__:[14]}),createVNode(s,{value:4},{default:withCtx((()=>t[15]||(t[15]=[createTextVNode("发起审批")]))),_:1,__:[15]})])),_:1},8,["value"])])),_:1}),1==unref(p).btnType?(openBlock(),createElementBlock(Fragment,{key:0},[createVNode(o,{label:"选择表单",name:"modelId"},{default:withCtx((()=>[createVNode(b,{value:unref(p).modelId,"onUpdate:value":t[3]||(t[3]=e=>unref(p).modelId=e),options:m.value,placeholder:"请选择",lastLevel:"",allowClear:"",onChange:k},null,8,["value","options"])])),_:1}),createVNode(o,{label:"弹窗标题",name:"popupTitle"},{default:withCtx((()=>[createVNode(U,{value:unref(p).popupTitle,"onUpdate:value":t[4]||(t[4]=e=>unref(p).popupTitle=e),placeholder:"请输入",allowClear:""},null,8,["value"])])),_:1}),"pc"===_.value?(openBlock(),createBlock(o,{key:0,label:"弹窗类型",name:"popupType"},{default:withCtx((()=>[createVNode(I,{value:unref(p).popupType,"onUpdate:value":t[5]||(t[5]=e=>unref(p).popupType=e),placeholder:"请选择",options:c},null,8,["value"])])),_:1})):createCommentVNode("",!0),"pc"===_.value?(openBlock(),createBlock(o,{key:1,label:"弹窗宽度",name:"popupWidth"},{default:withCtx((()=>[createVNode(M,{value:unref(p).popupWidth,"onUpdate:value":t[6]||(t[6]=e=>unref(p).popupWidth=e)},{default:withCtx((()=>[(openBlock(),createElementBlock(Fragment,null,renderList(r,(e=>createVNode(F,{key:e,value:e},{default:withCtx((()=>[createTextVNode(toDisplayString(e),1)])),_:2},1032,["value"]))),64))])),_:1},8,["value"])])),_:1})):createCommentVNode("",!0),createVNode(o,{label:"赋值规则",style:{"margin-bottom":"0"}}),createVNode($,{"data-source":unref(p).formOptions,columns:d,size:"small",pagination:!1},{bodyCell:withCtx((({column:e,record:a,index:o})=>["currentField"===e.key?(openBlock(),createBlock(I,{key:0,value:a.currentField,"onUpdate:value":e=>a.currentField=e,placeholder:"请选择",options:g.value,fieldNames:{options:"options1"},allowClear:"",showSearch:""},null,8,["value","onUpdate:value","options"])):createCommentVNode("",!0),"type"===e.key?(openBlock(),createElementBlock(Fragment,{key:1},[createTextVNode("赋值给")],64)):createCommentVNode("",!0),"field"===e.key?(openBlock(),createBlock(I,{key:2,value:a.field,"onUpdate:value":e=>a.field=e,placeholder:"请选择",options:v.value,showSearch:"",onDropdownVisibleChange:w},null,8,["value","onUpdate:value","options"])):createCommentVNode("",!0),"action"===e.key?(openBlock(),createBlock(S,{key:3,class:"action-btn",type:"link",color:"error",onClick:e=>function(e){u.dataForm.formOptions.splice(e,1)}(o),size:"small"},{default:withCtx((()=>t[16]||(t[16]=[createTextVNode("删除")]))),_:2,__:[16]},1032,["onClick"])):createCommentVNode("",!0)])),emptyText:withCtx((()=>t[17]||(t[17]=[createBaseVNode("p",{class:"leading-60px"},"暂无数据",-1)]))),_:1},8,["data-source"]),createBaseVNode("div",{class:"table-add-action mb-20px",onClick:t[7]||(t[7]=e=>{u.dataForm.formOptions.push({currentField:"",field:""})})},[createVNode(S,{type:"link",preIcon:"icon-ym icon-ym-btn-add"},{default:withCtx((()=>[createTextVNode(toDisplayString(unref(l)("common.add2Text")),1)])),_:1})]),createVNode(o,{label:"自定义按钮事件",labelCol:{style:{width:"110px"}}},{default:withCtx((()=>[createVNode(L,{checked:unref(p).customBtn,"onUpdate:checked":t[8]||(t[8]=e=>unref(p).customBtn=e)},null,8,["checked"]),t[18]||(t[18]=createBaseVNode("span",{class:"tip"},"（开启后，弹窗中按钮事件失效，调用接口事件。）",-1))])),_:1,__:[18]}),unref(p).customBtn?(openBlock(),createElementBlock(Fragment,{key:2},[createVNode(o,{label:"数据接口",name:"interfaceId"},{default:withCtx((()=>[createVNode(unref(InterfaceModal),{value:unref(p).interfaceId,title:unref(p).interfaceName,sourceType:3,onChange:x},null,8,["value","title"])])),_:1}),createVNode(o,{label:"参数设置",style:{"margin-bottom":"0"}}),createVNode($,{"data-source":unref(p).templateJson,columns:unref(templateJsonColumns),size:"small",pagination:!1,class:"mb-20px"},{bodyCell:withCtx((({column:e,record:t})=>["field"===e.key?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("span",_hoisted_1$m,toDisplayString(t.required?"*":""),1),createTextVNode(" "+toDisplayString(t.field)+toDisplayString(t.fieldName?"("+t.fieldName+")":""),1)],64)):createCommentVNode("",!0),"sourceType"===e.key?(openBlock(),createBlock(I,{key:1,value:t.sourceType,"onUpdate:value":e=>t.sourceType=e,placeholder:"请选择",options:T(t.required),class:"!w-100px",onChange:e=>B(t)},null,8,["value","onUpdate:value","options","onChange"])):createCommentVNode("",!0),"relationField"===e.key?(openBlock(),createElementBlock(Fragment,{key:2},[1===t.sourceType?(openBlock(),createBlock(I,{key:0,value:t.relationField,"onUpdate:value":e=>t.relationField=e,placeholder:"请选择",options:v.value,allowClear:"",showSearch:"",onDropdownVisibleChange:w},null,8,["value","onUpdate:value","options"])):2==t.sourceType?(openBlock(),createElementBlock(Fragment,{key:1},[["int","decimal"].includes(t.dataType)?(openBlock(),createBlock(R,{key:0,value:t.relationField,"onUpdate:value":e=>t.relationField=e,placeholder:"请输入",allowClear:""},null,8,["value","onUpdate:value"])):"datetime"==t.dataType?(openBlock(),createBlock(A,{key:1,class:"!w-full",value:t.relationField,"onUpdate:value":e=>t.relationField=e,placeholder:"请选择",format:"YYYY-MM-DD HH:mm:ss",allowClear:""},null,8,["value","onUpdate:value"])):(openBlock(),createBlock(U,{key:2,value:t.relationField,"onUpdate:value":e=>t.relationField=e,placeholder:"请输入",allowClear:""},null,8,["value","onUpdate:value"]))],64)):4===t.sourceType?(openBlock(),createBlock(I,{key:2,value:t.relationField,"onUpdate:value":e=>t.relationField=e,placeholder:"请选择",options:unref(interfaceSystemOptions),fieldNames:{options:"options1"},allowClear:"",class:"!w-204px",disabled:t.disabled},null,8,["value","onUpdate:value","options","disabled"])):createCommentVNode("",!0)],64)):createCommentVNode("",!0)])),emptyText:withCtx((()=>t[19]||(t[19]=[createBaseVNode("p",{class:"leading-60px"},"暂无数据",-1)]))),_:1},8,["data-source","columns"])],64)):createCommentVNode("",!0)],64)):createCommentVNode("",!0),2==unref(p).btnType?(openBlock(),createElementBlock(Fragment,{key:1},[createBaseVNode("div",_hoisted_2$l,[createVNode(unref(MonacoEditor),{modelValue:unref(p).func,"onUpdate:modelValue":t[9]||(t[9]=e=>unref(p).func=e)},null,8,["modelValue"])]),createBaseVNode("div",_hoisted_3$e,[createBaseVNode("p",null,[t[20]||(t[20]=createTextVNode("支持JavaScript的脚本，")),createVNode(_sfc_main$16,{type:"childTableBtn"})])])],64)):createCommentVNode("",!0),3==unref(p).btnType?(openBlock(),createElementBlock(Fragment,{key:2},[createVNode(o,{label:"数据接口",name:"interfaceId"},{default:withCtx((()=>[createVNode(unref(InterfaceModal),{value:unref(p).interfaceId,title:unref(p).interfaceName,sourceType:3,onChange:x},null,8,["value","title"])])),_:1}),createVNode(o,{label:"参数设置",style:{"margin-bottom":"0"}}),createVNode($,{"data-source":unref(p).templateJson,columns:unref(templateJsonColumns),size:"small",pagination:!1,class:"mb-20px"},{bodyCell:withCtx((({column:e,record:t})=>["field"===e.key?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("span",_hoisted_4$e,toDisplayString(t.required?"*":""),1),createTextVNode(" "+toDisplayString(t.field)+toDisplayString(t.fieldName?"("+t.fieldName+")":""),1)],64)):createCommentVNode("",!0),"sourceType"===e.key?(openBlock(),createBlock(I,{key:1,value:t.sourceType,"onUpdate:value":e=>t.sourceType=e,placeholder:"请选择",options:T(t.required),class:"!w-100px",onChange:e=>B(t)},null,8,["value","onUpdate:value","options","onChange"])):createCommentVNode("",!0),"relationField"===e.key?(openBlock(),createElementBlock(Fragment,{key:2},[1===t.sourceType?(openBlock(),createBlock(I,{key:0,value:t.relationField,"onUpdate:value":e=>t.relationField=e,placeholder:"请选择",options:h.value,fieldNames:{options:"options1"},allowClear:"",showSearch:""},null,8,["value","onUpdate:value","options"])):2==t.sourceType?(openBlock(),createElementBlock(Fragment,{key:1},[["int","decimal"].includes(t.dataType)?(openBlock(),createBlock(R,{key:0,value:t.relationField,"onUpdate:value":e=>t.relationField=e,placeholder:"请输入",allowClear:""},null,8,["value","onUpdate:value"])):"datetime"==t.dataType?(openBlock(),createBlock(A,{key:1,class:"!w-full",value:t.relationField,"onUpdate:value":e=>t.relationField=e,placeholder:"请选择",format:"YYYY-MM-DD HH:mm:ss",allowClear:""},null,8,["value","onUpdate:value"])):(openBlock(),createBlock(U,{key:2,value:t.relationField,"onUpdate:value":e=>t.relationField=e,placeholder:"请输入",allowClear:""},null,8,["value","onUpdate:value"]))],64)):4===t.sourceType?(openBlock(),createBlock(I,{key:2,value:t.relationField,"onUpdate:value":e=>t.relationField=e,placeholder:"请选择",options:unref(interfaceSystemOptions),fieldNames:{options:"options1"},allowClear:"",class:"!w-204px"},null,8,["value","onUpdate:value","options"])):createCommentVNode("",!0)],64)):createCommentVNode("",!0)])),emptyText:withCtx((()=>t[21]||(t[21]=[createBaseVNode("p",{class:"leading-60px"},"暂无数据",-1)]))),_:1},8,["data-source","columns"]),createVNode(o,{label:"启用确认框"},{default:withCtx((()=>[createVNode(L,{checked:unref(p).useConfirm,"onUpdate:checked":t[10]||(t[10]=e=>unref(p).useConfirm=e)},null,8,["checked"])])),_:1}),unref(p).useConfirm?(openBlock(),createBlock(o,{key:0,name:"confirmTitle"},{default:withCtx((()=>[createVNode(U,{value:unref(p).confirmTitle,"onUpdate:value":t[11]||(t[11]=e=>unref(p).confirmTitle=e),placeholder:"请输入",allowClear:""},null,8,["value"])])),_:1})):createCommentVNode("",!0)],64)):createCommentVNode("",!0),4==unref(p).btnType?(openBlock(),createBlock(_sfc_main$17,{key:3,dataForm:unref(p),allFormFieldsOptions:C.value},null,8,["dataForm","allFormFieldsOptions"])):createCommentVNode("",!0)])),_:1},8,["model","rules"])])),_:1},16,["onRegister"])}}}),_sfc_main$Z=defineComponent({__name:"AddDetailExtraModal",emits:["register","confirm"],setup(e,{emit:t}){const a=reactive({dataForm:{fullName:"",targetFormId:"",currentField:"",targetField:"",formOptions:[]},formRules:{fullName:[{required:!0,message:"必填",trigger:"change"}],targetFormId:[{required:!0,message:"必填",trigger:"change"}],currentField:[{required:!0,message:"必填",trigger:"change"}],targetField:[{required:!0,message:"必填",trigger:"change"}]},formFieldsOptions:[],targetFieldOptions:[],targetFormIdOptions:[]}),{dataForm:o,formRules:l,formFieldsOptions:n,targetFieldOptions:i,targetFormIdOptions:c}=toRefs(a),{t:r}=useI18n(),{createMessage:d}=useMessage(),s=t,_=ref(),[u,{closeModal:p}]=useModalInner((function(e){a.formFieldsOptions=[],a.targetFieldOptions=[],a.targetFormIdOptions=[],void(a.dataForm={fullName:"",targetFormId:"",currentField:"",targetField:"",formOptions:[]}),e.data&&(a.dataForm={...a.dataForm,...e.data});(function(e){let t=[];const o=(e,a)=>{e&&(e.__config__&&"table"!==e.__config__?.jnpfKey&&e.__config__.children&&Array.isArray(e.__config__.children)&&o(e.__config__.children),Array.isArray(e)&&e.forEach((e=>o(e))),e.__vModel__&&!m.includes(e.__config__.jnpfKey)&&t.push({id:e.__vModel__,fullName:e.__config__.label}))};o(e),a.formFieldsOptions=t})(e.drawingList||[]),getMenuSelectorFormTree().then((e=>{a.targetFormIdOptions=e.data||[]})),g(a.dataForm.targetFormId)})),f=[{width:50,title:"序号",align:"center",customRender:({index:e})=>e+1},{title:"主表字段",dataIndex:"currentField",key:"currentField",width:160},{title:"赋值给",dataIndex:"type",key:"type",align:"center",width:70},{title:"页签对象字段",dataIndex:"targetField",key:"targetField",width:160},{title:"操作",dataIndex:"action",key:"action",width:50}],m=noAllowSelectList.filter((e=>"billRule"!=e)),v=computed((()=>a.dataForm.id?r("common.editText"):r("common.addText")));function h(e,t){if(a.dataForm.formOptions=[],a.dataForm.targetField="",a.targetFieldOptions=[],!e)return a.dataForm.TargetFormId="",a.dataForm.TargetFormName="",void(a.dataForm.targetFieldOptions=[]);a.dataForm.TargetFormName=t.fullName,g(e)}function g(e){e&&getConfigDataByMenuId({menuId:e}).then((e=>{const{formData:t,webType:o,interfaceId:l}=e.data;if(a.dataForm.webType=o,4==o)getDataInterfaceInfo(l).then((e=>{const t=e.data;if(1!==t.hasPage){const e=t.fieldJson?JSON.parse(t.fieldJson):[];a.targetFieldOptions=e.map((e=>({id:e.defaultValue,fullName:e.field})))}else{const e=t.parameterJson?JSON.parse(t.parameterJson):[];a.targetFieldOptions=e.map((e=>({id:e.field,fullName:e.fieldName||e.field})))}}));else{let e={},o=[];t&&(e=JSON.parse(t)),o=e.fields||[],a.targetFieldOptions=function(e){let t=[];const a=(e,o)=>{if(e){if(e.__vModel__){if(!("table"===o?.__config__?.jnpfKey)&&!m.includes(e?.__config__?.jnpfKey)){const a={id:e.__vModel__,fullName:e.__config__.label};t.push(a)}}Array.isArray(e)&&e.forEach((e=>a(e,o))),e.__config__&&e.__config__.children&&Array.isArray(e.__config__.children)&&a(e.__config__.children,e)}};return a(e),t}(o)}}))}function C(e){e&&!a.dataForm.targetFormId&&d.warning("请先选择页签对象")}async function N(){try{const e=await(_.value?.validate());if(!e)return;for(let t=0;t<a.dataForm.formOptions.length;t++){const e=a.dataForm.formOptions[t];if(!e.currentField)return d.warning(`字段映射第${t+1}行主表不能为空`);if(!e.targetField)return d.warning(`字段映射第${t+1}行页签对象字段不能为空`)}s("confirm",{...a.dataForm,...e}),p()}catch(e){}}return(e,t)=>{const d=resolveComponent("jnpf-group-title"),s=resolveComponent("jnpf-input"),p=resolveComponent("a-form-item"),m=resolveComponent("jnpf-tree-select"),g=resolveComponent("jnpf-select"),y=resolveComponent("a-button"),V=resolveComponent("a-table"),k=resolveComponent("a-form");return openBlock(),createBlock(unref(BasicModal),mergeProps(e.$attrs,{width:"600px",class:"JNPF-add-detail-extra-Modal",onRegister:unref(u),title:v.value,onOk:N,destroyOnClose:""}),{default:withCtx((()=>[createVNode(k,{colon:!1,labelCol:{style:{width:"100px"}},model:unref(o),rules:unref(l),ref_key:"formElRef",ref:_},{default:withCtx((()=>[createVNode(d,{content:"设置关联查询关系",bordered:!1}),createVNode(p,{label:"页签名称",name:"fullName"},{default:withCtx((()=>[createVNode(s,{value:unref(o).fullName,"onUpdate:value":t[0]||(t[0]=e=>unref(o).fullName=e),placeholder:"请输入"},null,8,["value"])])),_:1}),createVNode(p,{label:"页签对象",name:"targetFormId"},{default:withCtx((()=>[createVNode(m,{value:unref(o).targetFormId,"onUpdate:value":t[1]||(t[1]=e=>unref(o).targetFormId=e),options:unref(c),lastLevel:"",onChange:h},null,8,["value","options"])])),_:1}),createVNode(p,{label:"主表字段",name:"currentField"},{default:withCtx((()=>[createVNode(g,{value:unref(o).currentField,"onUpdate:value":t[2]||(t[2]=e=>unref(o).currentField=e),options:unref(n),fieldNames:{options:"options1"}},null,8,["value","options"])])),_:1}),createVNode(p,{label:"页签对象字段",name:"targetField"},{default:withCtx((()=>[createVNode(g,{value:unref(o).targetField,"onUpdate:value":t[3]||(t[3]=e=>unref(o).targetField=e),options:unref(i),fieldNames:{options:"options1"},onDropdownVisibleChange:C},null,8,["value","options"])])),_:1}),4!=unref(o).webType?(openBlock(),createElementBlock(Fragment,{key:0},[createVNode(d,{content:"设置字段映射关系",bordered:!1}),createVNode(V,{"data-source":unref(o).formOptions,columns:f,size:"small",pagination:!1},{bodyCell:withCtx((({column:e,record:o,index:l})=>["currentField"===e.key?(openBlock(),createBlock(g,{key:0,class:"!w-150px",value:o.currentField,"onUpdate:value":e=>o.currentField=e,options:unref(n),fieldNames:{options:"options1"},allowClear:"",showSearch:""},null,8,["value","onUpdate:value","options"])):createCommentVNode("",!0),"type"===e.key?(openBlock(),createElementBlock(Fragment,{key:1},[createTextVNode("赋值给")],64)):createCommentVNode("",!0),"targetField"===e.key?(openBlock(),createBlock(g,{key:2,class:"!w-150px",value:o.targetField,"onUpdate:value":e=>o.targetField=e,options:unref(i),fieldNames:{options:"options1"},showSearch:"",onDropdownVisibleChange:C},null,8,["value","onUpdate:value","options"])):createCommentVNode("",!0),"action"===e.key?(openBlock(),createBlock(y,{key:3,class:"action-btn",type:"link",color:"error",onClick:e=>function(e){a.dataForm.formOptions.splice(e,1)}(l),size:"small"},{default:withCtx((()=>t[5]||(t[5]=[createTextVNode("删除")]))),_:2,__:[5]},1032,["onClick"])):createCommentVNode("",!0)])),emptyText:withCtx((()=>t[6]||(t[6]=[createBaseVNode("p",{class:"leading-60px"},"暂无数据",-1)]))),_:1},8,["data-source"]),createBaseVNode("div",{class:"table-add-action mb-20px",onClick:t[4]||(t[4]=e=>{a.dataForm.formOptions.push({currentField:"",targetField:""})})},[createVNode(y,{type:"link",preIcon:"icon-ym icon-ym-btn-add"},{default:withCtx((()=>[createTextVNode(toDisplayString(unref(r)("common.add2Text")),1)])),_:1})])],64)):createCommentVNode("",!0)])),_:1},8,["model","rules"])])),_:1},16,["onRegister","title"])}}}),_hoisted_1$l={class:"detail-extra-contain"},_hoisted_2$k={class:"detail-extra-header"},_hoisted_3$d={class:"detail-extra-list"},_hoisted_4$d={class:"name"},_hoisted_5$9={class:"action"},_hoisted_6$9=["onClick"],_hoisted_7$8=["onClick"],_sfc_main$Y=defineComponent({__name:"DetailExtraModal",emits:["register","confirm"],setup(e,{emit:t}){const a=reactive({detailExtraList:[],drawingList:[]}),{detailExtraList:o}=toRefs(a),l=t,[n,{closeModal:i}]=useModalInner((function(e){a.drawingList=cloneDeep(e.drawingList),a.detailExtraList=cloneDeep(e.detailExtraList||[])})),[c,{openModal:r}]=useModal();function d(e){r(!0,{drawingList:a.drawingList,data:e})}function s(e){e.id?a.detailExtraList=a.detailExtraList.map((t=>t.id===e?.id?{...t,...e}:t)):a.detailExtraList.push({...e,id:buildUUID()})}function _(){l("confirm",a.detailExtraList),i()}return(e,t)=>{const a=resolveComponent("a-button"),l=resolveComponent("jnpf-empty");return openBlock(),createElementBlock(Fragment,null,[createVNode(unref(BasicModal),mergeProps(e.$attrs,{width:"600px",class:"JNPF-detail-extra-Modal",onRegister:unref(n),title:"页签管理",onOk:_,destroyOnClose:""}),{default:withCtx((()=>[createBaseVNode("div",_hoisted_1$l,[createBaseVNode("div",_hoisted_2$k,[createVNode(a,{type:"link",preIcon:"icon-ym icon-ym-btn-add",onClick:t[0]||(t[0]=e=>d())},{default:withCtx((()=>t[1]||(t[1]=[createTextVNode("添加")]))),_:1,__:[1]})]),createBaseVNode("div",_hoisted_3$d,[unref(o).length?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(unref(o),((e,a)=>(openBlock(),createElementBlock("div",{class:"detail-extra-item",key:e.id},[createBaseVNode("div",_hoisted_4$d,toDisplayString(e.fullName),1),createBaseVNode("div",_hoisted_5$9,[createBaseVNode("div",{class:"edit-btn custom-line-icon",onClick:t=>d(e)},t[2]||(t[2]=[createBaseVNode("i",{class:"icon-ym icon-ym-btn-edit"},null,-1)]),8,_hoisted_6$9),createBaseVNode("div",{class:"close-btn custom-line-icon ml-5px",onClick:e=>unref(o).splice(a,1)},t[3]||(t[3]=[createBaseVNode("i",{class:"icon-ym icon-ym-btn-clearn"},null,-1)]),8,_hoisted_7$8)])])))),128)):(openBlock(),createBlock(l,{key:1,class:"mt-150px"}))])])])),_:1},16,["onRegister"]),createVNode(_sfc_main$Z,{onRegister:unref(c),onConfirm:s},null,8,["onRegister"])],64)}}}),DetailExtraModal_vue_vue_type_style_index_0_lang="",_hoisted_1$k={class:"btn-config-list"},_hoisted_2$j={class:"btn-cell"},_hoisted_3$c={class:"btn-cell"},_hoisted_4$c={key:0,class:"btn-cell"},_hoisted_5$8={key:2,class:"btn-cell"},_hoisted_6$8={class:"custom-draggable-list"},_hoisted_7$7={class:"custom-draggable-item"},_hoisted_8$6={class:"custom-line-value"},_hoisted_9$4=["onClick"],_hoisted_10$4=["onClick"],_hoisted_11$3={key:0,class:"add-btn"},_sfc_main$X=defineComponent({__name:"FormAttrPane",props:["activeData","formConf","drawingList","formInfo","dbType","printTplOptions"],setup(e){const t=[{id:"large",fullName:"较大"},{id:"middle",fullName:"中等"},{id:"small",fullName:"较小"}],a=[{id:"left",fullName:"左对齐",disabled:!1},{id:"right",fullName:"右对齐",disabled:!1},{id:"top",fullName:"顶部对齐",disabled:!1}],o=[{id:"general",fullName:"居中弹窗"},{id:"drawer",fullName:"右侧弹窗"},{id:"fullScreen",fullName:"全屏弹窗"}],l=[{id:"",fullName:"默认风格"},{id:"word-form",fullName:"公文风格"}],n=[{id:1,fullName:"雪花ID"},{id:2,fullName:"自增长ID"}],i=["600px","800px","1000px","40%","50%","60%","70%","80%"],c=["800px","1000px","1200px","1400px","50%","60%","70%","80%","90%","100%"],r=e,d=inject("getShowType"),s=computed((()=>d())),[_,{openModal:u}]=useModal(),[p,{openModal:f}]=useModal(),[m,{openModal:v}]=useModal(),[h,{openModal:g}]=useModal(),[C,{openModal:N}]=useModal(),y=ref(""),V=computed((()=>{const e=cloneDeep(a);return e[2].disabled="word-form"===r.formConf.formStyle,e})),k=computed((()=>unref(r.formConf).classNames.map((e=>({id:e,fullName:e})))));function b(e){y.value=e,u(!0,{text:unref(r.formConf).funcs[e]})}function w(e){r.formConf.funcs[y.value]=e}function x(e){r.formConf.classJson=e,r.formConf.classNames=function(e){e=e.trim();let t=[];return e.split("}").forEach((e=>{if(e){let a=e.split("{"),o={key:"",value:""},l="";l=a[0].split(" ").length>1?a[0].split(" ")[0]:a[0],l.split(".").length>1&&(l=l.split(".")[1]),l=l.split(":")[0],new RegExp(/^[a-zA-Z]-?.*[a-zA-Z0-9_]*$/).test(l)&&(o.key=l.replace(/\r|\n/gi,"").trim(),o.value=e.replace(/\r|\n/gi,"")+"}",t.push(o))}})),t.map((e=>e.key))}(e)}function D(e){r.formConf.businessKeyList=e.businessKeyList,r.formConf.businessKeyTip=e.businessKeyTip}function B(e){g(!0,{showType:unref(s),drawingList:r.drawingList,data:cloneDeep(e)})}function T(e){r.formConf.customBtns.filter((t=>e.value==t.value)).length?r.formConf.customBtns=r.formConf.customBtns.map((t=>e.value==t.value?e:t)):r.formConf.customBtns.push(e)}function U(e){e&&(r.formConf.popupType="fullScreen")}function I(e){r.formConf.detailExtraList=e||[]}return(a,d)=>{const u=resolveComponent("jnpf-radio"),g=resolveComponent("a-form-item"),y=resolveComponent("a-input-number"),F=resolveComponent("a-input"),M=resolveComponent("jnpf-select"),S=resolveComponent("a-button"),$=resolveComponent("a-select"),L=resolveComponent("a-select-option"),R=resolveComponent("BasicHelp"),A=resolveComponent("a-switch"),j=resolveComponent("a-divider"),O=resolveComponent("a-checkbox"),K=resolveComponent("jnpf-i18n-input"),E=resolveComponent("jnpf-tree-select"),Y=resolveComponent("a-form");return openBlock(),createBlock(Y,{colon:!1,layout:"vertical",class:"right-board-form"},{default:withCtx((()=>[createVNode(g,{label:"表单尺寸"},{default:withCtx((()=>[createVNode(u,{value:e.formConf.size,"onUpdate:value":d[0]||(d[0]=t=>e.formConf.size=t),options:t,optionType:"button","button-style":"solid"},null,8,["value"])])),_:1}),createVNode(g,{label:"标签对齐"},{default:withCtx((()=>[createVNode(u,{value:e.formConf.labelPosition,"onUpdate:value":d[1]||(d[1]=t=>e.formConf.labelPosition=t),options:V.value,optionType:"button","button-style":"solid",class:"right-radio"},null,8,["value","options"])])),_:1}),createVNode(g,{label:"标题宽度"},{default:withCtx((()=>[createVNode(y,{value:e.formConf.labelWidth,"onUpdate:value":d[2]||(d[2]=t=>e.formConf.labelWidth=t),placeholder:"请输入",min:0},null,8,["value"])])),_:1}),createVNode(g,{label:"标题后缀"},{default:withCtx((()=>[createVNode(F,{value:e.formConf.labelSuffix,"onUpdate:value":d[3]||(d[3]=t=>e.formConf.labelSuffix=t),placeholder:"请输入"},null,8,["value"])])),_:1}),createVNode(g,{label:"栅格间隔"},{default:withCtx((()=>[createVNode(y,{value:e.formConf.gutter,"onUpdate:value":d[4]||(d[4]=t=>e.formConf.gutter=t),placeholder:"请输入",min:0},null,8,["value"])])),_:1}),createVNode(g,{label:"弹窗类型"},{default:withCtx((()=>[createVNode(M,{value:e.formConf.popupType,"onUpdate:value":d[5]||(d[5]=t=>e.formConf.popupType=t),options:o,disabled:e.formConf.dataLog},null,8,["value","disabled"])])),_:1}),"fullScreen"===e.formConf.popupType?(openBlock(),createBlock(g,{key:0,label:"页签管理"},{default:withCtx((()=>[createVNode(S,{block:"",onClick:d[6]||(d[6]=e=>{N(!0,{drawingList:r.drawingList,detailExtraList:r.formConf.detailExtraList||[]})})},{default:withCtx((()=>d[35]||(d[35]=[createTextVNode("设置")]))),_:1,__:[35]})])),_:1})):createCommentVNode("",!0),createVNode(g,{label:"表单样式"},{default:withCtx((()=>[createVNode($,{value:e.formConf.formStyle,"onUpdate:value":d[7]||(d[7]=t=>e.formConf.formStyle=t),options:l,fieldNames:{value:"id",label:"fullName"}},null,8,["value"])])),_:1}),"general"===e.formConf.popupType?(openBlock(),createBlock(g,{key:1,label:"表单宽度"},{default:withCtx((()=>[createVNode($,{value:e.formConf.generalWidth,"onUpdate:value":d[8]||(d[8]=t=>e.formConf.generalWidth=t)},{default:withCtx((()=>[(openBlock(),createElementBlock(Fragment,null,renderList(i,(e=>createVNode(L,{key:e,value:e},{default:withCtx((()=>[createTextVNode(toDisplayString(e),1)])),_:2},1032,["value"]))),64))])),_:1},8,["value"])])),_:1})):createCommentVNode("",!0),"fullScreen"===e.formConf.popupType?(openBlock(),createBlock(g,{key:2,label:"表单宽度"},{default:withCtx((()=>[createVNode($,{value:e.formConf.fullScreenWidth,"onUpdate:value":d[9]||(d[9]=t=>e.formConf.fullScreenWidth=t)},{default:withCtx((()=>[(openBlock(),createElementBlock(Fragment,null,renderList(c,(e=>createVNode(L,{key:e,value:e},{default:withCtx((()=>[createTextVNode(toDisplayString(e),1)])),_:2},1032,["value"]))),64))])),_:1},8,["value"])])),_:1})):createCommentVNode("",!0),"drawer"===e.formConf.popupType?(openBlock(),createBlock(g,{key:3,label:"表单宽度"},{default:withCtx((()=>[createVNode($,{value:e.formConf.drawerWidth,"onUpdate:value":d[10]||(d[10]=t=>e.formConf.drawerWidth=t)},{default:withCtx((()=>[(openBlock(),createElementBlock(Fragment,null,renderList(i,(e=>createVNode(L,{key:e,value:e},{default:withCtx((()=>[createTextVNode(toDisplayString(e),1)])),_:2},1032,["value"]))),64))])),_:1},8,["value"])])),_:1})):createCommentVNode("",!0),createVNode(g,null,{label:withCtx((()=>[d[36]||(d[36]=createTextVNode("表单Css")),createVNode(R,{text:"不支持代码生成"})])),default:withCtx((()=>[createVNode(S,{block:"",onClick:d[11]||(d[11]=e=>{f(!0,{text:unref(r.formConf).classJson})})},{default:withCtx((()=>d[37]||(d[37]=[createTextVNode("编写样式")]))),_:1,__:[37]})])),_:1}),createVNode(g,null,{label:withCtx((()=>[d[38]||(d[38]=createTextVNode("表单Class")),createVNode(R,{text:"不支持代码生成"})])),default:withCtx((()=>[createVNode(M,{value:e.formConf.className,"onUpdate:value":d[12]||(d[12]=t=>e.formConf.className=t),multiple:"",allowClear:"",options:k.value,showSearch:""},null,8,["value","options"])])),_:1}),createVNode(g,{label:"主键策略"},{default:withCtx((()=>[createVNode(M,{value:e.formConf.primaryKeyPolicy,"onUpdate:value":d[13]||(d[13]=t=>e.formConf.primaryKeyPolicy=t),options:n,disabled:!!e.formInfo.id},null,8,["value","disabled"])])),_:1}),createVNode(g,null,{label:withCtx((()=>[d[39]||(d[39]=createTextVNode("并发锁定")),createVNode(R,{text:"并发提交表单时候，加乐观锁机制以保证数据提交准确性"})])),default:withCtx((()=>[createVNode(A,{checked:e.formConf.concurrencyLock,"onUpdate:checked":d[14]||(d[14]=t=>e.formConf.concurrencyLock=t)},null,8,["checked"])])),_:1}),createVNode(g,null,{label:withCtx((()=>[d[40]||(d[40]=createTextVNode("逻辑删除")),createVNode(R,{text:"表单是否增加删除标志、删除时间和删除用户字段"})])),default:withCtx((()=>[createVNode(A,{checked:e.formConf.logicalDelete,"onUpdate:checked":d[15]||(d[15]=t=>e.formConf.logicalDelete=t)},null,8,["checked"])])),_:1}),createVNode(g,null,{label:withCtx((()=>[d[41]||(d[41]=createTextVNode("修改记录")),createVNode(R,{text:"启用后，编辑/详情页显示表单修改记录；不支持代码生成"})])),default:withCtx((()=>[createVNode(A,{checked:e.formConf.dataLog,"onUpdate:checked":d[16]||(d[16]=t=>e.formConf.dataLog=t),onChange:U},null,8,["checked"])])),_:1}),createVNode(g,null,{label:withCtx((()=>[d[42]||(d[42]=createTextVNode("业务主键")),createVNode(R,{text:"若表单中一个或多个字段的值与已提交的数据有重复时，不允许提交"})])),default:withCtx((()=>[createVNode(A,{checked:e.formConf.useBusinessKey,"onUpdate:checked":d[17]||(d[17]=t=>e.formConf.useBusinessKey=t)},null,8,["checked"])])),_:1}),e.formConf.useBusinessKey?(openBlock(),createBlock(g,{key:4,label:"校验规则"},{default:withCtx((()=>[createVNode(S,{block:"",onClick:d[18]||(d[18]=e=>{v(!0,{businessKeyList:r.formConf.businessKeyList,businessKeyTip:r.formConf.businessKeyTip,drawingList:r.drawingList})})},{default:withCtx((()=>d[43]||(d[43]=[createTextVNode("规则设置")]))),_:1,__:[43]})])),_:1})):createCommentVNode("",!0),createVNode(j,null,{default:withCtx((()=>d[44]||(d[44]=[createTextVNode("表单按钮")]))),_:1,__:[44]}),createBaseVNode("div",_hoisted_1$k,[createBaseVNode("div",_hoisted_2$j,[createVNode(O,{checked:e.formConf.hasConfirmBtn,"onUpdate:checked":d[19]||(d[19]=t=>e.formConf.hasConfirmBtn=t),disabled:""},{default:withCtx((()=>d[45]||(d[45]=[createTextVNode("确定")]))),_:1,__:[45]},8,["checked"]),createVNode(K,{value:e.formConf.confirmButtonText,"onUpdate:value":d[20]||(d[20]=t=>e.formConf.confirmButtonText=t),i18n:e.formConf.confirmButtonTextI18nCode,"onUpdate:i18n":d[21]||(d[21]=t=>e.formConf.confirmButtonTextI18nCode=t),placeholder:"请输入"},null,8,["value","i18n"])]),createBaseVNode("div",_hoisted_3$c,[createVNode(O,{checked:e.formConf.hasCancelBtn,"onUpdate:checked":d[22]||(d[22]=t=>e.formConf.hasCancelBtn=t),disabled:""},{default:withCtx((()=>d[46]||(d[46]=[createTextVNode("取消")]))),_:1,__:[46]},8,["checked"]),createVNode(K,{value:e.formConf.cancelButtonText,"onUpdate:value":d[23]||(d[23]=t=>e.formConf.cancelButtonText=t),i18n:e.formConf.cancelButtonTextI18nCode,"onUpdate:i18n":d[24]||(d[24]=t=>e.formConf.cancelButtonTextI18nCode=t),placeholder:"请输入"},null,8,["value","i18n"])]),"pc"==s.value?(openBlock(),createElementBlock("div",_hoisted_4$c,[createVNode(O,{checked:e.formConf.hasPrintBtn,"onUpdate:checked":d[25]||(d[25]=t=>e.formConf.hasPrintBtn=t)},{default:withCtx((()=>[d[47]||(d[47]=createTextVNode("打印")),createVNode(R,{text:"启用流程后,操作按钮以流程节点为准"})])),_:1,__:[47]},8,["checked"]),createVNode(K,{value:e.formConf.printButtonText,"onUpdate:value":d[26]||(d[26]=t=>e.formConf.printButtonText=t),i18n:e.formConf.printButtonTextI18nCode,"onUpdate:i18n":d[27]||(d[27]=t=>e.formConf.printButtonTextI18nCode=t),placeholder:"请输入"},null,8,["value","i18n"])])):createCommentVNode("",!0),e.formConf.hasPrintBtn&&"pc"==s.value?(openBlock(),createBlock(g,{key:1,class:"!pl-100px"},{default:withCtx((()=>[createVNode(E,{value:e.formConf.printId,"onUpdate:value":d[28]||(d[28]=t=>e.formConf.printId=t),placeholder:"请选择",multiple:"",options:e.printTplOptions,lastLevel:"",showCheckedStrategy:unref(TreeSelect).SHOW_CHILD},null,8,["value","options","showCheckedStrategy"])])),_:1})):createCommentVNode("",!0),"pc"==s.value?(openBlock(),createElementBlock("div",_hoisted_5$8,[createVNode(O,{class:"!w-full",checked:e.formConf.hasConfirmAndAddBtn,"onUpdate:checked":d[29]||(d[29]=t=>e.formConf.hasConfirmAndAddBtn=t)},{default:withCtx((()=>[d[48]||(d[48]=createTextVNode(" 确定并继续操作")),createVNode(R,{text:"选中后显示“确定并新增”、“确定并继续”、“上一条”、“下一条”按钮"})])),_:1,__:[48]},8,["checked"])])):createCommentVNode("",!0)]),createVNode(j,null,{default:withCtx((()=>[d[49]||(d[49]=createTextVNode("自定义按钮")),createVNode(R,{text:"不支持代码生成"})])),_:1,__:[49]}),createBaseVNode("div",_hoisted_6$8,[createVNode(unref(draggable),{modelValue:e.formConf.customBtns,"onUpdate:modelValue":d[30]||(d[30]=t=>e.formConf.customBtns=t),animation:300,group:"selectItem",handle:".option-drag",itemKey:"value"},{item:withCtx((({element:t,index:a})=>[createBaseVNode("div",_hoisted_7$7,[d[52]||(d[52]=createBaseVNode("div",{class:"custom-line-icon option-drag"},[createBaseVNode("i",{class:"icon-ym icon-ym-darg"})],-1)),createBaseVNode("p",_hoisted_8$6,toDisplayString(t.label),1),createBaseVNode("div",{class:"close-btn custom-line-icon",onClick:t=>e.formConf.customBtns.splice(a,1)},d[50]||(d[50]=[createBaseVNode("i",{class:"icon-ym icon-ym-btn-clearn"},null,-1)]),8,_hoisted_9$4),createBaseVNode("div",{class:"edit-btn custom-line-icon ml-10px",onClick:e=>B(t)},d[51]||(d[51]=[createBaseVNode("i",{class:"icon-ym icon-ym-btn-edit"},null,-1)]),8,_hoisted_10$4)])])),_:1},8,["modelValue"]),e.formConf.customBtns?.length<5?(openBlock(),createElementBlock("div",_hoisted_11$3,[createVNode(S,{type:"link",preIcon:"icon-ym icon-ym-btn-add",onClick:d[31]||(d[31]=e=>{B({value:"btn_"+buildBitUUID(),label:"",labelI18nCode:"",show:!0,actionConfig:{}})})},{default:withCtx((()=>d[53]||(d[53]=[createTextVNode("添加按钮")]))),_:1,__:[53]})])):createCommentVNode("",!0)]),e.formConf.funcs?(openBlock(),createElementBlock(Fragment,{key:5},[createVNode(j,null,{default:withCtx((()=>[d[54]||(d[54]=createTextVNode("脚本事件")),createVNode(R,{text:"不支持代码生成"})])),_:1,__:[54]}),createVNode(g,{label:"onLoad"},{default:withCtx((()=>[createVNode(S,{block:"",onClick:d[32]||(d[32]=e=>b("onLoad"))},{default:withCtx((()=>d[55]||(d[55]=[createTextVNode("表单加载触发")]))),_:1,__:[55]})])),_:1}),createVNode(g,{label:"beforeSubmit"},{default:withCtx((()=>[createVNode(S,{block:"",onClick:d[33]||(d[33]=e=>b("beforeSubmit"))},{default:withCtx((()=>d[56]||(d[56]=[createTextVNode("提交前置触发")]))),_:1,__:[56]})])),_:1}),createVNode(g,{label:"afterSubmit"},{default:withCtx((()=>[createVNode(S,{block:"",onClick:d[34]||(d[34]=e=>b("afterSubmit"))},{default:withCtx((()=>d[57]||(d[57]=[createTextVNode("提交后置触发")]))),_:1,__:[57]})])),_:1})],64)):createCommentVNode("",!0),createVNode(_sfc_main$12,{type:"form",onRegister:unref(_),treeTitle:e.formInfo.fullName,drawingList:e.drawingList,onConfirm:w},null,8,["onRegister","treeTitle","drawingList"]),createVNode(_sfc_main$10,{onRegister:unref(p),onConfirm:x},null,8,["onRegister"]),createVNode(_sfc_main$$,{onRegister:unref(m),onConfirm:D},null,8,["onRegister"]),createVNode(_sfc_main$_,{onRegister:unref(h),onConfirm:T},null,8,["onRegister"]),createVNode(_sfc_main$Y,{onRegister:unref(C),onConfirm:I},null,8,["onRegister"])])),_:1})}}}),_sfc_main$W=defineComponent({__name:"MaskConfigModal",emits:["confirm"],setup(e,{expose:t,emit:a}){const o=a;t({openModal:function(e){r.visible=!0,r.isMask=!1,r.testText="",r.formData=cloneDeep(e),f.value?.resetFields()}});const l=[{id:"*",fullName:"*"},{id:"●",fullName:"●"},{id:"-",fullName:"-"},{id:".",fullName:"."},{id:"#",fullName:"#"}],n=[{id:1,fullName:"全掩盖"},{id:2,fullName:"姓名-显示前1个字，后1个字"},{id:3,fullName:"手机号-显示前3位，后4位"},{id:4,fullName:"邮箱-显示前3个字，@和之后的字"},{id:5,fullName:"身份证-显示前6位，后3位，虚拟为4位"},{id:6,fullName:"IP地址-显示第1段IP"},{id:7,fullName:"车牌号-显示前1个字，后2位"},{id:8,fullName:"银行卡号-显示前6位，后4位"},{id:0,fullName:"自定义规则"}],i=[{id:1,fullName:"不显示"},{id:2,fullName:"指定字数"},{id:3,fullName:"指定字符之前的字"},{id:4,fullName:"指定字符和之前的字"}],c=[{id:1,fullName:"不显示"},{id:2,fullName:"指定字数"},{id:3,fullName:"指定字符之后的字"},{id:4,fullName:"指定字符和之后的字"}],r=reactive({visible:!1,formData:defaultMaskOptions,rules:{fullName:[{required:!0,message:"必填"}],id:[{required:!0,message:"必填"}]},testText:"",originTestText:"",isMask:!1}),{visible:d,formData:s,rules:_,testText:u,isMask:p}=toRefs(r),f=ref();function m(){r.visible=!1}async function v(){try{r.visible=!1,o("confirm",r.formData)}catch(e){}}function h(e,t){if(!e)return"unrealMaskLength"===t?r.formData[t]=1:void(r.formData[t]=0)}return(e,t)=>{const a=resolveComponent("jnpf-select"),o=resolveComponent("a-form-item"),g=resolveComponent("a-input-number"),C=resolveComponent("a-input"),N=resolveComponent("BasicHelp"),y=resolveComponent("a-switch"),V=resolveComponent("a-divider"),k=resolveComponent("a-form");return openBlock(),createBlock(unref(Modal),{open:unref(d),"onUpdate:open":t[17]||(t[17]=e=>isRef(d)?d.value=e:null),title:"掩码设置",centered:"",maskClosable:!1,keyboard:!1,width:600,onOk:v,class:"mask-config-modal"},{closeIcon:withCtx((()=>[createVNode(ModalClose,{canFullscreen:!1,onCancel:m})])),default:withCtx((()=>[createVNode(k,{ref_key:"formRef",ref:f,model:unref(s),rules:unref(_),"label-col":{style:{width:"80px"}},colon:!1,hideRequiredMark:""},{default:withCtx((()=>[createVNode(o,{label:"填充符号",name:"filler"},{default:withCtx((()=>[createVNode(a,{value:unref(s).filler,"onUpdate:value":t[0]||(t[0]=e=>unref(s).filler=e),placeholder:"请选择",options:l},null,8,["value"])])),_:1}),createVNode(o,{label:"掩码规则",name:"maskType"},{default:withCtx((()=>[createVNode(a,{value:unref(s).maskType,"onUpdate:value":t[1]||(t[1]=e=>unref(s).maskType=e),placeholder:"请选择",options:n,listHeight:300},null,8,["value"])])),_:1}),0===unref(s).maskType?(openBlock(),createElementBlock(Fragment,{key:0},[createVNode(o,{label:"开头显示",name:"prefixType"},{default:withCtx((()=>[createVNode(a,{value:unref(s).prefixType,"onUpdate:value":t[2]||(t[2]=e=>unref(s).prefixType=e),placeholder:"请选择",options:i},null,8,["value"])])),_:1}),2===unref(s).prefixType?(openBlock(),createBlock(o,{key:0,label:"字数",name:"prefixLimit"},{default:withCtx((()=>[createVNode(g,{value:unref(s).prefixLimit,"onUpdate:value":t[3]||(t[3]=e=>unref(s).prefixLimit=e),placeholder:"请输入",min:0,precision:0,onChange:t[4]||(t[4]=e=>h(e,"prefixLimit"))},null,8,["value"])])),_:1})):createCommentVNode("",!0),3===unref(s).prefixType||4===unref(s).prefixType?(openBlock(),createBlock(o,{key:1,label:"字符",name:"prefixSpecifyChar"},{default:withCtx((()=>[createVNode(C,{value:unref(s).prefixSpecifyChar,"onUpdate:value":t[5]||(t[5]=e=>unref(s).prefixSpecifyChar=e),placeholder:"请输入"},null,8,["value"])])),_:1})):createCommentVNode("",!0),createVNode(o,{label:"结尾显示",name:"suffixType"},{default:withCtx((()=>[createVNode(a,{value:unref(s).suffixType,"onUpdate:value":t[6]||(t[6]=e=>unref(s).suffixType=e),placeholder:"请选择",options:c},null,8,["value"])])),_:1}),2===unref(s).suffixType?(openBlock(),createBlock(o,{key:2,label:"字数",name:"suffixLimit"},{default:withCtx((()=>[createVNode(g,{value:unref(s).suffixLimit,"onUpdate:value":t[7]||(t[7]=e=>unref(s).suffixLimit=e),placeholder:"请输入",min:0,precision:0,onChange:t[8]||(t[8]=e=>h(e,"suffixLimit"))},null,8,["value"])])),_:1})):createCommentVNode("",!0),3===unref(s).suffixType||4===unref(s).suffixType?(openBlock(),createBlock(o,{key:3,label:"字符",name:"suffixSpecifyChar"},{default:withCtx((()=>[createVNode(C,{value:unref(s).suffixSpecifyChar,"onUpdate:value":t[9]||(t[9]=e=>unref(s).suffixSpecifyChar=e),placeholder:"请输入"},null,8,["value"])])),_:1})):createCommentVNode("",!0),createVNode(o,{label:"显示字符",name:"ignoreChar"},{default:withCtx((()=>[createVNode(C,{value:unref(s).ignoreChar,"onUpdate:value":t[10]||(t[10]=e=>unref(s).ignoreChar=e),placeholder:"多个字符直接用英文,号隔开，如：a,b,c"},null,8,["value"])])),_:1}),createVNode(o,{name:"useUnrealMask"},{label:withCtx((()=>[t[18]||(t[18]=createTextVNode("虚拟掩码")),createVNode(N,{text:["禁用：按照真实字数显示掩码；","启用：按照虚拟位数显示掩码，不暴露真实长度"]})])),default:withCtx((()=>[createVNode(y,{checked:unref(s).useUnrealMask,"onUpdate:checked":t[11]||(t[11]=e=>unref(s).useUnrealMask=e)},null,8,["checked"])])),_:1}),unref(s).useUnrealMask?(openBlock(),createBlock(o,{key:4,label:"掩码长度",name:"unrealMaskLength"},{default:withCtx((()=>[createVNode(g,{value:unref(s).unrealMaskLength,"onUpdate:value":t[12]||(t[12]=e=>unref(s).unrealMaskLength=e),placeholder:"请输入",min:1,precision:0,addonAfter:"个字",onChange:t[13]||(t[13]=e=>h(e,"unrealMaskLength"))},null,8,["value"])])),_:1})):createCommentVNode("",!0)],64)):createCommentVNode("",!0),createVNode(V),createVNode(o,{label:"效果测试",name:"testText"},{default:withCtx((()=>[createVNode(C,{value:unref(u),"onUpdate:value":t[16]||(t[16]=e=>isRef(u)?u.value=e:null),placeholder:"请输入",allowClear:"",disabled:unref(p)},{addonAfter:withCtx((()=>[withDirectives(createBaseVNode("p",{class:"cursor-pointer",onClick:t[14]||(t[14]=e=>function(){if(!r.testText)return;r.originTestText=r.testText,r.isMask=!0;const{getMaskedText:e}=useTextMask(r.formData);r.testText=e(r.testText)}())},"掩盖",512),[[vShow,!unref(p)]]),withDirectives(createBaseVNode("p",{class:"cursor-pointer",onClick:t[15]||(t[15]=e=>(r.testText=r.originTestText,r.originTestText="",void(r.isMask=!1)))},"解码",512),[[vShow,unref(p)]])])),_:1},8,["value","disabled"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["open"])}}}),MaskConfigModal_vue_vue_type_style_index_0_lang="",_hoisted_1$j=["onClick"],_hoisted_2$i={class:"mt-10px"},_sfc_main$V=defineComponent({inheritAttrs:!1,__name:"RInput",props:["activeData"],setup(__props){const ruleList=[{pattern:"/^\\d+$/",message:"请输入正确的数字",messageI18nCode:"sys.validate.number",label:"数字"},{pattern:"/^([1-9][\\d]*|0)(\\.[\\d]+)?$/",message:"请输入正确的金额",messageI18nCode:"sys.validate.money",label:"金额"},{pattern:"/^0\\d{2,3}-?\\d{7,8}$/",message:"请输入正确的电话号码",messageI18nCode:"sys.validate.telephone",label:"电话"},{pattern:"/^1[3456789]\\d{9}$/",message:"请输入正确的手机号码",messageI18nCode:"sys.validate.mobilePhone",label:"手机"},{pattern:"/^1[3456789]\\d{9}$|^0\\d{2,3}-?\\d{7,8}$/",message:"请输入正确的联系方式",messageI18nCode:"sys.validate.phone",label:"电话/手机"},{pattern:"/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/",message:"请输入正确的邮箱",messageI18nCode:"sys.validate.email",label:"邮箱"},{pattern:"/^[1-9]\\d{5}(18|19|([23]\\d))\\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\\d{3}[0-9Xx]$/",message:"请输入正确的身份证号码",messageI18nCode:"sys.validate.idCard",label:"身份证"}],props=__props,{createMessage:createMessage}=useMessage(),maskConfigRef=ref(null),getShowType=inject("getShowType"),showType=computed((()=>getShowType()));function addReg(e){const t={pattern:e?.pattern?e?.pattern:"",message:e?.message?e?.message:"",messageI18nCode:e?.messageI18nCode?e?.messageI18nCode:""};props.activeData.__config__.regList.push(t)}function onPatternChange(e){try{const val=e.target.value,isRegExp="[object RegExp]"===Object.prototype.toString.call(eval(val));isRegExp||createMessage.error("请输入正确的正则表达式")}catch{createMessage.error("请输入正确的正则表达式")}}function editMaskConfig(){props.activeData.maskConfig||(props.activeData.maskConfig=cloneDeep(defaultMaskOptions)),unref(maskConfigRef).openModal(props.activeData.maskConfig)}function updateMaskConfig(e){props.activeData.maskConfig=cloneDeep(e)}function onUseScanChange(e){e&&(props.activeData.showPassword=!1)}return(e,t)=>{const a=resolveComponent("a-input"),o=resolveComponent("a-form-item"),l=resolveComponent("jnpf-icon-picker"),n=resolveComponent("a-input-number"),i=resolveComponent("BasicHelp"),c=resolveComponent("a-switch"),r=resolveComponent("a-button"),d=resolveComponent("a-divider"),s=resolveComponent("jnpf-i18n-input"),_=resolveComponent("a-menu-item"),u=resolveComponent("a-menu"),p=resolveComponent("a-dropdown");return openBlock(),createElementBlock(Fragment,null,[createVNode(o,{label:"默认值"},{default:withCtx((()=>[createVNode(a,{value:__props.activeData.__config__.defaultValue,"onUpdate:value":t[0]||(t[0]=e=>__props.activeData.__config__.defaultValue=e),placeholder:"请输入"},null,8,["value"])])),_:1}),createVNode(o,{label:"前缀"},{default:withCtx((()=>[createVNode(a,{value:__props.activeData.addonBefore,"onUpdate:value":t[1]||(t[1]=e=>__props.activeData.addonBefore=e),placeholder:"请输入"},null,8,["value"])])),_:1}),createVNode(o,{label:"后缀"},{default:withCtx((()=>[createVNode(a,{value:__props.activeData.addonAfter,"onUpdate:value":t[2]||(t[2]=e=>__props.activeData.addonAfter=e),placeholder:"请输入"},null,8,["value"])])),_:1}),withDirectives(createVNode(o,{label:"前图标"},{default:withCtx((()=>[createVNode(l,{value:__props.activeData.prefixIcon,"onUpdate:value":t[3]||(t[3]=e=>__props.activeData.prefixIcon=e),placeholder:"请选择"},null,8,["value"])])),_:1},512),[[vShow,"pc"===showType.value]]),withDirectives(createVNode(o,{label:"后图标"},{default:withCtx((()=>[createVNode(l,{value:__props.activeData.suffixIcon,"onUpdate:value":t[4]||(t[4]=e=>__props.activeData.suffixIcon=e),placeholder:"请选择"},null,8,["value"])])),_:1},512),[[vShow,"pc"===showType.value]]),createVNode(o,{label:"最多输入"},{default:withCtx((()=>[createVNode(n,{value:__props.activeData.maxlength,"onUpdate:value":t[5]||(t[5]=e=>__props.activeData.maxlength=e),placeholder:"请输入",min:0,addonAfter:"个字符"},null,8,["value"])])),_:1}),createVNode(o,null,{label:withCtx((()=>[t[18]||(t[18]=createTextVNode("输入统计")),createVNode(i,{text:"移动端含有【前缀】或【后缀】无效"})])),default:withCtx((()=>[createVNode(c,{checked:__props.activeData.showCount,"onUpdate:checked":t[6]||(t[6]=e=>__props.activeData.showCount=e)},null,8,["checked"])])),_:1}),createVNode(o,{label:"掩码显示"},{default:withCtx((()=>[createVNode(c,{checked:__props.activeData.useMask,"onUpdate:checked":t[7]||(t[7]=e=>__props.activeData.useMask=e)},null,8,["checked"])])),_:1}),__props.activeData.useMask?(openBlock(),createBlock(o,{key:0,label:"掩码规则"},{default:withCtx((()=>[createVNode(r,{block:"",onClick:editMaskConfig},{default:withCtx((()=>t[19]||(t[19]=[createTextVNode("掩码设置")]))),_:1,__:[19]})])),_:1})):createCommentVNode("",!0),createVNode(o,null,{label:withCtx((()=>[t[20]||(t[20]=createTextVNode("扫码输入")),createVNode(i,{text:"支持常规二维码和条形码；桌面端和H5不支持扫码"})])),default:withCtx((()=>[createVNode(c,{checked:__props.activeData.useScan,"onUpdate:checked":t[8]||(t[8]=e=>__props.activeData.useScan=e),onChange:onUseScanChange},null,8,["checked"])])),_:1}),createVNode(o,{label:"能否清空"},{default:withCtx((()=>[createVNode(c,{checked:__props.activeData.clearable,"onUpdate:checked":t[9]||(t[9]=e=>__props.activeData.clearable=e)},null,8,["checked"])])),_:1}),createVNode(o,{label:"是否密码"},{default:withCtx((()=>[createVNode(c,{checked:__props.activeData.showPassword,"onUpdate:checked":t[10]||(t[10]=e=>__props.activeData.showPassword=e),disabled:__props.activeData.useScan,onChange:t[11]||(t[11]=e=>__props.activeData.__config__.renderKey=+new Date)},null,8,["checked","disabled"])])),_:1}),withDirectives(createVNode(o,{label:"是否只读"},{default:withCtx((()=>[createVNode(c,{checked:__props.activeData.readonly,"onUpdate:checked":t[12]||(t[12]=e=>__props.activeData.readonly=e)},null,8,["checked"])])),_:1},512),[[vShow,"pc"===showType.value]]),createVNode(o,{label:"是否禁用"},{default:withCtx((()=>[createVNode(c,{checked:__props.activeData.disabled,"onUpdate:checked":t[13]||(t[13]=e=>__props.activeData.disabled=e)},null,8,["checked"])])),_:1}),createVNode(o,{label:"是否隐藏"},{default:withCtx((()=>[createVNode(c,{checked:__props.activeData.__config__.noShow,"onUpdate:checked":t[14]||(t[14]=e=>__props.activeData.__config__.noShow=e)},null,8,["checked"])])),_:1}),createVNode(d,null,{default:withCtx((()=>t[21]||(t[21]=[createTextVNode("校验规则")]))),_:1,__:[21]}),createVNode(o,{label:"是否必填"},{default:withCtx((()=>[createVNode(c,{checked:__props.activeData.__config__.required,"onUpdate:checked":t[15]||(t[15]=e=>__props.activeData.__config__.required=e)},null,8,["checked"])])),_:1}),createVNode(o,null,{label:withCtx((()=>[t[22]||(t[22]=createTextVNode("是否唯一")),createVNode(i,{text:"输入值唯一性校验"})])),default:withCtx((()=>[createVNode(c,{checked:__props.activeData.__config__.unique,"onUpdate:checked":t[16]||(t[16]=e=>__props.activeData.__config__.unique=e)},null,8,["checked"])])),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(__props.activeData.__config__.regList,((e,l)=>(openBlock(),createElementBlock("div",{key:l,class:"reg-item"},[createBaseVNode("span",{class:"close-btn",onClick:e=>__props.activeData.__config__.regList.splice(l,1)},t[23]||(t[23]=[createBaseVNode("i",{class:"icon-ym icon-ym-nav-close"},null,-1)]),8,_hoisted_1$j),createVNode(o,{label:"表达式"},{default:withCtx((()=>[createVNode(a,{value:e.pattern,"onUpdate:value":t=>e.pattern=t,placeholder:"请输入",onChange:onPatternChange},null,8,["value","onUpdate:value"])])),_:2},1024),createVNode(o,{label:"错误提示",style:{"margin-bottom":"0"}},{default:withCtx((()=>[createVNode(s,{value:e.message,"onUpdate:value":t=>e.message=t,i18n:e.messageI18nCode,"onUpdate:i18n":t=>e.messageI18nCode=t,placeholder:"请输入"},null,8,["value","onUpdate:value","i18n","onUpdate:i18n"])])),_:2},1024)])))),128)),createBaseVNode("div",_hoisted_2$i,[createVNode(p,null,{overlay:withCtx((()=>[createVNode(u,null,{default:withCtx((()=>[(openBlock(),createElementBlock(Fragment,null,renderList(ruleList,((e,t)=>createVNode(_,{key:t,onClick:t=>addReg(e)},{default:withCtx((()=>[createTextVNode(toDisplayString(e.label),1)])),_:2},1032,["onClick"]))),64))])),_:1})])),default:withCtx((()=>[createVNode(r,{type:"primary"},{default:withCtx((()=>[t[24]||(t[24]=createTextVNode("添加常用校验")),createVNode(unref(DownOutlined))])),_:1,__:[24]})])),_:1}),createVNode(r,{type:"primary",style:{"margin-left":"10px"},onClick:t[17]||(t[17]=e=>addReg())},{default:withCtx((()=>t[25]||(t[25]=[createTextVNode("自定义规则")]))),_:1,__:[25]})]),createVNode(_sfc_main$W,{ref_key:"maskConfigRef",ref:maskConfigRef,onConfirm:updateMaskConfig},null,512)],64)}}}),_sfc_main$U=defineComponent({inheritAttrs:!1,__name:"RTextarea",props:["activeData"],setup(e){const t=inject("getShowType"),a=computed((()=>t()));return(t,o)=>{const l=resolveComponent("a-input"),n=resolveComponent("a-form-item"),i=resolveComponent("a-input-number"),c=resolveComponent("a-switch");return openBlock(),createElementBlock(Fragment,null,[createVNode(n,{label:"默认值"},{default:withCtx((()=>[createVNode(l,{value:e.activeData.__config__.defaultValue,"onUpdate:value":o[0]||(o[0]=t=>e.activeData.__config__.defaultValue=t),placeholder:"请输入"},null,8,["value"])])),_:1}),createVNode(n,{label:"最小行数"},{default:withCtx((()=>[createVNode(i,{value:e.activeData.autoSize.minRows,"onUpdate:value":o[1]||(o[1]=t=>e.activeData.autoSize.minRows=t),placeholder:"请输入",min:1},null,8,["value"])])),_:1}),createVNode(n,{label:"最大行数"},{default:withCtx((()=>[createVNode(i,{value:e.activeData.autoSize.maxRows,"onUpdate:value":o[2]||(o[2]=t=>e.activeData.autoSize.maxRows=t),placeholder:"请输入",min:1},null,8,["value"])])),_:1}),createVNode(n,{label:"最多输入"},{default:withCtx((()=>[createVNode(i,{value:e.activeData.maxlength,"onUpdate:value":o[3]||(o[3]=t=>e.activeData.maxlength=t),placeholder:"请输入",min:0,addonAfter:"个字符"},null,8,["value"])])),_:1}),createVNode(n,{label:"输入统计"},{default:withCtx((()=>[createVNode(c,{checked:e.activeData.showCount,"onUpdate:checked":o[4]||(o[4]=t=>e.activeData.showCount=t)},null,8,["checked"])])),_:1}),createVNode(n,{label:"能否清空"},{default:withCtx((()=>[createVNode(c,{checked:e.activeData.clearable,"onUpdate:checked":o[5]||(o[5]=t=>e.activeData.clearable=t)},null,8,["checked"])])),_:1}),withDirectives(createVNode(n,{label:"是否只读"},{default:withCtx((()=>[createVNode(c,{checked:e.activeData.readonly,"onUpdate:checked":o[6]||(o[6]=t=>e.activeData.readonly=t)},null,8,["checked"])])),_:1},512),[[vShow,"pc"===a.value]])],64)}}}),_sfc_main$T=defineComponent({inheritAttrs:!1,__name:"RInputNumber",props:["activeData"],setup(e){const t=e;function a(){t.activeData.addonBefore="",t.activeData.addonAfter="",t.activeData.thousands=!1,t.activeData.__config__.renderKey=+new Date}return(t,o)=>{const l=resolveComponent("a-input-number"),n=resolveComponent("a-form-item"),i=resolveComponent("a-switch"),c=resolveComponent("a-input");return openBlock(),createElementBlock(Fragment,null,[createVNode(n,{label:"默认值"},{default:withCtx((()=>[createVNode(l,{value:e.activeData.__config__.defaultValue,"onUpdate:value":o[0]||(o[0]=t=>e.activeData.__config__.defaultValue=t),placeholder:"请输入",min:e.activeData.min,max:e.activeData.max,controls:e.activeData.controls,step:e.activeData.step,precision:e.activeData.precision||0===e.activeData.precision?e.activeData.precision:void 0},null,8,["value","min","max","controls","step","precision"])])),_:1}),createVNode(n,{label:"最小值"},{default:withCtx((()=>[createVNode(l,{value:e.activeData.min,"onUpdate:value":o[1]||(o[1]=t=>e.activeData.min=t),placeholder:"请输入"},null,8,["value"])])),_:1}),createVNode(n,{label:"最大值"},{default:withCtx((()=>[createVNode(l,{value:e.activeData.max,"onUpdate:value":o[2]||(o[2]=t=>e.activeData.max=t),placeholder:"请输入"},null,8,["value"])])),_:1}),createVNode(n,{label:"精度"},{default:withCtx((()=>[createVNode(l,{value:e.activeData.precision,"onUpdate:value":o[3]||(o[3]=t=>e.activeData.precision=t),placeholder:"请输入",precision:0,min:0,max:15},null,8,["value"])])),_:1}),createVNode(n,{label:"按钮"},{default:withCtx((()=>[createVNode(i,{checked:e.activeData.controls,"onUpdate:checked":o[4]||(o[4]=t=>e.activeData.controls=t),onChange:a},null,8,["checked"])])),_:1}),e.activeData.controls?(openBlock(),createBlock(n,{key:0,label:"步数"},{default:withCtx((()=>[createVNode(l,{value:e.activeData.step,"onUpdate:value":o[5]||(o[5]=t=>e.activeData.step=t),placeholder:"请输入",precision:e.activeData.precision||0===e.activeData.precision?e.activeData.precision:void 0},null,8,["value","precision"])])),_:1})):createCommentVNode("",!0),e.activeData.controls?createCommentVNode("",!0):(openBlock(),createElementBlock(Fragment,{key:1},[createVNode(n,{label:"前缀"},{default:withCtx((()=>[createVNode(c,{value:e.activeData.addonBefore,"onUpdate:value":o[6]||(o[6]=t=>e.activeData.addonBefore=t),placeholder:"请输入"},null,8,["value"])])),_:1}),createVNode(n,{label:"后缀"},{default:withCtx((()=>[createVNode(c,{value:e.activeData.addonAfter,"onUpdate:value":o[7]||(o[7]=t=>e.activeData.addonAfter=t),placeholder:"请输入"},null,8,["value"])])),_:1}),createVNode(n,{label:"千位分隔"},{default:withCtx((()=>[createVNode(i,{checked:e.activeData.thousands,"onUpdate:checked":o[8]||(o[8]=t=>e.activeData.thousands=t),onChange:o[9]||(o[9]=t=>e.activeData.__config__.renderKey=+new Date)},null,8,["checked"])])),_:1})],64)),createVNode(n,{label:"大写金额"},{default:withCtx((()=>[createVNode(i,{checked:e.activeData.isAmountChinese,"onUpdate:checked":o[10]||(o[10]=t=>e.activeData.isAmountChinese=t)},null,8,["checked"])])),_:1})],64)}}}),_sfc_main$S=defineComponent({inheritAttrs:!1,__name:"RSwitch",props:["activeData"],setup:e=>(t,a)=>{const o=resolveComponent("a-input"),l=resolveComponent("a-form-item"),n=resolveComponent("a-switch");return openBlock(),createElementBlock(Fragment,null,[createVNode(l,{label:"开启展示值"},{default:withCtx((()=>[createVNode(o,{value:e.activeData.activeTxt,"onUpdate:value":a[0]||(a[0]=t=>e.activeData.activeTxt=t),placeholder:"请输入"},null,8,["value"])])),_:1}),createVNode(l,{label:"关闭展示值"},{default:withCtx((()=>[createVNode(o,{value:e.activeData.inactiveTxt,"onUpdate:value":a[1]||(a[1]=t=>e.activeData.inactiveTxt=t),placeholder:"请输入"},null,8,["value"])])),_:1}),createVNode(l,{label:"默认值"},{default:withCtx((()=>[createVNode(n,{checked:e.activeData.__config__.defaultValue,"onUpdate:checked":a[2]||(a[2]=t=>e.activeData.__config__.defaultValue=t),checkedValue:e.activeData.activeValue,unCheckedValue:e.activeData.inactiveValue},null,8,["checked","checkedValue","unCheckedValue"])])),_:1})],64)}});function useDynamic(e,t){const a=inject("getShowType"),o=computed((()=>a())),l=inject("getDrawingList"),n=computed((()=>l())),i=computed((()=>"checkbox"===e.__config__.jnpfKey||"cascader"===e.__config__.jnpfKey||e.multiple?[]:"")),c=computed((()=>{let t=[];const a=(o,l)=>{if(o&&(o.__config__&&d(o)&&o.__config__.children&&Array.isArray(o.__config__.children)&&a(o.__config__.children,o),Array.isArray(o)&&o.forEach((e=>a(e,l))),o.__vModel__&&!noAllowRelationList.includes(o.__config__.jnpfKey)&&o.__vModel__!==e.__vModel__)){const e=l&&l.__config__&&"table"===l.__config__.jnpfKey;t.push({id:e?l.__vModel__+"-"+o.__vModel__:o.__vModel__,fullName:e?l.__config__.label+"-"+o.__config__.label:o.__config__.label,...o,disabled:!1})}};return a(unref(n)),t})),r=computed((()=>{let t=[];const a=(o,l)=>{if(o&&(o.__config__&&d(o)&&o.__config__.children&&Array.isArray(o.__config__.children)&&a(o.__config__.children,o),Array.isArray(o)&&o.forEach((e=>a(e,l))),o.__vModel__&&!noAllowSelectList.includes(o.__config__.jnpfKey)&&o.__vModel__!==e.__vModel__)){const e=l&&l.__config__&&"table"===l.__config__.jnpfKey;t.push({id:e?l.__vModel__+"-"+o.__vModel__:o.__vModel__,fullName:e?l.__config__.label+"-"+o.__config__.label:o.__config__.label,...o,disabled:!1})}};return a(unref(n)),t})),d=t=>!(t.__config__.layout&&"rowFormItem"!==t.__config__.layout||"table"===t.__config__.jnpfKey)||(e.__config__.isSubTable?e.__config__.parentVModel===t.__vModel__:"table"!==t.__config__.jnpfKey);return{showType:o,onDataTypeChange:()=>{e.__config__.defaultValue=unref(i),e.options=[],e.props.value="id",e.props.label="fullName",Reflect.has(e.props,"children")&&(e.props.children="children"),e.__config__.dictionaryType="",e.__config__.propsUrl="",e.__config__.propsName="",e.__config__.templateJson=[]},onDictionaryTypeChange:t=>{if(e.__config__.defaultValue=unref(i),!t)return e.options=[];getDictionaryDataSelector(t).then((t=>{e.options=t.data.list})).catch((()=>{e.options=[]}))},onPropsUrlChange:(a,o)=>{if(e.__config__.defaultValue=unref(i),!a)return e.__config__.propsUrl="",e.__config__.propsName="",e.__config__.templateJson=[],e.options=[],void(t&&t());if(e.__config__.propsUrl===a)return;const l=o.parameterJson?JSON.parse(o.parameterJson):[];e.__config__.propsUrl=a,e.__config__.propsName=o.fullName,e.__config__.templateJson=l.map((e=>({...e,relationField:"",sourceType:1})));const n={paramList:getParamList(e.__config__.templateJson)};getDataInterfaceRes(a,n).then((a=>{e.options=Array.isArray(a.data)?a.data:[],t&&t()})).catch((()=>{e.__config__.propsUrl="",e.__config__.propsName="",e.__config__.templateJson=[],e.options=[],t&&t()}))},formFieldsOptions:c,formFieldsSelectOptions:r,onRelationFieldChange:(e,t)=>{if(!e)return t.jnpfKey="";let a=unref(c).filter((t=>t.id===e));if(!a.length)return t.jnpfKey="";let o=a[0];t.jnpfKey=o.__config__.jnpfKey},sizeOptions:[{id:"large",fullName:"较大"},{id:"default",fullName:"中等"},{id:"small",fullName:"较小"}],optionTypeOptions:[{id:"default",fullName:"默认"},{id:"button",fullName:"按钮"}],dataTypeOptions:[{id:"static",fullName:"静态数据"},{id:"dictionary",fullName:"数据字典"},{id:"dynamic",fullName:"数据接口"}],valueOptions:[{id:"id",fullName:"id"},{id:"enCode",fullName:"enCode"}],addSelectItem:()=>{const t=buildBitUUID();e.options.push({fullName:"选项"+t,id:t})},onMultipleChange:t=>{e.__config__.defaultValue=t?[]:""},onBatchOperateConfirm:t=>{e.options=t}}}function useField(e){const t=reactive({options:[],allOptions:[]}),{options:a,allOptions:o}=toRefs(t);function l(e){t.options=t.allOptions.filter((t=>-1!==t.value.toLowerCase().indexOf(e.toLowerCase())))}return{options:a,allOptions:o,debounceOnSearch:useDebounceFn(l,300),onFocus:function(e){l(e)},initFieldData:function(){const a=e.__config__.jnpfKey,o=["popupTableSelect","popupSelect","autoComplete"];if(o.includes(a)){if(!e.interfaceId)return t.allOptions=[]}else if("dynamic"!==e.__config__.dataType||!e.__config__.propsUrl)return t.allOptions=[];const l=o.includes(a)?e.interfaceId:e.__config__.propsUrl;getDataInterfaceInfo(l).then((e=>{const a=e.data;let o=a.fieldJson?JSON.parse(a.fieldJson):[];t.allOptions=o.map((e=>({...e,value:e.defaultValue})))}))}}}const _sfc_main$R=defineComponent({__name:"TreeBatchOperate",emits:["register","confirm"],setup(e,{emit:t}){const a=t,o=reactive({innerValue:"",separator:"|"}),{innerValue:l}=toRefs(o),[n,{closeModal:i}]=useModalInner((function(e){if(o.innerValue="",!e.options.length)return;const t=(e,a)=>{for(let l=0;l<e.length;l++){const n=e[l];let i="";a&&(i=o.separator+a),o.innerValue+=n.fullName+o.separator+n.id+i+"\n",n?.children&&Array.isArray(n.children)&&t(n.children,n.id)}};t(e.options)}));async function c(){let e=[];if(!o.innerValue)return a("confirm",e);const t=o.innerValue.split("\n");for(let a=0;a<t.length;a++){const l=t[a].trim();if(!l||l.indexOf(o.separator)<0)continue;const n=l.split(o.separator)||[];if(!(n.length<2)&&!r(e,n[1]))if(2!==n.length){if(3===n.length){const t=(e,a)=>{let o=a[a.length-1];for(let l=0;l<e.length;l++){const n=e[l];if(n.children&&n.children.length&&t(n.children,a),n.id==o){n.children.push({fullName:a[0],id:a[1],children:[]});break}}};t(e,n)}}else e.push({fullName:n[0],id:n[1],children:[]})}a("confirm",e),i()}function r(e,t){let a=!1;const o=e=>{for(let l=0;l<e.length;l++){const n=e[l];if(n.id==t){a=!0;break}n.children&&Array.isArray(n.children)&&o(n.children)}};return o(e),a}return(e,t)=>{const a=resolveComponent("a-alert"),o=resolveComponent("jnpf-textarea");return openBlock(),createBlock(unref(BasicModal),mergeProps(e.$attrs,{onRegister:unref(n),title:"批量编辑",showOkBtn:"",onOk:c,width:700}),{default:withCtx((()=>[createVNode(a,{message:"注意：每行对应一个选项；选项名、选项值和父级选项值之间用英文 | 隔开。格式如下：",type:"warning","show-icon":""}),t[1]||(t[1]=createBaseVNode("div",{class:"demo-box"},[createBaseVNode("div",{class:"demo-box-cell"},[createBaseVNode("p",{class:"w-260px"},"根节点格式：选项名|选项值"),createBaseVNode("p",null,[createTextVNode("输入示例："),createBaseVNode("span",null,"选项一|选项一的值")])]),createBaseVNode("div",{class:"demo-box-cell"},[createBaseVNode("p",{class:"w-260px"},"子节点格式：选项名|选项值|父级选项值"),createBaseVNode("p",null,[createTextVNode("输入示例："),createBaseVNode("span",null,"选项一|选项一的值|选项一父级的值")])])],-1)),createVNode(o,{value:unref(l),"onUpdate:value":t[0]||(t[0]=e=>isRef(l)?l.value=e:null),rows:12,class:"!mb-20px !leading-30px"},null,8,["value"])])),_:1,__:[1]},16,["onRegister"])}}}),TreeBatchOperate_vue_vue_type_style_index_0_scoped_545750ce_lang="",TreeBatchOperate=_export_sfc(_sfc_main$R,[["__scopeId","data-v-545750ce"]]),_sfc_main$Q=defineComponent({__name:"TreeNodeModal",emits:["confirm"],setup(e,{expose:t,emit:a}){const o=a;t({openModal:function(e){if(l.value=!0,n.value=!!e,i.value=e?"编辑选项":"添加选项",d.value?.resetFields(),c.id="",c.fullName="",!e)return;c.id=e.id||"",c.fullName=e.fullName||""}});const l=ref(!1),n=ref(!1),i=ref("添加选项"),c=reactive({fullName:"",id:""}),r={fullName:[{required:!0,message:"必填"}],id:[{required:!0,message:"必填"}]},d=ref();function s(){l.value=!1}async function _(){try{const e=await(d.value?.validate());l.value=!1,o("confirm",e,n.value)}catch(e){}}return(e,t)=>{const a=resolveComponent("a-input"),o=resolveComponent("a-form-item"),n=resolveComponent("a-form");return openBlock(),createBlock(unref(Modal),{open:l.value,"onUpdate:open":t[2]||(t[2]=e=>l.value=e),title:i.value,centered:"",maskClosable:!1,keyboard:!1,width:600,onOk:_,class:"tree-node-modal"},{closeIcon:withCtx((()=>[createVNode(ModalClose,{canFullscreen:!1,onCancel:s})])),default:withCtx((()=>[createVNode(n,{ref_key:"formRef",ref:d,model:c,name:"tree-node",rules:r,autocomplete:"off","label-col":{style:{width:"60px"}},colon:!1},{default:withCtx((()=>[createVNode(o,{label:"选项名",name:"fullName"},{default:withCtx((()=>[createVNode(a,{value:c.fullName,"onUpdate:value":t[0]||(t[0]=e=>c.fullName=e),placeholder:"请输入"},null,8,["value"])])),_:1}),createVNode(o,{label:"选项值",name:"id"},{default:withCtx((()=>[createVNode(a,{value:c.id,"onUpdate:value":t[1]||(t[1]=e=>c.id=e),placeholder:"请输入"},null,8,["value"])])),_:1})])),_:1},8,["model"])])),_:1},8,["open","title"])}}}),TreeNodeModal_vue_vue_type_style_index_0_lang="",_hoisted_1$i={key:0,class:"options-list"},_hoisted_2$h={class:"add-btn"},_hoisted_3$b={class:"select-item"},_hoisted_4$b=["onClick"],_hoisted_5$7={class:"add-btn"},_hoisted_6$7={key:1},_hoisted_7$6={key:2},_sfc_main$P=defineComponent({__name:"DataProperties",props:["activeData","dicOptions"],emits:["propsChildrenChange"],setup(e,{emit:t}){const a=t,o=e,l=ref(null),n=ref(null),i=ref(null),{options:c,debounceOnSearch:r,onFocus:d,initFieldData:s}=useField(o.activeData),{onDataTypeChange:_,onDictionaryTypeChange:u,onPropsUrlChange:p,dataTypeOptions:f,valueOptions:m,addSelectItem:v,formFieldsOptions:g,onRelationFieldChange:C,onBatchOperateConfirm:N}=useDynamic(o.activeData,s),[y,{openModal:V}]=useModal(),[k,{openModal:b}]=useModal(),w=[{render:e=>h(PlusOutlined,{class:"ml-4px",title:"添加",onClick:()=>{!function(e){const t=x().getSelectedNode(e.id);Reflect.has(t,"children")||(t.children=[]);i.value=t.children,unref(n).openModal()}(e)}})},{render:e=>h(FormOutlined,{class:"ml-4px",title:"编辑",onClick:()=>{!function(e){const t=x().getSelectedNode(e.id);i.value=t,unref(n).openModal(t)}(e)}})},{render:e=>h(DeleteOutlined,{class:"ml-4px",title:"删除",onClick:()=>{!function(e){o.activeData.__config__.defaultValue=[],x().deleteNodeByKey(e.id)}(e)}})}];function x(){const e=unref(l);if(!e)throw new Error("tree is null!");return e}function D(){unref(n).openModal(),i.value=o.activeData.options}function B(e,t){if(!t)return i.value.push(e);x().updateNodeByKey(i.value.id,e)}function T(){a("propsChildrenChange")}return onMounted((()=>s())),(t,a)=>{const o=resolveComponent("a-divider"),i=resolveComponent("jnpf-radio"),s=resolveComponent("a-form-item"),h=resolveComponent("a-button"),x=resolveComponent("a-input"),U=resolveComponent("jnpf-tree-select"),I=resolveComponent("jnpf-select"),F=resolveComponent("BasicHelp"),M=resolveComponent("a-auto-complete"),S=resolveComponent("a-switch");return openBlock(),createElementBlock(Fragment,null,[createVNode(o,null,{default:withCtx((()=>a[14]||(a[14]=[createTextVNode("数据选项")]))),_:1,__:[14]}),createVNode(s,{class:"flex justify-center"},{default:withCtx((()=>[createVNode(i,{value:e.activeData.__config__.dataType,"onUpdate:value":a[0]||(a[0]=t=>e.activeData.__config__.dataType=t),options:unref(f),optionType:"button",buttonStyle:"solid",onChange:unref(_)},null,8,["value","options","onChange"])])),_:1}),"static"===e.activeData.__config__.dataType?(openBlock(),createElementBlock("div",_hoisted_1$i,[["treeSelect","cascader"].includes(e.activeData.__config__.jnpfKey)?(openBlock(),createElementBlock(Fragment,{key:0},[createVNode(unref(_sfc_main$15),{ref_key:"treeRef",ref:l,treeData:e.activeData.options,actionList:w},null,8,["treeData"]),createBaseVNode("div",_hoisted_2$h,[createVNode(h,{type:"link",preIcon:"icon-ym icon-ym-btn-add",onClick:D,class:"!px-0"},{default:withCtx((()=>a[15]||(a[15]=[createTextVNode("添加父级")]))),_:1,__:[15]}),createVNode(o,{type:"vertical"}),createVNode(h,{type:"link",onClick:a[1]||(a[1]=t=>unref(b)(!0,{options:e.activeData.options})),class:"!px-0"},{default:withCtx((()=>a[16]||(a[16]=[createTextVNode("批量编辑")]))),_:1,__:[16]})])],64)):(openBlock(),createElementBlock(Fragment,{key:1},[createVNode(unref(draggable),{modelValue:e.activeData.options,"onUpdate:modelValue":a[2]||(a[2]=t=>e.activeData.options=t),animation:300,group:"selectItem",handle:".option-drag",itemKey:"uuid"},{item:withCtx((({element:t,index:o})=>[createBaseVNode("div",_hoisted_3$b,[a[18]||(a[18]=createBaseVNode("div",{class:"select-line-icon option-drag"},[createBaseVNode("i",{class:"icon-ym icon-ym-darg"})],-1)),createVNode(x,{value:t.fullName,"onUpdate:value":e=>t.fullName=e,placeholder:"选项名"},null,8,["value","onUpdate:value"]),createVNode(x,{value:t.id,"onUpdate:value":e=>t.id=e,placeholder:"选项值"},null,8,["value","onUpdate:value"]),createBaseVNode("div",{class:"close-btn select-line-icon",onClick:t=>e.activeData.options.splice(o,1)},a[17]||(a[17]=[createBaseVNode("i",{class:"icon-ym icon-ym-btn-clearn"},null,-1)]),8,_hoisted_4$b)])])),_:1},8,["modelValue"]),createBaseVNode("div",_hoisted_5$7,[createVNode(h,{type:"link",preIcon:"icon-ym icon-ym-btn-add",onClick:unref(v),class:"!px-0"},{default:withCtx((()=>a[19]||(a[19]=[createTextVNode("添加选项")]))),_:1,__:[19]},8,["onClick"]),createVNode(o,{type:"vertical"}),createVNode(h,{type:"link",onClick:a[3]||(a[3]=t=>unref(V)(!0,{options:e.activeData.options})),class:"!px-0"},{default:withCtx((()=>a[20]||(a[20]=[createTextVNode("批量编辑")]))),_:1,__:[20]})])],64))])):createCommentVNode("",!0),"dictionary"===e.activeData.__config__.dataType?(openBlock(),createElementBlock("div",_hoisted_6$7,[createVNode(s,{label:"数据字典"},{default:withCtx((()=>[createVNode(U,{options:e.dicOptions,value:e.activeData.__config__.dictionaryType,"onUpdate:value":a[4]||(a[4]=t=>e.activeData.__config__.dictionaryType=t),lastLevel:"",allowClear:"",onChange:unref(u)},null,8,["options","value","onChange"])])),_:1}),createVNode(s,{label:"存储字段"},{default:withCtx((()=>[createVNode(I,{value:e.activeData.props.value,"onUpdate:value":a[5]||(a[5]=t=>e.activeData.props.value=t),placeholder:"请选择",options:unref(m)},null,8,["value","options"])])),_:1})])):createCommentVNode("",!0),"dynamic"===e.activeData.__config__.dataType?(openBlock(),createElementBlock("div",_hoisted_7$6,[createVNode(s,null,{label:withCtx((()=>[a[21]||(a[21]=createTextVNode("数据接口")),createVNode(F,{text:"支持通过数据接口的参数实现控件之间的联动。"})])),default:withCtx((()=>[createVNode(unref(InterfaceModal),{value:e.activeData.__config__.propsUrl,title:e.activeData.__config__.propsName,popupTitle:"数据接口",onChange:unref(p)},null,8,["value","title","onChange"])])),_:1}),createVNode(s,{label:"存储字段"},{default:withCtx((()=>[createVNode(M,{value:e.activeData.props.value,"onUpdate:value":a[6]||(a[6]=t=>e.activeData.props.value=t),placeholder:"请输入",options:unref(c),onFocus:a[7]||(a[7]=t=>unref(d)(e.activeData.props.value)),onSearch:a[8]||(a[8]=t=>unref(r)(e.activeData.props.value))},null,8,["value","options"])])),_:1}),createVNode(s,{label:"回显字段"},{default:withCtx((()=>[createVNode(M,{value:e.activeData.props.label,"onUpdate:value":a[9]||(a[9]=t=>e.activeData.props.label=t),placeholder:"请输入",options:unref(c),onFocus:a[10]||(a[10]=t=>unref(d)(e.activeData.props.label)),onSearch:a[11]||(a[11]=t=>unref(r)(e.activeData.props.label))},null,8,["value","options"])])),_:1}),["treeSelect","cascader"].includes(e.activeData.__config__.jnpfKey)?(openBlock(),createBlock(s,{key:0,label:"子级字段"},{default:withCtx((()=>[createVNode(x,{value:e.activeData.props.children,"onUpdate:value":a[12]||(a[12]=t=>e.activeData.props.children=t),placeholder:"请输入",onChange:T},null,8,["value"])])),_:1})):createCommentVNode("",!0),createVNode(s,{label:"是否缓存"},{default:withCtx((()=>[createVNode(S,{checked:e.activeData.__config__.useCache,"onUpdate:checked":a[13]||(a[13]=t=>e.activeData.__config__.useCache=t)},null,8,["checked"])])),_:1}),e.activeData.__config__.templateJson?.length?(openBlock(),createBlock(s,{key:1,label:"参数设置"},{default:withCtx((()=>[createVNode(unref(SelectInterfaceBtn),{templateJson:e.activeData.__config__.templateJson,fieldOptions:unref(g),type:3,onFieldChange:unref(C)},null,8,["templateJson","fieldOptions","onFieldChange"])])),_:1})):createCommentVNode("",!0)])):createCommentVNode("",!0),createVNode(o),createVNode(BatchOperate,{onRegister:unref(y),onConfirm:unref(N)},null,8,["onRegister","onConfirm"]),createVNode(_sfc_main$Q,{ref_key:"treeNodeRef",ref:n,onConfirm:B},null,512),createVNode(TreeBatchOperate,{onRegister:unref(k),onConfirm:unref(N)},null,8,["onRegister","onConfirm"])],64)}}}),_sfc_main$O=defineComponent({inheritAttrs:!1,__name:"RRadio",props:["activeData","dicOptions"],setup(e){const t=e,{showType:a,sizeOptions:o,optionTypeOptions:l}=useDynamic(t.activeData),n=[{id:"horizontal",fullName:"水平排列"},{id:"vertical",fullName:"垂直排列"}];return(t,i)=>{const c=resolveComponent("jnpf-select"),r=resolveComponent("a-form-item"),d=resolveComponent("jnpf-radio");return openBlock(),createElementBlock(Fragment,null,[createVNode(r,{label:"默认值"},{default:withCtx((()=>[createVNode(c,{value:e.activeData.__config__.defaultValue,"onUpdate:value":i[0]||(i[0]=t=>e.activeData.__config__.defaultValue=t),placeholder:"请选择",options:e.activeData.options,fieldNames:e.activeData.props,allowClear:""},null,8,["value","options","fieldNames"])])),_:1}),createVNode(r,{label:"排列方式"},{default:withCtx((()=>[createVNode(d,{value:e.activeData.direction,"onUpdate:value":i[1]||(i[1]=t=>e.activeData.direction=t),options:n,optionType:"button",buttonStyle:"solid"},null,8,["value"])])),_:1}),createVNode(_sfc_main$P,{activeData:e.activeData,dicOptions:e.dicOptions},null,8,["activeData","dicOptions"]),"pc"===unref(a)?(openBlock(),createElementBlock(Fragment,{key:0},[createVNode(r,{label:"选项样式"},{default:withCtx((()=>[createVNode(d,{value:e.activeData.optionType,"onUpdate:value":i[2]||(i[2]=t=>e.activeData.optionType=t),options:unref(l),optionType:"button",buttonStyle:"solid"},null,8,["value","options"])])),_:1}),"button"===e.activeData.optionType?(openBlock(),createBlock(r,{key:0,label:"组件尺寸"},{default:withCtx((()=>[createVNode(d,{value:e.activeData.size,"onUpdate:value":i[3]||(i[3]=t=>e.activeData.size=t),options:unref(o),optionType:"button",buttonStyle:"solid"},null,8,["value","options"])])),_:1})):createCommentVNode("",!0)],64)):createCommentVNode("",!0)],64)}}}),_sfc_main$N=defineComponent({inheritAttrs:!1,__name:"RCheckbox",props:["activeData","dicOptions"],setup(e){const t=[{id:"horizontal",fullName:"水平排列"},{id:"vertical",fullName:"垂直排列"}];return(a,o)=>{const l=resolveComponent("jnpf-checkbox"),n=resolveComponent("a-form-item"),i=resolveComponent("jnpf-radio");return openBlock(),createElementBlock(Fragment,null,[createVNode(n,{label:"默认值"},{default:withCtx((()=>[createVNode(l,{value:e.activeData.__config__.defaultValue,"onUpdate:value":o[0]||(o[0]=t=>e.activeData.__config__.defaultValue=t),options:e.activeData.options,fieldNames:e.activeData.props},null,8,["value","options","fieldNames"])])),_:1}),createVNode(n,{label:"排列方式"},{default:withCtx((()=>[createVNode(i,{value:e.activeData.direction,"onUpdate:value":o[1]||(o[1]=t=>e.activeData.direction=t),options:t,optionType:"button",buttonStyle:"solid"},null,8,["value"])])),_:1}),createVNode(_sfc_main$P,{activeData:e.activeData,dicOptions:e.dicOptions},null,8,["activeData","dicOptions"])],64)}}}),_sfc_main$M=defineComponent({inheritAttrs:!1,__name:"RSelect",props:["activeData","dicOptions"],setup(e){const t=e,{onMultipleChange:a}=useDynamic(t.activeData);return(t,o)=>{const l=resolveComponent("jnpf-select"),n=resolveComponent("a-form-item"),i=resolveComponent("a-switch");return openBlock(),createElementBlock(Fragment,null,[createVNode(n,{label:"默认值"},{default:withCtx((()=>[createVNode(l,{value:e.activeData.__config__.defaultValue,"onUpdate:value":o[0]||(o[0]=t=>e.activeData.__config__.defaultValue=t),options:e.activeData.options,fieldNames:e.activeData.props,multiple:e.activeData.multiple,allowClear:"",showSearch:""},null,8,["value","options","fieldNames","multiple"])])),_:1}),createVNode(_sfc_main$P,{activeData:e.activeData,dicOptions:e.dicOptions},null,8,["activeData","dicOptions"]),createVNode(n,{label:"能否清空"},{default:withCtx((()=>[createVNode(i,{checked:e.activeData.clearable,"onUpdate:checked":o[1]||(o[1]=t=>e.activeData.clearable=t)},null,8,["checked"])])),_:1}),createVNode(n,{label:"能否搜索"},{default:withCtx((()=>[createVNode(i,{checked:e.activeData.filterable,"onUpdate:checked":o[2]||(o[2]=t=>e.activeData.filterable=t)},null,8,["checked"])])),_:1}),createVNode(n,{label:"能否多选"},{default:withCtx((()=>[createVNode(i,{checked:e.activeData.multiple,"onUpdate:checked":o[3]||(o[3]=t=>e.activeData.multiple=t),onChange:unref(a)},null,8,["checked","onChange"])])),_:1})],64)}}}),_sfc_main$L=defineComponent({inheritAttrs:!1,__name:"RCascader",props:["activeData","dicOptions"],setup(e){const t=e,a=ref(+new Date);function o(){a.value=+new Date,t.activeData.__config__.renderKey=+new Date,t.activeData.__config__.defaultValue=[]}return(t,a)=>{const l=resolveComponent("jnpf-cascader"),n=resolveComponent("a-form-item"),i=resolveComponent("a-switch");return openBlock(),createElementBlock(Fragment,null,[createVNode(n,{label:"默认值"},{default:withCtx((()=>[createVNode(l,{placeholder:"请选择",value:e.activeData.__config__.defaultValue,"onUpdate:value":a[0]||(a[0]=t=>e.activeData.__config__.defaultValue=t),options:e.activeData.options,fieldNames:e.activeData.props,multiple:e.activeData.multiple,allowClear:"",showSearch:""},null,8,["value","options","fieldNames","multiple"])])),_:1}),createVNode(_sfc_main$P,{activeData:e.activeData,dicOptions:e.dicOptions,onPropsChildrenChange:o},null,8,["activeData","dicOptions"]),createVNode(n,{label:"能否清空"},{default:withCtx((()=>[createVNode(i,{checked:e.activeData.clearable,"onUpdate:checked":a[1]||(a[1]=t=>e.activeData.clearable=t)},null,8,["checked"])])),_:1}),createVNode(n,{label:"能否搜索"},{default:withCtx((()=>[createVNode(i,{checked:e.activeData.filterable,"onUpdate:checked":a[2]||(a[2]=t=>e.activeData.filterable=t)},null,8,["checked"])])),_:1}),createVNode(n,{label:"能否多选"},{default:withCtx((()=>[createVNode(i,{checked:e.activeData.multiple,"onUpdate:checked":a[3]||(a[3]=t=>e.activeData.multiple=t),onChange:o},null,8,["checked"])])),_:1})],64)}}}),_sfc_main$K=defineComponent({inheritAttrs:!1,__name:"RTreeSelect",props:["activeData","dicOptions"],setup(e){const t=e;function a(){t.activeData.__config__.renderKey=+new Date,t.activeData.__config__.defaultValue=t.activeData.multiple?[]:void 0}return(t,o)=>{const l=resolveComponent("jnpf-tree-select"),n=resolveComponent("a-form-item"),i=resolveComponent("a-switch");return openBlock(),createElementBlock(Fragment,null,[createVNode(n,{label:"默认值"},{default:withCtx((()=>[createVNode(l,{value:e.activeData.__config__.defaultValue,"onUpdate:value":o[0]||(o[0]=t=>e.activeData.__config__.defaultValue=t),options:e.activeData.options,fieldNames:e.activeData.props,multiple:e.activeData.multiple,allowClear:"",showSearch:""},null,8,["value","options","fieldNames","multiple"])])),_:1}),createVNode(_sfc_main$P,{activeData:e.activeData,dicOptions:e.dicOptions},null,8,["activeData","dicOptions"]),createVNode(n,{label:"能否清空"},{default:withCtx((()=>[createVNode(i,{checked:e.activeData.clearable,"onUpdate:checked":o[1]||(o[1]=t=>e.activeData.clearable=t)},null,8,["checked"])])),_:1}),createVNode(n,{label:"能否搜索"},{default:withCtx((()=>[createVNode(i,{checked:e.activeData.filterable,"onUpdate:checked":o[2]||(o[2]=t=>e.activeData.filterable=t)},null,8,["checked"])])),_:1}),createVNode(n,{label:"能否多选"},{default:withCtx((()=>[createVNode(i,{checked:e.activeData.multiple,"onUpdate:checked":o[3]||(o[3]=t=>e.activeData.multiple=t),onChange:a},null,8,["checked"])])),_:1})],64)}}}),_hoisted_1$h={class:"mt-10px"},_hoisted_2$g={class:"mt-10px"},_sfc_main$J=defineComponent({inheritAttrs:!1,__name:"RDatePicker",props:["activeData","drawingList"],setup(e){const t=e,a=[{id:"yyyy",fullName:"yyyy"},{id:"yyyy-MM",fullName:"yyyy-MM"},{id:"yyyy-MM-dd",fullName:"yyyy-MM-dd"},{id:"yyyy-MM-dd HH:mm",fullName:"yyyy-MM-dd HH:mm"},{id:"yyyy-MM-dd HH:mm:ss",fullName:"yyyy-MM-dd HH:mm:ss"}],o=[{id:1,fullName:"特定时间"},{id:2,fullName:"表单字段"},{id:3,fullName:"填写当前时间"},{id:4,fullName:"当前时间前"},{id:5,fullName:"当前时间后"}],l=computed((()=>"YYYY"===t.activeData.format?[{id:1,fullName:"年"}]:"YYYY-MM"===t.activeData.format?[{id:1,fullName:"年"},{id:2,fullName:"月"}]:[{id:1,fullName:"年"},{id:2,fullName:"月"},{id:3,fullName:"日"}])),n=computed((()=>{let e=[];const a=(o,l)=>{if(o&&(o.__config__&&function(e){return!(e.__config__.layout&&"rowFormItem"!==e.__config__.layout||"table"===e.__config__.jnpfKey)||(t.activeData.__config__.isSubTable?t.activeData.__config__.parentVModel===e.__vModel__:"table"!==e.__config__.jnpfKey)}(o)&&o.__config__.children&&Array.isArray(o.__config__.children)&&a(o.__config__.children,o),Array.isArray(o)&&o.forEach((e=>a(e,l))),o.__vModel__&&"datePicker"===o.__config__.jnpfKey&&o.__vModel__!==t.activeData.__vModel__)){const t=l&&l.__config__&&"table"===l.__config__.jnpfKey;e.push({id:t?l.__vModel__+"-"+o.__vModel__:o.__vModel__,fullName:t?l.__config__.label+"-"+o.__config__.label:o.__config__.label,...o})}};return a(t.drawingList),e}));function i(){c();unref(l).some((e=>e.id===t.activeData.__config__.startTimeTarget))||(t.activeData.__config__.startTimeTarget=1);unref(l).some((e=>e.id===t.activeData.__config__.endTimeTarget))||(t.activeData.__config__.endTimeTarget=1)}function c(){t.activeData.__config__.defaultValue=null}function r(){t.activeData.startTime=null,t.activeData.__config__.startTimeType=1,t.activeData.__config__.startTimeTarget=1,t.activeData.__config__.startTimeValue=null,t.activeData.__config__.startRelationField=""}function d(e){t.activeData.startTime=null,t.activeData.__config__.startTimeTarget=1,t.activeData.__config__.startTimeValue=4==e||5==e?1:null,t.activeData.__config__.startRelationField=""}function s(e){t.activeData.startTime=e}function _(){t.activeData.endTime=null,t.activeData.__config__.endTimeType=1,t.activeData.__config__.endTimeTarget=1,t.activeData.__config__.endTimeValue=null,t.activeData.__config__.endRelationField=""}function u(e){t.activeData.startTime=null,t.activeData.__config__.endTimeTarget=1,t.activeData.__config__.endTimeValue=4==e||5==e?1:null,t.activeData.__config__.endRelationField=""}function p(e){t.activeData.endTime=e}function f(e){e||(t.activeData.__config__.startTimeValue=1)}function m(e){e||(t.activeData.__config__.endTimeValue=1)}return(t,v)=>{const h=resolveComponent("jnpf-select"),g=resolveComponent("a-form-item"),C=resolveComponent("jnpf-date-picker"),N=resolveComponent("a-checkbox"),y=resolveComponent("a-divider"),V=resolveComponent("BasicHelp"),k=resolveComponent("a-switch"),b=resolveComponent("a-input-number");return openBlock(),createElementBlock(Fragment,null,[createVNode(g,{label:"格式"},{default:withCtx((()=>[createVNode(h,{value:e.activeData.format,"onUpdate:value":v[0]||(v[0]=t=>e.activeData.format=t),placeholder:"请选择",options:a,onChange:i},null,8,["value"])])),_:1}),createVNode(g,{label:"默认值"},{default:withCtx((()=>[createVNode(C,{value:e.activeData.__config__.defaultValue,"onUpdate:value":v[1]||(v[1]=t=>e.activeData.__config__.defaultValue=t),placeholder:"请选择",format:e.activeData.format,startTime:e.activeData.startTime,endTime:e.activeData.endTime,disabled:e.activeData.__config__.defaultCurrent},null,8,["value","format","startTime","endTime","disabled"]),createVNode(N,{checked:e.activeData.__config__.defaultCurrent,"onUpdate:checked":v[2]||(v[2]=t=>e.activeData.__config__.defaultCurrent=t),class:"!mt-10px",onChange:c},{default:withCtx((()=>v[16]||(v[16]=[createTextVNode("默认为当前系统时间")]))),_:1,__:[16]},8,["checked"])])),_:1}),createVNode(y,null,{default:withCtx((()=>v[17]||(v[17]=[createTextVNode("规则")]))),_:1,__:[17]}),createVNode(g,null,{label:withCtx((()=>[v[18]||(v[18]=createTextVNode(" 开始时间")),createVNode(V,{text:["系统会限制填写者填写此字段的当天起始日期范围（包含该日期）。","该功能不做有效性验证，请自行保证。"]})])),default:withCtx((()=>[createVNode(k,{checked:e.activeData.__config__.startTimeRule,"onUpdate:checked":v[3]||(v[3]=t=>e.activeData.__config__.startTimeRule=t),onChange:r},null,8,["checked"])])),_:1}),e.activeData.__config__.startTimeRule?(openBlock(),createBlock(g,{key:0,label:"类型"},{default:withCtx((()=>[createVNode(h,{value:e.activeData.__config__.startTimeType,"onUpdate:value":v[4]||(v[4]=t=>e.activeData.__config__.startTimeType=t),placeholder:"请选择",options:o,onChange:d},null,8,["value"]),createBaseVNode("div",_hoisted_1$h,[1==e.activeData.__config__.startTimeType?(openBlock(),createBlock(C,{key:0,value:e.activeData.__config__.startTimeValue,"onUpdate:value":v[5]||(v[5]=t=>e.activeData.__config__.startTimeValue=t),placeholder:"请选择",format:e.activeData.format,onChange:s},null,8,["value","format"])):2==e.activeData.__config__.startTimeType?(openBlock(),createBlock(h,{key:1,value:e.activeData.__config__.startRelationField,"onUpdate:value":v[6]||(v[6]=t=>e.activeData.__config__.startRelationField=t),placeholder:"请选择",options:n.value},null,8,["value","options"])):4==e.activeData.__config__.startTimeType||5==e.activeData.__config__.startTimeType?(openBlock(),createBlock(b,{key:2,value:e.activeData.__config__.startTimeValue,"onUpdate:value":v[8]||(v[8]=t=>e.activeData.__config__.startTimeValue=t),min:1,precision:0,onChange:f},{addonAfter:withCtx((()=>[createVNode(h,{value:e.activeData.__config__.startTimeTarget,"onUpdate:value":v[7]||(v[7]=t=>e.activeData.__config__.startTimeTarget=t),options:l.value,class:"!w-60px"},null,8,["value","options"])])),_:1},8,["value"])):createCommentVNode("",!0)])])),_:1})):createCommentVNode("",!0),createVNode(g,null,{label:withCtx((()=>[v[19]||(v[19]=createTextVNode(" 结束时间")),createVNode(V,{text:["系统会限制填写者填写此字段的当天起始日期范围（包含该日期）。","该功能不做有效性验证，请自行保证。"]})])),default:withCtx((()=>[createVNode(k,{checked:e.activeData.__config__.endTimeRule,"onUpdate:checked":v[9]||(v[9]=t=>e.activeData.__config__.endTimeRule=t),onChange:_},null,8,["checked"])])),_:1}),e.activeData.__config__.endTimeRule?(openBlock(),createBlock(g,{key:1,label:"类型"},{default:withCtx((()=>[createVNode(h,{value:e.activeData.__config__.endTimeType,"onUpdate:value":v[10]||(v[10]=t=>e.activeData.__config__.endTimeType=t),placeholder:"请选择",options:o,onChange:u},null,8,["value"]),createBaseVNode("div",_hoisted_2$g,[1==e.activeData.__config__.endTimeType?(openBlock(),createBlock(C,{key:0,value:e.activeData.__config__.endTimeValue,"onUpdate:value":v[11]||(v[11]=t=>e.activeData.__config__.endTimeValue=t),placeholder:"请选择",format:e.activeData.format,onChange:p},null,8,["value","format"])):2==e.activeData.__config__.endTimeType?(openBlock(),createBlock(h,{key:1,value:e.activeData.__config__.endRelationField,"onUpdate:value":v[12]||(v[12]=t=>e.activeData.__config__.endRelationField=t),placeholder:"请选择",options:n.value},null,8,["value","options"])):4==e.activeData.__config__.endTimeType||5==e.activeData.__config__.endTimeType?(openBlock(),createBlock(b,{key:2,value:e.activeData.__config__.endTimeValue,"onUpdate:value":v[14]||(v[14]=t=>e.activeData.__config__.endTimeValue=t),min:1,precision:0,onChange:m},{addonAfter:withCtx((()=>[createVNode(h,{value:e.activeData.__config__.endTimeTarget,"onUpdate:value":v[13]||(v[13]=t=>e.activeData.__config__.endTimeTarget=t),options:l.value,class:"!w-60px"},null,8,["value","options"])])),_:1},8,["value"])):createCommentVNode("",!0)])])),_:1})):createCommentVNode("",!0),createVNode(g,{label:"能否清空"},{default:withCtx((()=>[createVNode(k,{checked:e.activeData.clearable,"onUpdate:checked":v[15]||(v[15]=t=>e.activeData.clearable=t)},null,8,["checked"])])),_:1})],64)}}}),_hoisted_1$g={class:"mt-10px"},_hoisted_2$f={class:"mt-10px"},_sfc_main$I=defineComponent({inheritAttrs:!1,__name:"RTimePicker",props:["activeData","drawingList"],setup(e){const t=e,a=[{id:"HH:mm:ss",fullName:"HH:mm:ss"},{id:"HH:mm",fullName:"HH:mm"}],o=[{id:1,fullName:"特定时间"},{id:2,fullName:"表单字段"},{id:3,fullName:"填写当前时间"},{id:4,fullName:"当前时间前"},{id:5,fullName:"当前时间后"}],l=computed((()=>"HH:mm"===t.activeData.format?[{id:1,fullName:"时"},{id:2,fullName:"分"}]:[{id:1,fullName:"时"},{id:2,fullName:"分"},{id:3,fullName:"秒"}])),n=computed((()=>{let e=[];const a=(o,l)=>{if(o&&(o.__config__&&function(e){return!(e.__config__.layout&&"rowFormItem"!==e.__config__.layout||"table"===e.__config__.jnpfKey)||(t.activeData.__config__.isSubTable?t.activeData.__config__.parentVModel===e.__vModel__:"table"!==e.__config__.jnpfKey)}(o)&&o.__config__.children&&Array.isArray(o.__config__.children)&&a(o.__config__.children,o),Array.isArray(o)&&o.forEach((e=>a(e,l))),o.__vModel__&&"timePicker"===o.__config__.jnpfKey&&o.__vModel__!==t.activeData.__vModel__)){const t=l&&l.__config__&&"table"===l.__config__.jnpfKey;e.push({id:t?l.__vModel__+"-"+o.__vModel__:o.__vModel__,fullName:t?l.__config__.label+"-"+o.__config__.label:o.__config__.label,...o})}};return a(t.drawingList),e}));function i(){c();unref(l).some((e=>e.id===t.activeData.__config__.startTimeTarget))||(t.activeData.__config__.startTimeTarget=1);unref(l).some((e=>e.id===t.activeData.__config__.endTimeTarget))||(t.activeData.__config__.endTimeTarget=1)}function c(){t.activeData.__config__.defaultValue=""}function r(){t.activeData.startTime=null,t.activeData.__config__.startTimeType=1,t.activeData.__config__.startTimeTarget=1,t.activeData.__config__.startTimeValue=null,t.activeData.__config__.startRelationField=""}function d(e){t.activeData.startTime=null,t.activeData.__config__.startTimeTarget=1,t.activeData.__config__.startTimeValue=4==e||5==e?1:null,t.activeData.__config__.startRelationField=""}function s(e){t.activeData.startTime=e}function _(){t.activeData.endTime=null,t.activeData.__config__.endTimeType=1,t.activeData.__config__.endTimeTarget=1,t.activeData.__config__.endTimeValue=null,t.activeData.__config__.endRelationField=""}function u(e){t.activeData.startTime=null,t.activeData.__config__.endTimeTarget=1,t.activeData.__config__.endTimeValue=4==e||5==e?1:null,t.activeData.__config__.endRelationField=""}function p(e){t.activeData.endTime=e}function f(e){e||(t.activeData.__config__.startTimeValue=1)}function m(e){e||(t.activeData.__config__.endTimeValue=1)}return(t,v)=>{const h=resolveComponent("jnpf-select"),g=resolveComponent("a-form-item"),C=resolveComponent("jnpf-time-picker"),N=resolveComponent("a-checkbox"),y=resolveComponent("a-divider"),V=resolveComponent("BasicHelp"),k=resolveComponent("a-switch"),b=resolveComponent("a-input-number");return openBlock(),createElementBlock(Fragment,null,[createVNode(g,{label:"格式"},{default:withCtx((()=>[createVNode(h,{value:e.activeData.format,"onUpdate:value":v[0]||(v[0]=t=>e.activeData.format=t),placeholder:"请选择",options:a,onChange:i},null,8,["value"])])),_:1}),createVNode(g,{label:"默认值"},{default:withCtx((()=>[createVNode(C,{value:e.activeData.__config__.defaultValue,"onUpdate:value":v[1]||(v[1]=t=>e.activeData.__config__.defaultValue=t),placeholder:"请选择",format:e.activeData.format,startTime:e.activeData.startTime,endTime:e.activeData.endTime,disabled:e.activeData.__config__.defaultCurrent},null,8,["value","format","startTime","endTime","disabled"]),createVNode(N,{checked:e.activeData.__config__.defaultCurrent,"onUpdate:checked":v[2]||(v[2]=t=>e.activeData.__config__.defaultCurrent=t),class:"!mt-10px",onChange:c},{default:withCtx((()=>v[16]||(v[16]=[createTextVNode("默认为当前系统时间")]))),_:1,__:[16]},8,["checked"])])),_:1}),createVNode(y,null,{default:withCtx((()=>v[17]||(v[17]=[createTextVNode("规则")]))),_:1,__:[17]}),createVNode(g,null,{label:withCtx((()=>[v[18]||(v[18]=createTextVNode(" 开始时间")),createVNode(V,{text:["系统会限制填写者填写此字段的当天起始日期范围（包含该时间）。","该功能不做有效性验证，请自行保证。"]})])),default:withCtx((()=>[createVNode(k,{checked:e.activeData.__config__.startTimeRule,"onUpdate:checked":v[3]||(v[3]=t=>e.activeData.__config__.startTimeRule=t),onChange:r},null,8,["checked"])])),_:1}),e.activeData.__config__.startTimeRule?(openBlock(),createBlock(g,{key:0,label:"类型"},{default:withCtx((()=>[createVNode(h,{value:e.activeData.__config__.startTimeType,"onUpdate:value":v[4]||(v[4]=t=>e.activeData.__config__.startTimeType=t),placeholder:"请选择",options:o,onChange:d},null,8,["value"]),createBaseVNode("div",_hoisted_1$g,[1==e.activeData.__config__.startTimeType?(openBlock(),createBlock(C,{key:0,value:e.activeData.__config__.startTimeValue,"onUpdate:value":v[5]||(v[5]=t=>e.activeData.__config__.startTimeValue=t),placeholder:"请选择开始时间",format:e.activeData.format,onChange:s},null,8,["value","format"])):2==e.activeData.__config__.startTimeType?(openBlock(),createBlock(h,{key:1,value:e.activeData.__config__.startRelationField,"onUpdate:value":v[6]||(v[6]=t=>e.activeData.__config__.startRelationField=t),placeholder:"请选择关联时间选择",options:n.value},null,8,["value","options"])):4==e.activeData.__config__.startTimeType||5==e.activeData.__config__.startTimeType?(openBlock(),createBlock(b,{key:2,value:e.activeData.__config__.startTimeValue,"onUpdate:value":v[8]||(v[8]=t=>e.activeData.__config__.startTimeValue=t),min:1,precision:0,onChange:f},{addonAfter:withCtx((()=>[createVNode(h,{value:e.activeData.__config__.startTimeTarget,"onUpdate:value":v[7]||(v[7]=t=>e.activeData.__config__.startTimeTarget=t),options:l.value,class:"!w-60px"},null,8,["value","options"])])),_:1},8,["value"])):createCommentVNode("",!0)])])),_:1})):createCommentVNode("",!0),createVNode(g,null,{label:withCtx((()=>[v[19]||(v[19]=createTextVNode(" 结束时间")),createVNode(V,{text:["系统会限制填写者填写此字段的当天起始日期范围（包含该时间）。","该功能不做有效性验证，请自行保证。"]})])),default:withCtx((()=>[createVNode(k,{checked:e.activeData.__config__.endTimeRule,"onUpdate:checked":v[9]||(v[9]=t=>e.activeData.__config__.endTimeRule=t),onChange:_},null,8,["checked"])])),_:1}),e.activeData.__config__.endTimeRule?(openBlock(),createBlock(g,{key:1,label:"类型"},{default:withCtx((()=>[createVNode(h,{value:e.activeData.__config__.endTimeType,"onUpdate:value":v[10]||(v[10]=t=>e.activeData.__config__.endTimeType=t),placeholder:"请选择",options:o,onChange:u},null,8,["value"]),createBaseVNode("div",_hoisted_2$f,[1==e.activeData.__config__.endTimeType?(openBlock(),createBlock(C,{key:0,value:e.activeData.__config__.endTimeValue,"onUpdate:value":v[11]||(v[11]=t=>e.activeData.__config__.endTimeValue=t),placeholder:"请选择结束时间",format:e.activeData.format,onChange:p},null,8,["value","format"])):2==e.activeData.__config__.endTimeType?(openBlock(),createBlock(h,{key:1,value:e.activeData.__config__.endRelationField,"onUpdate:value":v[12]||(v[12]=t=>e.activeData.__config__.endRelationField=t),placeholder:"请选择关联时间选择",options:n.value},null,8,["value","options"])):4==e.activeData.__config__.endTimeType||5==e.activeData.__config__.endTimeType?(openBlock(),createBlock(b,{key:2,value:e.activeData.__config__.endTimeValue,"onUpdate:value":v[14]||(v[14]=t=>e.activeData.__config__.endTimeValue=t),min:1,precision:0,onChange:m},{addonAfter:withCtx((()=>[createVNode(h,{value:e.activeData.__config__.endTimeTarget,"onUpdate:value":v[13]||(v[13]=t=>e.activeData.__config__.endTimeTarget=t),options:l.value,class:"!w-60px"},null,8,["value","options"])])),_:1},8,["value"])):createCommentVNode("",!0)])])),_:1})):createCommentVNode("",!0),createVNode(g,{label:"能否清空"},{default:withCtx((()=>[createVNode(k,{checked:e.activeData.clearable,"onUpdate:checked":v[15]||(v[15]=t=>e.activeData.clearable=t)},null,8,["checked"])])),_:1})],64)}}}),_sfc_main$H=defineComponent({inheritAttrs:!1,__name:"RUploadFile",props:["activeData"],setup(e){const t=e,a=[{id:"image/*",fullName:"图片"},{id:"video/*",fullName:"视频"},{id:"audio/*",fullName:"音频"},{id:".xls,.xlsx",fullName:"excel"},{id:".doc,.docx",fullName:"word"},{id:".pdf",fullName:"pdf"},{id:".txt",fullName:"txt"}],o=[{id:"defaultPath",fullName:"默认路径"},{id:"selfPath",fullName:"自定义路径"}],l=[{id:"1",fullName:"用户"},{id:"2",fullName:"时间"},{id:"3",fullName:"自定义"}],n=[{id:"YYYY",fullName:"YYYY"},{id:"YYYYMM",fullName:"YYYYMM"},{id:"YYYY/MM",fullName:"YYYY/MM"},{id:"YYYYMMDD",fullName:"YYYYMMDD"},{id:"YYYY/MM/DD",fullName:"YYYY/MM/DD"}],i=computed({get(){if(!t.activeData.accept)return[];return t.activeData.accept.replace(".xls,.xlsx",".xls|.xlsx").replace(".doc,.docx",".doc|.docx").split(",").map((e=>e.replace("|",",")))},set(e){t.activeData.accept=e.join(","),t.activeData.__config__.renderKey=+new Date}});return(t,c)=>{const r=resolveComponent("a-input"),d=resolveComponent("a-form-item"),s=resolveComponent("jnpf-select"),_=resolveComponent("a-select-option"),u=resolveComponent("a-select"),p=resolveComponent("a-input-number"),f=resolveComponent("jnpf-radio"),m=resolveComponent("BasicHelp");return openBlock(),createElementBlock(Fragment,null,[createVNode(d,{label:"按钮文字"},{default:withCtx((()=>[createVNode(r,{value:e.activeData.buttonText,"onUpdate:value":c[0]||(c[0]=t=>e.activeData.buttonText=t),placeholder:"请输入",maxlength:4},null,8,["value"])])),_:1}),createVNode(d,{label:"上传提示"},{default:withCtx((()=>[createVNode(r,{value:e.activeData.tipText,"onUpdate:value":c[1]||(c[1]=t=>e.activeData.tipText=t),placeholder:"请输入"},null,8,["value"])])),_:1}),createVNode(d,{label:"文件类型"},{default:withCtx((()=>[createVNode(s,{value:i.value,"onUpdate:value":c[2]||(c[2]=e=>i.value=e),placeholder:"不限制",allowClear:"",options:a,multiple:""},null,8,["value"])])),_:1}),createVNode(d,{label:"文件大小"},{default:withCtx((()=>[createVNode(p,{value:e.activeData.fileSize,"onUpdate:value":c[4]||(c[4]=t=>e.activeData.fileSize=t),placeholder:"请输入",min:1,precision:0},{addonAfter:withCtx((()=>[createVNode(u,{value:e.activeData.sizeUnit,"onUpdate:value":c[3]||(c[3]=t=>e.activeData.sizeUnit=t),style:{width:"66px"}},{default:withCtx((()=>[createVNode(_,{value:"KB"},{default:withCtx((()=>c[10]||(c[10]=[createTextVNode("KB")]))),_:1,__:[10]}),createVNode(_,{value:"MB"},{default:withCtx((()=>c[11]||(c[11]=[createTextVNode("MB")]))),_:1,__:[11]})])),_:1},8,["value"])])),_:1},8,["value"])])),_:1}),createVNode(d,{label:"最大上传数"},{default:withCtx((()=>[createVNode(p,{value:e.activeData.limit,"onUpdate:value":c[5]||(c[5]=t=>e.activeData.limit=t),placeholder:"请输入",min:1,precision:0},null,8,["value"])])),_:1}),createVNode(d,{label:"上传路径"},{default:withCtx((()=>[createVNode(f,{value:e.activeData.pathType,"onUpdate:value":c[6]||(c[6]=t=>e.activeData.pathType=t),options:o,optionType:"button","button-style":"solid",class:"right-radio"},null,8,["value"])])),_:1}),"selfPath"===e.activeData.pathType?(openBlock(),createElementBlock(Fragment,{key:0},[createVNode(d,{label:"排序规则"},{default:withCtx((()=>[createVNode(s,{value:e.activeData.sortRule,"onUpdate:value":c[7]||(c[7]=t=>e.activeData.sortRule=t),options:l,multiple:""},null,8,["value"])])),_:1}),e.activeData.sortRule?.includes("2")?(openBlock(),createBlock(d,{key:0,label:"时间格式"},{default:withCtx((()=>[createVNode(s,{value:e.activeData.timeFormat,"onUpdate:value":c[8]||(c[8]=t=>e.activeData.timeFormat=t),options:n},null,8,["value"])])),_:1})):createCommentVNode("",!0),e.activeData.sortRule?.includes("3")?(openBlock(),createBlock(d,{key:1},{label:withCtx((()=>[c[12]||(c[12]=createTextVNode(" 文件夹名 ")),createVNode(m,{text:["以字母、数字开头；","只能输入字母、数字、下划线(_)、连字符(-)、斜杠(/)；","上下级文件夹名之间用/隔开，不能以/结尾；","合法的文件夹名如：Soft-1 或 Soft/1_test。"]})])),default:withCtx((()=>[createVNode(r,{value:e.activeData.folder,"onUpdate:value":c[9]||(c[9]=t=>e.activeData.folder=t),placeholder:"请输入",maxlength:100},null,8,["value"])])),_:1})):createCommentVNode("",!0)],64)):createCommentVNode("",!0)],64)}}}),_sfc_main$G=defineComponent({inheritAttrs:!1,__name:"RUploadImg",props:["activeData"],setup(e){const t=[{id:"card",fullName:"卡片"},{id:"button",fullName:"按钮"},{id:"dragger",fullName:"拖拽"}],a=[{id:"defaultPath",fullName:"默认路径"},{id:"selfPath",fullName:"自定义路径"}],o=[{id:"1",fullName:"用户"},{id:"2",fullName:"时间"},{id:"3",fullName:"自定义"}],l=[{id:"YYYY",fullName:"YYYY"},{id:"YYYYMM",fullName:"YYYYMM"},{id:"YYYY/MM",fullName:"YYYY/MM"},{id:"YYYYMMDD",fullName:"YYYYMMDD"},{id:"YYYY/MM/DD",fullName:"YYYY/MM/DD"}];return(n,i)=>{const c=resolveComponent("jnpf-radio"),r=resolveComponent("a-form-item"),d=resolveComponent("a-input"),s=resolveComponent("a-select-option"),_=resolveComponent("a-select"),u=resolveComponent("a-input-number"),p=resolveComponent("jnpf-select"),f=resolveComponent("BasicHelp");return openBlock(),createElementBlock(Fragment,null,[createVNode(r,{label:"上传类型"},{default:withCtx((()=>[createVNode(c,{value:e.activeData.showType,"onUpdate:value":i[0]||(i[0]=t=>e.activeData.showType=t),options:t,optionType:"button","button-style":"solid"},null,8,["value"])])),_:1}),"dragger"!==e.activeData.showType?(openBlock(),createBlock(r,{key:0,label:"按钮文字"},{default:withCtx((()=>[createVNode(d,{value:e.activeData.buttonText,"onUpdate:value":i[1]||(i[1]=t=>e.activeData.buttonText=t),placeholder:"请输入",maxlength:4},null,8,["value"])])),_:1})):createCommentVNode("",!0),createVNode(r,{label:"上传提示"},{default:withCtx((()=>[createVNode(d,{value:e.activeData.tipText,"onUpdate:value":i[2]||(i[2]=t=>e.activeData.tipText=t),placeholder:"请输入"},null,8,["value"])])),_:1}),createVNode(r,{label:"文件大小"},{default:withCtx((()=>[createVNode(u,{value:e.activeData.fileSize,"onUpdate:value":i[4]||(i[4]=t=>e.activeData.fileSize=t),placeholder:"请输入",min:1,precision:0},{addonAfter:withCtx((()=>[createVNode(_,{value:e.activeData.sizeUnit,"onUpdate:value":i[3]||(i[3]=t=>e.activeData.sizeUnit=t),style:{width:"66px"}},{default:withCtx((()=>[createVNode(s,{value:"KB"},{default:withCtx((()=>i[10]||(i[10]=[createTextVNode("KB")]))),_:1,__:[10]}),createVNode(s,{value:"MB"},{default:withCtx((()=>i[11]||(i[11]=[createTextVNode("MB")]))),_:1,__:[11]})])),_:1},8,["value"])])),_:1},8,["value"])])),_:1}),createVNode(r,{label:"最大上传数"},{default:withCtx((()=>[createVNode(u,{value:e.activeData.limit,"onUpdate:value":i[5]||(i[5]=t=>e.activeData.limit=t),placeholder:"请输入",min:1,precision:0},null,8,["value"])])),_:1}),createVNode(r,{label:"上传路径"},{default:withCtx((()=>[createVNode(c,{value:e.activeData.pathType,"onUpdate:value":i[6]||(i[6]=t=>e.activeData.pathType=t),options:a,optionType:"button","button-style":"solid",class:"right-radio"},null,8,["value"])])),_:1}),"selfPath"===e.activeData.pathType?(openBlock(),createElementBlock(Fragment,{key:1},[createVNode(r,{label:"排序规则"},{default:withCtx((()=>[createVNode(p,{value:e.activeData.sortRule,"onUpdate:value":i[7]||(i[7]=t=>e.activeData.sortRule=t),options:o,multiple:""},null,8,["value"])])),_:1}),e.activeData.sortRule?.includes("2")?(openBlock(),createBlock(r,{key:0,label:"时间格式"},{default:withCtx((()=>[createVNode(p,{value:e.activeData.timeFormat,"onUpdate:value":i[8]||(i[8]=t=>e.activeData.timeFormat=t),options:l},null,8,["value"])])),_:1})):createCommentVNode("",!0),e.activeData.sortRule?.includes("3")?(openBlock(),createBlock(r,{key:1},{label:withCtx((()=>[i[12]||(i[12]=createTextVNode(" 文件夹名 ")),createVNode(f,{text:["以字母、数字开头；","只能输入字母、数字、下划线(_)、连字符(-)、斜杠(/)；","上下级文件夹名之间用/隔开，不能以/结尾；","合法的文件夹名如：Soft-1 或 Soft/1_test。"]})])),default:withCtx((()=>[createVNode(d,{value:e.activeData.folder,"onUpdate:value":i[9]||(i[9]=t=>e.activeData.folder=t),placeholder:"请输入",maxlength:100},null,8,["value"])])),_:1})):createCommentVNode("",!0)],64)):createCommentVNode("",!0)],64)}}}),_sfc_main$F=defineComponent({inheritAttrs:!1,__name:"RColorPicker",props:["activeData"],setup(e){const t=e,a=[{id:"hex",fullName:"hex"},{id:"rgb",fullName:"rgb"},{id:"rgba",fullName:"rgba"},{id:"hsv",fullName:"hsv"},{id:"hsl",fullName:"hsl"}],o=ref(+new Date);function l(e){t.activeData.__config__.defaultValue=null,t.activeData.showAlpha=e&&e.indexOf("a")>-1,t.activeData.__config__.renderKey=+new Date,o.value=+new Date}return(t,n)=>{const i=resolveComponent("jnpf-color-picker"),c=resolveComponent("a-form-item"),r=resolveComponent("jnpf-select");return openBlock(),createElementBlock(Fragment,null,[createVNode(c,{label:"默认值"},{default:withCtx((()=>[(openBlock(),createBlock(i,{value:e.activeData.__config__.defaultValue,"onUpdate:value":n[0]||(n[0]=t=>e.activeData.__config__.defaultValue=t),"color-format":e.activeData.colorFormat,key:o.value,"show-alpha":e.activeData.showAlpha},null,8,["value","color-format","show-alpha"]))])),_:1}),createVNode(c,{label:"颜色格式"},{default:withCtx((()=>[createVNode(r,{value:e.activeData.colorFormat,"onUpdate:value":n[1]||(n[1]=t=>e.activeData.colorFormat=t),placeholder:"请选择",allowClear:"",options:a,onChange:l},null,8,["value"])])),_:1})],64)}}}),_sfc_main$E=defineComponent({inheritAttrs:!1,__name:"RRate",props:["activeData"],setup:e=>(t,a)=>{const o=resolveComponent("a-rate"),l=resolveComponent("a-form-item"),n=resolveComponent("a-input-number"),i=resolveComponent("a-switch");return openBlock(),createElementBlock(Fragment,null,[createVNode(l,{label:"默认值"},{default:withCtx((()=>[createVNode(o,{value:e.activeData.__config__.defaultValue,"onUpdate:value":a[0]||(a[0]=t=>e.activeData.__config__.defaultValue=t),count:e.activeData.count,allowHalf:e.activeData.allowHalf},null,8,["value","count","allowHalf"])])),_:1}),createVNode(l,{label:"最大值"},{default:withCtx((()=>[createVNode(n,{value:e.activeData.count,"onUpdate:value":a[1]||(a[1]=t=>e.activeData.count=t),placeholder:"请输入",min:1,max:50,precision:0},null,8,["value"])])),_:1}),createVNode(l,{label:"允许半选"},{default:withCtx((()=>[createVNode(i,{checked:e.activeData.allowHalf,"onUpdate:checked":a[2]||(a[2]=t=>e.activeData.allowHalf=t)},null,8,["checked"])])),_:1})],64)}}),_sfc_main$D=defineComponent({inheritAttrs:!1,__name:"RSlider",props:["activeData"],setup:e=>(t,a)=>{const o=resolveComponent("a-input-number"),l=resolveComponent("a-form-item");return openBlock(),createElementBlock(Fragment,null,[createVNode(l,{label:"默认值"},{default:withCtx((()=>[createVNode(o,{value:e.activeData.__config__.defaultValue,"onUpdate:value":a[0]||(a[0]=t=>e.activeData.__config__.defaultValue=t),placeholder:"请输入",min:e.activeData.min,max:e.activeData.max,step:e.activeData.step},null,8,["value","min","max","step"])])),_:1}),createVNode(l,{label:"最小值"},{default:withCtx((()=>[createVNode(o,{value:e.activeData.min,"onUpdate:value":a[1]||(a[1]=t=>e.activeData.min=t),placeholder:"请输入"},null,8,["value"])])),_:1}),createVNode(l,{label:"最大值"},{default:withCtx((()=>[createVNode(o,{value:e.activeData.max,"onUpdate:value":a[2]||(a[2]=t=>e.activeData.max=t),placeholder:"请输入"},null,8,["value"])])),_:1}),createVNode(l,{label:"步数"},{default:withCtx((()=>[createVNode(o,{value:e.activeData.step,"onUpdate:value":a[3]||(a[3]=t=>e.activeData.step=t),placeholder:"请输入",min:0},null,8,["value"])])),_:1})],64)}}),_sfc_main$C=defineComponent({inheritAttrs:!1,__name:"REditor",props:["activeData"],setup:e=>(t,a)=>{const o=resolveComponent("a-input"),l=resolveComponent("a-form-item");return openBlock(),createBlock(l,{label:"默认值"},{default:withCtx((()=>[createVNode(o,{value:e.activeData.__config__.defaultValue,"onUpdate:value":a[0]||(a[0]=t=>e.activeData.__config__.defaultValue=t),placeholder:"请输入"},null,8,["value"])])),_:1})}}),_sfc_main$B=defineComponent({inheritAttrs:!1,__name:"RLink",props:["activeData"],setup(e){const t=[{id:"left",fullName:"左对齐"},{id:"center",fullName:"居中对齐"},{id:"right",fullName:"右对齐"}];return(a,o)=>{const l=resolveComponent("jnpf-i18n-input"),n=resolveComponent("a-form-item"),i=resolveComponent("BasicHelp"),c=resolveComponent("a-select-option"),r=resolveComponent("a-select"),d=resolveComponent("a-input"),s=resolveComponent("jnpf-radio");return openBlock(),createElementBlock(Fragment,null,[createVNode(n,{label:"链接文本"},{default:withCtx((()=>[createVNode(l,{value:e.activeData.content,"onUpdate:value":o[0]||(o[0]=t=>e.activeData.content=t),i18n:e.activeData.contentI18nCode,"onUpdate:i18n":o[1]||(o[1]=t=>e.activeData.contentI18nCode=t),placeholder:"请输入"},null,8,["value","i18n"])])),_:1}),createVNode(n,null,{label:withCtx((()=>[o[5]||(o[5]=createTextVNode("链接地址")),createVNode(i,{text:"地址以http://或https://开头"})])),default:withCtx((()=>[createVNode(d,{value:e.activeData.href,"onUpdate:value":o[3]||(o[3]=t=>e.activeData.href=t),placeholder:"请输入"},{addonAfter:withCtx((()=>[createVNode(r,{value:e.activeData.target,"onUpdate:value":o[2]||(o[2]=t=>e.activeData.target=t),class:"!w-85px"},{default:withCtx((()=>[createVNode(c,{value:"_self"},{default:withCtx((()=>o[6]||(o[6]=[createTextVNode("_self")]))),_:1,__:[6]}),createVNode(c,{value:"_blank"},{default:withCtx((()=>o[7]||(o[7]=[createTextVNode("_blank")]))),_:1,__:[7]})])),_:1},8,["value"])])),_:1},8,["value"])])),_:1}),createVNode(n,{label:"对齐方式"},{default:withCtx((()=>[createVNode(s,{value:e.activeData.textStyle["text-align"],"onUpdate:value":o[4]||(o[4]=t=>e.activeData.textStyle["text-align"]=t),options:t,optionType:"button","button-style":"solid",class:"right-radio"},null,8,["value"])])),_:1})],64)}}}),_sfc_main$A=defineComponent({inheritAttrs:!1,__name:"RButton",props:["activeData"],setup(e){const t=[{id:"left",fullName:"左对齐"},{id:"center",fullName:"居中对齐"},{id:"right",fullName:"右对齐"}];return(a,o)=>{const l=resolveComponent("jnpf-i18n-input"),n=resolveComponent("a-form-item"),i=resolveComponent("jnpf-radio"),c=resolveComponent("a-select-option"),r=resolveComponent("a-select");return openBlock(),createElementBlock(Fragment,null,[createVNode(n,{label:"按钮文字"},{default:withCtx((()=>[createVNode(l,{value:e.activeData.buttonText,"onUpdate:value":o[0]||(o[0]=t=>e.activeData.buttonText=t),i18n:e.activeData.buttonTextI18nCode,"onUpdate:i18n":o[1]||(o[1]=t=>e.activeData.buttonTextI18nCode=t),placeholder:"请输入"},null,8,["value","i18n"])])),_:1}),createVNode(n,{label:"对齐方式"},{default:withCtx((()=>[createVNode(i,{value:e.activeData.align,"onUpdate:value":o[2]||(o[2]=t=>e.activeData.align=t),options:t,optionType:"button","button-style":"solid",class:"right-radio"},null,8,["value"])])),_:1}),createVNode(n,{label:"按钮类型"},{default:withCtx((()=>[createVNode(r,{value:e.activeData.type,"onUpdate:value":o[3]||(o[3]=t=>e.activeData.type=t)},{default:withCtx((()=>[createVNode(c,{value:""},{default:withCtx((()=>o[4]||(o[4]=[createTextVNode("默认按钮")]))),_:1,__:[4]}),createVNode(c,{value:"primary"},{default:withCtx((()=>o[5]||(o[5]=[createTextVNode("主要按钮")]))),_:1,__:[5]}),createVNode(c,{value:"success"},{default:withCtx((()=>o[6]||(o[6]=[createTextVNode("成功按钮")]))),_:1,__:[6]}),createVNode(c,{value:"info"},{default:withCtx((()=>o[7]||(o[7]=[createTextVNode("信息按钮")]))),_:1,__:[7]}),createVNode(c,{value:"warning"},{default:withCtx((()=>o[8]||(o[8]=[createTextVNode("警告按钮")]))),_:1,__:[8]}),createVNode(c,{value:"danger"},{default:withCtx((()=>o[9]||(o[9]=[createTextVNode("危险按钮")]))),_:1,__:[9]})])),_:1},8,["value"])])),_:1})],64)}}}),_sfc_main$z=defineComponent({inheritAttrs:!1,__name:"RText",props:["activeData"],setup(e){const t=[{id:"left",fullName:"左对齐"},{id:"center",fullName:"居中对齐"},{id:"right",fullName:"右对齐"}],a=[{id:"none",fullName:"无样式"},{id:"underline",fullName:"下划线"},{id:"line-through",fullName:"删除线"}];return(o,l)=>{const n=resolveComponent("jnpf-i18n-input"),i=resolveComponent("a-form-item"),c=resolveComponent("a-input-number"),r=resolveComponent("jnpf-radio"),d=resolveComponent("jnpf-color-picker"),s=resolveComponent("a-switch");return openBlock(),createElementBlock(Fragment,null,[createVNode(i,{label:"文本内容"},{default:withCtx((()=>[createVNode(n,{value:e.activeData.content,"onUpdate:value":l[0]||(l[0]=t=>e.activeData.content=t),i18n:e.activeData.contentI18nCode,"onUpdate:i18n":l[1]||(l[1]=t=>e.activeData.contentI18nCode=t),placeholder:"请输入"},null,8,["value","i18n"])])),_:1}),createVNode(i,{label:"行高"},{default:withCtx((()=>[createVNode(c,{value:e.activeData.textStyle["line-height"],"onUpdate:value":l[2]||(l[2]=t=>e.activeData.textStyle["line-height"]=t),min:12,placeholder:"请输入",precision:0},null,8,["value"])])),_:1}),createVNode(i,{label:"字体大小"},{default:withCtx((()=>[createVNode(c,{value:e.activeData.textStyle["font-size"],"onUpdate:value":l[3]||(l[3]=t=>e.activeData.textStyle["font-size"]=t),min:12,placeholder:"请输入",precision:0},null,8,["value"])])),_:1}),createVNode(i,{label:"对齐方式"},{default:withCtx((()=>[createVNode(r,{value:e.activeData.textStyle["text-align"],"onUpdate:value":l[4]||(l[4]=t=>e.activeData.textStyle["text-align"]=t),options:t,optionType:"button","button-style":"solid",class:"right-radio"},null,8,["value"])])),_:1}),createVNode(i,{label:"字体颜色"},{default:withCtx((()=>[createVNode(d,{value:e.activeData.textStyle.color,"onUpdate:value":l[5]||(l[5]=t=>e.activeData.textStyle.color=t),size:"small"},null,8,["value"])])),_:1}),createVNode(i,{label:"是否加粗"},{default:withCtx((()=>[createVNode(s,{checked:e.activeData.textStyle["font-weight"],"onUpdate:checked":l[6]||(l[6]=t=>e.activeData.textStyle["font-weight"]=t),checkedValue:"bold",unCheckedValue:"normal"},null,8,["checked"])])),_:1}),createVNode(i,{label:"是否斜体"},{default:withCtx((()=>[createVNode(s,{checked:e.activeData.textStyle["font-style"],"onUpdate:checked":l[7]||(l[7]=t=>e.activeData.textStyle["font-style"]=t),checkedValue:"italic",unCheckedValue:"normal"},null,8,["checked"])])),_:1}),createVNode(i,{label:"下划线样式"},{default:withCtx((()=>[createVNode(r,{value:e.activeData.textStyle["text-decoration"],"onUpdate:value":l[8]||(l[8]=t=>e.activeData.textStyle["text-decoration"]=t),options:a,optionType:"button","button-style":"solid",class:"right-radio"},null,8,["value"])])),_:1})],64)}}}),_hoisted_1$f={class:"type-list"},_hoisted_2$e=["onClick"],_sfc_main$y=defineComponent({inheritAttrs:!1,__name:"RAlert",props:["activeData"],setup(e){const t=[{id:"success",fullName:"成功提示"},{id:"info",fullName:"消息提示"},{id:"warning",fullName:"警告提示"},{id:"error",fullName:"错误提示"}];return(a,o)=>{const l=resolveComponent("jnpf-i18n-input"),n=resolveComponent("a-form-item"),i=resolveComponent("a-alert"),c=resolveComponent("a-switch");return openBlock(),createElementBlock(Fragment,null,[createVNode(n,{label:"提示文本"},{default:withCtx((()=>[createVNode(l,{value:e.activeData.title,"onUpdate:value":o[0]||(o[0]=t=>e.activeData.title=t),i18n:e.activeData.titleI18nCode,"onUpdate:i18n":o[1]||(o[1]=t=>e.activeData.titleI18nCode=t),placeholder:"请输入"},null,8,["value","i18n"])])),_:1}),createVNode(n,{label:"辅助文本"},{default:withCtx((()=>[createVNode(l,{value:e.activeData.description,"onUpdate:value":o[2]||(o[2]=t=>e.activeData.description=t),i18n:e.activeData.descriptionI18nCode,"onUpdate:i18n":o[3]||(o[3]=t=>e.activeData.descriptionI18nCode=t),placeholder:"请输入"},null,8,["value","i18n"])])),_:1}),createVNode(n,{label:"样式效果"},{default:withCtx((()=>[createBaseVNode("div",_hoisted_1$f,[(openBlock(),createElementBlock(Fragment,null,renderList(t,((t,a)=>createBaseVNode("div",{class:normalizeClass(["type-list-item",{active:e.activeData.type===t.id}]),key:a,onClick:a=>e.activeData.type=t.id},[createVNode(i,{message:t.fullName,type:t.id,closable:!1},null,8,["message","type"])],10,_hoisted_2$e))),64))])])),_:1}),createVNode(n,{label:"提示图标"},{default:withCtx((()=>[createVNode(c,{checked:e.activeData.showIcon,"onUpdate:checked":o[4]||(o[4]=t=>e.activeData.showIcon=t)},null,8,["checked"])])),_:1}),createVNode(n,{label:"提示可关闭"},{default:withCtx((()=>[createVNode(c,{checked:e.activeData.closable,"onUpdate:checked":o[5]||(o[5]=t=>e.activeData.closable=t)},null,8,["checked"])])),_:1}),e.activeData.closable?(openBlock(),createBlock(n,{key:0,label:"按钮文字"},{default:withCtx((()=>[createVNode(l,{value:e.activeData.closeText,"onUpdate:value":o[6]||(o[6]=t=>e.activeData.closeText=t),i18n:e.activeData.closeTextI18nCode,"onUpdate:i18n":o[7]||(o[7]=t=>e.activeData.closeTextI18nCode=t),maxlength:10,placeholder:"请输入"},null,8,["value","i18n"])])),_:1})):createCommentVNode("",!0)],64)}}}),RAlert_vue_vue_type_style_index_0_scoped_8bbbf3f7_lang="",RAlert=_export_sfc(_sfc_main$y,[["__scopeId","data-v-8bbbf3f7"]]),_sfc_main$x=defineComponent({inheritAttrs:!1,__name:"RQrcode",props:["activeData","drawingOptions","formInfo"],setup(e){const t=[{id:"static",fullName:"固定值"},{id:"relation",fullName:"组件联动"},{id:"form",fullName:"当前表单路径"}];return(a,o)=>{const l=resolveComponent("jnpf-color-picker"),n=resolveComponent("a-form-item"),i=resolveComponent("a-input-number"),c=resolveComponent("BasicHelp"),r=resolveComponent("a-select-option"),d=resolveComponent("a-select"),s=resolveComponent("a-input"),_=resolveComponent("jnpf-select");return openBlock(),createElementBlock(Fragment,null,[createVNode(n,{label:"实点颜色"},{default:withCtx((()=>[createVNode(l,{value:e.activeData.colorDark,"onUpdate:value":o[0]||(o[0]=t=>e.activeData.colorDark=t),size:"small"},null,8,["value"])])),_:1}),createVNode(n,{label:"尺寸"},{default:withCtx((()=>[createVNode(i,{value:e.activeData.width,"onUpdate:value":o[1]||(o[1]=t=>e.activeData.width=t),placeholder:"请输入",min:0,precision:0},null,8,["value"])])),_:1}),createVNode(n,{label:"默认值"},{default:withCtx((()=>[createVNode(d,{value:e.activeData.dataType,"onUpdate:value":o[2]||(o[2]=t=>e.activeData.dataType=t)},{default:withCtx((()=>[(openBlock(),createElementBlock(Fragment,null,renderList(t,(e=>createVNode(r,{key:e.id,value:e.id},{default:withCtx((()=>[createTextVNode(toDisplayString(e.fullName),1),"form"===e.id?(openBlock(),createBlock(c,{key:0,text:"不支持代码生成"})):createCommentVNode("",!0)])),_:2},1032,["value"]))),64))])),_:1},8,["value"])])),_:1}),"static"===e.activeData.dataType?(openBlock(),createBlock(n,{key:0,label:"固定值"},{default:withCtx((()=>[createVNode(s,{value:e.activeData.staticText,"onUpdate:value":o[3]||(o[3]=t=>e.activeData.staticText=t),placeholder:"请输入",allowClear:""},null,8,["value"])])),_:1})):createCommentVNode("",!0),"relation"===e.activeData.dataType?(openBlock(),createBlock(n,{key:1,label:"选择组件"},{default:withCtx((()=>[createVNode(_,{value:e.activeData.relationField,"onUpdate:value":o[4]||(o[4]=t=>e.activeData.relationField=t),options:e.drawingOptions,allowClear:"",showSearch:""},null,8,["value","options"])])),_:1})):createCommentVNode("",!0)],64)}}}),_sfc_main$w=defineComponent({inheritAttrs:!1,__name:"RBarcode",props:["activeData","drawingOptions"],setup(e){const{createMessage:t}=useMessage(),a=[{id:"static",fullName:"固定值"},{id:"relation",fullName:"组件联动"}],o=[{id:"code128",fullName:"code128"},{id:"ean13",fullName:"ean13"},{id:"ean8",fullName:"ean8"},{id:"ean5",fullName:"ean5"},{id:"ean2",fullName:"ean2"},{id:"code39",fullName:"code39"},{id:"itf14",fullName:"itf14"},{id:"msi10",fullName:"msi10"},{id:"msi11",fullName:"msi11"},{id:"pharmacode",fullName:"pharmacode"},{id:"upc",fullName:"upc"},{id:"codabar",fullName:"codabar"}];function l(e){if(!e)return;/^[A-Za-z0-9]+$/.test(e)||t.error("固定值请输入数字或者英文字母")}return(t,n)=>{const i=resolveComponent("jnpf-select"),c=resolveComponent("a-form-item"),r=resolveComponent("jnpf-color-picker"),d=resolveComponent("a-input-number"),s=resolveComponent("jnpf-input");return openBlock(),createElementBlock(Fragment,null,[createVNode(c,{label:"编码格式"},{default:withCtx((()=>[createVNode(i,{value:e.activeData.format,"onUpdate:value":n[0]||(n[0]=t=>e.activeData.format=t),options:o},null,8,["value"])])),_:1}),createVNode(c,{label:"条码颜色"},{default:withCtx((()=>[createVNode(r,{value:e.activeData.lineColor,"onUpdate:value":n[1]||(n[1]=t=>e.activeData.lineColor=t),size:"small"},null,8,["value"])])),_:1}),createVNode(c,{label:"宽度"},{default:withCtx((()=>[createVNode(d,{value:e.activeData.width,"onUpdate:value":n[2]||(n[2]=t=>e.activeData.width=t),placeholder:"请输入",min:0,max:100,precision:0},null,8,["value"])])),_:1}),createVNode(c,{label:"高度"},{default:withCtx((()=>[createVNode(d,{value:e.activeData.height,"onUpdate:value":n[3]||(n[3]=t=>e.activeData.height=t),placeholder:"请输入",min:0,precision:0},null,8,["value"])])),_:1}),createVNode(c,{label:"默认值"},{default:withCtx((()=>[createVNode(i,{value:e.activeData.dataType,"onUpdate:value":n[4]||(n[4]=t=>e.activeData.dataType=t),options:a},null,8,["value"])])),_:1}),"static"===e.activeData.dataType?(openBlock(),createBlock(c,{key:0,label:"固定值"},{default:withCtx((()=>[createVNode(s,{value:e.activeData.staticText,"onUpdate:value":n[5]||(n[5]=t=>e.activeData.staticText=t),placeholder:"请输入",allowClear:"",onChange:l},null,8,["value"])])),_:1})):createCommentVNode("",!0),"relation"===e.activeData.dataType?(openBlock(),createBlock(c,{key:1,label:"选择组件"},{default:withCtx((()=>[createVNode(i,{value:e.activeData.relationField,"onUpdate:value":n[6]||(n[6]=t=>e.activeData.relationField=t),options:e.drawingOptions,allowClear:"",showSearch:""},null,8,["value","options"])])),_:1})):createCommentVNode("",!0)],64)}}}),_sfc_main$v=defineComponent({inheritAttrs:!1,__name:"ROrgRight",props:["activeData","drawingList"],setup(e){const t=e,a=[{id:"all",fullName:"全部"},{id:"custom",fullName:"自定义"}],o=[...a,{id:"dep",fullName:"部门组件联动"},{id:"pos",fullName:"岗位组件联动"},{id:"role",fullName:"角色组件联动"},{id:"group",fullName:"分组组件联动"}],l=computed((()=>unref(t.activeData).__config__?.jnpfKey)),n=computed((()=>{if("all"===t.activeData.selectType||"custom"===t.activeData.selectType)return[];let e=[];const a=(o,l)=>{if(o&&(o.__config__&&function(e){return!(e.__config__.layout&&"rowFormItem"!==e.__config__.layout||"table"===e.__config__.jnpfKey)||(t.activeData.__config__.isSubTable?t.activeData.__config__.parentVModel===e.__vModel__:"table"!==e.__config__.jnpfKey)}(o)&&o.__config__.children&&Array.isArray(o.__config__.children)&&a(o.__config__.children,o),Array.isArray(o)&&o.forEach((e=>a(e,l))),o.__vModel__&&o.__config__.jnpfKey===`${t.activeData.selectType}Select`&&o.__vModel__!==t.activeData.__vModel__)){const t=l&&l.__config__&&"table"===l.__config__.jnpfKey;e.push({id:t?l.__vModel__+"-"+o.__vModel__:o.__vModel__,fullName:t?l.__config__.label+"-"+o.__config__.label:o.__config__.label,...o})}};return a(t.drawingList),e}));function i(){c(),t.activeData.ableIds=[],t.activeData.__config__.defaultCurrent=!1,"userSelect"===t.activeData.__config__.jnpfKey&&(t.activeData.relationField="")}function c(){t.activeData.__config__.defaultValue=t.activeData.multiple||"organizeSelect"===unref(l)?[]:""}return(t,r)=>{const d=resolveComponent("jnpf-select"),s=resolveComponent("JnpfOrganizeSelect"),_=resolveComponent("JnpfDepSelect"),u=resolveComponent("JnpfPosSelect"),p=resolveComponent("JnpfRoleSelect"),f=resolveComponent("JnpfGroupSelect"),m=resolveComponent("JnpfUsersSelect"),v=resolveComponent("jnpf-radio"),h=resolveComponent("a-form-item"),g=resolveComponent("a-checkbox"),C=resolveComponent("a-switch");return openBlock(),createElementBlock(Fragment,null,[createVNode(h,{label:"可选范围"},{default:withCtx((()=>[createVNode(d,{value:e.activeData.selectType,"onUpdate:value":r[0]||(r[0]=t=>e.activeData.selectType=t),options:"userSelect"===l.value?o:a,onChange:i},null,8,["value","options"]),"custom"===e.activeData.selectType?(openBlock(),createElementBlock(Fragment,{key:0},["organizeSelect"===l.value?(openBlock(),createBlock(s,{key:0,value:e.activeData.ableIds,"onUpdate:value":r[1]||(r[1]=t=>e.activeData.ableIds=t),modalTitle:"添加组织",buttonType:"button",multiple:"",hasSys:"",class:"!mt-10px",onChange:c},null,8,["value"])):createCommentVNode("",!0),"depSelect"===l.value?(openBlock(),createBlock(_,{key:1,value:e.activeData.ableIds,"onUpdate:value":r[2]||(r[2]=t=>e.activeData.ableIds=t),modalTitle:"添加部门",buttonType:"button",multiple:"",hasSys:"",class:"!mt-10px",onChange:c},null,8,["value"])):createCommentVNode("",!0),"posSelect"===l.value?(openBlock(),createBlock(u,{key:2,value:e.activeData.ableIds,"onUpdate:value":r[3]||(r[3]=t=>e.activeData.ableIds=t),modalTitle:"添加岗位",buttonType:"button",multiple:"",hasSys:"",class:"!mt-10px",onChange:c},null,8,["value"])):createCommentVNode("",!0),"roleSelect"===l.value?(openBlock(),createBlock(p,{key:3,value:e.activeData.ableIds,"onUpdate:value":r[4]||(r[4]=t=>e.activeData.ableIds=t),modalTitle:"添加角色",buttonType:"button",multiple:"",hasSys:"",class:"!mt-10px",onChange:c},null,8,["value"])):createCommentVNode("",!0),"groupSelect"===l.value?(openBlock(),createBlock(f,{key:4,value:e.activeData.ableIds,"onUpdate:value":r[5]||(r[5]=t=>e.activeData.ableIds=t),modalTitle:"添加分组",buttonType:"button",multiple:"",hasSys:"",class:"!mt-10px",onChange:c},null,8,["value"])):createCommentVNode("",!0),["usersSelect","userSelect"].includes(l.value)?(openBlock(),createBlock(m,{key:5,value:e.activeData.ableIds,"onUpdate:value":r[6]||(r[6]=t=>e.activeData.ableIds=t),modalTitle:"添加用户",buttonType:"button",multiple:"",hasSys:"",class:"!mt-10px",onChange:c},null,8,["value"])):createCommentVNode("",!0)],64)):createCommentVNode("",!0),"userSelect"===l.value&&["dep","pos","role","group"].includes(e.activeData.selectType)?(openBlock(),createBlock(v,{key:1,value:e.activeData.relationField,"onUpdate:value":r[7]||(r[7]=t=>e.activeData.relationField=t),options:n.value,class:"relation-radio"},null,8,["value","options"])):createCommentVNode("",!0)])),_:1}),createVNode(h,{label:"默认值"},{default:withCtx((()=>[(openBlock(),createBlock(resolveDynamicComponent(e.activeData.__config__.tag),{value:e.activeData.__config__.defaultValue,"onUpdate:value":r[8]||(r[8]=t=>e.activeData.__config__.defaultValue=t),multiple:e.activeData.multiple,selectType:e.activeData.selectType,ableIds:e.activeData.ableIds,disabled:e.activeData.__config__.defaultCurrent},null,40,["value","multiple","selectType","ableIds","disabled"])),createVNode(g,{checked:e.activeData.__config__.defaultCurrent,"onUpdate:checked":r[9]||(r[9]=t=>e.activeData.__config__.defaultCurrent=t),class:"!mt-8px",disabled:"all"!==e.activeData.selectType,onChange:c},{default:withCtx((()=>{return[createTextVNode(" 默认为当前登录"+toDisplayString((t=e.activeData.__config__.jnpfKey,"organizeSelect"===t?"组织":"depSelect"===t?"部门":"posSelect"===t?"岗位":"roleSelect"===t?"角色":"groupSelect"===t?"分组":"用户")),1)];var t})),_:1},8,["checked","disabled"])])),_:1}),createVNode(h,{label:"能否清空"},{default:withCtx((()=>[createVNode(C,{checked:e.activeData.clearable,"onUpdate:checked":r[10]||(r[10]=t=>e.activeData.clearable=t)},null,8,["checked"])])),_:1}),createVNode(h,{label:"能否多选"},{default:withCtx((()=>[createVNode(C,{checked:e.activeData.multiple,"onUpdate:checked":r[11]||(r[11]=t=>e.activeData.multiple=t),onChange:c},null,8,["checked"])])),_:1})],64)}}}),ROrgRight_vue_vue_type_style_index_0_scoped_12976c8b_lang="",ROrgRight=_export_sfc(_sfc_main$v,[["__scopeId","data-v-12976c8b"]]),_hoisted_1$e={class:"form-script-editor"},_hoisted_2$d={class:"form-script-tips"},_hoisted_3$a={class:"required-sign"},_hoisted_4$a={class:"pb-20px"},_hoisted_5$6={class:"required-sign"},_hoisted_6$6={class:"pb-20px"},_sfc_main$u=defineComponent({__name:"BtnConfigModal",emits:["register","confirm"],setup(e,{emit:t}){const a=reactive({options:[],allOptions:[],dataForm:{},actionConfig:{},treeData:[],fieldOptions:[]}),{options:o,dataForm:l,treeData:n,actionConfig:i,fieldOptions:c}=toRefs(a),r=[{id:"dialog",fullName:"居中弹窗"},{id:"drawer",fullName:"右侧弹窗"}],d=[{id:"dynamic",fullName:"数据接口"},{id:"relationForm",fullName:"表单数据"}],s=[{id:1,fullName:"字段"},{id:2,fullName:"自定义"}],_={label:[{required:!0,message:"必填",trigger:"blur"}]},u=[{width:50,title:"序号",align:"center",customRender:({index:e})=>e+1},{title:"目标表单字段",dataIndex:"field",key:"field",width:150},{title:"映射来源",dataIndex:"type",key:"type",width:120},{title:"数据来源字段/值",dataIndex:"value",key:"value",width:130},{title:"操作",dataIndex:"action",key:"action",width:50}],{createMessage:p}=useMessage(),f=inject("getDrawingList"),m=computed((()=>f())),v=t,[h,{closeModal:g}]=useModalInner((function(e){a.dataForm=cloneDeep(e.config),a.actionConfig=a.dataForm.actionConfig||{},C.value=cloneDeep(e.children).filter((e=>e.__vModel__&&!noAllowSelectList.includes(e.__config__.jnpfKey))).map((e=>({id:e.__vModel__,fullName:e.__config__.label}))),["copy","remove","add","batchRemove"].includes(a.dataForm.value)||(T(),M(),$())})),C=ref([]),N=ref(),y=["600px","800px","1000px","40%","50%","60%","70%","80%"],V=useDebounceFn(U,300),k=computed((()=>{const e=["table","uploadImg","uploadFile","modifyUser","modifyTime"];let t=[];const a=(o,l)=>{o&&(o.__config__&&"table"!==o.__config__.jnpfKey&&o.__config__.children&&Array.isArray(o.__config__.children)&&a(o.__config__.children),Array.isArray(o)&&o.forEach((e=>a(e))),o.__vModel__&&!e.includes(o.__config__.jnpfKey)&&t.push({id:o.__vModel__,fullName:o.__config__.label?o.__vModel__+"("+o.__config__.label+")":o.__vModel__,...o,disabled:!1}))};return a(unref(m)),t})),b=computed((()=>{const e=[{width:50,title:"序号",align:"center",customRender:({index:e})=>e+1},{title:"列名",dataIndex:"label",key:"label",width:150},{title:"字段",dataIndex:"value",key:"value"},{title:"宽度",dataIndex:"width",key:"width",width:100},{title:"显示",dataIndex:"ifShow",key:"ifShow",width:50,align:"center"},{title:"操作",dataIndex:"action",key:"action",width:50}];return"dynamic"==a.actionConfig.dataSource?e:e.filter((e=>"label"!==e.key))}));function w(e,t){a.actionConfig[t].splice(e,1)}function x(e,t){if(L(),!e)return a.actionConfig.interfaceId="",a.actionConfig.interfaceName="",a.actionConfig.templateJson=[],void T();a.actionConfig.interfaceId!==e&&(a.actionConfig.interfaceId=e,a.actionConfig.interfaceName=t.fullName,a.actionConfig.templateJson=t.templateJson?t.templateJson.map((e=>({...e,relationField:"",sourceType:1}))):[],T())}function D(e,t){if(!e)return a.actionConfig.executeInterfaceId="",a.actionConfig.executeInterfaceName="",void(a.actionConfig.executeTemplateJson=[]);a.actionConfig.interfaceId!==e&&(a.actionConfig.executeInterfaceId=e,a.actionConfig.executeInterfaceName=t.fullName,a.actionConfig.executeTemplateJson=t.templateJson?t.templateJson.map((e=>({...e,relationField:"",sourceType:1}))):[])}async function B(){try{if(!(await(N.value?.validate())))return;if(1==a.dataForm.actionType&&!function(){let e=!0;for(let t=0;t<a.actionConfig.columnOptions?.length;t++){if(!a.actionConfig.columnOptions[t].value){p.error("列表字段中字段不能为空"),e=!1;break}}return e}())return;v("confirm",a.dataForm),g()}catch(e){}}function T(){if(!a.actionConfig.interfaceId)return a.allOptions=[];getDataInterfaceInfo(a.actionConfig.interfaceId).then((e=>{const t=e.data;let o=t.fieldJson?JSON.parse(t.fieldJson):[];a.allOptions=o.map((e=>({...e,value:e.defaultValue})))}))}function U(e){a.options=a.allOptions.filter((t=>-1!==t.value.toLowerCase().indexOf(e.toLowerCase())))}function I(e){U(e)}function F(){a.actionConfig.interfaceId="",a.actionConfig.modelId="",a.actionConfig.templateJson=[],L(),"dynamic"==a.actionConfig.dataSource?T():M()}function M(){getVisualDevSelector({type:1,webType:"2",isRelease:1}).then((e=>{a.treeData=e.data.list}))}function S(){L(),$()}function $(){a.fieldOptions=[],a.actionConfig.modelId&&getFormDataFields(a.actionConfig.modelId,1).then((e=>{a.fieldOptions=e.data.list.map((e=>({...e,id:e.vmodel,fullName:e.label})))}))}function L(){a.actionConfig.columnOptions=[];let e=a.actionConfig?.relationOptions||[];e?.length&&(a.actionConfig.relationOptions=e.map((e=>({...e,value:""}))))}function R(e){return e?sourceTypeOptions.filter((e=>3!=e.id&&4!=e.id)):sourceTypeOptions.filter((e=>4!=e.id))}return(e,t)=>{const p=resolveComponent("jnpf-i18n-input"),f=resolveComponent("a-form-item"),m=resolveComponent("a-switch"),v=resolveComponent("a-select-option"),g=resolveComponent("a-select"),T=resolveComponent("jnpf-icon-picker"),U=resolveComponent("jnpf-group-title"),M=resolveComponent("a-radio"),$=resolveComponent("BasicHelp"),L=resolveComponent("a-radio-group"),A=resolveComponent("jnpf-select"),j=resolveComponent("jnpf-input-number"),O=resolveComponent("jnpf-date-picker"),K=resolveComponent("a-input"),E=resolveComponent("a-table"),Y=resolveComponent("jnpf-radio"),P=resolveComponent("JnpfTreeSelect"),z=resolveComponent("a-auto-complete"),H=resolveComponent("a-input-number"),J=resolveComponent("a-checkbox"),W=resolveComponent("a-button"),q=resolveComponent("a-form");return openBlock(),createBlock(unref(BasicModal),mergeProps(e.$attrs,{onRegister:unref(h),title:"操作按钮",width:600,onOk:B,class:"add-config-modal",destroyOnClose:""}),{default:withCtx((()=>[createVNode(q,{colon:!1,labelAlign:"right",ref_key:"formElRef",ref:N,model:unref(l),rules:["copy","remove"].includes(unref(l).value)?{}:_,labelCol:{style:{width:"80px"}}},{default:withCtx((()=>[createVNode(f,{label:"按钮名称",name:"label"},{default:withCtx((()=>[createVNode(p,{value:unref(l).label,"onUpdate:value":t[0]||(t[0]=e=>unref(l).label=e),i18n:unref(l).labelI18nCode,"onUpdate:i18n":t[1]||(t[1]=e=>unref(l).labelI18nCode=e),placeholder:"请输入",disabled:["copy","remove"].includes(unref(l).value),maxlength:10},null,8,["value","i18n","disabled"])])),_:1}),createVNode(f,{label:"是否显示"},{default:withCtx((()=>[createVNode(m,{checked:unref(l).show,"onUpdate:checked":t[2]||(t[2]=e=>unref(l).show=e)},null,8,["checked"])])),_:1}),["copy","remove"].includes(unref(l).value)?createCommentVNode("",!0):(openBlock(),createElementBlock(Fragment,{key:0},[createVNode(f,{label:"按钮类型"},{default:withCtx((()=>[createVNode(g,{value:unref(l).btnType,"onUpdate:value":t[3]||(t[3]=e=>unref(l).btnType=e),placeholder:"请选择"},{default:withCtx((()=>[createVNode(v,{value:""},{default:withCtx((()=>t[18]||(t[18]=[createTextVNode("默认按钮")]))),_:1,__:[18]}),createVNode(v,{value:"primary"},{default:withCtx((()=>t[19]||(t[19]=[createTextVNode("主要按钮")]))),_:1,__:[19]}),createVNode(v,{value:"success"},{default:withCtx((()=>t[20]||(t[20]=[createTextVNode("成功按钮")]))),_:1,__:[20]}),createVNode(v,{value:"info"},{default:withCtx((()=>t[21]||(t[21]=[createTextVNode("信息按钮")]))),_:1,__:[21]}),createVNode(v,{value:"warning"},{default:withCtx((()=>t[22]||(t[22]=[createTextVNode("警告按钮")]))),_:1,__:[22]}),createVNode(v,{value:"danger"},{default:withCtx((()=>t[23]||(t[23]=[createTextVNode("危险按钮")]))),_:1,__:[23]}),createVNode(v,{value:"text"},{default:withCtx((()=>t[24]||(t[24]=[createTextVNode("文字按钮")]))),_:1,__:[24]})])),_:1},8,["value"])])),_:1}),createVNode(f,{label:"按钮图标"},{default:withCtx((()=>[createVNode(T,{value:unref(l).btnIcon,"onUpdate:value":t[4]||(t[4]=e=>unref(l).btnIcon=e),placeholder:"请选择"},null,8,["value"])])),_:1})],64)),["remove","batchRemove"].includes(unref(l).value)?(openBlock(),createBlock(f,{key:1,label:"删除确认"},{default:withCtx((()=>[createVNode(m,{checked:unref(l).showConfirm,"onUpdate:checked":t[5]||(t[5]=e=>unref(l).showConfirm=e)},null,8,["checked"])])),_:1})):createCommentVNode("",!0),["copy","remove","add","batchRemove"].includes(unref(l).value)?createCommentVNode("",!0):(openBlock(),createElementBlock(Fragment,{key:2},[createVNode(U,{content:"动作设置",bordered:!1}),createVNode(f,{label:"按钮动作"},{default:withCtx((()=>[createVNode(L,{value:unref(l).actionType,"onUpdate:value":t[6]||(t[6]=e=>unref(l).actionType=e),optionType:"button","button-style":"solid"},{default:withCtx((()=>[createVNode(M,{value:1},{default:withCtx((()=>t[25]||(t[25]=[createTextVNode("选择数据")]))),_:1,__:[25]}),createVNode(M,{value:2},{default:withCtx((()=>[t[26]||(t[26]=createTextVNode("执行动作")),createVNode($,{text:"不支持代码生成"})])),_:1,__:[26]})])),_:1},8,["value"])])),_:1}),2===unref(l).actionType?(openBlock(),createElementBlock(Fragment,{key:0},[createVNode(f,{label:"类型选择"},{default:withCtx((()=>[createVNode(L,{value:unref(i).executeType,"onUpdate:value":t[7]||(t[7]=e=>unref(i).executeType=e)},{default:withCtx((()=>[createVNode(M,{value:2},{default:withCtx((()=>t[27]||(t[27]=[createTextVNode("JS脚本")]))),_:1,__:[27]}),createVNode(M,{value:3},{default:withCtx((()=>t[28]||(t[28]=[createTextVNode("数据接口")]))),_:1,__:[28]})])),_:1},8,["value"])])),_:1}),2==unref(i).executeType?(openBlock(),createBlock(f,{key:0,class:"!pb-20px"},{default:withCtx((()=>[createBaseVNode("div",_hoisted_1$e,[createVNode(unref(MonacoEditor),{modelValue:unref(i).executeFunc,"onUpdate:modelValue":t[8]||(t[8]=e=>unref(i).executeFunc=e)},null,8,["modelValue"])]),createBaseVNode("div",_hoisted_2$d,[createBaseVNode("p",null,[t[29]||(t[29]=createTextVNode("支持JavaScript的脚本，")),createVNode(_sfc_main$16,{type:"childTableBtn"})])])])),_:1})):createCommentVNode("",!0),3==unref(i).executeType?(openBlock(),createElementBlock(Fragment,{key:1},[createVNode(f,{label:"数据接口"},{default:withCtx((()=>[createVNode(unref(InterfaceModal),{value:unref(i).executeInterfaceId,title:unref(i).executeInterfaceName,sourceType:3,onChange:D},null,8,["value","title"])])),_:1}),createVNode(f,{label:"参数设置",style:{"margin-bottom":"0"}}),createVNode(E,{"data-source":unref(i).executeTemplateJson,columns:unref(templateJsonColumns),size:"small",pagination:!1,class:"mb-20px"},{bodyCell:withCtx((({column:e,record:t})=>["field"===e.key?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("span",_hoisted_3$a,toDisplayString(t.required?"*":""),1),createTextVNode(" "+toDisplayString(t.field)+toDisplayString(t.fieldName?"("+t.fieldName+")":""),1)],64)):createCommentVNode("",!0),"sourceType"===e.key?(openBlock(),createBlock(A,{key:1,value:t.sourceType,"onUpdate:value":e=>t.sourceType=e,placeholder:"请选择",options:R(t.required),class:"!w-100px",onChange:e=>t.relationField=""},null,8,["value","onUpdate:value","options","onChange"])):createCommentVNode("",!0),"relationField"===e.key?(openBlock(),createElementBlock(Fragment,{key:2},[1===t.sourceType?(openBlock(),createBlock(A,{key:0,value:t.relationField,"onUpdate:value":e=>t.relationField=e,placeholder:"请选择",options:C.value,allowClear:"",showSearch:"",class:"!w-204px"},null,8,["value","onUpdate:value","options"])):2==t.sourceType?(openBlock(),createElementBlock(Fragment,{key:1},[["int","decimal"].includes(t.dataType)?(openBlock(),createBlock(j,{key:0,value:t.relationField,"onUpdate:value":e=>t.relationField=e,placeholder:"请输入",allowClear:""},null,8,["value","onUpdate:value"])):"datetime"==t.dataType?(openBlock(),createBlock(O,{key:1,class:"!w-full",value:t.relationField,"onUpdate:value":e=>t.relationField=e,placeholder:"请选择",format:"YYYY-MM-DD HH:mm:ss",allowClear:""},null,8,["value","onUpdate:value"])):(openBlock(),createBlock(K,{key:2,value:t.relationField,"onUpdate:value":e=>t.relationField=e,placeholder:"请输入",allowClear:""},null,8,["value","onUpdate:value"]))],64)):createCommentVNode("",!0)],64)):createCommentVNode("",!0)])),emptyText:withCtx((()=>t[30]||(t[30]=[createBaseVNode("p",{class:"leading-60px"},"暂无数据",-1)]))),_:1},8,["data-source","columns"]),createBaseVNode("div",_hoisted_4$a,[createVNode(f,{label:"启用确认框"},{default:withCtx((()=>[createVNode(m,{checked:unref(i).executeUseConfirm,"onUpdate:checked":t[9]||(t[9]=e=>unref(i).executeUseConfirm=e)},null,8,["checked"])])),_:1}),unref(i).executeUseConfirm?(openBlock(),createBlock(f,{key:0},{default:withCtx((()=>[createVNode(K,{value:unref(i).executeConfirmTitle,"onUpdate:value":t[10]||(t[10]=e=>unref(i).executeConfirmTitle=e),placeholder:"请输入",allowClear:""},null,8,["value"])])),_:1})):createCommentVNode("",!0)])],64)):createCommentVNode("",!0)],64)):(openBlock(),createElementBlock(Fragment,{key:1},[createVNode(f,{label:"弹窗标题"},{default:withCtx((()=>[createVNode(K,{value:unref(i).popupTitle,"onUpdate:value":t[11]||(t[11]=e=>unref(i).popupTitle=e),placeholder:"请输入"},null,8,["value"])])),_:1}),createVNode(f,{label:"弹窗类型"},{default:withCtx((()=>[createVNode(Y,{value:unref(i).popupType,"onUpdate:value":t[12]||(t[12]=e=>unref(i).popupType=e),options:r,optionType:"button","button-style":"solid"},null,8,["value"])])),_:1}),createVNode(f,{label:"弹窗宽度"},{default:withCtx((()=>[createVNode(g,{value:unref(i).popupWidth,"onUpdate:value":t[13]||(t[13]=e=>unref(i).popupWidth=e)},{default:withCtx((()=>[(openBlock(),createElementBlock(Fragment,null,renderList(y,(e=>createVNode(v,{key:e,value:e},{default:withCtx((()=>[createTextVNode(toDisplayString(e),1)])),_:2},1032,["value"]))),64))])),_:1},8,["value"])])),_:1}),createVNode(f,{label:"数据来源"},{default:withCtx((()=>[createVNode(Y,{value:unref(i).dataSource,"onUpdate:value":t[14]||(t[14]=e=>unref(i).dataSource=e),options:d,optionType:"button","button-style":"solid",onChange:F},null,8,["value"])])),_:1}),"dynamic"==unref(i).dataSource?(openBlock(),createElementBlock(Fragment,{key:0},[createVNode(f,{label:"数据接口"},{default:withCtx((()=>[createVNode(unref(InterfaceModal),{value:unref(i).interfaceId,title:unref(i).interfaceName,sourceType:2,onChange:x},null,8,["value","title"])])),_:1}),createVNode(f,{label:"参数设置",style:{"margin-bottom":"0"}}),createVNode(E,{"data-source":unref(i).templateJson,columns:unref(templateJsonColumns),size:"small",pagination:!1},{bodyCell:withCtx((({column:e,record:t})=>["field"===e.key?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("span",_hoisted_5$6,toDisplayString(t.required?"*":""),1),createTextVNode(" "+toDisplayString(t.field)+toDisplayString(t.fieldName?"("+t.fieldName+")":""),1)],64)):createCommentVNode("",!0),"sourceType"===e.key?(openBlock(),createBlock(A,{key:1,value:t.sourceType,"onUpdate:value":e=>t.sourceType=e,options:R(t.required),class:"!w-100px",onChange:e=>t.relationField=""},null,8,["value","onUpdate:value","options","onChange"])):createCommentVNode("",!0),"relationField"===e.key?(openBlock(),createElementBlock(Fragment,{key:2},[1===t.sourceType?(openBlock(),createBlock(A,{key:0,value:t.relationField,"onUpdate:value":e=>t.relationField=e,placeholder:"请选择",options:k.value,allowClear:"",showSearch:"",fieldNames:{options:"options1"},class:"!w-204px",onChange:e=>function(e,t){if(!e)return t.jnpfKey="";let a=unref(k).filter((t=>t.__vModel__===e));if(!a.length)return t.jnpfKey="";let o=a[0];t.jnpfKey=o.__config__.jnpfKey}(e,t)},null,8,["value","onUpdate:value","options","onChange"])):2==t.sourceType?(openBlock(),createElementBlock(Fragment,{key:1},[["int","decimal"].includes(t.dataType)?(openBlock(),createBlock(j,{key:0,value:t.relationField,"onUpdate:value":e=>t.relationField=e,placeholder:"请输入",allowClear:""},null,8,["value","onUpdate:value"])):"datetime"==t.dataType?(openBlock(),createBlock(O,{key:1,class:"!w-full",value:t.relationField,"onUpdate:value":e=>t.relationField=e,placeholder:"请选择",format:"YYYY-MM-DD HH:mm:ss",allowClear:""},null,8,["value","onUpdate:value"])):(openBlock(),createBlock(K,{key:2,value:t.relationField,"onUpdate:value":e=>t.relationField=e,placeholder:"请输入",allowClear:""},null,8,["value","onUpdate:value"]))],64)):createCommentVNode("",!0)],64)):createCommentVNode("",!0)])),emptyText:withCtx((()=>t[31]||(t[31]=[createBaseVNode("p",{class:"leading-60px"},"暂无数据",-1)]))),_:1},8,["data-source","columns"])],64)):(openBlock(),createBlock(f,{key:1,label:"表单数据"},{default:withCtx((()=>[createVNode(P,{value:unref(i).modelId,"onUpdate:value":t[15]||(t[15]=e=>unref(i).modelId=e),options:unref(n),placeholder:"请选择",lastLevel:"",allowClear:"",onChange:S},null,8,["value","options"])])),_:1})),createVNode(f,{label:"设置列表字段",style:{"margin-bottom":"0"},labelCol:{style:{width:"100px"}}}),createVNode(E,{"data-source":unref(i).columnOptions,columns:b.value,size:"small",pagination:!1},{headerCell:withCtx((({column:e})=>["width"===e.key?(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString(e.title),1),createVNode($,{text:"移动端不支持宽度设置"})],64)):createCommentVNode("",!0)])),bodyCell:withCtx((({column:e,record:l,index:n})=>["label"===e.key?(openBlock(),createBlock(K,{key:0,value:l.label,"onUpdate:value":e=>l.label=e,placeholder:"请输入"},null,8,["value","onUpdate:value"])):createCommentVNode("",!0),"value"===e.key?(openBlock(),createElementBlock(Fragment,{key:1},["dynamic"==unref(i).dataSource?(openBlock(),createBlock(z,{key:0,value:l.value,"onUpdate:value":e=>l.value=e,placeholder:"请输入",options:unref(o),onFocus:e=>I(l.value),onSearch:e=>unref(V)(l.value)},null,8,["value","onUpdate:value","options","onFocus","onSearch"])):(openBlock(),createBlock(A,{key:1,value:l.value,"onUpdate:value":e=>l.value=e,placeholder:"请选择",options:unref(c),showSearch:"",onChange:e=>function(e,t){const o=a.fieldOptions.filter((t=>t.vmodel===e))||[];o.length&&(t.label=o[0].label)}(e,l)},null,8,["value","onUpdate:value","options","onChange"]))],64)):createCommentVNode("",!0),"width"===e.key?(openBlock(),createBlock(H,{key:2,value:l.width,"onUpdate:value":e=>l.width=e,placeholder:"请输入",min:0,precision:0},null,8,["value","onUpdate:value"])):createCommentVNode("",!0),"ifShow"===e.key?(openBlock(),createBlock(J,{key:3,checked:l.ifShow,"onUpdate:checked":e=>l.ifShow=e},null,8,["checked","onUpdate:checked"])):createCommentVNode("",!0),"action"===e.key?(openBlock(),createBlock(W,{key:4,class:"action-btn",type:"link",color:"error",onClick:e=>w(n,"columnOptions"),size:"small"},{default:withCtx((()=>t[32]||(t[32]=[createTextVNode("删除")]))),_:2,__:[32]},1032,["onClick"])):createCommentVNode("",!0)])),emptyText:withCtx((()=>t[33]||(t[33]=[createBaseVNode("p",{class:"leading-60px"},"暂无数据",-1)]))),_:1},8,["data-source","columns"]),createBaseVNode("div",{class:"table-add-action",onClick:t[16]||(t[16]=e=>{a.actionConfig.columnOptions.push({value:"",label:"",width:null,ifShow:!0})})},[createVNode(W,{type:"link",preIcon:"icon-ym icon-ym-btn-add"},{default:withCtx((()=>t[34]||(t[34]=[createTextVNode("新增")]))),_:1,__:[34]})]),createVNode(f,{label:"设置关联字段",style:{"margin-bottom":"0"},labelCol:{style:{width:"100px"}}}),createVNode(E,{"data-source":unref(i).relationOptions,columns:u,size:"small",pagination:!1},{bodyCell:withCtx((({column:e,record:a,index:l})=>["field"===e.key?(openBlock(),createBlock(A,{key:0,value:a.field,"onUpdate:value":e=>a.field=e,placeholder:"请选择",options:C.value,showSearch:"",class:"!w-134px"},null,8,["value","onUpdate:value","options"])):createCommentVNode("",!0),"type"===e.key?(openBlock(),createBlock(A,{key:1,value:a.type,"onUpdate:value":e=>a.type=e,placeholder:"请选择",options:s,onChange:e=>function(e){e.value=""}(a)},null,8,["value","onUpdate:value","onChange"])):createCommentVNode("",!0),"value"===e.key?(openBlock(),createElementBlock(Fragment,{key:2},[1==a.type?(openBlock(),createElementBlock(Fragment,{key:0},["dynamic"==unref(i).dataSource?(openBlock(),createBlock(z,{key:0,value:a.value,"onUpdate:value":e=>a.value=e,placeholder:"请输入",options:unref(o),onFocus:e=>I(a.value),onSearch:e=>unref(V)(a.value)},null,8,["value","onUpdate:value","options","onFocus","onSearch"])):(openBlock(),createBlock(A,{key:1,value:a.value,"onUpdate:value":e=>a.value=e,placeholder:"请选择",options:unref(c),showSearch:""},null,8,["value","onUpdate:value","options"]))],64)):(openBlock(),createBlock(K,{key:1,value:a.value,"onUpdate:value":e=>a.value=e,placeholder:"请输入",allowClear:""},null,8,["value","onUpdate:value"]))],64)):createCommentVNode("",!0),"action"===e.key?(openBlock(),createBlock(W,{key:3,class:"action-btn",type:"link",color:"error",onClick:e=>w(l,"relationOptions"),size:"small"},{default:withCtx((()=>t[35]||(t[35]=[createTextVNode("删除")]))),_:2,__:[35]},1032,["onClick"])):createCommentVNode("",!0)])),emptyText:withCtx((()=>t[36]||(t[36]=[createBaseVNode("p",{class:"leading-60px"},"暂无数据",-1)]))),_:1},8,["data-source"]),createBaseVNode("div",_hoisted_6$6,[createBaseVNode("div",{class:"table-add-action",onClick:t[17]||(t[17]=e=>{a.actionConfig.relationOptions.push({value:"",field:"",type:1})})},[createVNode(W,{type:"link",preIcon:"icon-ym icon-ym-btn-add"},{default:withCtx((()=>t[37]||(t[37]=[createTextVNode("新增")]))),_:1,__:[37]})])])],64))],64))])),_:1},8,["model","rules"])])),_:1},16,["onRegister"])}}}),_hoisted_1$d={class:"custom-draggable-list"},_hoisted_2$c={class:"custom-draggable-item"},_hoisted_3$9=["onClick"],_hoisted_4$9=["onClick"],_hoisted_5$5={class:"add-btn"},_hoisted_6$5={class:"custom-draggable-item"},_hoisted_7$5={class:"custom-line-value"},_hoisted_8$5=["onClick"],_hoisted_9$3={class:"custom-draggable-list"},_hoisted_10$3={class:"custom-draggable-item"},_hoisted_11$2={class:"custom-line-value"},_hoisted_12$2=["onClick"],_hoisted_13$2=["onClick"],_hoisted_14$2={key:0,class:"add-btn"},_sfc_main$t=defineComponent({inheritAttrs:!1,__name:"index",props:["activeData","formInfo"],emits:["addTableComponent","activeFormItem"],setup(e,{emit:t}){const a={popupTitle:"选择数据",popupType:"dialog",popupWidth:"800px",dataSource:"dynamic",modelId:"",interfaceId:"",interfaceName:"",templateJson:[],hasPage:!0,pageSize:20,columnOptions:[],relationOptions:[],executeType:2,executeFunc:"({ data, onlineUtils }) => {\r\n   \r\n}",executeInterfaceId:"",executeInterfaceName:"",executeTemplateJson:[],executeUseConfirm:!1,executeConfirmTitle:"此操作将通过接口处理"},o=[{id:"table",fullName:"表格"},{id:"list",fullName:"平铺"}],l=useGeneratorStore(),{createMessage:n}=useMessage(),i=e,c=t,[r,{openModal:d}]=useModal(),[s,{openModal:_}]=useModal(),u=[{value:"copy",label:"复制",labelI18nCode:"common.copyText",show:!0,btnType:"primary",btnIcon:"icon-ym icon-ym-btn-edit"},{value:"remove",label:"删除",labelI18nCode:"common.delText",show:!0,btnType:"danger",btnIcon:"icon-ym icon-ym-btn-clearn",showConfirm:!0}],p=[{value:"add",label:"添加",labelI18nCode:"common.add1Text",show:!0,btnType:"primary",btnIcon:"icon-ym icon-ym-btn-add"},{value:"batchRemove",label:"批量删除",labelI18nCode:"common.batchDelText",show:!0,btnType:"danger",btnIcon:"icon-ym icon-ym-btn-clearn",showConfirm:!0}],f=computed((()=>i.activeData.__config__.children.filter((e=>["input","inputNumber","calculate"].includes(e.__config__.jnpfKey)&&e.__vModel__&&!e.useMask)).map((e=>({id:e.__vModel__,fullName:e.__config__.label}))))),m=computed((()=>inputComponents.filter((e=>!noTableAllowList.includes(e.__config__.jnpfKey))))),v=computed((()=>selectComponents.filter((e=>!noTableAllowList.includes(e.__config__.jnpfKey))))),h=computed((()=>systemComponents.filter((e=>!noTableAllowList.includes(e.__config__.jnpfKey))))),g=inject("getShowType"),C=computed((()=>g()));function N(){let e=i.activeData.__config__.children.map((e=>({fullName:e.__config__.label,id:e.__vModel__,...e})));e=e.filter((e=>"left"!==e.__config__.tableFixed&&"right"!==e.__config__.tableFixed&&e.id)),_(!0,{list:i.activeData.__config__.complexHeaderList,columnOptions:e})}function y(e){i.activeData.columnBtnsList=i.activeData.columnBtnsList.map((t=>e.value==t.value?e:t)),i.activeData.footerBtnsList=i.activeData.footerBtnsList.map((t=>e.value==t.value?e:t));const t=i.activeData.footerBtnsList.filter((t=>e.value==t.value));["copy","remove","add","batchRemove"].includes(e.value)||t.length||i.activeData.footerBtnsList.push(e)}function V(e){i.activeData.__config__.complexHeaderList=e}function k(e){if(l.getHasTable&&!i.activeData.__config__.tableName)return n.warning("子表请先关联数据表");let t=cloneDeep(e);t.__config__.isSubTable=!0,t.__config__.parentVModel=i.activeData.__vModel__,l.getHasTable&&(t.__config__.relationTable=i.activeData.__config__.tableName),c("addTableComponent",t,i.activeData.__config__.children)}function b(e){const t=cloneDeep(e);["copy","remove","add","batchRemove"].includes(e.value)||(t.actionConfig={...a,...t.actionConfig}),d(!0,{config:t,children:i.activeData.__config__.children})}return onMounted((()=>{i.activeData.columnBtnsList?.length||(i.activeData.columnBtnsList=cloneDeep(u)),i.activeData.footerBtnsList?.length||(i.activeData.footerBtnsList=cloneDeep(p))})),(t,l)=>{const n=resolveComponent("a-switch"),_=resolveComponent("a-form-item"),u=resolveComponent("jnpf-select"),p=resolveComponent("BasicHelp"),g=resolveComponent("jnpf-radio"),w=resolveComponent("a-button"),x=resolveComponent("a-divider"),D=resolveComponent("a-menu-item"),B=resolveComponent("a-menu-divider"),T=resolveComponent("a-menu"),U=resolveComponent("a-dropdown");return openBlock(),createElementBlock(Fragment,null,[createVNode(_,{label:"合计设置"},{default:withCtx((()=>[createVNode(n,{checked:e.activeData.showSummary,"onUpdate:checked":l[0]||(l[0]=t=>e.activeData.showSummary=t)},null,8,["checked"])])),_:1}),e.activeData.showSummary?(openBlock(),createBlock(_,{key:0,label:"合计字段"},{default:withCtx((()=>[createVNode(u,{value:e.activeData.summaryField,"onUpdate:value":l[1]||(l[1]=t=>e.activeData.summaryField=t),placeholder:"请选择",options:f.value,allowClear:"",showSearch:"",multiple:""},null,8,["value","options"])])),_:1})):createCommentVNode("",!0),"pc"===C.value?(openBlock(),createElementBlock(Fragment,{key:1},[createVNode(_,null,{label:withCtx((()=>[l[8]||(l[8]=createTextVNode("布局设置")),createVNode(p,{text:"平铺布局不支持子表内的控件冻结和批量删除按钮操作"})])),default:withCtx((()=>[createVNode(g,{value:e.activeData.layoutType,"onUpdate:value":l[2]||(l[2]=t=>e.activeData.layoutType=t),options:o,optionType:"button",buttonStyle:"solid"},null,8,["value"])])),_:1}),withDirectives(createVNode(_,{label:"复杂表头"},{default:withCtx((()=>[createVNode(w,{block:"",onClick:N},{default:withCtx((()=>[createTextVNode(toDisplayString(e.activeData.__config__.complexHeaderList?.length?"编辑复杂表头":"复杂表头配置"),1)])),_:1})])),_:1},512),[[vShow,"table"===e.activeData.layoutType]]),withDirectives(createVNode(_,{label:"默认展开"},{default:withCtx((()=>[createVNode(n,{checked:e.activeData.defaultExpandAll,"onUpdate:checked":l[3]||(l[3]=t=>e.activeData.defaultExpandAll=t)},null,8,["checked"])])),_:1},512),[[vShow,"list"===e.activeData.layoutType]])],64)):createCommentVNode("",!0),createVNode(x,null,{default:withCtx((()=>l[9]||(l[9]=[createTextVNode("子表字段")]))),_:1,__:[9]}),createBaseVNode("div",_hoisted_1$d,[createVNode(unref(draggable),{modelValue:e.activeData.__config__.children,"onUpdate:modelValue":l[4]||(l[4]=t=>e.activeData.__config__.children=t),animation:300,group:"selectItem",handle:".option-drag",itemKey:"value"},{item:withCtx((({element:t,index:a})=>[createBaseVNode("div",_hoisted_2$c,[l[11]||(l[11]=createBaseVNode("div",{class:"custom-line-icon option-drag"},[createBaseVNode("i",{class:"icon-ym icon-ym-darg"})],-1)),createBaseVNode("p",{class:"custom-line-value",onClick:e=>{c("activeFormItem",t)}},toDisplayString(t.__config__.label),9,_hoisted_3$9),createBaseVNode("div",{class:"close-btn custom-line-icon",onClick:t=>e.activeData.__config__.children.splice(a,1)},l[10]||(l[10]=[createBaseVNode("i",{class:"icon-ym icon-ym-btn-clearn"},null,-1)]),8,_hoisted_4$9)])])),_:1},8,["modelValue"]),createBaseVNode("div",_hoisted_5$5,[createVNode(U,{trigger:["click"],destroyPopupOnHide:""},{overlay:withCtx((()=>[createVNode(T,{class:"custom-draggable-dropdown-menu"},{default:withCtx((()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(m.value,(e=>(openBlock(),createBlock(D,{onClick:t=>k(e)},{default:withCtx((()=>[createBaseVNode("i",{class:normalizeClass(e.__config__.tagIcon)},null,2),createTextVNode(" "+toDisplayString(e.__config__.label),1)])),_:2},1032,["onClick"])))),256)),createVNode(B),(openBlock(!0),createElementBlock(Fragment,null,renderList(v.value,(e=>(openBlock(),createBlock(D,{onClick:t=>k(e)},{default:withCtx((()=>[createBaseVNode("i",{class:normalizeClass(e.__config__.tagIcon)},null,2),createTextVNode(" "+toDisplayString(e.__config__.label),1)])),_:2},1032,["onClick"])))),256)),createVNode(B),(openBlock(!0),createElementBlock(Fragment,null,renderList(h.value,(e=>(openBlock(),createBlock(D,{onClick:t=>k(e)},{default:withCtx((()=>[createBaseVNode("i",{class:normalizeClass(e.__config__.tagIcon)},null,2),createTextVNode(" "+toDisplayString(e.__config__.label),1)])),_:2},1032,["onClick"])))),256))])),_:1})])),default:withCtx((()=>[createVNode(w,{type:"link",preIcon:"icon-ym icon-ym-btn-add"},{default:withCtx((()=>l[12]||(l[12]=[createTextVNode("添加字段")]))),_:1,__:[12]})])),_:1})])]),createVNode(x,null,{default:withCtx((()=>l[13]||(l[13]=[createTextVNode("操作列按钮")]))),_:1,__:[13]}),createVNode(unref(draggable),{modelValue:e.activeData.columnBtnsList,"onUpdate:modelValue":l[5]||(l[5]=t=>e.activeData.columnBtnsList=t),animation:300,group:"selectItem",handle:".option-drag",itemKey:"value",class:"custom-draggable-list"},{item:withCtx((({element:e})=>[createBaseVNode("div",_hoisted_6$5,[l[15]||(l[15]=createBaseVNode("div",{class:"custom-line-icon option-drag"},[createBaseVNode("i",{class:"icon-ym icon-ym-darg"})],-1)),createBaseVNode("p",_hoisted_7$5,toDisplayString(e.label),1),createBaseVNode("div",{class:"edit-btn custom-line-icon",onClick:t=>b(e)},l[14]||(l[14]=[createBaseVNode("i",{class:"icon-ym icon-ym-btn-edit"},null,-1)]),8,_hoisted_8$5)])])),_:1},8,["modelValue"]),createVNode(x,null,{default:withCtx((()=>l[16]||(l[16]=[createTextVNode("底部按钮")]))),_:1,__:[16]}),createBaseVNode("div",_hoisted_9$3,[createVNode(unref(draggable),{modelValue:e.activeData.footerBtnsList,"onUpdate:modelValue":l[6]||(l[6]=t=>e.activeData.footerBtnsList=t),animation:300,group:"selectItem",handle:".option-drag",itemKey:"value"},{item:withCtx((({element:t,index:a})=>[createBaseVNode("div",_hoisted_10$3,[l[19]||(l[19]=createBaseVNode("div",{class:"custom-line-icon option-drag"},[createBaseVNode("i",{class:"icon-ym icon-ym-darg"})],-1)),createBaseVNode("p",_hoisted_11$2,toDisplayString(t.label),1),a>1?(openBlock(),createElementBlock("div",{key:0,class:"close-btn custom-line-icon",onClick:t=>e.activeData.footerBtnsList.splice(a,1)},l[17]||(l[17]=[createBaseVNode("i",{class:"icon-ym icon-ym-btn-clearn"},null,-1)]),8,_hoisted_12$2)):createCommentVNode("",!0),createBaseVNode("div",{class:"edit-btn custom-line-icon ml-10px",onClick:e=>b(t)},l[18]||(l[18]=[createBaseVNode("i",{class:"icon-ym icon-ym-btn-edit"},null,-1)]),8,_hoisted_13$2)])])),_:1},8,["modelValue"]),e.activeData.footerBtnsList?.length<5?(openBlock(),createElementBlock("div",_hoisted_14$2,[createVNode(w,{type:"link",preIcon:"icon-ym icon-ym-btn-add",onClick:l[7]||(l[7]=e=>function(){const e={value:"custom"+buildBitUUID(),label:"",labelI18nCode:"",show:!0,btnType:"",btnIcon:"",actionType:1,actionConfig:cloneDeep(a)};d(!0,{config:e,children:i.activeData.__config__.children})}())},{default:withCtx((()=>l[20]||(l[20]=[createTextVNode("添加按钮")]))),_:1,__:[20]})])):createCommentVNode("",!0)]),createVNode(_sfc_main$u,{onRegister:unref(r),onConfirm:y},null,8,["onRegister"]),createVNode(_sfc_main$18,{onRegister:unref(s),onConfirm:V},null,8,["onRegister"])],64)}}}),_hoisted_1$c={class:"condition-main"},_hoisted_2$b=["onClick"],_sfc_main$s=defineComponent({__name:"RuleModal",emits:["register","change"],setup(e,{emit:t}){const a=reactive({transferList:[],fieldOptions:[],formFieldsOptions:[],type:"relationForm",allOptions:[]}),{transferList:o,fieldOptions:l}=toRefs(a),n=t,{createMessage:i}=useMessage(),[c,{closeModal:r}]=useModalInner((function(e){a.transferList=cloneDeep(e.transferList||[]),a.fieldOptions=cloneDeep(e.fieldOptions||[]),a.formFieldsOptions=cloneDeep(e.formFieldsOptions||[]).filter((e=>["input","textarea"].includes(e.__config__.jnpfKey))),a.type=e.type||"relationForm",a.transferList.length||_();"popupSelect"==a.type&&(a.allOptions=cloneDeep(e.fieldOptions||[]))})),d=useDebounceFn(p,300),s=computed((()=>"relationForm"==a.type?"关联表单字段":"数据接口字段"));function _(){a.transferList.push({targetField:"",sourceValue:""})}function u(){(function(){const e=a.transferList;let t=!0;for(let a=0;a<e.length;a++){const o=e[a];if(!o.targetField){i.warning(`第${a+1}行${unref(s)}不能为空`),t=!1;break}if(!o.sourceValue){i.warning(`第${a+1}行当前表单字段不能为空`),t=!1;break}}return t})()&&(n("change",a.transferList),r())}function p(e){a.fieldOptions=a.allOptions.filter((t=>-1!==t.value.toLowerCase().indexOf(e.toLowerCase())))}function f(e){let t=[];for(let o=0;o<a.transferList.length;o++){const l=a.transferList[o];l.sourceValue&&e!==o&&t.push(l.sourceValue)}return a.formFieldsOptions.filter((e=>!t.includes(e.id)))}return(e,t)=>{const n=resolveComponent("a-col"),i=resolveComponent("a-row"),r=resolveComponent("jnpf-select"),m=resolveComponent("a-auto-complete");return openBlock(),createBlock(unref(BasicModal),mergeProps(e.$attrs,{onRegister:unref(c),title:"填充规则配置",width:600,class:"jnpf-transfer-modal",onOk:u,destroyOnClose:""}),{default:withCtx((()=>[createBaseVNode("div",_hoisted_1$c,[createVNode(i,{gutter:8},{default:withCtx((()=>[createVNode(n,{span:9},{default:withCtx((()=>[createTextVNode(toDisplayString(s.value),1)])),_:1}),createVNode(n,{span:4}),createVNode(n,{span:9},{default:withCtx((()=>t[1]||(t[1]=[createTextVNode("当前表单字段")]))),_:1,__:[1]})])),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(o),((e,o)=>(openBlock(),createBlock(i,{gutter:8,key:o,class:"mt-10px"},{default:withCtx((()=>[createVNode(n,{span:9},{default:withCtx((()=>["relationForm"==a.type?(openBlock(),createBlock(r,{key:0,value:e.targetField,"onUpdate:value":t=>e.targetField=t,options:unref(l),placeholder:"请选择",showSearch:"",allowClear:"",disabled:e.required,fieldNames:{options:"options1"}},null,8,["value","onUpdate:value","options","disabled"])):(openBlock(),createBlock(m,{key:1,value:e.targetField,"onUpdate:value":t=>e.targetField=t,placeholder:"请输入",options:unref(l),onFocus:t=>{p(e.targetField)},onSearch:t=>unref(d)(e.targetField)},null,8,["value","onUpdate:value","options","onFocus","onSearch"]))])),_:2},1024),createVNode(n,{span:4,class:"leading-32px"},{default:withCtx((()=>t[2]||(t[2]=[createTextVNode("的值填充到")]))),_:1,__:[2]}),createVNode(n,{span:9},{default:withCtx((()=>[createVNode(r,{value:e.sourceValue,"onUpdate:value":t=>e.sourceValue=t,options:f(o),placeholder:"请选择",showSearch:"",allowClear:"",fieldNames:{options:"options1"}},null,8,["value","onUpdate:value","options"])])),_:2},1024),e.required?createCommentVNode("",!0):(openBlock(),createBlock(n,{key:0,span:1,class:"text-center"},{default:withCtx((()=>[createBaseVNode("i",{class:"icon-ym icon-ym-btn-clearn",onClick:e=>function(e){a.transferList.splice(e,1)}(o)},null,8,_hoisted_2$b)])),_:2},1024))])),_:2},1024)))),128)),createBaseVNode("span",{class:"link-text my-10px inline-block",onClick:t[0]||(t[0]=e=>_())},t[3]||(t[3]=[createBaseVNode("i",{class:"icon-ym icon-ym-btn-add text-14px mr-4px"},null,-1),createTextVNode("添加字段")]))])])),_:1},16,["onRegister"])}}}),_hoisted_1$b={key:6,class:"options-list"},_hoisted_2$a={class:"select-item"},_hoisted_3$8=["onClick"],_hoisted_4$8={class:"add-btn"},_hoisted_5$4={class:"options-list"},_hoisted_6$4={class:"select-item"},_hoisted_7$4=["onClick"],_hoisted_8$4={class:"add-btn"},_sfc_main$r=defineComponent({inheritAttrs:!1,__name:"RPopupSelect",props:["activeData","dicOptions"],setup(e){const{createMessage:t}=useMessage(),[a,{openModal:o}]=useModal(),l=e,n=computed((()=>unref(l.activeData).__config__?.jnpfKey)),{options:i,allOptions:c,debounceOnSearch:r,onFocus:d,initFieldData:s}=useField(l.activeData),{showType:_,formFieldsOptions:u,formFieldsSelectOptions:p,onRelationFieldChange:f,onMultipleChange:m}=useDynamic(l.activeData),v=[{id:"dialog",fullName:"居中弹窗"},{id:"drawer",fullName:"右侧弹窗"}],h=["600px","800px","1000px","40%","50%","60%","70%","80%"],g=[{id:20,fullName:"20条"},{id:50,fullName:"50条"},{id:80,fullName:"80条"},{id:100,fullName:"100条"}];function C(e,t){if(l.activeData.__config__.transferList=[],l.activeData.extraOptions=[],l.activeData.columnOptions=[],!e)return l.activeData.interfaceId="",l.activeData.interfaceName="",l.activeData.templateJson=[],l.activeData.interfaceHasPage=0,l.activeData.__config__.defaultValue="",void s();l.activeData.interfaceId!==e&&(l.activeData.interfaceId=e,l.activeData.interfaceName=t.fullName,l.activeData.templateJson=t.parameterJson?JSON.parse(t.parameterJson).map((e=>({...e,relationField:"",sourceType:1}))):[],l.activeData.__config__.defaultValue="",l.activeData.interfaceHasPage=t.hasPage,t.hasPage&&(l.activeData.hasPage=!0),s())}function N(){l.activeData.extraOptions||(l.activeData.extraOptions=[]),l.activeData.extraOptions.push({value:"",label:""})}function y(){l.activeData.columnOptions.push({value:"",label:""})}function V(){if(!l.activeData.interfaceId)return t.warning("请先选择数据接口");o(!0,{transferList:l.activeData.__config__.transferList,fieldOptions:c,formFieldsOptions:unref(p).filter((e=>{return t=e,l.activeData.__config__.isSubTable?t.__config__.isSubTable&&l.activeData.__config__.parentVModel===t.__config__.parentVModel:!t.__config__.isSubTable;var t})),type:"popupSelect"})}function k(e){l.activeData.__config__.transferList=e}return onMounted((()=>s())),(t,o)=>{const l=resolveComponent("a-input"),c=resolveComponent("a-form-item"),s=resolveComponent("jnpf-select"),p=resolveComponent("a-select-option"),b=resolveComponent("a-select"),w=resolveComponent("BasicHelp"),x=resolveComponent("a-auto-complete"),D=resolveComponent("a-switch"),B=resolveComponent("a-button"),T=resolveComponent("a-divider"),U=resolveComponent("jnpf-radio");return openBlock(),createElementBlock(Fragment,null,["popupSelect"===n.value?(openBlock(),createBlock(c,{key:0,label:"弹窗标题"},{default:withCtx((()=>[createVNode(l,{value:e.activeData.popupTitle,"onUpdate:value":o[0]||(o[0]=t=>e.activeData.popupTitle=t),placeholder:"请输入"},null,8,["value"])])),_:1})):createCommentVNode("",!0),"popupSelect"===n.value&&"pc"===unref(_)?(openBlock(),createBlock(c,{key:1,label:"弹窗类型"},{default:withCtx((()=>[createVNode(s,{value:e.activeData.popupType,"onUpdate:value":o[1]||(o[1]=t=>e.activeData.popupType=t),placeholder:"请选择",options:v},null,8,["value"])])),_:1})):createCommentVNode("",!0),"popupSelect"===n.value&&"pc"===unref(_)?(openBlock(),createBlock(c,{key:2,label:"弹窗宽度"},{default:withCtx((()=>[createVNode(b,{value:e.activeData.popupWidth,"onUpdate:value":o[2]||(o[2]=t=>e.activeData.popupWidth=t),placeholder:"请选择"},{default:withCtx((()=>[(openBlock(),createElementBlock(Fragment,null,renderList(h,(e=>createVNode(p,{key:e,value:e},{default:withCtx((()=>[createTextVNode(toDisplayString(e),1)])),_:2},1032,["value"]))),64))])),_:1},8,["value"])])),_:1})):createCommentVNode("",!0),createVNode(c,null,{label:withCtx((()=>[o[17]||(o[17]=createTextVNode("数据接口")),createVNode(w,{text:"支持通过数据接口的参数实现控件之间的联动。"})])),default:withCtx((()=>[createVNode(unref(InterfaceModal),{value:e.activeData.interfaceId,title:e.activeData.interfaceName,sourceType:2,popupTitle:"数据接口",onChange:C},null,8,["value","title"])])),_:1}),createVNode(c,{label:"存储字段"},{default:withCtx((()=>[createVNode(x,{value:e.activeData.propsValue,"onUpdate:value":o[3]||(o[3]=t=>e.activeData.propsValue=t),placeholder:"请输入",options:unref(i),onFocus:o[4]||(o[4]=t=>unref(d)(e.activeData.propsValue)),onSearch:o[5]||(o[5]=t=>unref(r)(e.activeData.propsValue))},null,8,["value","options"])])),_:1}),createVNode(c,{label:"回显字段"},{default:withCtx((()=>[createVNode(x,{value:e.activeData.relationField,"onUpdate:value":o[6]||(o[6]=t=>e.activeData.relationField=t),placeholder:"请输入",options:unref(i),onFocus:o[7]||(o[7]=t=>unref(d)(e.activeData.relationField)),onSearch:o[8]||(o[8]=t=>unref(r)(e.activeData.relationField))},null,8,["value","options"])])),_:1}),createVNode(c,{label:"是否缓存"},{default:withCtx((()=>[createVNode(D,{checked:e.activeData.__config__.useCache,"onUpdate:checked":o[9]||(o[9]=t=>e.activeData.__config__.useCache=t)},null,8,["checked"])])),_:1}),"popupSelect"===n.value?(openBlock(),createBlock(c,{key:3},{label:withCtx((()=>[o[18]||(o[18]=createTextVNode("填充字段")),createVNode(w,{text:"选择数据后，将数据接口的字段值填充到当前表单字段，不支持代码生成。"})])),default:withCtx((()=>[createVNode(B,{block:"",onClick:o[10]||(o[10]=e=>V())},{default:withCtx((()=>[createTextVNode(toDisplayString(e.activeData.__config__.transferList?.length?"编辑填充规则":"填充规则配置"),1)])),_:1})])),_:1})):createCommentVNode("",!0),e.activeData.templateJson?.length?(openBlock(),createBlock(c,{key:4,label:"参数设置"},{default:withCtx((()=>[createVNode(unref(SelectInterfaceBtn),{templateJson:e.activeData.templateJson,fieldOptions:unref(u),type:3,onFieldChange:unref(f)},null,8,["templateJson","fieldOptions","onFieldChange"])])),_:1})):createCommentVNode("",!0),"popupSelect"!==n.value||e.activeData.__config__.isSubTable?createCommentVNode("",!0):(openBlock(),createBlock(T,{key:5},{default:withCtx((()=>o[19]||(o[19]=[createTextVNode("显示字段")]))),_:1,__:[19]})),"popupSelect"!==n.value||e.activeData.__config__.isSubTable?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_1$b,[createVNode(unref(draggable),{modelValue:e.activeData.extraOptions,"onUpdate:modelValue":o[11]||(o[11]=t=>e.activeData.extraOptions=t),animation:300,group:"extraItem",handle:".option-drag",itemKey:"uuid"},{item:withCtx((({element:t,index:a})=>[createBaseVNode("div",_hoisted_2$a,[o[21]||(o[21]=createBaseVNode("div",{class:"select-line-icon option-drag"},[createBaseVNode("i",{class:"icon-ym icon-ym-darg"})],-1)),createVNode(l,{value:t.label,"onUpdate:value":e=>t.label=e,placeholder:"列名"},null,8,["value","onUpdate:value"]),createVNode(x,{value:t.value,"onUpdate:value":e=>t.value=e,placeholder:"字段",options:unref(i),onFocus:e=>unref(d)(t.value),onSearch:e=>unref(r)(t.value)},null,8,["value","onUpdate:value","options","onFocus","onSearch"]),createBaseVNode("div",{class:"close-btn select-line-icon",onClick:t=>e.activeData.extraOptions.splice(a,1)},o[20]||(o[20]=[createBaseVNode("i",{class:"icon-ym icon-ym-btn-clearn"},null,-1)]),8,_hoisted_3$8)])])),_:1},8,["modelValue"]),createBaseVNode("div",_hoisted_4$8,[createVNode(B,{type:"link",preIcon:"icon-ym icon-ym-btn-add",onClick:N},{default:withCtx((()=>o[22]||(o[22]=[createTextVNode("添加字段")]))),_:1,__:[22]})])])),createVNode(T,null,{default:withCtx((()=>o[23]||(o[23]=[createTextVNode("列表字段")]))),_:1,__:[23]}),createBaseVNode("div",_hoisted_5$4,[createVNode(unref(draggable),{modelValue:e.activeData.columnOptions,"onUpdate:modelValue":o[12]||(o[12]=t=>e.activeData.columnOptions=t),animation:300,group:"selectItem",handle:".option-drag",itemKey:"uuid"},{item:withCtx((({element:t,index:a})=>[createBaseVNode("div",_hoisted_6$4,[o[25]||(o[25]=createBaseVNode("div",{class:"select-line-icon option-drag"},[createBaseVNode("i",{class:"icon-ym icon-ym-darg"})],-1)),createVNode(l,{value:t.label,"onUpdate:value":e=>t.label=e,placeholder:"列名"},null,8,["value","onUpdate:value"]),createVNode(x,{value:t.value,"onUpdate:value":e=>t.value=e,placeholder:"字段",options:unref(i),onFocus:e=>unref(d)(t.value),onSearch:e=>unref(r)(t.value)},null,8,["value","onUpdate:value","options","onFocus","onSearch"]),createBaseVNode("div",{class:"close-btn select-line-icon",onClick:t=>e.activeData.columnOptions.splice(a,1)},o[24]||(o[24]=[createBaseVNode("i",{class:"icon-ym icon-ym-btn-clearn"},null,-1)]),8,_hoisted_7$4)])])),_:1},8,["modelValue"]),createBaseVNode("div",_hoisted_8$4,[createVNode(B,{type:"link",preIcon:"icon-ym icon-ym-btn-add",onClick:y},{default:withCtx((()=>o[26]||(o[26]=[createTextVNode("添加字段")]))),_:1,__:[26]})])]),createVNode(T,null,{default:withCtx((()=>o[27]||(o[27]=[createTextVNode("列表分页")]))),_:1,__:[27]}),createVNode(c,{label:"分页设置"},{default:withCtx((()=>[createVNode(D,{checked:e.activeData.hasPage,"onUpdate:checked":o[13]||(o[13]=t=>e.activeData.hasPage=t),disabled:!!e.activeData.interfaceHasPage&&e.activeData.hasPage},null,8,["checked","disabled"])])),_:1}),e.activeData.hasPage?(openBlock(),createBlock(c,{key:7,label:"分页条数"},{default:withCtx((()=>[createVNode(U,{value:e.activeData.pageSize,"onUpdate:value":o[14]||(o[14]=t=>e.activeData.pageSize=t),options:g,optionType:"button","button-style":"solid",class:"right-radio"},null,8,["value"])])),_:1})):createCommentVNode("",!0),createVNode(T),createVNode(c,{label:"能否清空"},{default:withCtx((()=>[createVNode(D,{checked:e.activeData.clearable,"onUpdate:checked":o[15]||(o[15]=t=>e.activeData.clearable=t)},null,8,["checked"])])),_:1}),"popupTableSelect"===n.value?(openBlock(),createBlock(c,{key:8,label:"能否多选"},{default:withCtx((()=>[createVNode(D,{checked:e.activeData.multiple,"onUpdate:checked":o[16]||(o[16]=t=>e.activeData.multiple=t),onChange:unref(m)},null,8,["checked","onChange"])])),_:1})):createCommentVNode("",!0),createVNode(_sfc_main$s,{onRegister:unref(a),onChange:k},null,8,["onRegister"])],64)}}}),_sfc_main$q=defineComponent({inheritAttrs:!1,__name:"RAreaSelect",props:["activeData"],setup(e){const t=e,a=[{id:0,fullName:"省"},{id:1,fullName:"省市"},{id:2,fullName:"省市区"},{id:3,fullName:"省市区-街道"}];function o(){t.activeData.__config__.defaultValue=[],t.activeData.__config__.renderKey=+new Date}return(t,l)=>{const n=resolveComponent("jnpf-area-select"),i=resolveComponent("a-form-item"),c=resolveComponent("jnpf-radio"),r=resolveComponent("a-switch");return openBlock(),createElementBlock(Fragment,null,[createVNode(i,{label:"默认值"},{default:withCtx((()=>[(openBlock(),createBlock(n,{value:e.activeData.__config__.defaultValue,"onUpdate:value":l[0]||(l[0]=t=>e.activeData.__config__.defaultValue=t),placeholder:"选择默认值",multiple:e.activeData.multiple,level:e.activeData.level,allowClear:"",key:e.activeData.__config__.renderKey},null,8,["value","multiple","level"]))])),_:1}),createVNode(i,{label:"格式"},{default:withCtx((()=>[createVNode(c,{value:e.activeData.level,"onUpdate:value":l[1]||(l[1]=t=>e.activeData.level=t),options:a,class:"level-radio",onChange:o},null,8,["value"])])),_:1}),createVNode(i,{label:"能否清空"},{default:withCtx((()=>[createVNode(r,{checked:e.activeData.clearable,"onUpdate:checked":l[2]||(l[2]=t=>e.activeData.clearable=t)},null,8,["checked"])])),_:1}),createVNode(i,{label:"能否多选"},{default:withCtx((()=>[createVNode(r,{checked:e.activeData.multiple,"onUpdate:checked":l[3]||(l[3]=t=>e.activeData.multiple=t),onChange:o},null,8,["checked"])])),_:1})],64)}}}),RAreaSelect_vue_vue_type_style_index_0_scoped_ffc1564e_lang="",RAreaSelect=_export_sfc(_sfc_main$q,[["__scopeId","data-v-ffc1564e"]]),_hoisted_1$a={key:3,class:"options-list"},_hoisted_2$9={class:"select-item"},_hoisted_3$7=["onClick"],_hoisted_4$7={class:"add-btn"},_hoisted_5$3={class:"options-list"},_hoisted_6$3={class:"select-item"},_hoisted_7$3=["onClick"],_hoisted_8$3={class:"add-btn"},_sfc_main$p=defineComponent({inheritAttrs:!1,__name:"index",props:["activeData"],emits:["relationChange"],setup(e,{emit:t}){const a=e,o=t,{createMessage:l}=useMessage(),[n,{openModal:i}]=useModal(),{formFieldsSelectOptions:c}=useDynamic(a.activeData),r=inject("getShowType"),d=computed((()=>r())),s=[{id:"dialog",fullName:"居中弹窗"},{id:"drawer",fullName:"右侧弹窗"}],_=["600px","800px","1000px","40%","50%","60%","70%","80%"],u=[{id:20,fullName:"20条"},{id:50,fullName:"50条"},{id:80,fullName:"80条"},{id:100,fullName:"100条"}],p=[{id:0,fullName:"简易查询"},{id:1,fullName:"全字段查询"}],f=ref([]),m=ref([]),v=ref([]),h=ref([]);function g(e){if(a.activeData.relationField="",a.activeData.__config__.transferList=[],a.activeData.extraOptions=[],a.activeData.columnOptions=[],a.activeData.propsValue=void 0,o("relationChange",a.activeData.__vModel__),!e)return m.value=[],v.value=[],void(h.value=[]);C()}function C(){a.activeData.modelId&&getConfigData(a.activeData.modelId).then((e=>{const{formData:t,propsValueList:o}=e.data;let l={},n=[];t&&(l=JSON.parse(t)),n=l.fields||[];let i=function(e){let t=[];const a=(e,o)=>{if(e){if(e.__vModel__&&"table"!==e.__config__.jnpfKey){const a=o&&o.__config__&&"table"===o.__config__.jnpfKey,l={id:a?o.__vModel__+"-"+e.__vModel__:e.__vModel__,fullName:a?o.__config__.label+"-"+e.__config__.label:e.__config__.label};t.push(l)}Array.isArray(e)&&e.forEach((e=>a(e,o))),e.__config__&&e.__config__.children&&Array.isArray(e.__config__.children)&&a(e.__config__.children,e)}};return a(e),t}(n);m.value=i,v.value=i.filter((e=>e.id.indexOf("-")<0)),h.value=o||[],!a.activeData.propsValue&&(a.activeData.propsValue=h.value[0]?.field)}))}function N(e){e&&(a.activeData.modelId||l.warning("请先选择关联功能"))}function y(e,t){const a=m.value.filter((t=>t.id===e))||[];if(!a.length)return;const o=a[0];t.label=o.fullName}function V(){a.activeData.extraOptions||(a.activeData.extraOptions=[]),a.activeData.extraOptions.push({value:"",label:""})}function k(){a.activeData.columnOptions.push({value:"",label:""})}function b(){if(!a.activeData.modelId)return l.warning("请先选择关联功能");i(!0,{transferList:a.activeData.__config__.transferList,fieldOptions:m.value,formFieldsOptions:unref(c).filter((e=>{return t=e,a.activeData.__config__.isSubTable?t.__config__.isSubTable&&a.activeData.__config__.parentVModel===t.__config__.parentVModel:!t.__config__.isSubTable;var t}))})}function w(e){a.activeData.__config__.transferList=e}return onMounted((()=>{getVisualDevSelector({type:1,webType:"2",isRelease:1}).then((e=>{f.value=e.data.list})),C()})),(t,a)=>{const o=resolveComponent("a-input"),l=resolveComponent("a-form-item"),i=resolveComponent("jnpf-select"),c=resolveComponent("a-select-option"),r=resolveComponent("a-select"),C=resolveComponent("JnpfTreeSelect"),x=resolveComponent("BasicHelp"),D=resolveComponent("a-button"),B=resolveComponent("a-divider"),T=resolveComponent("a-switch"),U=resolveComponent("jnpf-radio");return openBlock(),createElementBlock(Fragment,null,[createVNode(l,{label:"弹窗标题"},{default:withCtx((()=>[createVNode(o,{value:e.activeData.popupTitle,"onUpdate:value":a[0]||(a[0]=t=>e.activeData.popupTitle=t),placeholder:"请输入"},null,8,["value"])])),_:1}),"pc"===d.value?(openBlock(),createBlock(l,{key:0,label:"弹窗类型"},{default:withCtx((()=>[createVNode(i,{value:e.activeData.popupType,"onUpdate:value":a[1]||(a[1]=t=>e.activeData.popupType=t),placeholder:"请选择",options:s},null,8,["value"])])),_:1})):createCommentVNode("",!0),"pc"===d.value?(openBlock(),createBlock(l,{key:1,label:"弹窗宽度"},{default:withCtx((()=>[createVNode(r,{value:e.activeData.popupWidth,"onUpdate:value":a[2]||(a[2]=t=>e.activeData.popupWidth=t),placeholder:"请选择"},{default:withCtx((()=>[(openBlock(),createElementBlock(Fragment,null,renderList(_,(e=>createVNode(c,{key:e,value:e},{default:withCtx((()=>[createTextVNode(toDisplayString(e),1)])),_:2},1032,["value"]))),64))])),_:1},8,["value"])])),_:1})):createCommentVNode("",!0),createVNode(l,{label:"关联功能"},{default:withCtx((()=>[createVNode(C,{value:e.activeData.modelId,"onUpdate:value":a[3]||(a[3]=t=>e.activeData.modelId=t),options:f.value,placeholder:"请选择",lastLevel:"",allowClear:"",onChange:g},null,8,["value","options"])])),_:1}),createVNode(l,null,{label:withCtx((()=>[a[13]||(a[13]=createTextVNode("存储字段")),createVNode(x,{text:"请选择具有唯一性、稳定性的字段"})])),default:withCtx((()=>[createVNode(i,{value:e.activeData.propsValue,"onUpdate:value":a[4]||(a[4]=t=>e.activeData.propsValue=t),placeholder:"请选择",options:h.value,fieldNames:{value:"field",label:"fieldName"},showSearch:"",onDropdownVisibleChange:N},null,8,["value","options"])])),_:1}),createVNode(l,{label:"回显字段"},{default:withCtx((()=>[createVNode(i,{value:e.activeData.relationField,"onUpdate:value":a[5]||(a[5]=t=>e.activeData.relationField=t),placeholder:"请选择",options:v.value,showSearch:"",onDropdownVisibleChange:N},null,8,["value","options"])])),_:1}),createVNode(l,null,{label:withCtx((()=>[a[14]||(a[14]=createTextVNode("填充字段")),createVNode(x,{text:"选择数据后，将关联表单的字段值填充到当前表单字段，不支持代码生成。"})])),default:withCtx((()=>[createVNode(D,{block:"",onClick:a[6]||(a[6]=e=>b())},{default:withCtx((()=>[createTextVNode(toDisplayString(e.activeData.__config__.transferList?.length?"编辑填充规则":"填充规则配置"),1)])),_:1})])),_:1}),e.activeData.__config__.isSubTable?createCommentVNode("",!0):(openBlock(),createBlock(B,{key:2},{default:withCtx((()=>a[15]||(a[15]=[createTextVNode("显示字段")]))),_:1,__:[15]})),e.activeData.__config__.isSubTable?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_1$a,[createVNode(unref(draggable),{modelValue:e.activeData.extraOptions,"onUpdate:modelValue":a[7]||(a[7]=t=>e.activeData.extraOptions=t),animation:300,group:"extraItem",handle:".option-drag",itemKey:"uuid"},{item:withCtx((({element:t,index:o})=>[createBaseVNode("div",_hoisted_2$9,[a[17]||(a[17]=createBaseVNode("div",{class:"select-line-icon option-drag"},[createBaseVNode("i",{class:"icon-ym icon-ym-darg"})],-1)),createVNode(i,{value:t.value,"onUpdate:value":e=>t.value=e,placeholder:"请选择",options:m.value,showSearch:"",onDropdownVisibleChange:N,onChange:e=>y(e,t)},null,8,["value","onUpdate:value","options","onChange"]),createBaseVNode("div",{class:"close-btn select-line-icon",onClick:t=>e.activeData.extraOptions.splice(o,1)},a[16]||(a[16]=[createBaseVNode("i",{class:"icon-ym icon-ym-btn-clearn"},null,-1)]),8,_hoisted_3$7)])])),_:1},8,["modelValue"]),createBaseVNode("div",_hoisted_4$7,[createVNode(D,{type:"link",preIcon:"icon-ym icon-ym-btn-add",onClick:V},{default:withCtx((()=>a[18]||(a[18]=[createTextVNode("添加字段")]))),_:1,__:[18]})])])),createVNode(B,null,{default:withCtx((()=>a[19]||(a[19]=[createTextVNode("列表字段")]))),_:1,__:[19]}),createBaseVNode("div",_hoisted_5$3,[createVNode(unref(draggable),{modelValue:e.activeData.columnOptions,"onUpdate:modelValue":a[8]||(a[8]=t=>e.activeData.columnOptions=t),animation:300,group:"selectItem",handle:".option-drag",itemKey:"uuid"},{item:withCtx((({element:t,index:o})=>[createBaseVNode("div",_hoisted_6$3,[a[21]||(a[21]=createBaseVNode("div",{class:"select-line-icon option-drag"},[createBaseVNode("i",{class:"icon-ym icon-ym-darg"})],-1)),createVNode(i,{value:t.value,"onUpdate:value":e=>t.value=e,placeholder:"请选择",options:v.value,showSearch:"",onDropdownVisibleChange:N,onChange:e=>y(e,t)},null,8,["value","onUpdate:value","options","onChange"]),createBaseVNode("div",{class:"close-btn select-line-icon",onClick:t=>e.activeData.columnOptions.splice(o,1)},a[20]||(a[20]=[createBaseVNode("i",{class:"icon-ym icon-ym-btn-clearn"},null,-1)]),8,_hoisted_7$3)])])),_:1},8,["modelValue"]),createBaseVNode("div",_hoisted_8$3,[createVNode(D,{type:"link",preIcon:"icon-ym icon-ym-btn-add",onClick:k},{default:withCtx((()=>a[22]||(a[22]=[createTextVNode("添加字段")]))),_:1,__:[22]})])]),createVNode(B,null,{default:withCtx((()=>a[23]||(a[23]=[createTextVNode("列表分页")]))),_:1,__:[23]}),createVNode(l,{label:"分页设置"},{default:withCtx((()=>[createVNode(T,{checked:e.activeData.hasPage,"onUpdate:checked":a[9]||(a[9]=t=>e.activeData.hasPage=t)},null,8,["checked"])])),_:1}),e.activeData.hasPage?(openBlock(),createBlock(l,{key:4,label:"分页条数"},{default:withCtx((()=>[createVNode(U,{value:e.activeData.pageSize,"onUpdate:value":a[10]||(a[10]=t=>e.activeData.pageSize=t),options:u,optionType:"button","button-style":"solid",class:"right-radio"},null,8,["value"])])),_:1})):createCommentVNode("",!0),createVNode(l,null,{label:withCtx((()=>[a[24]||(a[24]=createTextVNode("查询设置")),createVNode(x,{text:["简易查询：关键词查询只匹配”单行“、”多行“、”数字“、”下拉补全“列表字段;","全字段查询：关键词查询匹配所有列表字段;"]})])),default:withCtx((()=>[createVNode(U,{value:e.activeData.queryType,"onUpdate:value":a[11]||(a[11]=t=>e.activeData.queryType=t),options:p,optionType:"button","button-style":"solid",class:"right-radio"},null,8,["value"])])),_:1}),createVNode(B),createVNode(l,{label:"能否清空"},{default:withCtx((()=>[createVNode(T,{checked:e.activeData.clearable,"onUpdate:checked":a[12]||(a[12]=t=>e.activeData.clearable=t)},null,8,["checked"])])),_:1}),createVNode(_sfc_main$s,{onRegister:unref(n),onChange:w},null,8,["onRegister"])],64)}}}),_sfc_main$o=defineComponent({inheritAttrs:!1,__name:"RRelationFormAttr",props:["activeData","drawingList"],setup(e){const t=e,{createMessage:a}=useMessage(),o=ref([]),l=computed((()=>{let e=[];const a=(o,l)=>{o&&(o.__config__&&o.__config__.children&&Array.isArray(o.__config__.children)&&a(o.__config__.children),Array.isArray(o)&&o.forEach((e=>a(e))),o.__config__&&o.__config__.jnpfKey&&"relationForm"===o.__config__.jnpfKey&&o.__vModel__&&function(e){return t.activeData.__config__.isSubTable?e.__config__.isSubTable&&t.activeData.__config__.parentVModel===e.__config__.parentVModel:!e.__config__.isSubTable}(o)&&e.push({fullName:o.__config__.label,id:o.__config__&&o.__config__.tableName?o.__vModel__+"_jnpfTable_"+o.__config__.tableName+(o.__config__.isSubTable?"0":"1"):o.__vModel__,...o,disabled:!1}))};return a(t.drawingList),e}));function n(e){if(t.activeData.showField="",!e)return o.value=[];i()}function i(){if(!t.activeData.relationField||!unref(l).length)return;let e=unref(l).filter((e=>e.id===t.activeData.relationField));if(!e.length)return;let a=e[0];a.modelId&&getFormDataFields(a.modelId).then((e=>{o.value=e.data.list.map((e=>({...e,id:e.vmodel,fullName:e.label})))}))}function c(e){e&&(t.activeData.relationField||a.warning("请先选择关联功能"))}return onMounted((()=>{i()})),(t,a)=>{const i=resolveComponent("jnpf-select"),r=resolveComponent("a-form-item");return openBlock(),createElementBlock(Fragment,null,[createVNode(r,{label:"关联功能"},{default:withCtx((()=>[createVNode(i,{value:e.activeData.relationField,"onUpdate:value":a[0]||(a[0]=t=>e.activeData.relationField=t),placeholder:"请选择",options:l.value,allowClear:"",showSearch:"",onChange:n},null,8,["value","options"])])),_:1}),createVNode(r,{label:"关联字段"},{default:withCtx((()=>[createVNode(i,{value:e.activeData.showField,"onUpdate:value":a[1]||(a[1]=t=>e.activeData.showField=t),placeholder:"请选择",options:o.value,allowClear:"",showSearch:"",onDropdownVisibleChange:c},null,8,["value","options"])])),_:1})],64)}}}),_sfc_main$n=defineComponent({inheritAttrs:!1,__name:"RPopupAttr",props:["activeData","drawingList"],setup(e){const t=e,a=computed((()=>{let e=[];const a=(o,l)=>{o&&(o.__config__&&o.__config__.children&&Array.isArray(o.__config__.children)&&a(o.__config__.children),Array.isArray(o)&&o.forEach((e=>a(e))),o.__config__&&o.__config__.jnpfKey&&"popupSelect"===o.__config__.jnpfKey&&o.__vModel__&&function(e){return t.activeData.__config__.isSubTable?e.__config__.isSubTable&&t.activeData.__config__.parentVModel===e.__config__.parentVModel:!e.__config__.isSubTable}(o)&&e.push({fullName:o.__config__.label,id:o.__config__&&o.__config__.tableName?o.__vModel__+"_jnpfTable_"+o.__config__.tableName+(o.__config__.isSubTable?"0":"1"):o.__vModel__,...o,disabled:!1}))};return a(t.drawingList),e}));return(t,o)=>{const l=resolveComponent("jnpf-select"),n=resolveComponent("a-form-item"),i=resolveComponent("A-input");return openBlock(),createElementBlock(Fragment,null,[createVNode(n,{label:"关联弹窗"},{default:withCtx((()=>[createVNode(l,{value:e.activeData.relationField,"onUpdate:value":o[0]||(o[0]=t=>e.activeData.relationField=t),placeholder:"请选择",options:a.value,allowClear:"",showSearch:""},null,8,["value","options"])])),_:1}),createVNode(n,{label:"关联字段"},{default:withCtx((()=>[createVNode(i,{value:e.activeData.showField,"onUpdate:value":o[1]||(o[1]=t=>e.activeData.showField=t),placeholder:"请输入"},null,8,["value"])])),_:1})],64)}}}),_hoisted_1$9={key:1,class:"placeholder-text"},_hoisted_2$8={class:"calc-box"},_hoisted_3$6={class:"preview-actions"},_hoisted_4$6=["onClick"],_hoisted_5$2={key:1,class:"empty-text"},_hoisted_6$2={class:"comBtn my-10px"},_hoisted_7$2=["onClick"],_hoisted_8$2={class:"my-10px"},_hoisted_9$2={class:"numBtn comBtn"},_hoisted_10$2=["onClick"],_sfc_main$m=defineComponent({inheritAttrs:!1,__name:"RCalculate",props:["activeData","drawingList"],setup(e){const t=e,{createMessage:a}=useMessage(),[o,{openModal:l,closeModal:n}]=useModal(),i=ref([]),c=ref(!0),r=[{fullName:"四舍五入",id:1},{fullName:"截断舍入",id:2},{fullName:"向上取整",id:3},{fullName:"向下取整",id:4}],d=computed((()=>{let e=[];const a=(o,l)=>{if(o&&(o.__config__&&o.__config__.children&&Array.isArray(o.__config__.children)&&a(o.__config__.children,o),Array.isArray(o)&&o.forEach((e=>a(e,l))),o.__config__&&o.__config__.jnpfKey&&o.__vModel__&&["inputNumber","calculate"].includes(o.__config__.jnpfKey))){const a=l&&l.__config__&&"table"===l.__config__.jnpfKey;if(a&&!function(e){return!t.activeData.__config__.isSubTable||e.__config__.isSubTable&&t.activeData.__config__.parentVModel===e.__config__.parentVModel}(o))return;e.push({__vModel__:a?l.__vModel__+"."+o.__vModel__:o.__vModel__,label:a?l.__config__.label+"."+o.__config__.label:o.__config__.label})}};return a(t.drawingList),e}));function s(){if(!i.value.length)return t.activeData.expression=i.value,void n();const e=mergeNumberOfExps(i.value).map((e=>"object"==typeof e?1:e));if(i.value.some((e=>"无效的值"===e.label)))return a.error("编辑的公式含有无效的值，无法计算");c.value=validExp(e,!1),c.value?(t.activeData.expression=i.value,n()):a.error("编辑的公式不符合计算法则，无法计算")}function _(){i.value=t.activeData.expression.map((e=>{return"string"==typeof e||(t=e,unref(d).find((e=>e.__vModel__===t.__vModel__&&e.__vModel__===t.__vModel__)))?e:{__vModel__:e.__vModel__,label:"无效的值"};var t})),t.activeData.expression=i.value}return onMounted((()=>{_()})),(a,n)=>{const _=resolveComponent("a-form-item"),u=resolveComponent("jnpf-select"),p=resolveComponent("a-input-number"),f=resolveComponent("a-switch"),m=resolveComponent("a-tooltip");return openBlock(),createElementBlock(Fragment,null,[createVNode(_,{label:"计算公式"},{default:withCtx((()=>[createBaseVNode("div",{class:"pane-calc-preview",onClick:n[0]||(n[0]=e=>(i.value=cloneDeep(t.activeData.expression),c.value=!0,void l()))},[e.activeData.expression.length?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(e.activeData.expression,((e,t)=>(openBlock(),createElementBlock("span",{key:t,class:normalizeClass({"calc-btn":"string"!=typeof e,error:"string"!=typeof e&&"无效的值"===e.label})},toDisplayString("string"!=typeof e?e.label:e),3)))),128)):(openBlock(),createElementBlock("span",_hoisted_1$9,"编辑计算公式"))])])),_:1}),createVNode(_,{label:"舍入类型"},{default:withCtx((()=>[createVNode(u,{value:e.activeData.roundType,"onUpdate:value":n[1]||(n[1]=t=>e.activeData.roundType=t),options:r},null,8,["value"])])),_:1}),[1,2].includes(e.activeData.roundType)?(openBlock(),createBlock(_,{key:0,label:"小数位数"},{default:withCtx((()=>[createVNode(p,{value:e.activeData.precision,"onUpdate:value":n[2]||(n[2]=t=>e.activeData.precision=t),placeholder:"请输入",min:0,max:15},null,8,["value"])])),_:1})):createCommentVNode("",!0),createVNode(_,{label:"千位分隔"},{default:withCtx((()=>[createVNode(f,{checked:e.activeData.thousands,"onUpdate:checked":n[3]||(n[3]=t=>e.activeData.thousands=t)},null,8,["checked"])])),_:1}),createVNode(_,{label:"大写金额"},{default:withCtx((()=>[createVNode(f,{checked:e.activeData.isAmountChinese,"onUpdate:checked":n[4]||(n[4]=t=>e.activeData.isAmountChinese=t)},null,8,["checked"])])),_:1}),createVNode(unref(BasicModal),{onRegister:unref(o),title:"编辑计算公式",onOk:s,class:"calc-modal"},{default:withCtx((()=>[createBaseVNode("div",_hoisted_2$8,[createBaseVNode("div",{class:normalizeClass(["calc-preview",{error:!c.value}])},[n[7]||(n[7]=createTextVNode(" 计算公式 = ")),(openBlock(!0),createElementBlock(Fragment,null,renderList(i.value,((e,t)=>(openBlock(),createElementBlock("span",{key:t,class:normalizeClass({"calc-btn":"string"!=typeof e,error:"string"!=typeof e&&"无效的值"===e.label})},toDisplayString("string"!=typeof e?e.label:e),3)))),128)),createBaseVNode("div",_hoisted_3$6,[createVNode(m,{title:"删除",placement:"bottom"},{default:withCtx((()=>[createVNode(unref(ArrowLeftOutlined),{onClick:n[5]||(n[5]=e=>i.value.pop())})])),_:1}),createVNode(m,{title:"清空",placement:"bottom"},{default:withCtx((()=>[createVNode(unref(DeleteOutlined),{onClick:n[6]||(n[6]=e=>i.value=[])})])),_:1})])],2),n[11]||(n[11]=createBaseVNode("div",{class:"calc-tip"}," 编辑计算公式可用来完成审批单内数据的自动结算，例如：采购单内设置计算公式“合计=单价×数量”，发起人填写单价、数量后，组件将自动计算出合计金额，免手动计算 ",-1)),createBaseVNode("div",null,[n[8]||(n[8]=createBaseVNode("span",null,"计算对象：",-1)),d.value.length?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(d.value,(e=>(openBlock(),createElementBlock("span",{key:e.__vModel__,onClick:t=>i.value.push(e),class:"calc-btn"},toDisplayString(e.label),9,_hoisted_4$6)))),128)):(openBlock(),createElementBlock("span",_hoisted_5$2,"暂无数据"))]),createBaseVNode("div",_hoisted_6$2,[n[9]||(n[9]=createBaseVNode("span",null,"计算符号：",-1)),(openBlock(),createElementBlock(Fragment,null,renderList(["+","-","×","÷","(",")"],(e=>createBaseVNode("span",{class:"calc-btn",key:e,onClick:t=>i.value.push(e)},toDisplayString(e),9,_hoisted_7$2))),64))]),createBaseVNode("div",_hoisted_8$2,[n[10]||(n[10]=createBaseVNode("span",{style:{float:"left"}},"数字键盘：",-1)),createBaseVNode("div",_hoisted_9$2,[(openBlock(),createElementBlock(Fragment,null,renderList(["1","2","3","4","5","6","7","8","9","0","."],(e=>createBaseVNode("span",{key:e,class:"calc-btn",onClick:t=>i.value.push(e)},toDisplayString(e),9,_hoisted_10$2))),64))])])])])),_:1},8,["onRegister"])],64)}}}),RCalculate_vue_vue_type_style_index_0_scoped_5d5d85a7_lang="",RCalculate=_export_sfc(_sfc_main$m,[["__scopeId","data-v-5d5d85a7"]]),_sfc_main$l=defineComponent({inheritAttrs:!1,__name:"RGroupTitle",props:["activeData"],setup(e){const t=[{id:"left",fullName:"左对齐"},{id:"center",fullName:"居中对齐"},{id:"right",fullName:"右对齐"}];return(a,o)=>{const l=resolveComponent("jnpf-i18n-input"),n=resolveComponent("a-form-item"),i=resolveComponent("jnpf-radio");return openBlock(),createElementBlock(Fragment,null,[createVNode(n,{label:"分组标题"},{default:withCtx((()=>[createVNode(l,{value:e.activeData.content,"onUpdate:value":o[0]||(o[0]=t=>e.activeData.content=t),i18n:e.activeData.contentI18nCode,"onUpdate:i18n":o[1]||(o[1]=t=>e.activeData.contentI18nCode=t),placeholder:"请输入"},null,8,["value","i18n"])])),_:1}),createVNode(n,{label:"标题提示"},{default:withCtx((()=>[createVNode(l,{value:e.activeData.helpMessage,"onUpdate:value":o[2]||(o[2]=t=>e.activeData.helpMessage=t),i18n:e.activeData.helpMessageI18nCode,"onUpdate:i18n":o[3]||(o[3]=t=>e.activeData.helpMessageI18nCode=t),placeholder:"请输入"},null,8,["value","i18n"])])),_:1}),createVNode(n,{label:"标签对齐"},{default:withCtx((()=>[createVNode(i,{value:e.activeData.contentPosition,"onUpdate:value":o[4]||(o[4]=t=>e.activeData.contentPosition=t),options:t,optionType:"button","button-style":"solid",class:"right-radio"},null,8,["value"])])),_:1})],64)}}}),_sfc_main$k=defineComponent({inheritAttrs:!1,__name:"RDivider",props:["activeData"],setup(e){const t=[{id:"left",fullName:"左边"},{id:"center",fullName:"中间"},{id:"right",fullName:"右边"}];return(a,o)=>{const l=resolveComponent("jnpf-i18n-input"),n=resolveComponent("a-form-item"),i=resolveComponent("jnpf-radio");return openBlock(),createElementBlock(Fragment,null,[createVNode(n,{label:"展示文本"},{default:withCtx((()=>[createVNode(l,{value:e.activeData.content,"onUpdate:value":o[0]||(o[0]=t=>e.activeData.content=t),i18n:e.activeData.contentI18nCode,"onUpdate:i18n":o[1]||(o[1]=t=>e.activeData.contentI18nCode=t),placeholder:"请输入"},null,8,["value","i18n"])])),_:1}),createVNode(n,{label:"文本位置"},{default:withCtx((()=>[createVNode(i,{value:e.activeData.contentPosition,"onUpdate:value":o[2]||(o[2]=t=>e.activeData.contentPosition=t),options:t,optionType:"button","button-style":"solid",class:"right-radio"},null,8,["value"])])),_:1})],64)}}}),_hoisted_1$8={class:"options-list"},_hoisted_2$7={class:"select-item"},_hoisted_3$5=["onClick"],_hoisted_4$5={class:"add-btn"},_sfc_main$j=defineComponent({inheritAttrs:!1,__name:"RCollapse",props:["activeData"],setup(e){const t=e,{createMessage:a,createConfirm:o}=useMessage(),{t:l}=useI18n(),n=inject("getShowType"),i=computed((()=>n()));function c(){const e=buildBitUUID();t.activeData.__config__.children.push({title:"新面板"+e,titleI18nCode:"",name:e,__config__:{jnpfKey:"collapseItem",children:[]}})}return(n,r)=>{const d=resolveComponent("a-switch"),s=resolveComponent("a-form-item"),_=resolveComponent("a-divider"),u=resolveComponent("jnpf-i18n-input"),p=resolveComponent("a-button");return openBlock(),createElementBlock(Fragment,null,["pc"===i.value?(openBlock(),createBlock(s,{key:0,label:"是否手风琴"},{default:withCtx((()=>[createVNode(d,{checked:e.activeData.accordion,"onUpdate:checked":r[0]||(r[0]=t=>e.activeData.accordion=t)},null,8,["checked"])])),_:1})):createCommentVNode("",!0),createVNode(_,null,{default:withCtx((()=>r[2]||(r[2]=[createTextVNode("面板配置")]))),_:1,__:[2]}),createBaseVNode("div",_hoisted_1$8,[createVNode(unref(draggable),{modelValue:e.activeData.__config__.children,"onUpdate:modelValue":r[1]||(r[1]=t=>e.activeData.__config__.children=t),animation:300,group:"selectItem",handle:".option-drag",itemKey:"uuid"},{item:withCtx((({element:e,index:n})=>[createBaseVNode("div",_hoisted_2$7,[r[4]||(r[4]=createBaseVNode("div",{class:"select-line-icon option-drag"},[createBaseVNode("i",{class:"icon-ym icon-ym-darg"})],-1)),createVNode(u,{value:e.title,"onUpdate:value":t=>e.title=t,i18n:e.titleI18nCode,"onUpdate:i18n":t=>e.titleI18nCode=t,placeholder:"面板名称"},null,8,["value","onUpdate:value","i18n","onUpdate:i18n"]),createBaseVNode("div",{class:"close-btn select-line-icon",onClick:e=>function(e){if(t.activeData.__config__.children.length<2)return a.warning("最后一项不能删除");o({iconType:"warning",title:l("common.tipTitle"),content:"删除后不能撤销，确定要删除吗?",onOk:()=>{t.activeData.__config__.children.splice(e,1)}})}(n)},r[3]||(r[3]=[createBaseVNode("i",{class:"icon-ym icon-ym-btn-clearn"},null,-1)]),8,_hoisted_3$5)])])),_:1},8,["modelValue"]),createBaseVNode("div",_hoisted_4$5,[createVNode(p,{type:"link",preIcon:"icon-ym icon-ym-btn-add",onClick:c,class:"!px-0"},{default:withCtx((()=>r[5]||(r[5]=[createTextVNode("添加面板")]))),_:1,__:[5]})])])],64)}}}),_hoisted_1$7={class:"options-list"},_hoisted_2$6={class:"select-item"},_hoisted_3$4=["onClick"],_hoisted_4$4={class:"add-btn"},_sfc_main$i=defineComponent({inheritAttrs:!1,__name:"RTab",props:["activeData"],setup(e){const t=[{id:"",fullName:"默认"},{id:"card",fullName:"选项卡"}],a=[{id:"top",fullName:"顶部"},{id:"left",fullName:"左侧"},{id:"right",fullName:"右侧"},{id:"bottom",fullName:"底部"}],o=e,{createMessage:l,createConfirm:n}=useMessage(),{t:i}=useI18n(),c=inject("getShowType"),r=computed((()=>c()));function d(){const e=buildBitUUID();o.activeData.__config__.children.push({title:"New Tab "+e,titleI18nCode:"",name:e,__config__:{jnpfKey:"tabItem",children:[]}})}return(c,s)=>{const _=resolveComponent("jnpf-radio"),u=resolveComponent("a-form-item"),p=resolveComponent("a-divider"),f=resolveComponent("jnpf-i18n-input"),m=resolveComponent("a-button");return openBlock(),createElementBlock(Fragment,null,["pc"===r.value?(openBlock(),createBlock(u,{key:0,label:"风格类型"},{default:withCtx((()=>[createVNode(_,{value:e.activeData.type,"onUpdate:value":s[0]||(s[0]=t=>e.activeData.type=t),options:t,optionType:"button","button-style":"solid",class:"right-radio"},null,8,["value"])])),_:1})):createCommentVNode("",!0),"pc"===r.value?(openBlock(),createBlock(u,{key:1,label:"选项卡位置"},{default:withCtx((()=>[createVNode(_,{value:e.activeData.tabPosition,"onUpdate:value":s[1]||(s[1]=t=>e.activeData.tabPosition=t),options:a,optionType:"button","button-style":"solid",class:"right-radio"},null,8,["value"])])),_:1})):createCommentVNode("",!0),createVNode(p,null,{default:withCtx((()=>s[3]||(s[3]=[createTextVNode("标签页配置")]))),_:1,__:[3]}),createBaseVNode("div",_hoisted_1$7,[createVNode(unref(draggable),{modelValue:e.activeData.__config__.children,"onUpdate:modelValue":s[2]||(s[2]=t=>e.activeData.__config__.children=t),animation:300,group:"selectItem",handle:".option-drag",itemKey:"uuid"},{item:withCtx((({element:e,index:t})=>[createBaseVNode("div",_hoisted_2$6,[s[5]||(s[5]=createBaseVNode("div",{class:"select-line-icon option-drag"},[createBaseVNode("i",{class:"icon-ym icon-ym-darg"})],-1)),createVNode(f,{value:e.title,"onUpdate:value":t=>e.title=t,i18n:e.titleI18nCode,"onUpdate:i18n":t=>e.titleI18nCode=t,placeholder:"标签名称"},null,8,["value","onUpdate:value","i18n","onUpdate:i18n"]),createBaseVNode("div",{class:"close-btn select-line-icon",onClick:a=>function(e,t){const a=o.activeData.__config__.children;if(a.length<2)return l.warning("最后一项不能删除");n({iconType:"warning",title:i("common.tipTitle"),content:"删除后不能撤销，确定要删除吗?",onOk:()=>{if(o.activeData.__config__.active===t.name){let t=a[e+1]||a[e-1];t&&(o.activeData.__config__.active=t.name)}o.activeData.__config__.children.splice(e,1)}})}(t,e)},s[4]||(s[4]=[createBaseVNode("i",{class:"icon-ym icon-ym-btn-clearn"},null,-1)]),8,_hoisted_3$4)])])),_:1},8,["modelValue"]),createBaseVNode("div",_hoisted_4$4,[createVNode(m,{type:"link",preIcon:"icon-ym icon-ym-btn-add",onClick:d,class:"!px-0"},{default:withCtx((()=>s[6]||(s[6]=[createTextVNode("添加标签页")]))),_:1,__:[6]})])])],64)}}}),_sfc_main$h=defineComponent({inheritAttrs:!1,__name:"RRow",props:["activeData"],setup:e=>(t,a)=>{const o=resolveComponent("a-form-item");return openBlock(),createBlock(o,{label:"组件名"},{default:withCtx((()=>[createTextVNode(toDisplayString(e.activeData.__config__.componentName),1)])),_:1})}}),_sfc_main$g=defineComponent({inheritAttrs:!1,__name:"RCard",props:["activeData"],setup(e){const t=[{id:"never",fullName:"永不显示"},{id:"hover",fullName:"移入显示"}],a=inject("getShowType"),o=computed((()=>a()));return(a,l)=>{const n=resolveComponent("jnpf-radio"),i=resolveComponent("a-form-item");return"pc"===o.value?(openBlock(),createBlock(i,{key:0,label:"显示阴影"},{default:withCtx((()=>[createVNode(n,{value:e.activeData.shadow,"onUpdate:value":l[0]||(l[0]=t=>e.activeData.shadow=t),options:t,optionType:"button","button-style":"solid",class:"right-radio"},null,8,["value"])])),_:1})):createCommentVNode("",!0)}}}),_sfc_main$f=defineComponent({inheritAttrs:!1,__name:"RTableGrid",props:["activeData"],setup(e){const t=e,a=[{id:"none",fullName:"无"},{id:"solid",fullName:"实线"},{id:"dashed",fullName:"虚线"},{id:"dotted",fullName:"点状"}];function o(e){e||(t.activeData.__config__.borderWidth=1)}return(t,l)=>{const n=resolveComponent("jnpf-radio"),i=resolveComponent("a-form-item"),c=resolveComponent("jnpf-color-picker"),r=resolveComponent("a-input-number");return openBlock(),createElementBlock(Fragment,null,[createVNode(i,{label:"表格边框"},{default:withCtx((()=>[createVNode(n,{value:e.activeData.__config__.borderType,"onUpdate:value":l[0]||(l[0]=t=>e.activeData.__config__.borderType=t),options:a,optionType:"button","button-style":"solid",class:"right-radio"},null,8,["value"])])),_:1}),"none"!=e.activeData.__config__.borderType?(openBlock(),createElementBlock(Fragment,{key:0},[createVNode(i,{label:"边框颜色"},{default:withCtx((()=>[createVNode(c,{value:e.activeData.__config__.borderColor,"onUpdate:value":l[1]||(l[1]=t=>e.activeData.__config__.borderColor=t),size:"small"},null,8,["value"])])),_:1}),createVNode(i,{label:"边框宽度"},{default:withCtx((()=>[createVNode(r,{value:e.activeData.__config__.borderWidth,"onUpdate:value":l[2]||(l[2]=t=>e.activeData.__config__.borderWidth=t),min:1,max:10,precision:0,onChange:o},null,8,["value"])])),_:1})],64)):createCommentVNode("",!0)],64)}}}),_sfc_main$e=defineComponent({inheritAttrs:!1,__name:"RTableGridTd",props:["activeData"],setup:e=>(t,a)=>{const o=resolveComponent("jnpf-color-picker"),l=resolveComponent("a-form-item");return openBlock(),createBlock(l,{label:"背景颜色"},{default:withCtx((()=>[createVNode(o,{value:e.activeData.__config__.backgroundColor,"onUpdate:value":a[0]||(a[0]=t=>e.activeData.__config__.backgroundColor=t),size:"small"},null,8,["value"])])),_:1})}}),_sfc_main$d=defineComponent({inheritAttrs:!1,__name:"RAutoComplete",props:["activeData","dicOptions"],setup(e){const t=e,{options:a,debounceOnSearch:o,onFocus:l,initFieldData:n}=useField(t.activeData),{formFieldsOptions:i,onRelationFieldChange:c}=useDynamic(t.activeData),r=computed((()=>[{id:"@keyword",fullName:"@keyword"},...unref(i)]));function d(e,a){if(!e)return t.activeData.interfaceId="",t.activeData.interfaceName="",t.activeData.templateJson=[],t.activeData.__config__.defaultValue="",void n();t.activeData.__config__.propsUrl!==e&&(t.activeData.interfaceId=e,t.activeData.interfaceName=a.fullName,t.activeData.templateJson=a.parameterJson?JSON.parse(a.parameterJson).map((e=>({...e,relationField:"",sourceType:1}))):[],t.activeData.__config__.defaultValue="",n())}return onMounted((()=>n())),(t,n)=>{const i=resolveComponent("BasicHelp"),s=resolveComponent("a-form-item"),_=resolveComponent("a-auto-complete"),u=resolveComponent("a-input-number"),p=resolveComponent("a-switch");return openBlock(),createElementBlock(Fragment,null,[createVNode(s,null,{label:withCtx((()=>[n[5]||(n[5]=createTextVNode("数据接口")),createVNode(i,{text:"支持通过数据接口的参数实现控件之间的联动。"})])),default:withCtx((()=>[createVNode(unref(InterfaceModal),{value:e.activeData.interfaceId,title:e.activeData.interfaceName,popupTitle:"数据接口",onChange:d},null,8,["value","title"])])),_:1}),createVNode(s,{label:"回显字段"},{default:withCtx((()=>[createVNode(_,{value:e.activeData.relationField,"onUpdate:value":n[0]||(n[0]=t=>e.activeData.relationField=t),placeholder:"请输入",options:unref(a),onFocus:n[1]||(n[1]=t=>unref(l)(e.activeData.relationField)),onSearch:n[2]||(n[2]=t=>unref(o)(e.activeData.relationField))},null,8,["value","options"])])),_:1}),e.activeData.templateJson?.length?(openBlock(),createBlock(s,{key:0,label:"参数设置"},{default:withCtx((()=>[createVNode(unref(SelectInterfaceBtn),{templateJson:e.activeData.templateJson,fieldOptions:r.value,type:3,onFieldChange:unref(c)},null,8,["templateJson","fieldOptions","onFieldChange"])])),_:1})):createCommentVNode("",!0),createVNode(s,null,{label:withCtx((()=>[n[6]||(n[6]=createTextVNode("显示条数")),createVNode(i,{text:"最大值只能设置为50"})])),default:withCtx((()=>[createVNode(u,{placeholder:"请输入",value:e.activeData.total,"onUpdate:value":n[3]||(n[3]=t=>e.activeData.total=t),min:1,max:50,precision:0},null,8,["value"])])),_:1}),createVNode(s,{label:"能否清空"},{default:withCtx((()=>[createVNode(p,{checked:e.activeData.clearable,"onUpdate:checked":n[4]||(n[4]=t=>e.activeData.clearable=t)},null,8,["checked"])])),_:1})],64)}}}),_hoisted_1$6={class:"map-contain"},_hoisted_2$5=["onClick"],_sfc_main$c=defineComponent({__name:"MapModal",emits:["register","confirm"],setup(e,{emit:t}){const a=reactive({AMap:null,map:null,innerValue:{lng:"",lat:"",radius:500},options:[],marker:void 0}),{innerValue:o,options:l}=toRefs(a),n=useGlobSetting(),{createMessage:i}=useMessage(),c=useDebounceFn((function(e){const t={key:n.aMapWebKey,keywords:e};getInputTips(t).then((e=>{"1"==e.data.status?l.value=e.data.tips||[]:i.error(e.data.info||e.data.infocode)}))}),300),r=t,[d,{closeModal:s}]=useModalInner((function(e){a.innerValue={lng:"",lat:"",radius:500},e.item&&(a.innerValue=e.item);AMapLoader.load({key:n.aMapJsKey,version:"2.0",plugins:["AMap.PlaceSearch","AMap.Geolocation","AMap.Geocoder"]}).then((e=>{a.AMap=e;const t={viewMode:"3D",zoom:16},o=a.innerValue&&a.innerValue.lng&&a.innerValue.lat;o&&(t.center=[a.innerValue.lng,a.innerValue.lat]),a.map=new e.Map("container",t),o&&p(a.innerValue.lng,a.innerValue.lat),a.map.on("click",_)}))}));function _(e){const{lng:t,lat:o}=e.lnglat;var l;p(t,o),l=[t,o],(new a.AMap.Geocoder).getAddress(l,(function(e,t){"complete"===e&&"OK"===t.info&&(a.innerValue.name=t.regeocode.formattedAddress)}))}function u(e){if(a.innerValue.name=e.name,e.location&&e.location.length){const[t,a]=e.location.split(",");p(t,a)}else t=e.name,(new a.AMap.Geocoder).getLocation(t,(function(e,t){if("complete"===e&&"OK"===t.info){const{lng:e,lat:a}=t.geocodes[0].location;p(e,a)}}));var t}function p(e,t){a.innerValue.lng=e,a.innerValue.lat=t,a.marker&&a.map.remove(a.marker),a.marker=new a.AMap.Marker({icon:"https://webapi.amap.com/theme/v1.3/markers/n/mark_b.png",position:[e,t],offset:new a.AMap.Pixel(-12,-30)}),a.map.add(a.marker),a.map.setFitView()}function f(){return a.innerValue.lat&&a.innerValue.lng?a.innerValue.radius?(r("confirm",a.innerValue),void s()):i.warning("定位范围不能为空"):i.warning("请输入定位中心")}function m(e){e&&(l.value=[])}function v(e){e||(a.innerValue.radius=1)}return(e,t)=>{const a=resolveComponent("a-auto-complete"),n=resolveComponent("a-input-number");return openBlock(),createBlock(unref(BasicModal),mergeProps(e.$attrs,{onRegister:unref(d),title:"新增",width:600,onOk:f,class:"map-center-select-modal",destroyOnClose:""}),{default:withCtx((()=>[createBaseVNode("div",_hoisted_1$6,[t[2]||(t[2]=createBaseVNode("div",{id:"container",class:"map"},null,-1)),createVNode(a,{class:"search-contain",value:unref(o).name,"onUpdate:value":t[0]||(t[0]=e=>unref(o).name=e),options:unref(l),placeholder:"输入搜索或直接在下图选择定位中心",onSelect:u,onSearch:unref(c),onDropdownVisibleChange:m},{option:withCtx((e=>[createBaseVNode("div",{onClick:t=>u(e)},toDisplayString(e.name),9,_hoisted_2$5)])),_:1},8,["value","options","onSearch"])]),t[3]||(t[3]=createBaseVNode("div",{class:"label-contain"},[createBaseVNode("span",{class:"label"},"定位范围"),createBaseVNode("span",{class:"tips"},"以定位中心为圆心设置定位半径，建议范围500-1000米")],-1)),createVNode(n,{class:"!w-150px",value:unref(o).radius,"onUpdate:value":t[1]||(t[1]=e=>unref(o).radius=e),min:1,"addon-after":"米",onChange:v},null,8,["value"])])),_:1,__:[3]},16,["onRegister"])}}}),MapModal_vue_vue_type_style_index_0_lang="",_hoisted_1$5={class:"location-scope-item"},_hoisted_2$4={class:"name"},_hoisted_3$3=["onClick"],_hoisted_4$3=["onClick"],_sfc_main$b=defineComponent({inheritAttrs:!1,__name:"index",props:["activeData"],setup(e){const t=e,[a,{openModal:o}]=useModal();function l(e){o(!0,{item:e})}function n(e){if(e.id)for(let a=0;a<t.activeData.locationScope.length;a++){let o=t.activeData.locationScope[a];e.id===o.id&&(o=e)}else e.id=buildBitUUID(),t.activeData.locationScope.push(e)}function i(e){e||(t.activeData.adjustmentScope=1)}return(t,o)=>{const c=resolveComponent("BasicHelp"),r=resolveComponent("a-switch"),d=resolveComponent("a-form-item"),s=resolveComponent("a-input-number"),_=resolveComponent("a-button");return openBlock(),createElementBlock(Fragment,null,[createVNode(d,null,{label:withCtx((()=>[o[6]||(o[6]=createTextVNode("获取定位")),createVNode(c,{text:["桌面端不支持自动获取定位"]})])),default:withCtx((()=>[createVNode(r,{checked:e.activeData.autoLocation,"onUpdate:checked":o[0]||(o[0]=t=>e.activeData.autoLocation=t)},null,8,["checked"])])),_:1}),createVNode(d,null,{label:withCtx((()=>[o[7]||(o[7]=createTextVNode("允许微调")),createVNode(c,{text:"是否允许用户在当前定位的范围可以微调距离"})])),default:withCtx((()=>[createVNode(r,{checked:e.activeData.enableLocationScope,"onUpdate:checked":o[1]||(o[1]=t=>e.activeData.enableLocationScope=t)},null,8,["checked"])])),_:1}),e.activeData.enableLocationScope?(openBlock(),createBlock(d,{key:0},{label:withCtx((()=>[o[8]||(o[8]=createTextVNode("微调范围")),createVNode(c,{text:"设置用户可以微调的范围"})])),default:withCtx((()=>[createVNode(s,{value:e.activeData.adjustmentScope,"onUpdate:value":o[2]||(o[2]=t=>e.activeData.adjustmentScope=t),placeholder:"请选择",min:1,addonAfter:"米",onChange:i},null,8,["value"])])),_:1})):createCommentVNode("",!0),createVNode(d,null,{label:withCtx((()=>[o[9]||(o[9]=createTextVNode("定位区域")),createVNode(c,{text:"设置用户可以提交定位的范围"})])),default:withCtx((()=>[createVNode(r,{checked:e.activeData.enableDesktopLocation,"onUpdate:checked":o[3]||(o[3]=t=>e.activeData.enableDesktopLocation=t)},null,8,["checked"])])),_:1}),e.activeData.enableDesktopLocation?(openBlock(),createElementBlock(Fragment,{key:1},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.activeData.locationScope,((t,a)=>(openBlock(),createElementBlock("div",_hoisted_1$5,[createBaseVNode("span",_hoisted_2$4,toDisplayString(t.name),1),createBaseVNode("div",{class:"edit-btn",onClick:e=>l(t)},o[10]||(o[10]=[createBaseVNode("i",{class:"icon-ym icon-ym-btn-edit"},null,-1)]),8,_hoisted_3$3),createBaseVNode("div",{class:"close-btn",onClick:t=>e.activeData.locationScope.splice(a,1)},o[11]||(o[11]=[createBaseVNode("i",{class:"icon-ym icon-ym-btn-clearn"},null,-1)]),8,_hoisted_4$3)])))),256)),createVNode(_,{type:"link",preIcon:"icon-ym icon-ym-btn-add",onClick:o[4]||(o[4]=e=>l()),class:"!px-0 mb-10px"},{default:withCtx((()=>o[12]||(o[12]=[createTextVNode("新增定位中心")]))),_:1,__:[12]})],64)):createCommentVNode("",!0),createVNode(_sfc_main$c,{onRegister:unref(a),onConfirm:n},null,8,["onRegister"]),createVNode(d,{label:"能否清空"},{default:withCtx((()=>[createVNode(r,{checked:e.activeData.clearable,"onUpdate:checked":o[5]||(o[5]=t=>e.activeData.clearable=t)},null,8,["checked"])])),_:1})],64)}}}),index_vue_vue_type_style_index_0_lang="",_sfc_main$a=defineComponent({inheritAttrs:!1,__name:"RSign",props:["activeData"],setup:e=>(t,a)=>{const o=resolveComponent("a-switch"),l=resolveComponent("a-form-item");return openBlock(),createElementBlock(Fragment,null,[createVNode(l,{label:"调用签名"},{default:withCtx((()=>[createVNode(o,{checked:e.activeData.isInvoke,"onUpdate:checked":a[0]||(a[0]=t=>e.activeData.isInvoke=t)},null,8,["checked"])])),_:1}),createVNode(l,{label:"默认签名"},{default:withCtx((()=>[createVNode(o,{checked:e.activeData.__config__.defaultCurrent,"onUpdate:checked":a[1]||(a[1]=t=>e.activeData.__config__.defaultCurrent=t)},null,8,["checked"])])),_:1})],64)}}),_sfc_main$9=defineComponent({inheritAttrs:!1,__name:"RSignature",props:["activeData"],setup(e){const t=ref([]);return onMounted((()=>{getSignatureSelector().then((e=>{t.value=e?.data?.list||[]}))})),(a,o)=>{const l=resolveComponent("jnpf-select"),n=resolveComponent("a-form-item");return openBlock(),createBlock(n,{label:"选择签章"},{default:withCtx((()=>[createVNode(l,{value:e.activeData.ableIds,"onUpdate:value":o[0]||(o[0]=t=>e.activeData.ableIds=t),showSearch:"",multiple:"",options:t.value},null,8,["value","options"])])),_:1})}}}),_sfc_main$8=defineComponent({inheritAttrs:!1,__name:"RIframe",props:["activeData"],setup(e){const t=e,a=[{id:"none",fullName:"无"},{id:"solid",fullName:"实线"},{id:"dashed",fullName:"虚线"},{id:"dotted",fullName:"点状"}];function o(e){e||(t.activeData.borderWidth=1)}return(t,l)=>{const n=resolveComponent("BasicHelp"),i=resolveComponent("a-input"),c=resolveComponent("a-form-item"),r=resolveComponent("a-input-number"),d=resolveComponent("jnpf-radio"),s=resolveComponent("jnpf-color-picker");return openBlock(),createElementBlock(Fragment,null,[createVNode(c,null,{label:withCtx((()=>[l[5]||(l[5]=createTextVNode("链接地址")),createVNode(n,{text:"地址以http://或https://开头"})])),default:withCtx((()=>[createVNode(i,{value:e.activeData.href,"onUpdate:value":l[0]||(l[0]=t=>e.activeData.href=t),placeholder:"请输入"},null,8,["value"])])),_:1}),createVNode(c,{label:"高度"},{default:withCtx((()=>[createVNode(r,{value:e.activeData.height,"onUpdate:value":l[1]||(l[1]=t=>e.activeData.height=t),placeholder:"请输入",min:0},null,8,["value"])])),_:1}),createVNode(c,{label:"边框"},{default:withCtx((()=>[createVNode(d,{value:e.activeData.borderType,"onUpdate:value":l[2]||(l[2]=t=>e.activeData.borderType=t),options:a,optionType:"button","button-style":"solid",class:"right-radio"},null,8,["value"])])),_:1}),"none"!=e.activeData.borderType?(openBlock(),createElementBlock(Fragment,{key:0},[createVNode(c,{label:"边框颜色"},{default:withCtx((()=>[createVNode(s,{value:e.activeData.borderColor,"onUpdate:value":l[3]||(l[3]=t=>e.activeData.borderColor=t),size:"small"},null,8,["value"])])),_:1}),createVNode(c,{label:"边框宽度"},{default:withCtx((()=>[createVNode(r,{value:e.activeData.borderWidth,"onUpdate:value":l[4]||(l[4]=t=>e.activeData.borderWidth=t),min:1,max:10,precision:0,onChange:o},null,8,["value"])])),_:1})],64)):createCommentVNode("",!0)],64)}}}),_hoisted_1$4={class:"options-list"},_hoisted_2$3={class:"select-item"},_hoisted_3$2=["onClick"],_hoisted_4$2={class:"add-btn"},_sfc_main$7=defineComponent({inheritAttrs:!1,__name:"RSteps",props:["activeData"],setup(e){const t=e,{createMessage:a,createConfirm:o}=useMessage(),{t:l}=useI18n(),n=[{id:"wait",fullName:"等待"},{id:"process",fullName:"进行中"},{id:"finish",fullName:"完成"},{id:"error",fullName:"错误"}],i=inject("getShowType"),c=computed((()=>i()));function r(){const e=buildBitUUID();t.activeData.__config__.children.push({title:"新步骤"+e,name:e,icon:"",__config__:{jnpfKey:"stepItem",children:[]}})}return(i,d)=>{const s=resolveComponent("a-switch"),_=resolveComponent("a-form-item"),u=resolveComponent("jnpf-select"),p=resolveComponent("a-divider"),f=resolveComponent("jnpf-i18n-input"),m=resolveComponent("jnpf-icon-picker"),v=resolveComponent("a-button");return openBlock(),createElementBlock(Fragment,null,[createVNode(_,{label:"简洁风格"},{default:withCtx((()=>[createVNode(s,{checked:e.activeData.simple,"onUpdate:checked":d[0]||(d[0]=t=>e.activeData.simple=t)},null,8,["checked"])])),_:1}),withDirectives(createVNode(_,{label:"当前状态"},{default:withCtx((()=>[createVNode(u,{value:e.activeData.processStatus,"onUpdate:value":d[1]||(d[1]=t=>e.activeData.processStatus=t),options:n},null,8,["value"])])),_:1},512),[[vShow,"pc"===c.value]]),createVNode(p,null,{default:withCtx((()=>d[3]||(d[3]=[createTextVNode("步骤条配置")]))),_:1,__:[3]}),createBaseVNode("div",_hoisted_1$4,[createVNode(unref(draggable),{modelValue:e.activeData.__config__.children,"onUpdate:modelValue":d[2]||(d[2]=t=>e.activeData.__config__.children=t),animation:300,group:"selectItem",handle:".option-drag",itemKey:"uuid"},{item:withCtx((({element:e,index:n})=>[createBaseVNode("div",_hoisted_2$3,[d[5]||(d[5]=createBaseVNode("div",{class:"select-line-icon option-drag"},[createBaseVNode("i",{class:"icon-ym icon-ym-darg"})],-1)),createVNode(f,{value:e.title,"onUpdate:value":t=>e.title=t,i18n:e.titleI18nCode,"onUpdate:i18n":t=>e.titleI18nCode=t,placeholder:"步骤名称"},null,8,["value","onUpdate:value","i18n","onUpdate:i18n"]),withDirectives(createVNode(m,{value:e.icon,"onUpdate:value":t=>e.icon=t,placeholder:"请选择"},null,8,["value","onUpdate:value"]),[[vShow,"pc"===c.value]]),createBaseVNode("div",{class:"close-btn select-line-icon",onClick:e=>function(e){if(t.activeData.__config__.children.length<3)return a.warning("最后两项不能删除");o({iconType:"warning",title:l("common.tipTitle"),content:"删除后不能撤销，确定要删除吗?",onOk:()=>{t.activeData.__config__.children.splice(e,1)}})}(n)},d[4]||(d[4]=[createBaseVNode("i",{class:"icon-ym icon-ym-btn-clearn"},null,-1)]),8,_hoisted_3$2)])])),_:1},8,["modelValue"]),createBaseVNode("div",_hoisted_4$2,[createVNode(v,{type:"link",preIcon:"icon-ym icon-ym-btn-add",onClick:r,class:"!px-0"},{default:withCtx((()=>d[6]||(d[6]=[createTextVNode("添加步骤")]))),_:1,__:[6]})])])],64)}}}),_hoisted_1$3={key:0,class:"drag-handler icon-ym icon-ym-darg",title:"点击拖动"},_hoisted_2$2={key:0,class:"drag-handler icon-ym icon-ym-darg",title:"点击拖动"},_sfc_main$6=defineComponent({inheritAttrs:!1,__name:"RBillRule",props:["activeData","drawingList"],setup(e){const t=e,a={prefixList:[],type:1,dateFormat:"YYYY",digit:null,startNumber:"",randomDigit:16,randomType:1,suffixList:[]},o=[{id:1,fullName:"单据模板"},{id:2,fullName:"单据规则"}],l=[{id:1,fullName:"时间格式"},{id:2,fullName:"随机数编号"},{id:3,fullName:"UUID"}],n=[{id:2,fullName:"自定义"},{id:1,fullName:"字段"}],i=[{fullName:"YYYY",id:"YYYY"},{fullName:"YYYYMM",id:"YYYYMM"},{fullName:"YYYYMMDD",id:"YYYYMMDD"},{fullName:"YYYYMMDDHH",id:"YYYYMMDDHH"},{fullName:"YYYYMMDDHHmm",id:"YYYYMMDDHHmm"},{fullName:"YYYYMMDDHHmmss",id:"YYYYMMDDHHmmss"},{fullName:"YYYYMMDDHHmmssSSS",id:"YYYYMMDDHHmmssSSS"},{fullName:"no",id:"no"}],c=[{fullName:"16",id:16},{fullName:"32",id:32}],r=[{fullName:"纯数字",id:1},{fullName:"字母+数字",id:2}],d=[{title:"拖动",dataIndex:"drag",key:"drag",align:"center",width:50},{title:"类型",dataIndex:"sourceType",key:"sourceType",width:100},{title:"值",dataIndex:"relationField",key:"relationField",width:120},{title:"操作",dataIndex:"action",key:"action",align:"center",width:50}],s=["input","inputNumber"],_=computed((()=>{let e=[];const a=(o,l)=>{if(o&&(o.__config__&&o.__config__.children&&Array.isArray(o.__config__.children)&&a(o.__config__.children,o),Array.isArray(o)&&o.forEach((e=>a(e,l))),o.__config__&&o.__config__.jnpfKey&&s.includes(o.__config__.jnpfKey)&&o.__vModel__&&function(e){return t.activeData.__config__.isSubTable?e.__config__.isSubTable&&t.activeData.__config__.parentVModel===e.__config__.parentVModel:!e.__config__.isSubTable}(o))){const t=l&&l.__config__&&"table"===l.__config__.jnpfKey,a={id:t?l.__vModel__+"-"+o.__vModel__:o.__vModel__,fullName:t?l.__config__.label+"-"+o.__config__.label:o.__config__.label};e.push(a)}};return a(t.drawingList),e}));function u(e){t.activeData.__config__.ruleConfig&&"{}"!==JSON.stringify(t.activeData.__config__.ruleConfig)||(t.activeData.__config__.ruleConfig=cloneDeep(a)),2===e&&nextTick((()=>{!function(){const e=document.querySelector(".prefix-table .ant-table-tbody");Sortable.create(e,{handle:".drag-handler",animation:150,easing:"cubic-bezier(1, 0, 0, 1)",onStart:()=>{},onEnd:({newIndex:e,oldIndex:a})=>{const o=t.activeData.__config__.ruleConfig.prefixList.splice(a,1)[0];t.activeData.__config__.ruleConfig.prefixList.splice(e,0,o)}})}(),function(){const e=document.querySelector(".suffix-table .ant-table-tbody");Sortable.create(e,{handle:".drag-handler",animation:150,easing:"cubic-bezier(1, 0, 0, 1)",onStart:()=>{},onEnd:({newIndex:e,oldIndex:a})=>{const o=t.activeData.__config__.ruleConfig.suffixList.splice(a,1)[0];t.activeData.__config__.ruleConfig.suffixList.splice(e,0,o)}})}()}))}function p(e,a){if(!e)return t.activeData.__config__.rule="",void(t.activeData.__config__.ruleName="");t.activeData.__config__.rule!==e&&(t.activeData.__config__.rule=e,t.activeData.__config__.ruleName=a.fullName)}function f(e){const a={id:buildBitUUID(),sourceType:2,relationField:""};t.activeData.__config__.ruleConfig[e].push(a)}function m(e,a){t.activeData.__config__.ruleConfig[a].splice(e,1)}function v(e){e.relationField=""}function h(){let e=t.activeData.__config__.ruleConfig.digit||0;e&&(e=Array(e).join("0")+0);const a=t.activeData.__config__.ruleConfig.startNumber||"";let o="";""!=a&&(o=e+a,e=o.substring(o.length-e.length,o.length),t.activeData.__config__.ruleConfig.startNumber=e)}return(t,a)=>{const s=resolveComponent("a-divider"),g=resolveComponent("jnpf-radio"),C=resolveComponent("a-form-item"),N=resolveComponent("BasicHelp"),y=resolveComponent("jnpf-select"),V=resolveComponent("a-input"),k=resolveComponent("a-button"),b=resolveComponent("a-table"),w=resolveComponent("jnpf-input-number"),x=resolveComponent("jnpf-input");return openBlock(),createElementBlock(Fragment,null,[createVNode(s,null,{default:withCtx((()=>a[9]||(a[9]=[createTextVNode("单据配置")]))),_:1,__:[9]}),createVNode(C,{class:"flex justify-center"},{default:withCtx((()=>[createVNode(g,{value:e.activeData.__config__.ruleType,"onUpdate:value":a[0]||(a[0]=t=>e.activeData.__config__.ruleType=t),options:o,optionType:"button",buttonStyle:"solid",onChange:u},null,8,["value"])])),_:1}),2!==e.activeData.__config__.ruleType?(openBlock(),createBlock(C,{key:0,label:"单据模板"},{default:withCtx((()=>[createVNode(unref(BillRuleModal),{value:e.activeData.__config__.rule,title:e.activeData.__config__.ruleName,onChange:p},null,8,["value","title"])])),_:1})):createCommentVNode("",!0),2===e.activeData.__config__.ruleType?(openBlock(),createElementBlock(Fragment,{key:1},[createVNode(C,null,{label:withCtx((()=>[a[10]||(a[10]=createTextVNode("前缀设置")),createVNode(N,{text:"前缀长度不超过100字符"})])),default:withCtx((()=>[createVNode(b,{"data-source":e.activeData.__config__.ruleConfig.prefixList,columns:d,size:"small",pagination:!1,rowKey:"id",class:"prefix-table"},{bodyCell:withCtx((({column:e,record:t,index:o})=>["drag"===e.key?(openBlock(),createElementBlock("i",_hoisted_1$3)):createCommentVNode("",!0),"sourceType"===e.key?(openBlock(),createBlock(y,{key:1,value:t.sourceType,"onUpdate:value":e=>t.sourceType=e,placeholder:"请选择",options:n,class:"!w-84px",onChange:e=>v(t)},null,8,["value","onUpdate:value","onChange"])):createCommentVNode("",!0),"relationField"===e.key?(openBlock(),createElementBlock(Fragment,{key:2},[1===t.sourceType?(openBlock(),createBlock(y,{key:0,value:t.relationField,"onUpdate:value":e=>t.relationField=e,placeholder:"请选择",options:_.value,allowClear:"",showSearch:"",class:"!w-104px"},null,8,["value","onUpdate:value","options"])):(openBlock(),createBlock(V,{key:1,value:t.relationField,"onUpdate:value":e=>t.relationField=e,placeholder:"请输入",allowClear:"",class:"!w-104px"},null,8,["value","onUpdate:value"]))],64)):createCommentVNode("",!0),"action"===e.key?(openBlock(),createBlock(k,{key:3,class:"action-btn",type:"link",color:"error",onClick:e=>m(o,"prefixList"),size:"small"},{default:withCtx((()=>a[11]||(a[11]=[createTextVNode("删除")]))),_:2,__:[11]},1032,["onClick"])):createCommentVNode("",!0)])),emptyText:withCtx((()=>a[12]||(a[12]=[createBaseVNode("p",{class:"leading-30px"},"暂无数据",-1)]))),_:1},8,["data-source"]),createBaseVNode("div",{class:"table-add-action",onClick:a[1]||(a[1]=e=>f("prefixList"))},[createVNode(k,{type:"link",preIcon:"icon-ym icon-ym-btn-add"},{default:withCtx((()=>a[13]||(a[13]=[createTextVNode("新增")]))),_:1,__:[13]})])])),_:1}),createVNode(C,{label:"方式设置"},{default:withCtx((()=>[createVNode(g,{value:e.activeData.__config__.ruleConfig.type,"onUpdate:value":a[2]||(a[2]=t=>e.activeData.__config__.ruleConfig.type=t),options:l,optionType:"button",buttonStyle:"solid",onChange:u},null,8,["value"])])),_:1}),1===e.activeData.__config__.ruleConfig.type?(openBlock(),createElementBlock(Fragment,{key:0},[createVNode(C,{label:"格式"},{default:withCtx((()=>[createVNode(y,{value:e.activeData.__config__.ruleConfig.dateFormat,"onUpdate:value":a[3]||(a[3]=t=>e.activeData.__config__.ruleConfig.dateFormat=t),options:i},null,8,["value"])])),_:1}),createVNode(C,{label:"位数"},{default:withCtx((()=>[createVNode(w,{value:e.activeData.__config__.ruleConfig.digit,"onUpdate:value":a[4]||(a[4]=t=>e.activeData.__config__.ruleConfig.digit=t),placeholder:"请输入",min:1,max:9,precision:0,onChange:h},null,8,["value"])])),_:1}),createVNode(C,null,{label:withCtx((()=>[a[14]||(a[14]=createTextVNode("起始值")),createVNode(N,{text:"不允许输入0或特殊字符"})])),default:withCtx((()=>[createVNode(x,{value:e.activeData.__config__.ruleConfig.startNumber,"onUpdate:value":a[5]||(a[5]=t=>e.activeData.__config__.ruleConfig.startNumber=t),placeholder:"请输入",onChange:h},null,8,["value"])])),_:1})],64)):createCommentVNode("",!0),2===e.activeData.__config__.ruleConfig.type?(openBlock(),createElementBlock(Fragment,{key:1},[createVNode(C,{label:"位数"},{default:withCtx((()=>[createVNode(y,{value:e.activeData.__config__.ruleConfig.randomDigit,"onUpdate:value":a[6]||(a[6]=t=>e.activeData.__config__.ruleConfig.randomDigit=t),options:c},null,8,["value"])])),_:1}),createVNode(C,{label:"类型"},{default:withCtx((()=>[createVNode(y,{value:e.activeData.__config__.ruleConfig.randomType,"onUpdate:value":a[7]||(a[7]=t=>e.activeData.__config__.ruleConfig.randomType=t),options:r},null,8,["value"])])),_:1})],64)):createCommentVNode("",!0),createVNode(C,null,{label:withCtx((()=>[a[15]||(a[15]=createTextVNode("后缀设置")),createVNode(N,{text:"后缀长度不超过100字符"})])),default:withCtx((()=>[createVNode(b,{"data-source":e.activeData.__config__.ruleConfig.suffixList,columns:d,size:"small",pagination:!1,rowKey:"id",class:"suffix-table"},{bodyCell:withCtx((({column:e,record:t,index:o})=>["drag"===e.key?(openBlock(),createElementBlock("i",_hoisted_2$2)):createCommentVNode("",!0),"sourceType"===e.key?(openBlock(),createBlock(y,{key:1,value:t.sourceType,"onUpdate:value":e=>t.sourceType=e,placeholder:"请选择",options:n,class:"!w-84px",onChange:e=>v(t)},null,8,["value","onUpdate:value","onChange"])):createCommentVNode("",!0),"relationField"===e.key?(openBlock(),createElementBlock(Fragment,{key:2},[1===t.sourceType?(openBlock(),createBlock(y,{key:0,value:t.relationField,"onUpdate:value":e=>t.relationField=e,placeholder:"请选择",options:_.value,allowClear:"",showSearch:"",class:"!w-104px"},null,8,["value","onUpdate:value","options"])):(openBlock(),createBlock(V,{key:1,value:t.relationField,"onUpdate:value":e=>t.relationField=e,placeholder:"请输入",allowClear:"",class:"!w-104px"},null,8,["value","onUpdate:value"]))],64)):createCommentVNode("",!0),"action"===e.key?(openBlock(),createBlock(k,{key:3,class:"action-btn",type:"link",color:"error",onClick:e=>m(o,"suffixList"),size:"small"},{default:withCtx((()=>a[16]||(a[16]=[createTextVNode("删除")]))),_:2,__:[16]},1032,["onClick"])):createCommentVNode("",!0)])),emptyText:withCtx((()=>a[17]||(a[17]=[createBaseVNode("p",{class:"leading-30px"},"暂无数据",-1)]))),_:1},8,["data-source"]),createBaseVNode("div",{class:"table-add-action",onClick:a[8]||(a[8]=e=>f("suffixList"))},[createVNode(k,{type:"link",preIcon:"icon-ym icon-ym-btn-add"},{default:withCtx((()=>a[18]||(a[18]=[createTextVNode("新增")]))),_:1,__:[18]})])])),_:1})],64)):createCommentVNode("",!0)],64)}}}),RightComp=Object.freeze(Object.defineProperty({__proto__:null,RAlert:RAlert,RAreaSelect:RAreaSelect,RAutoComplete:_sfc_main$d,RBarcode:_sfc_main$w,RBillRule:_sfc_main$6,RButton:_sfc_main$A,RCalculate:RCalculate,RCard:_sfc_main$g,RCascader:_sfc_main$L,RCheckbox:_sfc_main$N,RCollapse:_sfc_main$j,RColorPicker:_sfc_main$F,RDatePicker:_sfc_main$J,RDivider:_sfc_main$k,REditor:_sfc_main$C,RGroupTitle:_sfc_main$l,RIframe:_sfc_main$8,RInput:_sfc_main$V,RInputNumber:_sfc_main$T,RLink:_sfc_main$B,RLocation:_sfc_main$b,ROrgRight:ROrgRight,RPopupAttr:_sfc_main$n,RPopupSelect:_sfc_main$r,RQrcode:_sfc_main$x,RRadio:_sfc_main$O,RRate:_sfc_main$E,RRelationForm:_sfc_main$p,RRelationFormAttr:_sfc_main$o,RRow:_sfc_main$h,RSelect:_sfc_main$M,RSign:_sfc_main$a,RSignature:_sfc_main$9,RSlider:_sfc_main$D,RSteps:_sfc_main$7,RSwitch:_sfc_main$S,RTab:_sfc_main$i,RTable:_sfc_main$t,RTableGrid:_sfc_main$f,RTableGridTd:_sfc_main$e,RText:_sfc_main$z,RTextarea:_sfc_main$U,RTimePicker:_sfc_main$I,RTreeSelect:_sfc_main$K,RUploadFile:_sfc_main$H,RUploadImg:_sfc_main$G},Symbol.toStringTag,{value:"Module"})),_hoisted_1$2={class:"right-board common-board"},_hoisted_2$1={key:0,class:"field-box"},_hoisted_3$1={key:2},_hoisted_4$1={key:0},_hoisted_5$1={key:0},_hoisted_6$1={class:"custom-option-left"},_hoisted_7$1={class:"custom-option-right"},_hoisted_8$1={key:1},_hoisted_9$1={key:1},_hoisted_10$1={key:9},_hoisted_11$1={class:"custom-option-left"},_hoisted_12$1={class:"custom-option-right"},_hoisted_13$1={key:11},_hoisted_14$1={key:13},_sfc_main$5=defineComponent({inheritAttrs:!1,__name:"RightPanel",props:["activeData","formConf","drawingList","formInfo","dbType"],setup(e,{expose:t}){t({setTabActiveKey:function(e){f.activeKey=e}});const a=e,o=useAttrs({excludeDefaultKeys:!1}),l=[{id:0,fullName:"展示数据"},{id:1,fullName:"存储数据"}],n=(e,{attrs:t})=>t.vnodes,i=useGeneratorStore(),{createMessage:c}=useMessage(),[r,{openModal:d}]=useModal(),[s,{openModal:_}]=useModal(),u=ref(null),p=ref(null),f=reactive({activeKey:"field",fieldOptions:[],dictionaryOptions:[],printTplOptions:[],activeFunc:""}),{activeKey:m,fieldOptions:v,printTplOptions:h}=toRefs(f),g=computed((()=>({...a}))),C=computed((()=>unref(a.activeData).__config__)),N=computed((()=>unref(a.activeData).__config__?.jnpfKey)),y=computed((()=>{const e=[...inputComponents,...selectComponents,...systemComponents,...layoutComponents].filter((e=>e.__config__.jnpfKey===unref(N)));return e.length?e[0].__config__.label:""})),V=computed((()=>unref(N)?orgList.includes(unref(N))?ROrgRight:"popupTableSelect"===unref(N)?_sfc_main$r:RightComp["R"+upperFirst(unref(N))]:null)),k=computed((()=>({activeData:a.activeData,dicOptions:f.dictionaryOptions,...unref(o),drawingOptions:unref(b),drawingList:a.drawingList,formInfo:unref(a.formInfo)}))),b=computed((()=>{let e=[];const t=(a,o)=>{a&&(a.__config__&&"table"!==a.__config__.jnpfKey&&a.__config__.children&&Array.isArray(a.__config__.children)&&t(a.__config__.children),Array.isArray(a)&&a.forEach((e=>t(e))),a.__vModel__&&"table"!==a.__config__.jnpfKey&&e.push({id:a.__vModel__,fullName:a.__config__.label}))};return t(unref(a.drawingList)),e})),w=computed((()=>i.getHasTable)),x=computed({get:()=>i.getAllTable,set(e){i.setAllTable(e)}}),D=computed({get:()=>i.getSubTable,set(e){i.setSubTable(e)}}),B=computed({get:()=>i.getFormItemList,set(e){i.setFormItemList(e)}}),T=computed((()=>{let e=unref(x).filter((e=>"1"==e.typeId))[0];return e&&e.table?e.table:""})),U=computed((()=>"不能使用【系统自动生成】字段，如：tenantid、id、foreignid、flowid、flowtaskid、deleteuserid、deletetime、deletemark、version、tenant_id、foreign_id、flow_id、flow_task_id、delete_user_id、delete_time、delete_mark、f_tenant_id、f_id、f_foreign_id、f_flow_id、f_flow_task_id、f_delete_user_id、f_delete_time、f_delete_mark、f_version"));function I(e){let t={},a=unref(D).filter((t=>t.table===e));a.length&&(t=a[0]);let o=[];return t&&t.fields&&(o=t.fields.filter((e=>1!=e.primaryKey)).map((e=>({...e,fullName:e.fieldName?e.field+"("+e.fieldName+")":e.field})))),o}function F(e){const t=a.dbType||"";return t.toLowerCase()==="Oracle".toLowerCase()||t.toLowerCase()==="DM".toLowerCase()?e.toUpperCase():t.toLowerCase()==="PostgreSQL".toLowerCase()||t.toLowerCase()==="KingBaseES".toLowerCase()?e.toLowerCase():e}function M(e){if(0==e)a.activeData.__vModel__="",a.activeData.__config__.noShow=!1;else if(unref(w)){if(a.activeData.__config__.isSubTable&&!a.activeData.__config__.relationTable){const e=(t,o)=>{t&&(t.__config__&&"table"!==t.__config__.jnpfKey&&t.__config__.children&&Array.isArray(t.__config__.children)&&e(t.__config__.children),Array.isArray(t)&&t.forEach((t=>e(t))),t.__vModel__===a.activeData.__config__.parentVModel&&(a.activeData.__config__.relationTable=t.__config__.tableName))};e(unref(a.drawingList))}$()}else a.activeData.__vModel__=F(`${a.activeData.__config__.jnpfKey}Field${a.activeData.__config__.formId}`)}function S(){a.activeData.__vModel__="",$()}function $(){if(!unref(w))return;let e=[];if((void 0!==a.activeData.__vModel__||1==a.activeData.isStorage)&&"table"!==a.activeData.__config__.jnpfKey){if(a.activeData.__config__.tableName&&a.activeData.__config__.tableName!==unref(T)){let t=unref(x).filter((e=>e.table===a.activeData.__config__.tableName));if(t.length){e=t[0].fields.map((e=>({...e,realField:"jnpf_"+a.activeData.__config__.tableName+"_jnpf_"+e.field})))}else a.activeData.__config__.tableName=unref(T),e=B.value.map((e=>({...e,realField:e.field}))),a.activeData.__vModel__=""}else e=B.value.map((e=>({...e,realField:e.field})));f.fieldOptions=e.filter((e=>1!=e.primaryKey)).map((e=>({...e,fullName:e.fieldName?e.field+"("+e.fieldName+")":e.field})))}}function L(){let e="";a.activeData.__config__.isSubTable?(e=a.activeData.__config__.relationTable,unref(p)?.getSelectRef().blur()):(e=a.activeData.__config__.tableName,unref(u)?.getSelectRef().blur());const t=a.formInfo.dbLinkId||"0";setTimeout((()=>{d(!0,{linkId:t,tableName:e})}),200)}async function R(){let e="";e=a.activeData.__config__.isSubTable?a.activeData.__config__.relationTable:a.activeData.__config__.tableName;const t=a.formInfo.type,o=3==t||4==t||5==t?"1":"0";let l=(await getDataModelFieldList(a.formInfo.dbLinkId,e,o)).data.list;for(let a=0;a<x.value.length;a++)if(x.value[a].table===e){x.value[a].fields=l;break}a.activeData.__config__.isSubTable?D.value=x.value.filter((e=>"0"==e.typeId)):(a.activeData.__config__.tableName===unref(T)&&(B.value=l),$())}function A(e){let t="";switch(e){case"change":t="发生变化时触发";break;case"blur":t="失去焦点时触发";break;case"click":t="点击时触发";break;case"tabClick":t="面板点击时触发";break;default:t=""}return t}function j(e){_(),a.activeData.on[f.activeFunc]=e}return watch((()=>unref(a.formConf)),(e=>{"word-form"===e.formStyle&&"top"===e.labelPosition&&(e.labelPosition="left")}),{deep:!0}),watch((()=>unref(a.activeData)),(e=>{e&&e.__config__&&(e.__config__.tableName||"table"===e.__config__.jnpfKey||(e.__config__.tableName=unref(T)),$())})),onMounted((()=>{getDictionaryTypeSelector().then((e=>{f.dictionaryOptions=e.data.list.filter((e=>e.children&&e.children.length))})),getPrintDevSelector().then((e=>{f.printTplOptions=e.data.list.filter((e=>e.children&&e.children.length)).map((e=>({...e,hasChildren:!0})))})),a.activeData&&a.activeData.__config__&&(a.activeData.__config__.tableName||"table"===a.activeData.__config__.jnpfKey||(a.activeData.__config__.tableName=unref(T)),$())})),(t,o)=>{const i=resolveComponent("a-tab-pane"),d=resolveComponent("a-tabs"),b=resolveComponent("a-input"),B=resolveComponent("a-form-item"),T=resolveComponent("jnpf-select"),$=resolveComponent("BasicHelp"),O=resolveComponent("jnpf-input"),K=resolveComponent("a-divider"),E=resolveComponent("a-button"),Y=resolveComponent("jnpf-i18n-input"),P=resolveComponent("a-switch"),z=resolveComponent("a-select-option"),H=resolveComponent("a-select"),J=resolveComponent("a-form");return openBlock(),createElementBlock("div",_hoisted_1$2,[createVNode(d,{activeKey:unref(m),"onUpdate:activeKey":o[0]||(o[0]=e=>isRef(m)?m.value=e:null),tabBarGutter:14,class:"average-tabs"},{default:withCtx((()=>[createVNode(i,{key:"field",tab:"组件属性"}),createVNode(i,{key:"style",tab:"组件样式"}),e.formInfo.isKit?createCommentVNode("",!0):(openBlock(),createBlock(i,{key:"form",tab:"表单属性"}))])),_:1},8,["activeKey"]),e.activeData?.__config__&&e.activeData.__config__.jnpfKey?(openBlock(),createElementBlock("div",_hoisted_2$1,[createVNode(unref(ScrollContainer),null,{default:withCtx((()=>[withDirectives(createVNode(J,{colon:!1,layout:"vertical",class:"right-board-form"},{default:withCtx((()=>{return[["tableGridTr","tableGridTd"].includes(e.activeData.__config__.jnpfKey)?createCommentVNode("",!0):(openBlock(),createBlock(B,{key:0,label:"控件类型"},{default:withCtx((()=>[createVNode(b,{value:y.value,"onUpdate:value":o[1]||(o[1]=e=>y.value=e),disabled:""},null,8,["value"])])),_:1})),"calculate"==N.value||"popupAttr"==e.activeData.__config__.jnpfKey||"relationFormAttr"==e.activeData.__config__.jnpfKey?(openBlock(),createBlock(B,{key:1,label:"控件用途"},{default:withCtx((()=>[createVNode(T,{value:e.activeData.isStorage,"onUpdate:value":o[2]||(o[2]=t=>e.activeData.isStorage=t),options:l,onChange:M},null,8,["value"])])),_:1})):createCommentVNode("",!0),void 0!==e.activeData.__vModel__&&!unref(noVModelList).includes(N.value)||e.activeData.isStorage?(openBlock(),createElementBlock("div",_hoisted_3$1,[w.value?(openBlock(),createElementBlock("div",_hoisted_4$1,[C.value.isSubTable?(openBlock(),createElementBlock("div",_hoisted_8$1,[createVNode(B,{label:"数据库表"},{default:withCtx((()=>[createVNode(T,{value:e.activeData.__config__.relationTable,"onUpdate:value":o[8]||(o[8]=t=>e.activeData.__config__.relationTable=t),placeholder:"请选择",options:x.value.map((e=>({...e,fullName:e.tableName?e.table+"("+e.tableName+")":e.table}))),fieldNames:{value:"table"},showSearch:"",disabled:""},null,8,["value","options"])])),_:1}),createVNode(B,null,{label:withCtx((()=>[o[33]||(o[33]=createTextVNode("控件字段")),createVNode($,{text:U.value},null,8,["text"])])),default:withCtx((()=>[createVNode(T,{value:e.activeData.__vModel__,"onUpdate:value":o[10]||(o[10]=t=>e.activeData.__vModel__=t),ref_key:"childFieldSelectRef",ref:p,placeholder:"请输入数据库字段",options:I(C.value.relationTable),dropdownMatchSelectWidth:!1,showSearch:"",allowClear:"",fieldNames:{value:"field"},onChange:o[11]||(o[11]=e=>function(e,t){if(!e)return a.activeData.__vModel__="";let o=!1;const l=n=>{for(let i=0;i<n.length;i++){const c=n[i].__config__;if("table"===c.jnpfKey&&c.tableName===a.activeData.__config__.relationTable)for(let a=0;a<c.children.length;a++){const l=c.children[a];if(l.__vModel__===e&&l.__config__.formId!==t){o=!0;break}}c&&"table"!=c.jnpfKey&&c.children&&Array.isArray(c.children)&&l(c.children)}};if(l(unref(a.drawingList)),o)return c.warning(`子表字段【${e}】已存在,请重新选择!`),a.activeData.__vModel__=void 0,void nextTick((()=>{a.activeData.__vModel__=""}));const n=I(a.activeData.__config__.relationTable).filter((t=>t.field==e))[0];n&&n.fieldName&&(a.activeData.__config__.label=n.fieldName)}(e,C.value.formId))},{dropdownRender:withCtx((({menuNode:e})=>[createVNode(n,{vnodes:e},null,8,["vnodes"]),createVNode(K,{style:{margin:"4px 0"}}),createBaseVNode("div",{class:"select-item-add",onMousedown:o[9]||(o[9]=e=>e.preventDefault()),onClick:L},[createVNode(E,{type:"link",preIcon:"icon-ym icon-ym-btn-add"},{default:withCtx((()=>o[34]||(o[34]=[createTextVNode("添加字段")]))),_:1,__:[34]})],32)])),_:1},8,["value","options"])])),_:1})])):(openBlock(),createElementBlock("div",_hoisted_5$1,["table"!==N.value?(openBlock(),createBlock(B,{key:0,label:"数据库表"},{default:withCtx((()=>[createVNode(T,{value:e.activeData.__config__.tableName,"onUpdate:value":o[3]||(o[3]=t=>e.activeData.__config__.tableName=t),placeholder:"请选择",showSearch:"",dropdownMatchSelectWidth:!1,options:x.value.map((e=>({...e,fullName:e.tableName?e.table+"("+e.tableName+")":e.table}))),fieldNames:{value:"table"},onChange:S},{option:withCtx((({fullName:e,typeId:t})=>[createBaseVNode("span",_hoisted_6$1,toDisplayString(e),1),createBaseVNode("span",_hoisted_7$1,toDisplayString("1"==t?"主表":"从表"),1)])),_:1},8,["value","options"])])),_:1})):createCommentVNode("",!0),createVNode(B,null,{label:withCtx((()=>[o[31]||(o[31]=createTextVNode("控件字段")),createVNode($,{text:U.value},null,8,["text"])])),default:withCtx((()=>["table"===N.value?(openBlock(),createBlock(O,{key:0,value:e.activeData.__vModel__,"onUpdate:value":o[4]||(o[4]=t=>e.activeData.__vModel__=t),disabled:""},null,8,["value"])):(openBlock(),createBlock(T,{key:1,value:e.activeData.__vModel__,"onUpdate:value":o[6]||(o[6]=t=>e.activeData.__vModel__=t),ref_key:"fieldSelectRef",ref:u,placeholder:"请输入数据库字段",options:unref(v),dropdownMatchSelectWidth:!1,showSearch:"",allowClear:"",fieldNames:{value:"realField"},onChange:o[7]||(o[7]=e=>function(e,t){if(!e)return a.activeData.__vModel__="";let o=!1;const l=a=>{for(let n=0;n<a.length;n++){const i=a[n],c=i.__config__;if(i.__vModel__===e&&i.__config__.formId!==t){o=!0;break}c&&"table"!=c.jnpfKey&&c.children&&Array.isArray(c.children)&&l(c.children)}};if(l(unref(a.drawingList)),o)return c.warning(`字段【${e}】已存在,请重新选择!`),a.activeData.__vModel__=void 0,void nextTick((()=>{a.activeData.__vModel__=""}));const n=f.fieldOptions.filter((t=>t.realField==e))[0];n&&n.fieldName&&(a.activeData.__config__.label=n.fieldName)}(e,C.value.formId))},{dropdownRender:withCtx((({menuNode:e})=>[createVNode(n,{vnodes:e},null,8,["vnodes"]),createVNode(K,{style:{margin:"4px 0"}}),createBaseVNode("div",{class:"select-item-add",onMousedown:o[5]||(o[5]=e=>e.preventDefault()),onClick:L},[createVNode(E,{type:"link",preIcon:"icon-ym icon-ym-btn-add"},{default:withCtx((()=>o[32]||(o[32]=[createTextVNode("添加字段")]))),_:1,__:[32]})],32)])),_:1},8,["value","options"]))])),_:1})]))])):(openBlock(),createElementBlock("div",_hoisted_9$1,[createVNode(B,null,{label:withCtx((()=>[o[35]||(o[35]=createTextVNode("控件字段")),createVNode($,{text:U.value},null,8,["text"])])),default:withCtx((()=>[createVNode(O,{value:e.activeData.__vModel__,"onUpdate:value":o[12]||(o[12]=t=>e.activeData.__vModel__=t),placeholder:"请输入数据库字段",disabled:"table"===N.value||!!e.formInfo.isKit,onChange:o[13]||(o[13]=e=>function(e,t,o){if(!e)return;if(!/(^_([a-zA-Z0-9]_?)*$)|(^[a-zA-Z](_?[a-zA-Z0-9])*_?$)/.test(e))return void c.warning("请输入正确的字段");let l=!1,n=!1;if(o){const l=(a,i)=>{a&&(a.__config__&&a.__config__.children&&Array.isArray(a.__config__.children)&&l(a.__config__.children,a),Array.isArray(a)&&a.forEach((e=>l(e,i))),"table"==i?.__config__?.jnpfKey&&a.__vModel__&&a.__vModel__.toLowerCase()===e.toLowerCase()&&a.__config__.formId!==t&&a.__config__.parentVModel===o&&(n=!0))};l(unref(a.drawingList))}else{const o=(a,n)=>{a&&("table"!==a.__config__?.jnpfKey&&a.__config__?.children&&Array.isArray(a.__config__.children)&&o(a.__config__.children),Array.isArray(a)&&a.forEach((e=>o(e))),a.__vModel__&&a.__vModel__.toLowerCase()===e.toLowerCase()&&a.__config__.formId!==t&&(l=!0))};o(unref(a.drawingList))}return l?(c.warning(`字段【${e}】已存在,请重新输入!`),void(a.activeData.__vModel__="")):n?(c.warning(`子表字段【${e}】已存在,请重新输入!`),void(a.activeData.__vModel__="")):void(a.activeData.__vModel__=F(e))}(e,C.value.formId,C.value.parentVModel))},null,8,["value","disabled"])])),_:1})]))])):createCommentVNode("",!0),unref(layoutList).includes(N.value)&&"table"!==N.value?createCommentVNode("",!0):(openBlock(),createBlock(B,{key:3,label:"控件标题"},{default:withCtx((()=>[createVNode(Y,{value:e.activeData.__config__.label,"onUpdate:value":o[14]||(o[14]=t=>e.activeData.__config__.label=t),i18n:e.activeData.__config__.labelI18nCode,"onUpdate:i18n":o[15]||(o[15]=t=>e.activeData.__config__.labelI18nCode=t),placeholder:"请输入"},null,8,["value","i18n"])])),_:1})),unref(layoutList).includes(N.value)?createCommentVNode("",!0):(openBlock(),createBlock(B,{key:4,label:"显示标题"},{default:withCtx((()=>[createVNode(P,{checked:e.activeData.__config__.showLabel,"onUpdate:checked":o[16]||(o[16]=t=>e.activeData.__config__.showLabel=t)},null,8,["checked"])])),_:1})),"table"===N.value?(openBlock(),createBlock(B,{key:5,label:"显示标题"},{default:withCtx((()=>[createVNode(P,{checked:e.activeData.__config__.showTitle,"onUpdate:checked":o[17]||(o[17]=t=>e.activeData.__config__.showTitle=t)},null,8,["checked"])])),_:1})):createCommentVNode("",!0),"card"===N.value?(openBlock(),createBlock(B,{key:6,label:"卡片标题"},{default:withCtx((()=>[createVNode(Y,{value:e.activeData.header,"onUpdate:value":o[18]||(o[18]=t=>e.activeData.header=t),i18n:e.activeData.headerI18nCode,"onUpdate:i18n":o[19]||(o[19]=t=>e.activeData.headerI18nCode=t),placeholder:"请输入"},null,8,["value","i18n"])])),_:1})):createCommentVNode("",!0),(t=N.value,![...layoutList,...systemList].includes(t)||["table","card","billRule"].includes(t)?(openBlock(),createBlock(B,{key:7,label:"标题提示"},{default:withCtx((()=>[createVNode(Y,{value:e.activeData.__config__.tipLabel,"onUpdate:value":o[20]||(o[20]=t=>e.activeData.__config__.tipLabel=t),i18n:e.activeData.__config__.tipLabelI18nCode,"onUpdate:i18n":o[21]||(o[21]=t=>e.activeData.__config__.tipLabelI18nCode=t),placeholder:"请输入"},null,8,["value","i18n"])])),_:1})):createCommentVNode("",!0)),void 0===e.activeData.placeholder||unref(systemList).includes(N.value)?createCommentVNode("",!0):(openBlock(),createBlock(B,{key:8,label:"占位提示"},{default:withCtx((()=>[createVNode(Y,{value:e.activeData.placeholder,"onUpdate:value":o[22]||(o[22]=t=>e.activeData.placeholder=t),i18n:e.activeData.placeholderI18nCode,"onUpdate:i18n":o[23]||(o[23]=t=>e.activeData.placeholderI18nCode=t),placeholder:"请输入"},null,8,["value","i18n"])])),_:1})),"table"===N.value?(openBlock(),createElementBlock("div",_hoisted_10$1,[w.value?(openBlock(),createBlock(B,{key:0,label:"关联子表"},{default:withCtx((()=>[createVNode(T,{value:e.activeData.__config__.tableName,"onUpdate:value":o[24]||(o[24]=t=>e.activeData.__config__.tableName=t),placeholder:"请选择",showSearch:"",dropdownMatchSelectWidth:!1,options:D.value.map((e=>({...e,fullName:e.tableName?e.table+"("+e.tableName+")":e.table}))),fieldNames:{value:"table"},onChange:o[25]||(o[25]=e=>function(e,t){if(!e)return;const o=unref(a.drawingList)||[];let l=!1;const n=a=>{for(let o=0;o<a.length;o++){const i=a[o].__config__;if("table"===i.jnpfKey&&i.tableName===e&&i.formId!==t){l=!0;break}i&&"table"!=i.jnpfKey&&i.children&&Array.isArray(i.children)&&n(i.children)}};if(n(o),l)return c.warning(`子表【${e}】已存在,请重新选择!`),a.activeData.__config__.tableName=void 0,void nextTick((()=>{a.activeData.__config__.tableName=""}));for(let i=0;i<a.activeData.__config__.children.length;i++)a.activeData.__config__.children[i].__config__.relationTable=e,a.activeData.__config__.children[i].__vModel__=""}(e,C.value.formId))},{option:withCtx((({fullName:e,typeId:t})=>[createBaseVNode("span",_hoisted_11$1,toDisplayString(e),1),createBaseVNode("span",_hoisted_12$1,toDisplayString("1"==t?"主表":"从表"),1)])),_:1},8,["value","options"])])),_:1})):createCommentVNode("",!0)])):createCommentVNode("",!0),(openBlock(),createBlock(resolveDynamicComponent(V.value),mergeProps(k.value,{key:e.activeData.__config__.renderKey}),null,16)),"currOrganize"===N.value?(openBlock(),createBlock(B,{key:10,label:"显示内容"},{default:withCtx((()=>[createVNode(H,{value:e.activeData.showLevel,"onUpdate:value":o[26]||(o[26]=t=>e.activeData.showLevel=t),placeholder:"请选择"},{default:withCtx((()=>[createVNode(z,{value:"all"},{default:withCtx((()=>o[36]||(o[36]=[createTextVNode("显示组织")]))),_:1,__:[36]}),createVNode(z,{value:"last"},{default:withCtx((()=>o[37]||(o[37]=[createTextVNode("显示部门")]))),_:1,__:[37]})])),_:1},8,["value"])])),_:1})):createCommentVNode("",!0),[...unref(layoutList),...unref(noVModelList)].includes(N.value)||"input"===N.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_13$1,[unref(systemList).includes(N.value)?createCommentVNode("",!0):(openBlock(),createBlock(B,{key:0,label:"是否禁用"},{default:withCtx((()=>[createVNode(P,{checked:e.activeData.disabled,"onUpdate:checked":o[27]||(o[27]=t=>e.activeData.disabled=t)},null,8,["checked"])])),_:1})),unref(systemList).includes(N.value)?createCommentVNode("",!0):(openBlock(),createBlock(B,{key:1,label:"是否必填"},{default:withCtx((()=>[createVNode(P,{checked:e.activeData.__config__.required,"onUpdate:checked":o[28]||(o[28]=t=>e.activeData.__config__.required=t)},null,8,["checked"])])),_:1})),createVNode(B,{label:"是否隐藏"},{default:withCtx((()=>[createVNode(P,{checked:e.activeData.__config__.noShow,"onUpdate:checked":o[29]||(o[29]=t=>e.activeData.__config__.noShow=t)},null,8,["checked"])])),_:1})])),["relationFormAttr","popupAttr","calculate"].includes(N.value)&&e.activeData.isStorage?(openBlock(),createBlock(B,{key:12,label:"是否隐藏"},{default:withCtx((()=>[createVNode(P,{checked:e.activeData.__config__.noShow,"onUpdate:checked":o[30]||(o[30]=t=>e.activeData.__config__.noShow=t)},null,8,["checked"])])),_:1})):createCommentVNode("",!0),e.activeData.on?(openBlock(),createElementBlock("div",_hoisted_14$1,[createVNode(K,null,{default:withCtx((()=>[o[38]||(o[38]=createTextVNode("脚本事件")),createVNode($,{text:"不支持代码生成"})])),_:1,__:[38]}),(openBlock(!0),createElementBlock(Fragment,null,renderList(e.activeData.on,((e,t)=>(openBlock(),createBlock(B,{label:t,key:t},{default:withCtx((()=>[createVNode(E,{block:"",onClick:e=>{return o=t,f.activeFunc=o,void _(!0,{text:a.activeData.on[f.activeFunc]});var o}},{default:withCtx((()=>[createTextVNode(toDisplayString(A(t)),1)])),_:2},1032,["onClick"])])),_:2},1032,["label"])))),128))])):createCommentVNode("",!0)];var t})),_:1},512),[[vShow,"field"===unref(m)]]),withDirectives(createVNode(_sfc_main$11,normalizeProps(guardReactiveProps(g.value)),null,16),[[vShow,"style"===unref(m)]]),withDirectives(createVNode(_sfc_main$X,mergeProps(g.value,{printTplOptions:unref(h)}),null,16,["printTplOptions"]),[[vShow,"form"===unref(m)]])])),_:1})])):createCommentVNode("",!0),createVNode(_sfc_main$13,{onRegister:unref(r),onUpdateOptions:R},null,8,["onRegister"]),createVNode(_sfc_main$12,{onRegister:unref(s),treeTitle:e.formInfo.fullName,drawingList:e.drawingList,onConfirm:j},null,8,["onRegister","treeTitle","drawingList"])])}}}),_sfc_main$4=defineComponent({__name:"PreviewModal",props:["formConf"],emits:["register"],setup(e){const t=e,{t:a}=useI18n(),[o,{changeOkLoading:l}]=useModalInner((function(){i.value=!0,c.value=+new Date,nextTick((()=>{i.value=!1}))})),n=ref(null),i=ref(!0),c=ref(+new Date),r=computed((()=>(t.formConf.confirmButtonTextI18nCode?a(t.formConf.confirmButtonTextI18nCode,t.formConf.confirmButtonText):t.formConf.confirmButtonText)||a("common.okText"))),d=computed((()=>(t.formConf.cancelButtonTextI18nCode?a(t.formConf.cancelButtonTextI18nCode,t.formConf.cancelButtonText):t.formConf.cancelButtonText)||a("common.cancelText")));function s(){(function(){const e=unref(n);if(!e)throw new Error("parser is null!");return e})().handleSubmit()}function _(e,t){l(!0),t&&"function"==typeof t&&t(),l(!1)}return(t,l)=>(openBlock(),createBlock(unref(BasicModal),mergeProps(t.$attrs,{onRegister:unref(o),title:unref(a)("common.previewText"),onOk:s,canFullscreen:"","destroy-on-close":"",okText:r.value,cancelText:d.value}),{default:withCtx((()=>[i.value?createCommentVNode("",!0):(openBlock(),createBlock(_sfc_main$19,{ref_key:"parserRef",ref:n,formConf:e.formConf,onSubmit:_,key:c.value},null,8,["formConf"]))])),_:1},16,["onRegister","title","okText","cancelText"]))}});function getKitList(e){return defHttp.get({url:"/api/system/Kit",data:e})}function getKitSelector(){return defHttp.get({url:"/api/system/Kit/Selector"})}function create(e){return defHttp.post({url:"/api/system/Kit",data:e})}function update(e){return defHttp.put({url:"/api/system/Kit/"+e.id,data:e})}function getInfo(e){return defHttp.get({url:"/api/system/Kit/"+e})}function delKit(e){return defHttp.delete({url:"/api/system/Kit/"+e})}function copy(e){return defHttp.post({url:`/api/system/Kit/${e}/Actions/Copy`})}function exportTpl(e){return defHttp.get({url:`/api/system/Kit/${e}/Actions/Export`})}const _sfc_main$3=defineComponent({__name:"KitForm",emits:["register","reload"],setup(e,{emit:t}){const a=t,o=reactive({dataForm:{}}),[l,{setFieldsValue:n,resetFields:i,validate:c,updateSchema:r}]=useForm({schemas:[{field:"fullName",label:"模板名称",component:"Input",componentProps:{placeholder:"请输入",maxlength:100},rules:[{required:!0,trigger:"blur",message:"必填"}]},{field:"enCode",label:"模板编码",component:"Input",componentProps:{placeholder:"请输入",maxlength:50},rules:[{required:!0,trigger:"blur",message:"必填"},{validator:formValidate("enCode"),trigger:"blur"}]},{field:"category",label:"模板分类",component:"Select",componentProps:{placeholder:"请选择",showSearch:!0},rules:[{required:!0,trigger:"change",message:"必填"}]},{field:"icon",label:"模板图标",component:"IconPicker",rules:[{required:!0,trigger:"change",message:"必填"}]},{field:"sortCode",label:"模板排序",defaultValue:0,component:"InputNumber",componentProps:{min:0,max:999999}},{field:"enabledMark",label:"模板状态",component:"Switch",defaultValue:1},{field:"description",label:"模板说明",component:"Textarea",componentProps:{placeholder:"请输入"}}]}),[d,{closeModal:s,changeOkLoading:_}]=useModalInner((function(e={}){(async function(){const e=await p.getDictionaryData("businessType");r({field:"category",componentProps:{options:e}})})(),i(),o.dataForm=e,n(e)})),{createMessage:u}=useMessage(),p=useBaseStore();async function f(){const e=await c();if(!e)return;_(!0);create({...o.dataForm,...e}).then((e=>{u.success(e.msg),_(!1),s(),a("reload")})).catch((()=>{_(!1)}))}return(e,t)=>(openBlock(),createBlock(unref(BasicModal),mergeProps(e.$attrs,{onRegister:unref(d),title:"另存为模板",onOk:f}),{default:withCtx((()=>[createVNode(unref(BasicForm),{onRegister:unref(l)},null,8,["onRegister"])])),_:1},16,["onRegister"]))}}),_hoisted_1$1={class:"ai-popover-content"},_sfc_main$2=defineComponent({__name:"AiChatPopover",emits:["confirm"],setup(e,{emit:t}){const a=ref(!1),o=ref(!1),l=ref(""),n=t;function i(){l.value="",o.value=!1}function c(){l.value&&(o.value=!0,getAiInfo({keyword:l.value}).then((e=>{o.value=!1,a.value=!1,n("confirm",e.data.aiModelList||[])})).catch((()=>{o.value=!1})))}return(e,t)=>{const n=resolveComponent("jnpf-input"),r=resolveComponent("a-button"),d=resolveComponent("a-tooltip"),s=resolveComponent("a-popover");return openBlock(),createBlock(s,{open:a.value,"onUpdate:open":t[1]||(t[1]=e=>a.value=e),trigger:"click",placement:"bottom",bordered:!1,"arrow-point-at-center":"",onOpenChange:i},{content:withCtx((()=>[createBaseVNode("div",_hoisted_1$1,[t[2]||(t[2]=createBaseVNode("div",{class:"mb-15px text-15px"},"AI生成字段",-1)),createVNode(n,{value:l.value,"onUpdate:value":t[0]||(t[0]=e=>l.value=e),placeholder:"输入你的需求描述",maxlength:100},{suffix:withCtx((()=>[o.value?(openBlock(),createBlock(unref(LoadingOutlined),{key:0,class:"mr-5px"})):(openBlock(),createElementBlock("i",{key:1,class:normalizeClass(["ym-custom ym-custom-send cursor-pointer",{"icon-selected":l.value}]),onClick:c},null,2))])),_:1},8,["value"])])])),default:withCtx((()=>[createVNode(d,{title:"AI生成字段"},{default:withCtx((()=>[createVNode(r,{type:"text",class:"action-bar-btn"},{default:withCtx((()=>t[3]||(t[3]=[createBaseVNode("i",{class:"icon-ym icon-ym-ai-form"},null,-1)]))),_:1,__:[3]})])),_:1})])),_:1},8,["open"])}}}),AiChatPopover_vue_vue_type_style_index_0_scoped_aa7d3a04_lang="",AiChatPopover=_export_sfc(_sfc_main$2,[["__scopeId","data-v-aa7d3a04"]]),_sfc_main$1=defineComponent({__name:"AiFieldModal",emits:["register","reload"],setup(e,{emit:t}){const a=reactive({list:[],selectedRowKeys:[]}),{list:o,selectedRowKeys:l}=toRefs(a),{createMessage:n}=useMessage(),i=t,[c,{closeModal:r}]=useModalInner((function(e){a.list=cloneDeep(e.list).filter((e=>e.isMain))[0]?.fields||[],a.selectedRowKeys=a.list.map((e=>e.fieldName))})),d=[{title:"字段名称",dataIndex:"label",key:"label",width:200},{title:"字段类型",dataIndex:"jnpfKey",key:"jnpfKey",width:200}],s=[...inputComponents,...selectComponents,...systemComponents],_=["table","relationFormAttr","popupAttr",...vModelIgnoreList],u=computed((()=>s.filter((e=>!_.includes(e.__config__.jnpfKey))).map((e=>({...e,label:e.__config__.label,jnpfKey:e.__config__.jnpfKey})))));function p(e){a.selectedRowKeys=e||[]}function f(){const e=a.list.filter((e=>a.selectedRowKeys.includes(e.fieldName))),t=buildAiFields([{fields:e,isMain:!0}]);if(!t.length)return n.warning("请至少选择一个字段");i("reload",t),nextTick((()=>r()))}return(e,t)=>{const a=resolveComponent("jnpf-input"),n=resolveComponent("jnpf-select"),i=resolveComponent("a-table");return openBlock(),createBlock(unref(BasicModal),mergeProps(e.$attrs,{width:"600px",class:"JNPF-ai-field-Modal",onRegister:unref(c),title:"推荐字段",onOk:f,destroyOnClose:""}),{default:withCtx((()=>[createVNode(i,{size:"small",rowKey:"fieldName","data-source":unref(o),columns:d,pagination:!1,"row-selection":{columnWidth:50,selectedRowKeys:unref(l),onChange:p}},{bodyCell:withCtx((({column:e,record:t})=>["label"===e.key?(openBlock(),createBlock(a,{key:0,value:t.fieldTitle,"onUpdate:value":e=>t.fieldTitle=e,placeholder:"请输入",allowClear:"",maxlength:100},null,8,["value","onUpdate:value"])):createCommentVNode("",!0),"jnpfKey"===e.key?(openBlock(),createBlock(n,{key:1,value:t.fieldComponent,"onUpdate:value":e=>t.fieldComponent=e,fieldNames:{label:"label",value:"jnpfKey",options:"options1"},options:u.value,showSearch:"",allowClear:""},null,8,["value","onUpdate:value","options"])):createCommentVNode("",!0)])),_:1},8,["data-source","row-selection"])])),_:1},16,["onRegister"])}}}),AiFieldModal_vue_vue_type_style_index_0_lang="",_hoisted_1={class:"left-board common-board"},_hoisted_2=["onClick"],_hoisted_3={class:"components-body"},_hoisted_4=["onClick"],_hoisted_5={class:"components-body"},_hoisted_6={class:"center-board common-board"},_hoisted_7={class:"action-bar"},_hoisted_8={class:"action-bar-left"},_hoisted_9={class:"jnpf-device-switch"},_hoisted_10={class:"action-bar-right"},_hoisted_11={class:"center-board-main"},_hoisted_12={class:"empty-info"},_hoisted_13={class:"ipad"},_hoisted_14={class:"outerIpad"},_hoisted_15={class:"ipadBody"},_hoisted_16={class:"empty-info app-empty-info"},_sfc_main=defineComponent({__name:"FormGenerator",props:["conf","formInfo","dbType"],emits:["showValidatePopover"],setup(e,{expose:t,emit:a}){const o=e,l=a;t({getData:J,activeFormItemById:function(e){const t=a=>{for(let o=0;o<a.length;o++){const l=a[o];if(l.__config__.formId===e){y.activeData=l,y.activeId=l.__config__.formId;break}const n=l.__config__;n&&n.children&&Array.isArray(n.children)&&t(n.children)}};t(y.drawingList)},setTabActiveKey:function(e){unref(h)?.setTabActiveKey(e)}});const{createMessage:n,createConfirm:i}=useMessage(),{t:c}=useI18n(),[r,{openModal:d}]=useModal(),[s,{openModal:_}]=useModal(),[u,{openModal:p}]=useModal(),f=useGeneratorStore(),{prefixCls:m}=useDesign("basic-generator"),v=useDebounceFn(se,200),h=ref(null);let g,C,N;const y=reactive({leftComponents:[{id:"1",title:"基础控件",list:inputComponents},{id:"2",title:"高级控件",list:selectComponents},{id:"3",title:"系统控件",list:systemComponents},{id:"4",title:"布局控件",list:layoutComponents}],showType:"pc",formConf:cloneDeep(formConf),drawingList:[],copyDrawingList:"",activeId:null,activeData:{},activeItem:{},activeTableItem:{},showTip:!0,rowIndex:0,colIndex:0,rowData:[],colData:[],selectCell:{__config__:{rowspan:1,colspan:1}},leftActiveKey:["1","2","3","4"],leftKitActiveKey:[],leftTabActiveKey:"1",kitList:[],errorList:[]}),{leftComponents:V,leftActiveKey:k,leftKitActiveKey:b,leftTabActiveKey:w,showType:x,drawingList:D,formConf:B,activeId:T}=toRefs(y),{initRedo:U,addRecord:I,handleUndo:F,handleRedo:M,getCanUndo:S,getCanRedo:$}=useRedo(),L=computed((()=>({activeData:y.activeData,formConf:y.formConf,drawingList:y.drawingList,formInfo:o.formInfo,dbType:o.dbType}))),R=computed((()=>!y.colData.length||(y.colIndex<=0||y.colData[y.colIndex-1].__config__.rowspan!==y.selectCell.__config__.rowspan))),A=computed((()=>{if(!y.colData.length)return!0;let e=y.colIndex+y.selectCell.__config__.colspan;return y.colIndex>=y.colData.length-1||e>y.colData.length-1||y.colData[e].__config__.rowspan!==y.selectCell.__config__.rowspan})),j=computed((()=>{if(!y.selectCell.__config__||!y.rowData.length)return!0;let e=y.rowData[y.rowIndex].__config__.children,t=e[0].__config__.rowspan,a=!1;for(let o=1;o<e.length;o++)if(e[o].__config__.rowspan!==t){a=!0;break}return!!a||(y.colData.length<=1||y.colData.length===y.selectCell.__config__.colspan)})),O=computed((()=>!y.rowData.length||y.rowIndex<=0||(y.rowData[y.rowIndex-1].__config__.children[y.colIndex].__config__.colspan!==y.selectCell.__config__.colspan||y.rowData[y.rowIndex-1].__config__.children[y.colIndex].__config__.merged))),K=computed((()=>{if(!y.rowData.length||y.rowIndex==y.rowData.length)return!0;let e=y.rowIndex+y.selectCell.__config__.rowspan;return y.rowIndex>=y.rowData.length-1||e>y.rowData.length-1||y.rowData[e].__config__.children[y.colIndex].__config__.colspan!==y.selectCell.__config__.colspan||y.rowData[e].__config__.children[y.colIndex].__config__.merged})),E=computed((()=>{if(!y.rowData.length)return!0;let e=y.rowData[0].__config__.children[y.colIndex].__config__.colspan,t=!1;for(let a=1;a<y.rowData.length;a++)if(y.rowData[a].__config__.children[y.colIndex].__config__.colspan!==e){t=!0;break}return!!t||(y.rowData.length<=1||y.rowData.length===y.selectCell.__config__.rowspan)})),Y=computed((()=>y.selectCell.__config__.merged||y.selectCell.__config__.colspan<=1)),P=computed((()=>y.selectCell.__config__.merged||y.selectCell.__config__.rowspan<=1)),z=computed((()=>{if(!y.rowData.length)return!0;if(y.rowData[0].__config__.children[0].__config__.colspan===y.rowData[0].__config__.children.length)return!0;let e=y.rowData[0].__config__.children[y.colIndex].__config__.colspan,t=!1;for(let a=1;a<y.rowData.length;a++)if(y.rowData[a].__config__.children[y.colIndex].__config__.colspan!==e){t=!0;break}return!!t||y.selectCell.__config__.colspan===y.colData.length})),H=computed((()=>{if(!y.rowData.length||y.rowData.length<=y.rowIndex)return!0;if(y.rowData[0].__config__.children[0].__config__.rowspan===y.rowData.length)return!0;let e=y.rowData[y.rowIndex].__config__.children[0].__config__.rowspan,t=!1;for(let a=1;a<y.rowData[y.rowIndex].__config__.children.length;a++)if(y.rowData[y.rowIndex].__config__.children[a].__config__.rowspan!==e){t=!0;break}return!!t||(1===y.rowData.length||y.selectCell.__config__.rowspan===y.rowData.length)}));function J(){return new Promise((e=>{y.errorList=[],y.drawingList.length||W("表单内容不能为空"),y.formConf.hasPrintBtn&&!y.formConf.printId?.length&&W("打印模板不能为空","formAttr","表单属性"),y.formConf.useBusinessKey&&!y.formConf.businessKeyList?.length&&W("业务主键的规则设置中联合字段不能为空","formAttr","表单属性");const t=e=>{for(let a=0;a<e.length;a++){const o=e[a],l=o.__config__,n=l.formId,i=l.label;if("colFormItem"===l.layout&&(!noVModelList.includes(l.jnpfKey)||o.isStorage)){const e=/(^_([a-zA-Z0-9]_?)*$)|(^[a-zA-Z](_?[a-zA-Z0-9])*_?$)/;o.__vModel__||W("控件字段不能为空",n,i),o.__vModel__&&!e.test(o.__vModel__)&&W("控件字段不规范",n,i)}if("billRule"===l.jnpfKey)if(2===l.ruleType){if(1===l.ruleConfig?.type){const e=/^[0-9]*[1-9]$/;l.ruleConfig?.digit||W("中位数不能为空",n,i),l.ruleConfig?.startNumber||W("起始值不能为空",n,i),l.ruleConfig?.startNumber&&!e.test(l.ruleConfig?.startNumber)&&W("起始值只能输入数字且不能为0",n,i)}}else l.rule||W("单据模板不能为空",n,i);if("relationForm"===l.jnpfKey&&(o.modelId||W("关联功能不能为空",n,i),o.propsValue||W("存储字段不能为空",n,i),o.relationField||W("回显字段不能为空",n,i)),"popupSelect"!==l.jnpfKey&&"popupTableSelect"!==l.jnpfKey||(o.interfaceId||W("数据接口不能为空",n,i),o.propsValue||W("存储字段不能为空",n,i),o.relationField||W("回显字段不能为空",n,i)),"autoComplete"===l.jnpfKey&&(o.interfaceId||W("数据接口不能为空",n,i),o.relationField||W("回显字段不能为空",n,i)),"rowFormItem"!==l.layout||l.children.length||W("控件中没有组件","",i),("uploadFile"===l.jnpfKey||"uploadImg"===l.jnpfKey)&&("uploadImg"!==l.jnpfKey||"button"!==o.showType||o.buttonText||W("按钮文字不能为空",n,i),"uploadFile"!==l.jnpfKey||o.buttonText||W("按钮文字不能为空",n,i),"selfPath"===o.pathType&&(o.sortRule&&o.sortRule.length||W("自定义路径不能为空",n,i),o.sortRule?.includes("3"))))if(o.folder){const e=/^[a-zA-Z0-9][a-zA-Z0-9\-_]{0,99}$/;let t=!1;const a=o.folder.split("/");e:for(let o=0;o<a.length;o++)if(!a[o]||!e.test(a[o])){t=!0;break e}t&&W("文件夹名不正确",n,i)}else W("文件夹名不能为空",n,i);"link"!==l.jnpfKey&&"iframe"!==l.jnpfKey||o.href&&!isUrl(o.href)&&W("请输入正确的链接地址",n,i),l&&l.children&&Array.isArray(l.children)&&t(l.children)}};t(y.drawingList),le(),e({formData:y.formConf,errorList:y.errorList,target:1})}))}function W(e,t="",a="表单设计"){y.errorList.push({errorInfo:e,id:t,title:a})}function q(e){if(e.__config__.dragDisabled)return;const t=G(e);y.drawingList.push(t),te(t),pe(y.drawingList)}function G(e){const t=cloneDeep(e);return t.__config__.span=y.formConf.span,X(t),g=t,g}function Z(e){C=Q(e.fields)}function Q(e){let t=[];const a=[],o=(e,t)=>{if(!e)return;if(e.__config__&&e.__config__.children&&Array.isArray(e.__config__.children)&&o(e.__config__.children),Array.isArray(e))return e.forEach((e=>o(e)));const l=buildBitUUID();if(e.__config__.formId="formItem"+l,e.__vModel__&&e.__config__.jnpfKey){const t=e.__vModel__,o=ee(`${e.__config__.jnpfKey}Field${l}`);e.__vModel__=f.getHasTable?"":o,a.push({oldVal:t,newVal:o})}};o(e);let l=JSON.stringify(e);for(let n=0;n<a.length;n++){const e=a[n];l=l.replaceAll(e.oldVal,e.newVal)}return t=JSON.parse(l),t}function X(e,t=null){const a=buildBitUUID(),o=e.__config__;return o.formId="formItem"+a,o.renderKey=+new Date,"colFormItem"===o.layout?((noVModelList.indexOf(o.jnpfKey)<0||e.isStorage)&&(e.__vModel__=f.getHasTable?"":ee(`${o.jnpfKey}Field${a}`)),t?.__vModel__&&"table"===t?.__config__.jnpfKey&&(e.__config__.parentVModel=t.__vModel__)):"rowFormItem"===o.layout&&("table"===o.jnpfKey&&(e.__vModel__=ee(`${o.jnpfKey}Field${a}`)),o.componentName=`${o.jnpfKey}${a}`,!Array.isArray(o.children)&&(o.children=[])),Array.isArray(o.children)&&(o.children=o.children.map((t=>X(t,e)))),e}function ee(e){const t=o.dbType||"";return t.toLowerCase()==="Oracle".toLowerCase()||t.toLowerCase()==="DM".toLowerCase()?e.toUpperCase():t.toLowerCase()==="PostgreSQL".toLowerCase()||t.toLowerCase()==="KingBaseES".toLowerCase()?e.toLowerCase():e}function te(e){y.activeData=e,y.activeId=e.__config__.formId}function ae(e,t,a=!0){let o=cloneDeep(e);o=X(o),t.push(o),a&&te(o),pe(y.drawingList)}function oe(e,t){t.splice(e,1),nextTick((()=>{const e=y.drawingList.length;e&&te(y.drawingList[e-1]),pe(y.drawingList)}))}function le(){y.formConf={...y.formConf,fields:cloneDeep(y.drawingList)}}function ne(e){y.drawingList=cloneDeep(e),y.copyDrawingList=JSON.stringify(y.drawingList);let t=!1;const a=e=>{for(let o=0;o<e.length;o++){const l=e[o];l.__config__.formId===y.activeId&&(te(l),t=!0);const n=l.__config__;n&&n.children&&Array.isArray(n.children)&&a(n.children)}};a(y.drawingList),t||(y.activeData={},y.activeId=null)}function ie(e){C?.length&&nextTick((()=>{y.showTip=!0,N?(N.__config__.children.splice(e.newIndex,0,...C),N=null):y.drawingList.splice(e.newIndex,0,...C),te(C[0]),pe(y.drawingList)}))}function ce(e){y.showTip=!0,e.from!==e.to&&(y.activeData=g,y.activeId=g.__config__.formId),e.to.className.indexOf("table-wrapper")>-1&&(y.activeItem.__config__.isSubTable=!0,y.activeItem.__config__.parentVModel=y.activeTableItem.__vModel__,f.getHasTable&&(y.activeItem.__config__.relationTable=y.activeTableItem.__config__.tableName,y.activeItem.__vModel__="")),pe(y.drawingList)}function re(e){if(y.showTip=!0,e.from===e.to)return pe(y.drawingList);e.to.className.indexOf("table-wrapper")>-1&&(y.activeItem.__config__.isSubTable=!0,y.activeItem.__config__.parentVModel=y.activeTableItem.__vModel__,f.getHasTable&&(y.activeItem.__config__.relationTable=y.activeTableItem.__config__.tableName,y.activeItem.__vModel__="")),pe(y.drawingList)}function de(e){if(e.from==e.to)return pe(y.drawingList);e.to.className.indexOf("table-wrapper")<0?y.activeItem.__config__&&(y.activeItem.__config__.isSubTable=!1,y.activeItem.__config__.parentVModel="",f.getHasTable&&(y.activeItem.__vModel__="")):(y.activeItem.__config__.isSubTable=!0,y.activeItem.__config__.parentVModel=y.activeTableItem.__vModel__,f.getHasTable&&(y.activeItem.__config__.relationTable=y.activeTableItem.__config__.tableName,y.activeItem.__vModel__="")),pe(y.drawingList)}function se(e,t,a,o,l){const i=a._underlying_vm_;if("table"===l.__config__.jnpfKey){if(!i)return!1;if(noTableAllowList.includes(i.__config__.jnpfKey)||"2"===y.leftTabActiveKey)return!1;if("rowFormItem"===i.__config__.layout)return!1;if(f.getHasTable&&!l.__config__.tableName)return y.showTip&&(n.warning("子表请先关联数据表"),y.showTip=!1),!1;y.activeItem=i,y.activeTableItem=l}if(i||"2"!==y.leftTabActiveKey)return"tableGridTd"!==l.__config__.jnpfKey||"tableGrid"!==i.__config__.jnpfKey;N=l}function _e(){le(),d(!0,{formConf:unref(y.formConf)})}function ue(){i({iconType:"warning",title:c("common.tipTitle"),content:c("formGenerator.cleanComponentTip"),onOk:()=>{y.drawingList=[],pe(y.drawingList)}})}function pe(e){JSON.stringify(e)!=y.copyDrawingList&&(y.copyDrawingList=JSON.stringify(e),I(e))}function fe(){const e=t=>{for(let a=0;a<t.length;a++){const o=t[a].__config__;t[a].relationField&&t[a].relationField===t[a].__vModel__&&(t[a].showField=""),o?.children&&Array.isArray(o.children)&&e(o.children)}};e(y.drawingList)}function me(e,t,a,o){const l=e.__config__.children;let n=o?t:t+1;if(!o){let e=n,t=!1;for(;e<l.length;){if(!l[e].__config__.children[a].__config__.merged){n=e,t=!0;break}e++}t||(n=l.length)}let i=cloneDeep(l[t])||cloneDeep(l[l.length-1]);i.__config__.children.forEach((e=>{e.__config__.formId="formItem"+buildBitUUID(),e.__config__.merged=!1,e.__config__.colspan=1,e.__config__.rowspan=1,e.__config__.children=[]})),i.__config__.formId="formItem"+buildBitUUID(),i.__config__.jnpfKey="tableGridTr",e.__config__.children.splice(n,0,i);let c=0;for(;n<l.length-1&&c<l[0].__config__.children.length;){const e=l[n+1].__config__.children[c];if(e.__config__.merged){let e={},t=null;for(let o=n;o>=0;o--)if(!l[o].__config__.children[c].__config__.merged&&l[o].__config__.children[c].__config__.rowspan>1){t=o,e=l[o].__config__.children[c];break}let a=e.__config__.rowspan+1;Ve(t,e.__config__.colspan,a,c),c+=e.__config__.colspan}else c+=e.__config__.colspan||1}}function ve(e,t){const a=e.__config__.children;let o=void 0===t?a[0].__config__.children.length:t;a.forEach((e=>{let t={__config__:{jnpfKey:"tableGridTd",merged:!1,colspan:1,rowspan:1,formId:"formItem"+buildBitUUID(),children:[],backgroundColor:""}};e.__config__.children.splice(o,0,t)}))}function he(e,t=0){let a=1==t?y.colIndex:y.colIndex+y.colData[y.colIndex].__config__.colspan,o=1==t?y.colIndex-y.colData[y.colIndex-1].__config__.colspan:y.colIndex;const l=y.colData[a].__config__.children,n=y.colData[o].__config__.children;y.colData[o].__config__.children=[...n,...cloneDeep(l)],ye(o,1*y.colData[a].__config__.colspan+1*y.colData[o].__config__.colspan,y.selectCell.__config__.rowspan)}function ge(e=0){let t=1==e?y.rowIndex:y.rowIndex+y.selectCell.__config__.rowspan,a=1==e?y.rowIndex-1:y.rowIndex,o=y.rowData[t].__config__.children[y.colIndex].__config__.children,l=y.rowData[a].__config__.children[y.colIndex].__config__.children;y.rowData[a].__config__.children[y.colIndex].__config__.children=[...l,...cloneDeep(o)];let n=1*y.rowData[t].__config__.children[y.colIndex].__config__.rowspan+1*y.rowData[a].__config__.children[y.colIndex].__config__.rowspan;Ve(a,y.selectCell.__config__.colspan,n)}function Ce(){!function(e,t,a){for(let o=y.rowIndex;o<y.rowIndex+a;o++)for(let a=e;a<e+t;a++)y.rowData[o].__config__.children[a].__config__.merged=!1,y.rowData[o].__config__.children[a].__config__.rowspan=1,y.rowData[o].__config__.children[a].__config__.colspan=1}(y.colIndex,y.selectCell.__config__.colspan,y.selectCell.__config__.rowspan)}function Ne(){!function(e,t,a){for(let o=y.rowIndex;o<y.rowIndex+a;o++)for(let a=e;a<e+t;a++)y.rowData[o].__config__.children[a].__config__.merged=!1,y.rowData[o].__config__.children[a].__config__.rowspan=1,y.rowData[o].__config__.children[a].__config__.colspan=1}(y.colIndex,y.selectCell.__config__.colspan,y.selectCell.__config__.rowspan)}function ye(e,t,a){for(let o=y.rowIndex;o<y.rowIndex+a;o++)for(let a=e;a<e+t;a++)o!==y.rowIndex||a!==e?(y.rowData[o].__config__.children[a].__config__.merged=!0,y.rowData[o].__config__.children[a].__config__.colspan=t,y.rowData[o].__config__.children[a].__config__.children=[]):y.rowData[o].__config__.children[a].__config__.colspan=t}function Ve(e,t,a,o=0){o||(o=y.colIndex);for(let l=e;l<e+a;l++)for(let n=o;n<o+t;n++)l!==e||n!==o?(y.rowData[l].__config__.children[n].__config__.merged=!0,y.rowData[l].__config__.children[n].__config__.rowspan=a,y.rowData[l].__config__.children[n].__config__.children=[]):y.rowData[l].__config__.children[n].__config__.rowspan=a}function ke(e,t){switch(e){case"1":ve(t,y.colIndex);break;case"2":ve(t,y.colIndex+1);break;case"3":me(t,y.rowIndex,y.colIndex,!0);break;case"4":me(t,y.rowIndex,y.colIndex,!1);break;case"5":he(0,1);break;case"6":he();break;case"7":!function(){let e=y.colData.filter((e=>!e.merged&&e.__config__.children?.length));e?.length&&e.map(((e,t)=>{0==t&&(y.colData[0].__config__.children=cloneDeep(e.__config__.children)),0!=t&&y.colData[0].__config__.children.push(...cloneDeep(e.__config__.children))})),ye(0,y.colData.length,y.colData[y.colIndex].__config__.rowspan)}();break;case"8":ge(1);break;case"9":ge();break;case"10":!function(){let e=[];y.rowData.forEach((t=>{let a=t.__config__.children[y.colIndex];!t.__config__.merged&&t.__config__.children&&t.__config__.children.length&&e.push(a)}));let t=y.rowData[0].__config__.children[y.colIndex];e&&e.length&&e.map(((e,a)=>{0!=a&&t.__config__.children.push(...cloneDeep(e.__config__.children))})),Ve(0,t.__config__.colspan,y.rowData.length)}();break;case"11":Ce();break;case"12":Ne();break;case"13":!function(){let e=y.rowData[0].__config__.children[y.colIndex].__config__.colspan;y.rowData.forEach((t=>{t.__config__.children.splice(y.colIndex,e)}))}();break;case"14":!function(){let e=y.rowData[y.rowIndex].__config__.children[0].__config__.rowspan;y.rowData.splice(y.rowIndex,e)}()}y.rowIndex=0,y.colIndex=0,y.rowData=[],y.colData=[],y.selectCell={__config__:{rowspan:1,colspan:1}}}function be(e,t,a){y.rowIndex=t,y.colIndex=a,y.rowData=e.__config__.children,y.colData=y.rowData[t].__config__.children,y.selectCell=y.colData[a]}function we(e,t){ae(e,t,!1)}function xe(){getKitSelector().then((e=>{const t=e.data;for(let a=0;a<t.length;a++)t[a].children=t[a].children.map((e=>{const t=e.formData?JSON.parse(e.formData):null;return{...e,fields:t?t.fields:[]}}));y.kitList=t,y.leftKitActiveKey=t.map((e=>e.id))}))}function De(){J().then((e=>{if(e.errorList?.length)return void l("showValidatePopover",e.errorList);const t=cloneDeep(formConf);t.fields=e?.formData?.fields||[];const a={formData:JSON.stringify(t),fullName:o.formInfo?.fullName,enCode:o.formInfo?.enCode+buildBitUUID(),category:o.formInfo?.category};_(!0,a)})).catch((e=>{e.msg&&n.warning(e.msg)}))}function Be(e){p(!0,{list:e})}function Te(e){e.forEach((e=>q(e)))}return provide("getShowType",(()=>y.showType)),provide("getDrawingList",(()=>y.drawingList)),watch((()=>y.drawingList),(e=>{e.length||(y.activeData={},y.activeId=null)}),{deep:!0}),onMounted((()=>{y.leftActiveKey=["1","2","3","4"],U(),"object"==typeof o.conf&&null!==o.conf?(y.drawingList=cloneDeep(o.conf.fields),Object.assign(y.formConf,o.conf),y.drawingList.length&&te(y.drawingList[0])):y.drawingList=[],pe(y.drawingList),y.leftTabActiveKey="1",o.formInfo?.isKit||xe()})),(t,a)=>{const o=resolveComponent("a-tab-pane"),l=resolveComponent("a-tabs"),n=resolveComponent("BasicHelp"),i=resolveComponent("a-collapse-panel"),d=resolveComponent("a-collapse"),_=resolveComponent("a-tooltip"),p=resolveComponent("a-button"),f=resolveComponent("a-divider"),g=resolveComponent("a-form"),C=resolveComponent("a-row");return openBlock(),createElementBlock("div",{class:normalizeClass(`${unref(m)}`)},[createBaseVNode("div",_hoisted_1,[e.formInfo.isKit?createCommentVNode("",!0):(openBlock(),createBlock(l,{key:0,activeKey:unref(w),"onUpdate:activeKey":a[0]||(a[0]=e=>isRef(w)?w.value=e:null),tabBarGutter:10,class:"average-tabs"},{default:withCtx((()=>[createVNode(o,{key:"1",tab:"控件"}),createVNode(o,{key:"2",tab:"模板"})])),_:1},8,["activeKey"])),createVNode(unref(ScrollContainer),null,{default:withCtx((()=>[withDirectives(createVNode(d,{activeKey:unref(k),"onUpdate:activeKey":a[1]||(a[1]=e=>isRef(k)?k.value=e:null),expandIconPosition:"end",ghost:""},{default:withCtx((()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(V),(e=>(openBlock(),createBlock(i,{header:e.title,key:e.id,class:"components-list"},{default:withCtx((()=>[createVNode(unref(draggable),{class:"components-draggable",modelValue:e.list,"onUpdate:modelValue":t=>e.list=t,"item-key":"__config__.jnpfKey",filter:".disabled",sort:!1,draggable:".components-item",clone:G,group:{name:"componentsGroup",pull:"clone",put:!1},onEnd:ce},{item:withCtx((({element:e})=>[createBaseVNode("div",{class:normalizeClass(["components-item",{disabled:e.__config__.dragDisabled}]),onClick:t=>q(e)},[createBaseVNode("div",_hoisted_3,[createBaseVNode("i",{class:normalizeClass(e.__config__.tagIcon)},null,2),createTextVNode(" "+toDisplayString(e.__config__.label)+" ",1),"calculate"===e.__config__.jnpfKey?(openBlock(),createBlock(n,{key:0,text:"不支持代码生成"})):createCommentVNode("",!0)])],10,_hoisted_2)])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["header"])))),128))])),_:1},8,["activeKey"]),[[vShow,"1"===unref(w)]]),withDirectives(createVNode(d,{activeKey:unref(b),"onUpdate:activeKey":a[2]||(a[2]=e=>isRef(b)?b.value=e:null),expandIconPosition:"end",ghost:""},{default:withCtx((()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(y.kitList,(e=>(openBlock(),createBlock(i,{header:e.fullName,key:e.id,class:"components-list"},{default:withCtx((()=>[createVNode(unref(draggable),{class:"components-draggable",modelValue:e.children,"onUpdate:modelValue":t=>e.children=t,"item-key":"id",filter:".disabled",sort:!1,draggable:".components-item",clone:Z,group:{name:"componentsGroup",pull:"clone",put:!1},onEnd:ie},{item:withCtx((({element:e})=>[createBaseVNode("div",{class:"components-item",onClick:t=>function(e){const t=Q(e.fields);y.drawingList.push(...t),te(t[0]),pe(y.drawingList)}(e)},[createBaseVNode("div",_hoisted_5,[createBaseVNode("i",{class:normalizeClass(e.icon)},null,2),createBaseVNode("span",null,toDisplayString(e.fullName),1)])],8,_hoisted_4)])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["header"])))),128))])),_:1},8,["activeKey"]),[[vShow,"2"===unref(w)]])])),_:1})]),createBaseVNode("div",_hoisted_6,[createBaseVNode("div",_hoisted_7,[createBaseVNode("div",_hoisted_8,[createBaseVNode("div",_hoisted_9,[createBaseVNode("div",{class:normalizeClass(["jnpf-device-switch-item",{"jnpf-device-switch-item--active":"pc"===unref(x)}]),onClick:a[3]||(a[3]=e=>y.showType="pc")},[createVNode(_,{title:"PC"},{default:withCtx((()=>a[9]||(a[9]=[createBaseVNode("i",{class:"icon-ym icon-ym-pc"},null,-1)]))),_:1,__:[9]})],2),createBaseVNode("div",{class:normalizeClass(["jnpf-device-switch-item",{"jnpf-device-switch-item--active":"app"===unref(x)}]),onClick:a[4]||(a[4]=e=>y.showType="app")},[createVNode(_,{title:"APP"},{default:withCtx((()=>a[10]||(a[10]=[createBaseVNode("i",{class:"icon-ym icon-ym-mobile"},null,-1)]))),_:1,__:[10]})],2)])]),createBaseVNode("div",_hoisted_10,[createVNode(_,{title:unref(c)("common.undoText")},{default:withCtx((()=>[createVNode(p,{type:"text",class:"action-bar-btn",disabled:!unref(S),onClick:a[5]||(a[5]=e=>unref(F)(ne))},{default:withCtx((()=>a[11]||(a[11]=[createBaseVNode("i",{class:"icon-ym icon-ym-undo"},null,-1)]))),_:1,__:[11]},8,["disabled"])])),_:1},8,["title"]),createVNode(_,{title:unref(c)("common.redoText")},{default:withCtx((()=>[createVNode(p,{type:"text",class:"action-bar-btn",disabled:!unref($),onClick:a[6]||(a[6]=e=>unref(M)(ne))},{default:withCtx((()=>a[12]||(a[12]=[createBaseVNode("i",{class:"icon-ym icon-ym-redo"},null,-1)]))),_:1,__:[12]},8,["disabled"])])),_:1},8,["title"]),createVNode(f,{type:"vertical",class:"action-bar-divider"}),createVNode(_,{title:unref(c)("common.cleanText")},{default:withCtx((()=>[createVNode(p,{type:"text",class:"action-bar-btn",onClick:ue},{default:withCtx((()=>a[13]||(a[13]=[createBaseVNode("i",{class:"icon-ym icon-ym-clean"},null,-1)]))),_:1,__:[13]})])),_:1},8,["title"]),createVNode(_,{title:unref(c)("common.previewText")},{default:withCtx((()=>[createVNode(p,{type:"text",class:"action-bar-btn",onClick:_e},{default:withCtx((()=>a[14]||(a[14]=[createBaseVNode("i",{class:"icon-ym icon-ym-video-play"},null,-1)]))),_:1,__:[14]})])),_:1},8,["title"]),createVNode(AiChatPopover,{onConfirm:Be}),e.formInfo.isKit?createCommentVNode("",!0):(openBlock(),createBlock(_,{key:0,title:"存为模板"},{default:withCtx((()=>[createVNode(p,{type:"text",class:"action-bar-btn",onClick:De},{default:withCtx((()=>a[15]||(a[15]=[createBaseVNode("i",{class:"icon-ym icon-ym-save"},null,-1)]))),_:1,__:[15]})])),_:1}))])]),createBaseVNode("div",_hoisted_11,[withDirectives(createVNode(unref(ScrollContainer),null,{default:withCtx((()=>[createVNode(C,{class:"center-board-row",gutter:unref(B).gutter||15},{default:withCtx((()=>[createVNode(g,{colon:unref(B).colon,size:unref(B).size,layout:"top"===unref(B).labelPosition?"vertical":"horizontal",labelAlign:"right"===unref(B).labelPosition?"right":"left"},{default:withCtx((()=>[createVNode(unref(draggable),{class:"drawing-board",modelValue:unref(D),"onUpdate:modelValue":a[7]||(a[7]=e=>isRef(D)?D.value=e:null),animation:300,group:"componentsGroup","item-key":"renderKey",onEnd:re},{item:withCtx((({element:e,index:t})=>[(openBlock(),createBlock(_sfc_main$14,{key:e.renderKey,"drawing-list":unref(D),element:e,index:t,"active-id":unref(T),"form-conf":unref(B),onActiveItem:te,onCopyItem:ae,onDeleteItem:oe,mergeLeftColDisabled:R.value,mergeRightColDisabled:A.value,mergeWholeRowDisabled:j.value,mergeAboveRowDisabled:O.value,mergeBelowRowDisabled:K.value,mergeWholeColDisabled:E.value,undoMergeRowDisabled:Y.value,undoMergeColDisabled:P.value,deleteWholeColDisabled:z.value,deleteWholeRowDisabled:H.value,onAddRow:me,onAddCol:ve,onHandleTableSetting:ke,onHandleShowMenu:be,put:se,end:de},null,8,["drawing-list","element","index","active-id","form-conf","mergeLeftColDisabled","mergeRightColDisabled","mergeWholeRowDisabled","mergeAboveRowDisabled","mergeBelowRowDisabled","mergeWholeColDisabled","undoMergeRowDisabled","undoMergeColDisabled","deleteWholeColDisabled","deleteWholeRowDisabled"]))])),_:1},8,["modelValue"]),withDirectives(createBaseVNode("div",_hoisted_12,a[16]||(a[16]=[createBaseVNode("img",{src:_imports_0,class:"empty-img"},null,-1)]),512),[[vShow,!unref(D).length]])])),_:1},8,["colon","size","layout","labelAlign"])])),_:1},8,["gutter"])])),_:1},512),[[vShow,"pc"===unref(x)]]),withDirectives(createBaseVNode("div",_hoisted_13,[createBaseVNode("div",_hoisted_14,[createBaseVNode("div",_hoisted_15,[createVNode(unref(ScrollContainer),null,{default:withCtx((()=>[createVNode(C,{class:"center-board-row"},{default:withCtx((()=>[createVNode(g,{colon:!1,size:unref(B).size,layout:"top"===unref(B).labelPosition?"vertical":"horizontal",labelAlign:"right"===unref(B).labelPosition?"right":"left"},{default:withCtx((()=>[createVNode(unref(draggable),{class:"drawing-board",modelValue:unref(D),"onUpdate:modelValue":a[8]||(a[8]=e=>isRef(D)?D.value=e:null),animation:300,group:"componentsGroup","item-key":"renderKey",onEnd:re},{item:withCtx((({element:e,index:t})=>[(openBlock(),createBlock(_sfc_main$14,{showType:"app",key:e.renderKey,"drawing-list":unref(D),element:e,index:t,"active-id":unref(T),"form-conf":unref(B),onActiveItem:te,onCopyItem:ae,onDeleteItem:oe,put:unref(v),end:de},null,8,["drawing-list","element","index","active-id","form-conf","put"]))])),_:1},8,["modelValue"]),withDirectives(createBaseVNode("div",_hoisted_16,a[17]||(a[17]=[createBaseVNode("img",{src:_imports_0,class:"empty-img"},null,-1)]),512),[[vShow,!unref(D).length]])])),_:1},8,["size","layout","labelAlign"])])),_:1})])),_:1})])])],512),[[vShow,"app"===unref(x)]])])]),createVNode(_sfc_main$5,mergeProps({ref_key:"rightPanelRef",ref:h},L.value,{onRelationChange:fe,onAddTableComponent:we,onActiveFormItem:te}),null,16),createVNode(_sfc_main$4,{onRegister:unref(r),formConf:unref(B)},null,8,["onRegister","formConf"]),createVNode(_sfc_main$3,{onRegister:unref(s),onReload:xe},null,8,["onRegister"]),createVNode(_sfc_main$1,{onRegister:unref(u),onReload:Te},null,8,["onRegister"])],2)}}});export{_sfc_main as _,getKitList as a,copy as b,create as c,delKit as d,exportTpl as e,getInfo as g,update as u};
