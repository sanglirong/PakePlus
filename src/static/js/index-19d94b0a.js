import{di as e,d as t,u as s,e as n,o as r,g as o,a4 as i,j as a,l as p,m,p as l,k as u,q as c,ah as d}from"./index-920db443.js";import{u as _,B as j}from"./useTable-dc8c9d84.js";import{T as g}from"./TableAction-adbe36f2.js";import"./useForm-1d28ee0b.js";import"./componentMap-c91676b4.js";import"./visualDev-8f54ab4b.js";import"./index.vue_vue_type_script_setup_true_lang-69353133.js";import"./index-9c138ba5.js";import"./ArrowLeftOutlined-3fbf15bc.js";import"./log-2a5f2c26.js";import"./index-143f5813.js";import"./useWindowSizeFn-05f906e2.js";import"./index-999abbee.js";import"./Parser.vue_vue_type_script_setup_true_lang-6ddfe448.js";import"./Item.vue_vue_type_script_setup_true_lang-fef56f78.js";import"./Form.vue_vue_type_script_setup_true_lang-63005a4d.js";import"./createAsyncComponent-7e8f72ac.js";import"./DataLogList.vue_vue_type_script_setup_true_lang-c225eb8c.js";import"./index-0be8277c.js";import"./jquery-6353a699.js";import"./useDefineSetting-7df030ff.js";import"./CustomForm.vue_vue_type_script_setup_true_lang-1aa664f4.js";import"./config-06ca91cd.js";import"./upperFirst-2cd1a2f7.js";import"./useTabs-ceeccdba.js";import"./uniqBy-e868edd7.js";import"./sortable.esm-02d0fe44.js";import"./SettingOutlined-dd6150a2.js";import"./index-1cfe4e28.js";function y(t){return e.get({url:"/api/system/OnlineUser",data:t})}const f={class:"jnpf-content-wrapper"},w={class:"jnpf-content-wrapper-center"},v={class:"jnpf-content-wrapper-content"},x=t({name:"permission-userOnline",__name:"index",setup(t){const{createMessage:x,createConfirm:h}=d(),{t:I}=s(),[b,{reload:k,getSelectRowKeys:O}]=_({api:y,columns:[{title:"用户",dataIndex:"userName",width:120},{title:"所属组织",dataIndex:"organize",width:120},{title:"IP地址",dataIndex:"loginIPAddress",width:120},{title:"登录地点",dataIndex:"loginAddress",width:120},{title:"浏览器",dataIndex:"loginBrowser",width:120},{title:"操作系统",dataIndex:"loginSystem",width:120},{title:"登录时间",dataIndex:"loginTime",width:150,format:"date|YYYY-MM-DD HH:mm:ss"}],rowKey:"userId",useSearchForm:!0,formConfig:{schemas:[{field:"keyword",label:I("common.keyword"),component:"Input",componentProps:{placeholder:I("common.enterKeyword"),submitOnPressEnter:!0}}]},actionColumn:{width:80,title:"操作",dataIndex:"action"},rowSelection:{type:"checkbox"},clickToRowSelect:!1});function T(e){return[{label:"强制下线",color:"error",modelConfirm:{content:"确定要注销该账号?",onOk:S.bind(null,e.userId)}}]}function C(){if(!O().length)return x.error(I("common.selectDataTip"));h({iconType:"warning",title:I("common.tipTitle"),content:"您确定要强制下线这些用户吗, 是否继续?",onOk:()=>{var t;(t=O(),e.delete({url:"/api/system/OnlineUser",data:{ids:t}})).then((e=>{x.success(e.msg),k()}))}})}function S(t){(function(t){return e.delete({url:`/api/system/OnlineUser/${t}`})})(t).then((e=>{x.success(e.msg),k()}))}return(e,t)=>{const s=n("a-button");return r(),o("div",f,[i("div",w,[i("div",v,[a(u(j),{onRegister:u(b)},{tableTitle:p((()=>[a(s,{type:"error",preIcon:"icon-ym icon-ym-delete",onClick:C},{default:p((()=>t[0]||(t[0]=[m("强制下线")]))),_:1,__:[0]})])),bodyCell:p((({column:e,record:t})=>["action"===e.key?(r(),l(u(g),{key:0,actions:T(t)},null,8,["actions"])):c("",!0)])),_:1},8,["onRegister"])])])])}}});export{x as default};
