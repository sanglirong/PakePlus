import{u as e,B as t}from"./useTable-dc8c9d84.js";import{T as a}from"./TableAction-adbe36f2.js";import{a as i,j as n,d as s}from"./table-3a9e3e55.js";import{u as o}from"./index-143f5813.js";import{d as r,ad as p,u as d,aD as l,a7 as u,e as c,o as m,g as y,a4 as k,j,l as _,m as f,t as v,k as g,F as x,p as w,co as I,ah as D}from"./index-920db443.js";import{_ as T}from"./index.vue_vue_type_script_setup_true_lang-4b369dea.js";import"./useForm-1d28ee0b.js";import"./componentMap-c91676b4.js";import"./visualDev-8f54ab4b.js";import"./index.vue_vue_type_script_setup_true_lang-69353133.js";import"./index-9c138ba5.js";import"./ArrowLeftOutlined-3fbf15bc.js";import"./log-2a5f2c26.js";import"./index-999abbee.js";import"./Parser.vue_vue_type_script_setup_true_lang-6ddfe448.js";import"./Item.vue_vue_type_script_setup_true_lang-fef56f78.js";import"./Form.vue_vue_type_script_setup_true_lang-63005a4d.js";import"./createAsyncComponent-7e8f72ac.js";import"./DataLogList.vue_vue_type_script_setup_true_lang-c225eb8c.js";import"./index-0be8277c.js";import"./jquery-6353a699.js";import"./useDefineSetting-7df030ff.js";import"./CustomForm.vue_vue_type_script_setup_true_lang-1aa664f4.js";import"./config-06ca91cd.js";import"./upperFirst-2cd1a2f7.js";import"./useTabs-ceeccdba.js";import"./uniqBy-e868edd7.js";import"./useWindowSizeFn-05f906e2.js";import"./sortable.esm-02d0fe44.js";import"./SettingOutlined-dd6150a2.js";import"./index-1cfe4e28.js";const h={class:"jnpf-content-wrapper"},b={class:"jnpf-content-wrapper-center"},C={class:"jnpf-content-wrapper-content"},Y={key:0},M={key:1},L={key:2},F={key:0},R={key:1},A={key:2},S={key:3},U=r({name:"extend-tableDemo-redactTable",__name:"index",setup(r){const U=p({industryTypeList:[],tabClickId:""}),{t:H}=d(),N=l(),{createMessage:O,createConfirm:P}=D(),[B,{openModal:E}]=o(),[q,{reload:z}]=e({api:i,columns:[{title:"项目名称",dataIndex:"projectName",width:200},{title:"项目编码",dataIndex:"projectCode",width:160},{title:"项目类型",dataIndex:"projectType",width:120},{title:"项目阶段",dataIndex:"projectPhase",width:120},{title:"客户名称",dataIndex:"customerName",width:200},{title:"负责人",dataIndex:"principal",width:80},{title:"立项人",dataIndex:"jackStands",width:80},{title:"交互时间",dataIndex:"interactionDate",width:100},{title:"费用金额",dataIndex:"costAmount",width:100},{title:"已用金额",dataIndex:"tunesAmount",width:100},{title:"预计收入",dataIndex:"projectedIncome",width:100},{title:"登记人",dataIndex:"registrant",width:80},{title:"登记时间",dataIndex:"registerDate",width:150},{title:"备注",dataIndex:"description",width:100},{title:"操作",dataIndex:"action",width:100}],useSearchForm:!0,formConfig:{schemas:[{field:"keyword",label:H("common.keyword"),component:"Input",componentProps:{placeholder:H("common.enterKeyword"),submitOnPressEnter:!0}}]}});function K(e){U.tabClickId=e.id}function G(e){n(e).then((e=>{O.success(e.msg),U.tabClickId=""}))}function J(e){P({iconType:"warning",title:H("common.tipTitle"),content:H("common.tipTitle"),onOk:()=>{s(e).then((e=>{z(),O.success(e.msg)}))}})}function Q(e){return[{label:"保存",onClick:G.bind(null,e)},{label:"删除",color:"error",onClick:J.bind(null,e.id)}]}return u((()=>async function(){U.industryTypeList=await N.getDictionaryData("IndustryType")}())),(e,i)=>{const n=c("a-button"),s=c("jnpf-date-picker"),o=c("jnpf-select"),r=c("a-input");return m(),y("div",h,[k("div",b,[k("div",C,[j(g(t),{onRegister:g(q),onRowClick:K},{tableTitle:_((()=>[j(n,{type:"primary",preIcon:"icon-ym icon-ym-btn-add",onClick:i[0]||(i[0]=e=>function(e=""){E(!0,{id:e,industryTypeList:U.industryTypeList})}())},{default:_((()=>[f(v(g(H)("common.addText")),1)])),_:1})])),bodyCell:_((({column:e,record:t,index:i})=>["INDEX"===e.flag?(m(),y("span",Y,v(i+1),1)):(m(),y(x,{key:1},[U.tabClickId==t.id?(m(),y(x,{key:0},["interactionDate"===e.key?(m(),w(s,{key:0,value:t[e.key],"onUpdate:value":a=>t[e.key]=a,format:"YYYY-MM-DD",allowClear:""},null,8,["value","onUpdate:value"])):"registrant"===e.key?(m(),y("span",M,v(t[e.key]),1)):"registerDate"===e.key?(m(),y("span",L,v(t[e.key]?g(I)(t[e.key]).format("YYYY-MM-DD HH:mm:ss"):""),1)):"projectType"===e.key?(m(),w(o,{key:3,value:t[e.key],"onUpdate:value":a=>t[e.key]=a,options:U.industryTypeList},null,8,["value","onUpdate:value","options"])):"action"===e.key?(m(),w(g(a),{key:4,actions:Q(t)},null,8,["actions"])):(m(),w(r,{key:5,value:t[e.key],"onUpdate:value":a=>t[e.key]=a},null,8,["value","onUpdate:value"]))],64)):(m(),y(x,{key:1},["interactionDate"===e.key?(m(),y("span",F,v(t[e.key]?g(I)(t[e.key]).format("YYYY-MM-DD"):""),1)):"registerDate"===e.key?(m(),y("span",R,v(t[e.key]?g(I)(t[e.key]).format("YYYY-MM-DD HH:mm:ss"):""),1)):"projectType"===e.key?(m(),y("span",A,v(U.industryTypeList.filter((e=>e.id==t.projectType))[0]?U.industryTypeList.filter((e=>e.id==t.projectType))[0].fullName:""),1)):(m(),y("span",S,v(t[e.key]),1))],64))],64))])),_:1},8,["onRegister"])])]),j(T,{onRegister:g(B),onReload:g(z)},null,8,["onRegister","onReload"])])}}});export{U as default};
