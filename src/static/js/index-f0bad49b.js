import{d as e,aD as o,u as t,aB as n,bs as i,gq as r,a7 as a,e as s,o as l,g as p,a4 as d,j as u,l as m,m as c,t as _,k as g,p as f,q as y,gP as b,gQ as j,ah as k}from"./index-920db443.js";import{u as v,B as x}from"./useTable-dc8c9d84.js";import{T as h}from"./TableAction-adbe36f2.js";import{u as w}from"./index-143f5813.js";import{u as R}from"./index-9c138ba5.js";import{_ as I}from"./Form.vue_vue_type_script_setup_true_lang-5c1fb645.js";import{_ as M}from"./ResetPassword.vue_vue_type_script_setup_true_lang-0d75aaf4.js";import{_ as T}from"./SocialsBind.vue_vue_type_script_setup_true_lang-1a2a2d39.js";import{_ as C}from"./ExportModal.vue_vue_type_script_setup_true_lang-295b5f0e.js";import{_ as P}from"./ImportModal.vue_vue_type_script_setup_true_lang-772d2a6b.js";import{_ as z}from"./WorkHandoverModal.vue_vue_type_style_index_0_lang-b1cdce09.js";import S from"./Permission-c66b6a38.js";import"./useForm-1d28ee0b.js";import"./componentMap-c91676b4.js";import"./visualDev-8f54ab4b.js";import"./index.vue_vue_type_script_setup_true_lang-69353133.js";import"./index-999abbee.js";import"./ArrowLeftOutlined-3fbf15bc.js";import"./log-2a5f2c26.js";import"./Parser.vue_vue_type_script_setup_true_lang-6ddfe448.js";import"./Item.vue_vue_type_script_setup_true_lang-fef56f78.js";import"./Form.vue_vue_type_script_setup_true_lang-63005a4d.js";import"./createAsyncComponent-7e8f72ac.js";import"./DataLogList.vue_vue_type_script_setup_true_lang-c225eb8c.js";import"./index-0be8277c.js";import"./jquery-6353a699.js";import"./useDefineSetting-7df030ff.js";import"./CustomForm.vue_vue_type_script_setup_true_lang-1aa664f4.js";import"./config-06ca91cd.js";import"./upperFirst-2cd1a2f7.js";import"./useTabs-ceeccdba.js";import"./uniqBy-e868edd7.js";import"./useWindowSizeFn-05f906e2.js";import"./sortable.esm-02d0fe44.js";import"./SettingOutlined-dd6150a2.js";import"./index-1cfe4e28.js";import"./formValidate-c8ab8d29.js";import"./socialsUser-930d0346.js";import"./config-900ef1e2.js";import"./import-e198d900.js";import"./tip-b30e67af.js";import"./permissionGroup-129512c4.js";const F={class:"jnpf-content-wrapper"},D={class:"jnpf-content-wrapper-center"},N={class:"jnpf-content-wrapper-content"},A=e({name:"permission-user",__name:"index",setup(e){const{createMessage:A}=k(),O=o(),{t:q}=t(),B=n(),H=i(),[L,{openModal:Y}]=w(),[E,{openModal:Q}]=w(),[G,{openModal:K}]=w(),[V,{openModal:W}]=w(),[J,{openPopup:U}]=R(),[X,{openPopup:Z}]=R(),[$,{openPopup:ee}]=R(),[oe,{reload:te,getForm:ne,getFetchParams:ie}]=v({api:r,beforeFetch:e=>(e.organizeId=e.organizeTree?.length?e.organizeTree[e.organizeTree.length-1]:"",delete e.organizeTree,e),columns:[{title:"账号",dataIndex:"account",width:100},{title:"姓名",dataIndex:"realName",width:100},{title:"性别",dataIndex:"gender",width:90,align:"center"},{title:"手机",dataIndex:"mobilePhone",width:120},{title:"所属组织",dataIndex:"organize"},{title:"创建时间",dataIndex:"creatorTime",width:150,format:"date|YYYY-MM-DD HH:mm:ss"},{title:"排序",dataIndex:"sortCode",width:70,align:"center"},{title:"状态",dataIndex:"enabledMark",width:70,align:"center"}],useSearchForm:!0,formConfig:{schemas:[{field:"keyword",label:q("common.keyword"),component:"Input",componentProps:{placeholder:q("common.enterKeyword"),submitOnPressEnter:!0}},{field:"organizeTree",label:"所属组织",component:"OrganizeSelect",componentProps:{placeholder:"请选择",auth:!0}},{field:"gender",label:"性别",component:"Select",componentProps:{placeholder:"请选择",fieldNames:{value:"enCode"}}},{field:"enabledMark",label:"状态",component:"Select",componentProps:{placeholder:"请选择",options:[{fullName:"启用",id:1},{fullName:"禁用",id:0},{fullName:"锁定",id:2}]}}]},actionColumn:{width:150,title:"操作",dataIndex:"action"}});function re(e){return[{label:q("common.editText"),onClick:le.bind(null,e.id)},{label:q("common.delText"),color:"error",modelConfirm:{onOk:pe.bind(null,e.id)}}]}function ae(e){return[{label:"重置密码",onClick:de.bind(null,e.id,e.account)},{label:"解除锁定",ifShow:2===e.enabledMark,modelConfirm:{title:"解除锁定",content:"此操作将解除该账户锁定, 是否继续?",onOk:ce.bind(null,e.id)}},{label:"绑定管理",ifShow:!!H.get("useSocials"),onClick:ue.bind(null,e.id)},{disabled:1==e.enabledMark||2==e.enabledMark,label:"工作交接",onClick:me.bind(null,e)},{label:"查看权限",onClick:se.bind(null,e.id,e.realName)}]}function se(e,o){ee(!0,{id:e,fullName:o,objectType:"user"})}function le(e=""){const o=ne().getFieldsValue().organizeTree||[];U(!0,{id:e,organizeIdTree:o})}function pe(e){b(e).then((e=>{A.success(e.msg),te()}))}function de(e,o){Y(!0,{id:e,account:o})}function ue(e){Z(!0,{id:e})}function me(e){W(!0,{userInfo:e})}function ce(e){j(e).then((e=>{A.success(e.msg),te()}))}function _e(){const e={...ie(),organizeId:ie().organizeId||"",keyword:ie().keyword||""};Q(!0,{listQuery:e})}function ge(){K(!0,{})}function fe(){B.push("/system/sysConfig?type=1")}return a((()=>{!async function(){const e=await O.getDictionaryData("sex");ne().updateSchema({field:"gender",componentProps:{options:e}})}()})),(e,o)=>{const t=s("a-button"),n=s("a-tag");return l(),p("div",F,[d("div",D,[d("div",N,[u(g(x),{onRegister:g(oe)},{tableTitle:m((()=>[u(t,{type:"primary",preIcon:"icon-ym icon-ym-btn-add",onClick:o[0]||(o[0]=e=>le())},{default:m((()=>[c(_(g(q)("common.addText")),1)])),_:1}),u(t,{type:"link",onClick:_e},{default:m((()=>[o[1]||(o[1]=d("i",{class:"icon-ym icon-ym-btn-download button-preIcon"},null,-1)),c(_(g(q)("common.exportText")),1)])),_:1,__:[1]}),u(t,{type:"link",onClick:ge},{default:m((()=>[o[2]||(o[2]=d("i",{class:"icon-ym icon-ym-btn-upload button-preIcon"},null,-1)),c(_(g(q)("common.importText")),1)])),_:1,__:[2]}),u(t,{type:"link",onClick:fe},{default:m((()=>[o[3]||(o[3]=d("i",{class:"icon-ym icon-ym-synForThird button-preIcon"},null,-1)),c(_(g(q)("common.syncText")),1)])),_:1,__:[3]})])),bodyCell:m((({column:e,record:o})=>["enabledMark"===e.key?(l(),f(n,{key:0,color:1==o.enabledMark?"success":2==o.enabledMark?"warning":"error"},{default:m((()=>[c(_(1==o.enabledMark?"启用":2==o.enabledMark?"锁定":"禁用"),1)])),_:2},1032,["color"])):y("",!0),"action"!==e.key||o.isAdministrator?y("",!0):(l(),f(g(h),{key:1,actions:re(o),dropDownActions:ae(o)},null,8,["actions","dropDownActions"]))])),_:1},8,["onRegister"])])]),u(I,{onRegister:g(J),onReload:g(te)},null,8,["onRegister","onReload"]),u(M,{onRegister:g(L)},null,8,["onRegister"]),u(T,{onRegister:g(X)},null,8,["onRegister"]),u(C,{onRegister:g(E)},null,8,["onRegister"]),u(P,{onRegister:g(G),onReload:g(te)},null,8,["onRegister","onReload"]),u(z,{onRegister:g(V),onReload:g(te)},null,8,["onRegister","onReload"]),u(S,{onRegister:g($)},null,8,["onRegister"])])}}});export{A as default};
