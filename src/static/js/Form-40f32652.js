import{b as e,B as s}from"./index-143f5813.js";import{d as l,ad as a,a0 as n,e as o,o as t,p as r,l as i,a4 as u,g as c,F as f,h as d,k as p,j as v,m as _,V as m,a5 as g}from"./index-920db443.js";import"./useWindowSizeFn-05f906e2.js";import"./log-2a5f2c26.js";const C=g(l({__name:"Form",emits:["register","refresh"],setup(l,{emit:g}){const C=g,b=a({configureList:[],beforeConversionList:[],convertRuleMap:{}}),{configureList:L,beforeConversionList:y}=n(b),[h,{closeModal:k}]=e((function(e){b.configureList=e.configureList||[],b.beforeConversionList=e.beforeConversionList||[],b.convertRuleMap=e.convertRuleMap||[]}));async function j(){k(),C("refresh",b.configureList)}function R(){b.configureList.push({beforeConversion:null,afterConversion:null})}return(e,l)=>{const a=o("a-col"),n=o("jnpf-select"),g=o("a-select-option"),C=o("a-select"),k=o("a-button"),w=o("a-row");return t(),r(p(s),m({class:"add-rules-modal"},e.$attrs,{onRegister:p(h),title:"规则配置",showOkBtn:"",onOk:j,"destroy-on-close":""}),{default:i((()=>[l[4]||(l[4]=u("div",{class:"my-20px"}," 设置数据库之间的字段转换规则，规则设置错误会导致同步的功能数据转换失败 ",-1)),(t(!0),c(f,null,d(p(L),((e,s)=>(t(),r(w,{key:s,gutter:10,class:"mb-10px"},{default:i((()=>[v(a,{span:3,class:"rule-cell"},{default:i((()=>l[0]||(l[0]=[_("字段类型")]))),_:1,__:[0]}),v(a,{span:7,class:"rule-cell"},{default:i((()=>[v(n,{class:"w-full",value:e.beforeConversion,"onUpdate:value":s=>e.beforeConversion=s,placeholder:"请选择",options:p(y),fieldNames:{label:"val",value:"val"},onChange:e=>function(e,s){b.configureList[s].afterConversion=null,b.configureList[s].afterConversionList=b.convertRuleMap[e]}(e,s)},null,8,["value","onUpdate:value","options","onChange"])])),_:2},1024),v(a,{span:2,class:"rule-cell mid"},{default:i((()=>l[1]||(l[1]=[_("转换")]))),_:1,__:[1]}),v(a,{span:3,class:"rule-cell"},{default:i((()=>l[2]||(l[2]=[_("字段类型")]))),_:1,__:[2]}),v(a,{span:7,class:"rule-cell"},{default:i((()=>[v(C,{class:"w-full",value:e.afterConversion,"onUpdate:value":s=>e.afterConversion=s,placeholder:"请选择"},{default:i((()=>[(t(!0),c(f,null,d(e.afterConversionList,(e=>(t(),r(g,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:2},1032,["value","onUpdate:value"])])),_:2},1024),v(a,{span:2,class:"rule-cell"},{default:i((()=>[v(k,{type:"danger",preIcon:"icon-ym icon-ym-nav-close",onClick:e=>function(e){b.configureList.splice(e,1)}(s)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)))),128)),u("div",{class:"table-add-action",onClick:R},[v(k,{type:"link",preIcon:"icon-ym icon-ym-btn-add"},{default:i((()=>l[3]||(l[3]=[_("新增规则")]))),_:1,__:[3]})])])),_:1,__:[4]},16,["onRegister"])}}}),[["__scopeId","data-v-cc82931a"]]);export{C as default};
