import{u as e,B as t}from"./useTable-dc8c9d84.js";import{T as o}from"./TableAction-adbe36f2.js";import{b as s,d as n,e as a}from"./sendConfig-5e58278e.js";import{u as i}from"./index-9c138ba5.js";import{d as r,u as p,aD as l,ad as m,a7 as d,e as u,o as c,g as _,a4 as g,j as f,l as j,m as y,t as b,k as v,p as x,q as D,F as T,h as k,am as w,ah as F,a5 as h}from"./index-920db443.js";import{_ as C}from"./Form.vue_vue_type_script_setup_true_lang-e3038a92.js";import{_ as S}from"./Detail.vue_vue_type_script_setup_true_lang-abf0dc60.js";import I from"./TestSend-61e051d5.js";import"./useForm-1d28ee0b.js";import"./componentMap-c91676b4.js";import"./visualDev-8f54ab4b.js";import"./index.vue_vue_type_script_setup_true_lang-69353133.js";import"./index-143f5813.js";import"./useWindowSizeFn-05f906e2.js";import"./log-2a5f2c26.js";import"./index-999abbee.js";import"./ArrowLeftOutlined-3fbf15bc.js";import"./Parser.vue_vue_type_script_setup_true_lang-6ddfe448.js";import"./Item.vue_vue_type_script_setup_true_lang-fef56f78.js";import"./Form.vue_vue_type_script_setup_true_lang-63005a4d.js";import"./createAsyncComponent-7e8f72ac.js";import"./DataLogList.vue_vue_type_script_setup_true_lang-c225eb8c.js";import"./index-0be8277c.js";import"./jquery-6353a699.js";import"./useDefineSetting-7df030ff.js";import"./CustomForm.vue_vue_type_script_setup_true_lang-1aa664f4.js";import"./config-06ca91cd.js";import"./upperFirst-2cd1a2f7.js";import"./useTabs-ceeccdba.js";import"./uniqBy-e868edd7.js";import"./sortable.esm-02d0fe44.js";import"./SettingOutlined-dd6150a2.js";import"./index-1cfe4e28.js";import"./formValidate-c8ab8d29.js";import"./TemplateForm.vue_vue_type_script_setup_true_lang-2446753d.js";import"./TemplateModal.vue_vue_type_script_setup_true_lang-60c125c7.js";import"./msgTemplate-ce5c0fa7.js";import"./accountConfig-5422c027.js";import"./Detail.vue_vue_type_script_setup_true_lang-e8c6d5aa.js";import"./MsgTemplateDetail-001aea8e.js";import"./SendResults-c5e29036.js";const M={class:"jnpf-content-wrapper"},R={class:"jnpf-content-wrapper-center"},P={class:"jnpf-content-wrapper-content"},E=h(r({name:"msgCenter-sendConfig",__name:"index",setup(r){const{t:h}=p(),E=l(),N=m(["","#C9D6F4","#DAF5DD","#FDE7DD","#D1E8FF","#DEECF4","#FFF5F8","#ECE5FF"]),{createMessage:Y}=F(),[A,{openPopup:O}]=i(),[H,{openPopup:q}]=i(),[L,{openPopup:B}]=i(),[z,{reload:K,getForm:G}]=e({api:s,columns:[{title:"名称",dataIndex:"fullName",width:180},{title:"编码",dataIndex:"enCode",width:150},{title:"消息来源",dataIndex:"messageSource",width:100},{title:"模板类型",dataIndex:"category",width:100,customRender:({record:e})=>"1"==e.templateType?"系统模板":"自定义模板"},{title:"消息类型",dataIndex:"messageType",width:380},{title:"创建人",dataIndex:"creatorUser",width:120},{title:"创建时间",dataIndex:"creatorTime",width:150,format:"date|YYYY-MM-DD HH:mm:ss"},{title:"最后修改时间",dataIndex:"lastModifyTime",width:150,format:"date|YYYY-MM-DD HH:mm:ss"},{title:"排序",dataIndex:"sortCode",width:70,align:"center"},{title:"状态",dataIndex:"enabledMark",width:70,align:"center"}],useSearchForm:!0,formConfig:{schemas:[{field:"keyword",label:h("common.keyword"),component:"Input",componentProps:{placeholder:h("common.enterKeyword"),submitOnPressEnter:!0}},{field:"messageSource",label:"消息来源",component:"Select",componentProps:{placeholder:"请选择"}},{field:"templateType",label:"模板类型",component:"Select",componentProps:{placeholder:"请选择",options:[{fullName:"系统模板",id:1},{fullName:"自定义模板",id:0}]}},{field:"enabledMark",label:"状态",component:"Select",componentProps:{placeholder:"请选择",options:[{fullName:"启用",id:1},{fullName:"禁用",id:0}]}}]},actionColumn:{width:150,title:"操作",dataIndex:"action"}});function J(e){return[{label:h("common.editText"),disabled:1==e.templateType,onClick:U.bind(null,e.id)},{label:h("common.delText"),color:"error",disabled:1==e.templateType,modelConfirm:{onOk:Z.bind(null,e.id)}}]}function Q(e){return[{label:h("common.copyText"),modelConfirm:{content:"您确定要复制该功能模板, 是否继续?",onOk:V.bind(null,e.id)}},{label:"测试发送",onClick:X.bind(null,e.id)},{label:h("common.detailText"),onClick:W.bind(null,e)}]}function U(e=""){O(!0,{id:e})}function V(e){n(e).then((e=>{Y.success(e.msg),K()}))}function W(e){q(!0,{id:e.id,messageSourceName:e.messageSource})}function X(e){B(!0,{id:e})}function Z(e){a(e).then((e=>{Y.success(e.msg),K()}))}return d((()=>async function(){let e=await E.getDictionaryData("msgSourceType");e.map((e=>e.id=e.enCode)),G().updateSchema([{field:"messageSource",componentProps:{options:e}}])}())),(e,s)=>{const n=u("a-button"),a=u("a-tag");return c(),_("div",M,[g("div",R,[g("div",P,[f(v(t),{onRegister:v(z)},{tableTitle:j((()=>[f(n,{type:"primary",preIcon:"icon-ym icon-ym-btn-add",onClick:s[0]||(s[0]=e=>U())},{default:j((()=>[y(b(v(h)("common.addText")),1)])),_:1})])),bodyCell:j((({column:e,record:t})=>["enabledMark"===e.key?(c(),x(a,{key:0,color:1==t.enabledMark?"success":"error"},{default:j((()=>[y(b(1==t.enabledMark?"启用":"禁用"),1)])),_:2},1032,["color"])):D("",!0),"messageType"===e.key?(c(!0),_(T,{key:1},k(t.messageType,((e,t)=>(c(),_("span",{class:"my-span-tag",style:w({background:N[e.type]}),key:t},b(e.fullName),5)))),128)):D("",!0),"action"===e.key?(c(),x(v(o),{key:2,actions:J(t),dropDownActions:Q(t)},null,8,["actions","dropDownActions"])):D("",!0)])),_:1},8,["onRegister"])])]),f(C,{onRegister:v(A),onReload:v(K)},null,8,["onRegister","onReload"]),f(S,{onRegister:v(H)},null,8,["onRegister"]),f(I,{onRegister:v(L)},null,8,["onRegister"])])}}}),[["__scopeId","data-v-1cfaa7f1"]]);export{E as default};
