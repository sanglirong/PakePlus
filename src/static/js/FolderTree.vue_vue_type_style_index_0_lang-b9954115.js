import{g as e,m as t}from"./document-763aa4ad.js";import{b as a,B as s}from"./index-143f5813.js";import{d as n,r,ad as o,a0 as d,n as l,k as i,o as A,p as c,l as g,a4 as m,j as f,e1 as p,m as h,t as u,V as D,ah as I}from"./index-920db443.js";const S="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAABHNCSVQICAgIfAhkiAAAAf1JREFUaEPtmkFLAkEUx9/LLdKCKDCtS0pBm5lgJV06eK+ghegU4rFbee0Q+g3q2KnOXfQTRB3tUh0sj9s36Bpl066gKSko7rxdnLc3cXz/+c377TDgICj2oGK8wMDD3nG1OyyKegR8owuOdrn29Y5G1XS05gDFmh0WxVgWcOR6gFrdfypqBhpvJSm1+yzaArxqAqKz3W1ORpi4X4n2OTcpw/+AS3EhJaFRVPwk0Xh9lprRQ3FCYJFDo3LRw5ykDqEDnpgDSJxIhflXXID9mt5gaKfQ+I4O2E5MnQNoAVpoO01ADsO7dbtogRcPAGY36YFBFDC0l6cHno4B6BmFgLVxS+v6QhM/bnXYxlw+ApiJKwQcXAdYOvQIcMA6e2hyzx+g+QHC23TAfmvfGJvvsGndrQiYlAxLh9meFMxcYfTsuH2XftSHlNbC9CcecO02zcBuGSc9lztsHzf5HZYuGl0AK81K09lGksRKs9IkotGFsNKsNJ1tJEmsNCtNIhpdCCvNStPZRpLESrPSJKLRhbDSrDSdbSRJrDQrTSIaXYhv6hI3yqfq/JkmoIBb1bziwGXdusQFku5a0tnbMalLh7PWYDm3ad3kFeIFxj7TmDQ/2pS2P4gn6770N0TcnJ/T2Ziq3rfWVPtGvNOr68V63GEvdsXJOXGHnVxNL9b6BRAzEEztm3evAAAAAElFTkSuQmCC",x={class:"h-350px"},F=n({__name:"FolderTree",emits:["register","reload"],setup(n,{emit:F}){const R=F,{createMessage:k}=I(),[K,{changeOkLoading:C,closeModal:O}]=a((function(t){E.ids=t.ids,E.toId="0"!=t.parentId?t.parentId:"-1",E.loading=!0,e(E.ids).then((e=>{E.treeData=e.data.list,E.loading=!1,l((()=>{(function(){const e=i(w);if(!e)throw new Error("tree is null!");return e})().setSelectedKeys([E.toId])}))}))})),w=r(null),E=o({treeData:[],loading:!1,ids:"",toId:""}),{treeData:G,loading:J}=d(E);function Q(e){if(!e.length)return E.toId="";E.toId!=e[0]&&(E.toId=e[0])}function N(){const e="-1"==E.toId?"0":E.toId;if(!e)return k.warning("请选择移动目录");C(!0),t(e,E.ids).then((e=>{k.success(e.msg),C(!1),O(),R("reload")})).catch((()=>{C(!1)}))}return(e,t)=>(A(),c(i(s),D(e.$attrs,{onRegister:i(K),title:"移动",width:450,onOk:N,class:"jnpf-tree-modal",okText:"移动到此"}),{default:g((()=>[m("div",x,[f(i(p),{class:"tree-main",treeData:i(G),defaultExpandAll:"",onSelect:Q,ref_key:"treeRef",ref:w,loading:i(J)},{title:g((({fullName:e})=>[t[0]||(t[0]=m("img",{src:S,class:"w-16px h-16px mr-6px"},null,-1)),h(u(e),1)])),_:1},8,["treeData","loading"])])])),_:1},16,["onRegister"]))}});export{F as _,S as f};
