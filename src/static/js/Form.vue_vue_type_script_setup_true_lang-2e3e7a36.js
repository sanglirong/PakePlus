import{b as e,u as o,B as a}from"./index-143f5813.js";import{u as r,B as t}from"./useForm-1d28ee0b.js";import"./componentMap-c91676b4.js";import{d as s,ad as l,M as n,u as d,e as i,o as m,p,l as u,j as c,k as g,a4 as f,V as b,ah as h}from"./index-920db443.js";import{g as P,u as w,c as F}from"./accountConfig-5422c027.js";import{f as _}from"./formValidate-c8ab8d29.js";import{_ as x}from"./Test.vue_vue_type_script_setup_true_lang-0985e5ff.js";const v=s({__name:"Form",emits:["register","reload"],setup(s,{emit:v}){const M=l({dataForm:{}}),S=[{field:"fullName",label:"名称",component:"Input",componentProps:{placeholder:"请输入",maxlength:50},rules:[{required:!0,trigger:"blur",message:"必填"}]},{field:"enCode",label:"编码",component:"Input",componentProps:{placeholder:"请输入",maxlength:50},rules:[{required:!0,trigger:"blur",message:"必填"},{validator:_("enCode"),trigger:"blur"}]},{field:"addressorName",label:"发件人昵称",component:"Input",componentProps:{placeholder:"请输入"},rules:[{required:!0,trigger:"blur",message:"必填"}]},{field:"smtpServer",label:"SMTP服务器",component:"Input",componentProps:{placeholder:"请输入"},rules:[{required:!0,trigger:"blur",message:"必填"}]},{field:"smtpPort",label:"SMTP端口",component:"InputNumber",defaultValue:25,componentProps:{min:0,max:999999,placeholder:"请输入"},rules:[{required:!0,trigger:"blur",message:"必填",type:"number"}]},{field:"sslLink",label:"SSL安全连接",component:"Switch",defaultValue:0},{field:"smtpUser",label:"SMTP用户名",component:"Input",componentProps:{placeholder:"请输入"},rules:[{required:!0,trigger:"blur",message:"必填"}]},{field:"smtpPassword",label:"SMTP密码",component:"Input",slot:"smtpPassword",componentProps:{placeholder:"请输入"},rules:[{required:!0,trigger:"blur",message:"必填"}]},{field:"sortCode",label:"排序",component:"InputNumber",defaultValue:0,componentProps:{min:"0",max:"999999",placeholder:"请输入"}},{field:"enabledMark",label:"状态",component:"Switch",defaultValue:1},{field:"description",label:"说明",component:"Textarea",componentProps:{rows:3,placeholder:"请输入"}}],j=n((()=>M.dataForm.id?k("common.editText"):k("common.addText"))),I=v,{createMessage:T}=h(),{t:k}=d(),[q,{setFieldsValue:V,validate:y,resetFields:R}]=r({labelWidth:100,schemas:S}),[C,{closeModal:L,changeLoading:N,changeOkLoading:B}]=e((function(e){R(),M.dataForm.id=e.id,M.dataForm.id&&(N(!0),P(M.dataForm.id).then((e=>{const o=e.data;M.dataForm=o,V(o),N(!1)})))})),[O,{openModal:U}]=o();async function A(){const e=await y();if(!e)return;B(!0);const o={...e,id:M.dataForm.id,type:2};(M.dataForm.id?w:F)(o).then((e=>{T.success(e.msg),B(!1),L(),I("reload")})).catch((()=>{B(!1)}))}async function W(){const e=await y();if(!e)return;const o={...e,id:M.dataForm.id,type:2};U(!0,o)}return(e,o)=>{const r=i("a-input-password");return m(),p(g(a),b(e.$attrs,{onRegister:g(C),title:j.value,showOkBtn:"",onOk:A}),{default:u((()=>[c(g(t),{onRegister:g(q)},{smtpPassword:u((({model:e,field:o})=>[c(r,{value:e[o],"onUpdate:value":a=>e[o]=a,placeholder:"请输入","show-password":""},{addonAfter:u((()=>[f("span",{class:"cursor-pointer",onClick:W},"测试")])),_:2},1032,["value","onUpdate:value"])])),_:1},8,["onRegister"]),c(x,{onRegister:g(O)},null,8,["onRegister"])])),_:1},16,["onRegister","title"])}}});export{v as _};
