import{a as e,d as t,c as o,r as n}from"./dataReport-8cd046d3.js";import{u as r,B as a}from"./useTable-dc8c9d84.js";import{T as i}from"./TableAction-adbe36f2.js";import{d as s,aD as l,u as m,aw as p,r as d,a7 as c,e as u,o as f,g as _,a4 as j,j as y,l as g,m as b,t as v,k as x,p as w,q as h,dD as k,ea as M,ah as C}from"./index-920db443.js";import{u as D}from"./index-143f5813.js";import{u as I}from"./index-9c138ba5.js";import{P as S}from"./index-c37d2476.js";import{_ as T}from"./Form.vue_vue_type_style_index_0_lang-f3e9c4bd.js";import{_ as R}from"./PreviewPopup.vue_vue_type_style_index_0_lang-de73dab5.js";import"./useForm-1d28ee0b.js";import"./componentMap-c91676b4.js";import"./visualDev-8f54ab4b.js";import"./index.vue_vue_type_script_setup_true_lang-69353133.js";import"./index-999abbee.js";import"./ArrowLeftOutlined-3fbf15bc.js";import"./log-2a5f2c26.js";import"./Parser.vue_vue_type_script_setup_true_lang-6ddfe448.js";import"./Item.vue_vue_type_script_setup_true_lang-fef56f78.js";import"./Form.vue_vue_type_script_setup_true_lang-63005a4d.js";import"./createAsyncComponent-7e8f72ac.js";import"./DataLogList.vue_vue_type_script_setup_true_lang-c225eb8c.js";import"./index-0be8277c.js";import"./jquery-6353a699.js";import"./useDefineSetting-7df030ff.js";import"./CustomForm.vue_vue_type_script_setup_true_lang-1aa664f4.js";import"./config-06ca91cd.js";import"./upperFirst-2cd1a2f7.js";import"./useTabs-ceeccdba.js";import"./uniqBy-e868edd7.js";import"./useWindowSizeFn-05f906e2.js";import"./sortable.esm-02d0fe44.js";import"./SettingOutlined-dd6150a2.js";import"./index-1cfe4e28.js";import"./BasicLeftTree-cd55d444.js";import"./billRule-0363563b.js";import"./import-e198d900.js";import"./tip-b30e67af.js";import"./dataSource-ed26da12.js";import"./dataModel-ea807f46.js";import"./index-3b5bee70.js";import"./CopyOutlined-8d46c8b2.js";const P={class:"jnpf-content-wrapper"},O={class:"jnpf-content-wrapper-center"},F={class:"jnpf-content-wrapper-content"},A=s({name:"onlineDev-dataReport",__name:"index",setup(s){const{createMessage:A}=C(),N=l(),{t:Y}=m(),[H,{openModal:L}]=D(),[q,{openModal:B}]=D(),[E,{openPopup:$}]=I(),{reportServer:z}=p(),K=d({}),G=d([]),[J,{reload:Q,getForm:U}]=r({api:e,columns:[{title:"名称",dataIndex:"fullName",width:200},{title:"编码",dataIndex:"enCode",width:200},{title:"分类",dataIndex:"category",width:150},{title:"创建人",dataIndex:"creatorUser",width:120},{title:"创建时间",dataIndex:"creatorTime",width:150,format:"date|YYYY-MM-DD HH:mm:ss"},{title:"最后修改时间",dataIndex:"lastModifyTime",width:150,format:"date|YYYY-MM-DD HH:mm:ss"},{title:"排序",dataIndex:"sortCode",width:70,align:"center"},{title:"状态",dataIndex:"enabledMark",width:70,align:"center"}],useSearchForm:!0,immediate:!1,formConfig:{schemas:[{field:"keyword",label:Y("common.keyword"),component:"Input",componentProps:{placeholder:Y("common.enterKeyword"),submitOnPressEnter:!0}},{field:"category",label:"分类",component:"Select",componentProps:{placeholder:"请选择",showSearch:!0}},{field:"enabledMark",label:"状态",component:"Select",componentProps:{placeholder:"请选择",options:[{fullName:"启用",id:1},{fullName:"禁用",id:0}]}}]},actionColumn:{width:150,title:"操作",dataIndex:"action"},afterFetch:e=>e.map((e=>{let t="";const o=G.value.filter((t=>t.id==e.categoryId));if(o.length){const e=o[0];t=e&&e.fullName?e.fullName:""}return{...e,category:t}}))});function W(e){return[{label:Y("common.editText"),onClick:X.bind(null,e.id)},{label:Y("common.delText"),color:"error",modelConfirm:{onOk:te.bind(null,e.id)}}]}function V(e){return[{label:Y("common.previewText"),onClick:Z.bind(null,e)},{label:Y("common.copyText"),modelConfirm:{content:"您确定要复制该报表, 是否继续?",onOk:oe.bind(null,e.id)}},{label:Y("common.exportText"),modelConfirm:{content:"您确定要导出该报表, 是否继续?",onOk:ne.bind(null,e.id)}},{ifShow:!e.enabledMark,label:"启用",modelConfirm:{content:"此操作将启用该报表，是否继续?",onOk:re.bind(null,e)}},{ifShow:!!e.enabledMark,label:"禁用",modelConfirm:{content:"此操作将禁用该报表，是否继续?",onOk:re.bind(null,e)}}]}function X(e=""){B(!0,{id:e})}function Z(e){K.value=e,L(!0,{type:"report",id:e.id,fullName:e.fullName})}function ee(){$(!0,{id:K.value.id})}function te(e){t(e).then((e=>{A.success(e.msg),Q()}))}function oe(e){o(e).then((e=>{A.success(e.msg),Q()}))}function ne(e){const t=k();M({url:`${z}/Data/${e}/Actions/Export?token=${t}`})}function re(e){n(e.id).then((e=>{A.success(e.msg),Q()}))}return c((()=>{!async function(){const e=await N.getDictionaryData("businessType");G.value=e,U().updateSchema({field:"category",componentProps:{options:e}}),Q()}()})),(e,t)=>{const o=u("a-button"),n=u("jnpf-upload-btn"),r=u("a-tag");return f(),_("div",P,[j("div",O,[j("div",F,[y(x(a),{onRegister:x(J)},{tableTitle:g((()=>[y(o,{type:"primary",preIcon:"icon-ym icon-ym-btn-add",onClick:t[0]||(t[0]=e=>X())},{default:g((()=>[b(v(x(Y)("common.addText")),1)])),_:1}),y(n,{url:x(z)+"/Data/Actions/Import",accept:".json",onOnSuccess:x(Q)},null,8,["url","onOnSuccess"])])),bodyCell:g((({column:e,record:t})=>["enabledMark"===e.key?(f(),w(r,{key:0,color:1===t.enabledMark?"success":"error"},{default:g((()=>[b(v(1==t.enabledMark?"启用":"禁用"),1)])),_:2},1032,["color"])):h("",!0),"action"===e.key?(f(),w(x(i),{key:1,actions:W(t),dropDownActions:V(t)},null,8,["actions","dropDownActions"])):h("",!0)])),_:1},8,["onRegister"])])]),y(x(S),{onRegister:x(H),type:"flow",onPreviewPc:ee},null,8,["onRegister"]),y(T,{onRegister:x(q),onReload:x(Q)},null,8,["onRegister","onReload"]),y(R,{onRegister:x(E)},null,8,["onRegister"])])}}});export{A as default};
