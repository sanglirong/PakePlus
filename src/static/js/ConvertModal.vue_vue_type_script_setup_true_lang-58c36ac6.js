import{b as e,u as a,B as l}from"./index-143f5813.js";import{d as t,ad as i,a0 as o,c as n,fl as d,e as s,o as c,p as u,l as p,a4 as r,am as y,k as f,j as m,g as v,F as g,q as k,m as h,t as _,V as b,eg as x,a5 as N,n as M}from"./index-920db443.js";import{d as C}from"./vuedraggable.umd-11acc51f.js";import{B as H}from"./BatchOperate-c1982233.js";/* empty css                                                     */const U={key:0,class:"options-list"},I={class:"select-item"},w=["onClick"],O={key:1,class:"add-btn"},T={key:2},S=N(t({__name:"ExtraConfigModal",emits:["register","confirm"],setup(t,{emit:N}){const M=N,S=[{id:"static",fullName:"静态数据"},{id:"dictionary",fullName:"数据字典"}],D=[{id:"id",fullName:"id"},{id:"enCode",fullName:"enCode"}],j=[{id:"yyyy",fullName:"yyyy"},{id:"yyyy-MM",fullName:"yyyy-MM"},{id:"yyyy-MM-dd",fullName:"yyyy-MM-dd"},{id:"yyyy-MM-dd HH:mm",fullName:"yyyy-MM-dd HH:mm"},{id:"yyyy-MM-dd HH:mm:ss",fullName:"yyyy-MM-dd HH:mm:ss"}],R=[{id:"HH:mm",fullName:"HH:mm"},{id:"HH:mm:ss",fullName:"HH:mm:ss"}],V=i({activeData:{config:{}},dicOptions:[]}),{activeData:z,dicOptions:B}=o(V),[E,{closeModal:J}]=e((function(e){V.activeData=n(e),"select"===e.type&&d().then((e=>{V.dicOptions=e.data.list}))})),[K,{openModal:$}]=a(),q=()=>{V.activeData.config.options=[],V.activeData.config.dictionaryType="",V.activeData.config.propsValue="id"},A=()=>{V.activeData.config.options=[]},F=()=>{const e=x();V.activeData.config.options.push({fullName:"选项"+e,id:e})},L=e=>{V.activeData.config.options=e};function P(){M("confirm",V.activeData),J()}return(e,a)=>{const t=s("jnpf-radio"),i=s("a-form-item"),o=s("a-input"),n=s("a-button"),d=s("a-divider"),x=s("jnpf-tree-select"),N=s("jnpf-select"),M=s("a-input-number"),V=s("a-switch"),J=s("a-checkbox"),G=s("a-form");return c(),u(f(l),b(e.$attrs,{onRegister:f(E),title:"属性配置",onOk:P,destroyOnClose:"",class:"extra-config-modal"}),{default:p((()=>[r("div",{class:"extra-config-modal-body",style:y({"min-height":"select"===f(z).type?"300px":"150px"})},[m(G,{colon:!1,labelAlign:"left",labelCol:{style:{width:"90px"}},class:"right-board-form"},{default:p((()=>["select"===f(z).type?(c(),v(g,{key:0},[m(i,{label:"数据来源"},{default:p((()=>[m(t,{value:f(z).config.dataType,"onUpdate:value":a[0]||(a[0]=e=>f(z).config.dataType=e),options:S,optionType:"button",buttonStyle:"solid",onChange:q},null,8,["value"])])),_:1}),"static"===f(z).config.dataType?(c(),v("div",U,[m(f(C),{modelValue:f(z).config.options,"onUpdate:modelValue":a[1]||(a[1]=e=>f(z).config.options=e),animation:300,group:"selectItem",handle:".option-drag",itemKey:"uuid"},{item:p((({element:e,index:l})=>[r("div",I,[a[11]||(a[11]=r("div",{class:"select-line-icon option-drag"},[r("i",{class:"icon-ym icon-ym-darg"})],-1)),m(o,{value:e.fullName,"onUpdate:value":a=>e.fullName=a,placeholder:"选项名"},null,8,["value","onUpdate:value"]),m(o,{value:e.id,"onUpdate:value":a=>e.id=a,placeholder:"选项值"},null,8,["value","onUpdate:value"]),r("div",{class:"close-btn select-line-icon",onClick:e=>f(z).config.options.splice(l,1)},a[10]||(a[10]=[r("i",{class:"icon-ym icon-ym-btn-clearn"},null,-1)]),8,w)])])),_:1},8,["modelValue"])])):k("",!0),"static"===f(z).config.dataType?(c(),v("div",O,[m(n,{type:"link",preIcon:"icon-ym icon-ym-btn-add",onClick:F,class:"!px-0"},{default:p((()=>a[12]||(a[12]=[h("添加选项")]))),_:1,__:[12]}),m(d,{type:"vertical"}),m(n,{type:"link",onClick:a[2]||(a[2]=e=>f($)(!0,{options:f(z).config.options})),class:"!px-0"},{default:p((()=>a[13]||(a[13]=[h("批量编辑")]))),_:1,__:[13]})])):k("",!0),"dictionary"===f(z).config.dataType?(c(),v("div",T,[m(i,{label:"数据字典"},{default:p((()=>[m(x,{options:f(B),value:f(z).config.dictionaryType,"onUpdate:value":a[3]||(a[3]=e=>f(z).config.dictionaryType=e),placeholder:"请选择",lastLevel:"",allowClear:"",onChange:A},null,8,["options","value"])])),_:1}),m(i,{label:"存储字段"},{default:p((()=>[m(N,{value:f(z).config.propsValue,"onUpdate:value":a[4]||(a[4]=e=>f(z).config.propsValue=e),placeholder:"请选择",options:D},null,8,["value"])])),_:1})])):k("",!0)],64)):k("",!0),"date"===f(z).type?(c(),u(i,{key:1,label:"日期类型"},{default:p((()=>[m(N,{value:f(z).config.format,"onUpdate:value":a[5]||(a[5]=e=>f(z).config.format=e),placeholder:"请选择",options:j},null,8,["value"])])),_:1})):k("",!0),"time"===f(z).type?(c(),u(i,{key:2,label:"日期类型"},{default:p((()=>[m(N,{value:f(z).config.format,"onUpdate:value":a[6]||(a[6]=e=>f(z).config.format=e),placeholder:"请选择",options:R},null,8,["value"])])),_:1})):k("",!0),"number"===f(z).type?(c(),v(g,{key:3},[m(i,{label:"小数位数"},{default:p((()=>[m(M,{value:f(z).config.precision,"onUpdate:value":a[7]||(a[7]=e=>f(z).config.precision=e),placeholder:"请输入",precision:0,min:0,max:15},null,8,["value"])])),_:1}),m(i,{label:"千位分隔"},{default:p((()=>[m(V,{checked:f(z).config.thousands,"onUpdate:checked":a[8]||(a[8]=e=>f(z).config.thousands=e)},null,8,["checked"])])),_:1})],64)):k("",!0),["organizeSelect","depSelect","userSelect"].includes(f(z).type)?(c(),u(i,{key:4,label:""},{default:p((()=>[m(J,{checked:f(z).isIncludeSubordinate,"onUpdate:checked":a[9]||(a[9]=e=>f(z).isIncludeSubordinate=e)},{default:p((()=>[h(" 查询当前"+_("organizeSelect"===f(z).type?"组织及子组织":"depSelect"===f(z).type?"部门及子部门":"用户及下属"),1)])),_:1},8,["checked"])])),_:1})):k("",!0)])),_:1}),m(H,{onRegister:f(K),onConfirm:L},null,8,["onRegister"])],4)])),_:1},16,["onRegister"])}}}),[["__scopeId","data-v-f5b881e8"]]),D=["onClick"],j=t({__name:"ConvertModal",emits:["register","confirm"],setup(t,{emit:d}){const y=i({list:[],fieldOptions:[],activeIndex:0}),{list:_,fieldOptions:x}=o(y),N=[{fullName:"枚举",id:"select"},{fullName:"日期",id:"date"},{fullName:"数字",id:"number"},{fullName:"地址",id:"address"},{fullName:"定位",id:"location"},{fullName:"单图",id:"singleImg"},{fullName:"组织",id:"organize"},{fullName:"部门",id:"department"},{fullName:"岗位",id:"position"},{fullName:"用户",id:"user"},{fullName:"角色",id:"role"},{fullName:"分组",id:"group"},{fullName:"用户组件",id:"users"}],C=d,[H,{closeModal:U}]=e((function(e){y.list=n(e.list),y.fieldOptions=n(e.fieldOptions)})),[I,{openModal:w}]=a(),O=[{title:"字段",dataIndex:"field",key:"field",width:350},{title:"转换类型",dataIndex:"type",key:"type",width:200},{title:"操作",dataIndex:"action",key:"action",width:50}],T=["select","date","number"],j={field:"",type:"",config:{dataType:"static",options:[],dictionaryType:"",propsValue:"id",format:"yyyy-MM-dd",precision:0,thousands:!1}};function R(e){y.list[y.activeIndex]=e}function V(){C("confirm",y.list),M((()=>U()))}return(e,a)=>{const t=s("JnpfTreeSelect"),i=s("JnpfSelect"),o=s("a-button"),d=s("a-table");return c(),u(f(l),b(e.$attrs,{width:"600px",class:"convert-modal",onRegister:f(H),title:"数据转换配置",onOk:V,destroyOnClose:""}),{default:p((()=>[m(d,{size:"small",rowKey:"id",class:"complex-header-table","data-source":f(_),columns:O,pagination:!1},{bodyCell:p((({column:e,record:l,index:n})=>["field"===e.key?(c(),u(t,{key:0,value:l.field,"onUpdate:value":e=>l.field=e,placeholder:"请选择",showSearch:"",allowClear:"",options:f(x),class:"!w-334px"},null,8,["value","onUpdate:value","options"])):k("",!0),"type"===e.key?(c(),v(g,{key:1},[m(i,{value:l.type,"onUpdate:value":e=>l.type=e,placeholder:"请选择",options:N,class:"!w-160px"},null,8,["value","onUpdate:value"]),T.includes(l.type)?(c(),v("i",{key:0,class:"icon-ym icon-ym-shezhi cursor-pointer ml-8px leading-30px",title:"转换设置",onClick:e=>function(e,a){y.activeIndex=a,w(!0,{...e})}(l,n)},null,8,D)):k("",!0)],64)):k("",!0),"action"===e.key?(c(),u(o,{key:2,class:"action-btn",type:"link",color:"error",onClick:e=>function(e){y.list.splice(e,1)}(n),size:"small"},{default:p((()=>a[1]||(a[1]=[h("删除")]))),_:2,__:[1]},1032,["onClick"])):k("",!0)])),_:1},8,["data-source"]),r("div",{class:"table-add-action",onClick:a[0]||(a[0]=e=>{y.list.push(n(j))})},[m(o,{type:"link",preIcon:"icon-ym icon-ym-btn-add"},{default:p((()=>a[2]||(a[2]=[h("添加")]))),_:1,__:[2]})]),m(S,{onRegister:f(I),onConfirm:R},null,8,["onRegister"])])),_:1},16,["onRegister"])}}});export{S as E,j as _};
