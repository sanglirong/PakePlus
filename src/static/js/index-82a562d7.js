import{d as e,ad as t,a0 as a,w as s,hd as i,he as o,e as p,o as n,p as c,l,k as u,g as r,F as d,j as y,ae as f,h as m,ab as b,a4 as j,t as h,m as g,V as T,a5 as v}from"./index-920db443.js";import{f as L,h as K}from"./permissionGroup-129512c4.js";import{a as k,B as x}from"./index-9c138ba5.js";import"./ArrowLeftOutlined-3fbf15bc.js";import"./log-2a5f2c26.js";const _={class:"title"},N={class:"content"},z={key:1,class:"no-data"},w=v(e({__name:"index",setup(e){const v=t({title:"",activeKey:"",id:"",groupList:[],authorizeList:[],description:"",objectType:""}),{title:w,activeKey:A,groupList:B,authorizeList:I,description:O}=a(v),[R,{changeLoading:F}]=k((function(e){if(v.id=e.id||"",v.activeKey="",v.authorizeList=[],v.groupList=[],v.objectType=e.objectType||"menu",v.title=function(e){let t="菜单";"company"==v.objectType&&(t="组织");"position"==v.objectType&&(t="岗位");"user"==v.objectType&&(t="用户");"role"==v.objectType&&(t="角色");"group"==v.objectType&&(t="分组");return e+t+"的权限"}(e.fullName),v.id){F(!0);("menu"==v.objectType?i:L)({id:v.id,objectType:v.objectType}).then((e=>{F(!1),v.description=0==e.data?.type?"未开启权限":"menu"==v.objectType?"该菜单暂未分配权限":"未分配权限",v.groupList=e?.data?.list||[],v.groupList.length&&(v.activeKey=v.groupList[0].id)})).catch((()=>{F(!1)}))}}));return s((()=>v.activeKey),(()=>function(){if(!v.activeKey||!v.id)return;F(!0),v.authorizeList=[];const e="menu"==v.objectType?o:K,t={id:v.id,permissionId:v.activeKey,objectType:v.objectType};e(t).then((e=>{F(!1);for(let[t,a]of Object.entries(e.data))a&&v.authorizeList.push(a)})).catch((()=>{F(!1)}))}())),(e,t)=>{const a=p("a-tab-pane"),s=p("a-tabs"),i=p("jnpf-empty");return n(),c(u(x),T(e.$attrs,{onRegister:u(R),title:u(w),class:"full-popup"}),{default:l((()=>[u(B).length?(n(),r(d,{key:0},[y(s,{class:"tabs-box",activeKey:u(A),"onUpdate:activeKey":t[0]||(t[0]=e=>f(A)?A.value=e:null)},{default:l((()=>[(n(!0),r(d,null,m(u(B),(e=>(n(),c(a,{key:e.id,tab:e.fullName},null,8,["tab"])))),128))])),_:1},8,["activeKey"]),y(u(b),{class:"px-20px"},{default:l((()=>[(n(!0),r(d,null,m(u(I),(e=>(n(),r(d,null,[j("p",_,h(e.fullName),1),j("p",N,[1==e.type?(n(!0),r(d,{key:0},m(e.list,((e,t)=>(n(),r("span",{key:t},h(e.fullName),1)))),128)):2==e.type?(n(),r(d,{key:1},[g("未分配"+h(e.fullName),1)],64)):(n(),r(d,{key:2},[g("未设置"+h(e.fullName)+"（无权限控制）",1)],64))])],64)))),256))])),_:1})],64)):(n(),r("div",z,[y(i,{description:u(O)},null,8,["description"])]))])),_:1},16,["onRegister","title"])}}}),[["__scopeId","data-v-ae543f4c"]]);export{w as default};
