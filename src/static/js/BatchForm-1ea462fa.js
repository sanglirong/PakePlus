import{b as e,B as o}from"./index-143f5813.js";import{b as a}from"./columnAuthorize-1d4eafbb.js";import{d as n,ad as s,e as l,o as t,p as m,l as r,j as d,a4 as u,k as i,V as c,ah as f,a5 as p}from"./index-920db443.js";import{M as J}from"./index-3b5bee70.js";import"./useWindowSizeFn-05f906e2.js";import"./log-2a5f2c26.js";const g={class:"formCodeEditor"},h=p(n({__name:"BatchForm",emits:["register","reload"],setup(n,{emit:p}){const h=s({columnJson:"",dataForm:{moduleId:"",columnJson:""}}),j=p,{createMessage:_}=f(),[b,{closeModal:F,changeOkLoading:O}]=e((function(e){h.columnJson="",h.dataForm.columnJson="",h.dataForm.moduleId=e.moduleId}));async function R(){if(!h.columnJson)return _.warning("请输入字段JSON");let e=h.columnJson.replace(/("\w+":)(?=[},])/g,"$1null");h.dataForm.columnJson=JSON.parse(e),O(!0),a(h.dataForm).then((e=>{_.success(e.msg),O(!1),F(),j("reload")})).catch((()=>{O(!1)}))}return(e,a)=>{const n=l("a-form-item"),s=l("a-form");return t(),m(i(o),c(e.$attrs,{onRegister:i(b),title:"批量新增",showOkBtn:"",onOk:R}),{default:r((()=>[d(s,{layout:"vertical"},{default:r((()=>[a[1]||(a[1]=u("div",{class:"json-demo"},[u("pre",null,'          // 示例\n          [\n            {\n              "fullName":"名称",\n              "enCode":"fullName",\n              "bindTable":"table1", //数据库表名\n              "fieldRule":1, //字段规则 0:主表规则  1:副表规则  2:子表规则\n              "childTableKey":"tableField107" //关联字段,fieldRule为子表规则才需要输入\n            }\n          ]\n        ')],-1)),d(n,{label:"字段Json",name:"columnJson"},{default:r((()=>[u("div",g,[d(i(J),{class:"h-full",ref:"editorRef",modelValue:h.columnJson,"onUpdate:modelValue":a[0]||(a[0]=e=>h.columnJson=e),language:"json"},null,8,["modelValue"])])])),_:1})])),_:1,__:[1]})])),_:1},16,["onRegister"])}}}),[["__scopeId","data-v-965052f5"]]);export{h as default};
