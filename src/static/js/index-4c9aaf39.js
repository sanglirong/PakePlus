import{d as t,ad as e,a0 as a,u as o,aD as s,M as i,a7 as n,e as r,o as l,g as c,a4 as u,j as p,k as d,l as m,m as y,t as x,F as g,h as f,q as _,p as k,am as h,cl as j,bN as v,bB as b,ah as w}from"./index-920db443.js";import{u as I,B as z}from"./useTable-dc8c9d84.js";import{a as S,k as A}from"./table-3a9e3e55.js";import{u as T}from"./index-143f5813.js";import{u as C,B as D}from"./useForm-1d28ee0b.js";import"./componentMap-c91676b4.js";import{_ as Q}from"./index.vue_vue_type_script_setup_true_lang-4b369dea.js";import"./useWindowSizeFn-05f906e2.js";import"./sortable.esm-02d0fe44.js";import"./SettingOutlined-dd6150a2.js";import"./log-2a5f2c26.js";import"./index-1cfe4e28.js";import"./useTabs-ceeccdba.js";import"./upperFirst-2cd1a2f7.js";import"./uniqBy-e868edd7.js";import"./visualDev-8f54ab4b.js";import"./index.vue_vue_type_script_setup_true_lang-69353133.js";import"./index-9c138ba5.js";import"./ArrowLeftOutlined-3fbf15bc.js";import"./index-999abbee.js";import"./Parser.vue_vue_type_script_setup_true_lang-6ddfe448.js";import"./Item.vue_vue_type_script_setup_true_lang-fef56f78.js";import"./Form.vue_vue_type_script_setup_true_lang-63005a4d.js";import"./createAsyncComponent-7e8f72ac.js";import"./DataLogList.vue_vue_type_script_setup_true_lang-c225eb8c.js";import"./index-0be8277c.js";import"./jquery-6353a699.js";import"./useDefineSetting-7df030ff.js";import"./CustomForm.vue_vue_type_script_setup_true_lang-1aa664f4.js";import"./config-06ca91cd.js";const P={class:"jnpf-content-wrapper"},L={class:"jnpf-content-wrapper-center"},R={class:"jnpf-content-wrapper-search-box"},F={class:"jnpf-content-wrapper-content"},M={key:0,class:"ym-custom ym-custom-checkbox-blank-circle",style:{color:"#ff625c","font-size":"16px"}},Y={key:1,class:"ym-custom ym-custom-checkbox-blank-circle",style:{color:"#f9a646","font-size":"16px"}},B={key:2,class:"ym-custom ym-custom-checkbox-blank-circle",style:{color:"#f4ce4a","font-size":"16px"}},N={key:3,class:"ym-custom ym-custom-checkbox-blank-circle",style:{color:"#6dcc51","font-size":"16px"}},O={key:4,class:"ym-custom ym-custom-checkbox-blank-circle",style:{color:"#4bb8f3","font-size":"16px"}},q={key:5,class:"ym-custom ym-custom-checkbox-blank-circle",style:{color:"#d088e1","font-size":"16px"}},H={key:6,class:"ym-custom ym-custom-checkbox-blank-circle",style:{color:"#a5a5a8","font-size":"16px"}},E={key:1,class:"ym-custom ym-custom-checkbox-blank-circle-outline",style:{"font-size":"16px",color:"#cecece"}},G=t({name:"extend-tableDemo-signTable",__name:"index",setup(t){const G=e({industryTypeList:[],options:[{text:"红色",value:"1",color:"#ff625c"},{text:"橙色",value:"2",color:"#f9a646"},{text:"黄色",value:"3",color:"#f4ce4a"},{text:"绿色",value:"4",color:"#6dcc51"},{text:"蓝色",value:"5",color:"#4bb8f3"},{text:"紫色",value:"6",color:"#d088e1"},{text:"灰色",value:"7",color:"#a5a5a8"},{text:"清空",value:"0",color:""}],list:[],listQuery:{currentPage:1,pageSize:20,sort:"desc",keyword:""},total:""}),{options:J,list:K}=a(G),{t:W}=o(),U=s(),{createMessage:V}=w(),X=[{title:"项目名称",dataIndex:"projectName",width:200},{title:"项目编码",dataIndex:"projectCode",width:160},{title:"项目类型",dataIndex:"projectType",width:120,customRender:({record:t})=>{let e=G.industryTypeList.filter((e=>e.id==t.projectType))[0];return e&&e.fullName?e.fullName:""}},{title:"项目阶段",dataIndex:"projectPhase",width:120},{title:"项目标记",dataIndex:"signArray",width:170,align:"center",filters:[{text:"红色",value:"1"},{text:"橙色",value:"2"},{text:"黄色",value:"3"},{text:"绿色",value:"4"},{text:"蓝色",value:"5"},{text:"紫色",value:"6"},{text:"灰色",value:"7"}],onFilter:(t,e)=>e.signArray.includes(t)},{title:"客户名称",dataIndex:"customerName",width:200},{title:"负责人",dataIndex:"principal",width:80},{title:"立项人",dataIndex:"jackStands",width:80},{title:"交互时间",dataIndex:"interactionDate",width:100,format:"date|YYYY-MM-DD"},{title:"费用金额",dataIndex:"costAmount",width:100},{title:"已用金额",dataIndex:"tunesAmount",width:100},{title:"预计收入",dataIndex:"projectedIncome",width:100},{title:"登记人",dataIndex:"registrant",width:80},{title:"登记时间",dataIndex:"registerDate",width:150,format:"date|YYYY-MM-DD HH:mm:ss"},{title:"备注",dataIndex:"description",width:100}],[Z,{setLoading:$}]=I({columns:X,useSearchForm:!1,actionColumn:{width:100,title:"操作",dataIndex:"action"},tableSetting:{redo:!1}}),[tt]=C({baseColProps:{span:6},showActionButtonGroup:!0,showAdvancedButton:!0,compact:!0,schemas:[{field:"keyword",label:W("common.keyword"),component:"Input",componentProps:{placeholder:W("common.enterKeyword"),submitOnPressEnter:!0}}]}),[et,{openModal:at}]=T(),ot=i((()=>({current:G.listQuery.currentPage,pageSize:G.listQuery.pageSize,size:"small",defaultPageSize:G.listQuery.pageSize,showTotal:t=>W("component.table.total",{total:t}),showSizeChanger:!0,pageSizeOptions:["20","50","80","100"],showQuickJumper:!0,total:G.total})));function st(){$(!0),S(G.listQuery).then((t=>{$(!1);let e=t.data.list;for(let a=0;a<e.length;a++){const t=e[a];t.signArray=t.sign?t.sign.split("").filter((t=>"0"!=t)):[]}G.list=e,G.total=t.data.pagination.total})).then((()=>{$(!1)}))}function it(){st()}function nt(t,e,a,o){"paginate"===o?.action&&(G.listQuery.currentPage=t.current,G.listQuery.pageSize=t.pageSize,st())}function rt(t){G.listQuery.currentPage=1,G.listQuery.keyword=t?.keyword||"",st()}function lt(){G.listQuery.currentPage=1,G.listQuery.keyword="",st()}return n((()=>async function(){G.industryTypeList=await U.getDictionaryData("IndustryType"),st()}())),(t,e)=>{const a=r("a-button"),o=r("a-menu-item"),s=r("a-menu"),i=r("a-dropdown"),n=r("ATooltip");return l(),c(g,null,[u("div",P,[u("div",L,[u("div",R,[p(d(D),{class:"search-form",onRegister:d(tt),onSubmit:rt,onReset:lt},null,8,["onRegister"])]),u("div",F,[p(d(z),{onRegister:d(Z),dataSource:d(K),onChange:nt,pagination:ot.value},{tableTitle:m((()=>[p(a,{type:"primary",preIcon:"icon-ym icon-ym-btn-add",onClick:e[0]||(e[0]=t=>function(t=""){at(!0,{id:t,industryTypeList:G.industryTypeList})}())},{default:m((()=>[y(x(d(W)("common.addText")),1)])),_:1})])),bodyCell:m((({column:t,record:a})=>["signArray"===t.key?(l(),c(g,{key:0},[a.signArray?.length?(l(!0),c(g,{key:0},f(a.signArray,((t,e)=>(l(),c("span",{key:e},["1"==t?(l(),c("i",M)):_("",!0),"2"==t?(l(),c("i",Y)):_("",!0),"3"==t?(l(),c("i",B)):_("",!0),"4"==t?(l(),c("i",N)):_("",!0),"5"==t?(l(),c("i",O)):_("",!0),"6"==t?(l(),c("i",q)):_("",!0),"7"==t?(l(),c("i",H)):_("",!0)])))),128)):(l(),c("i",E))],64)):_("",!0),"action"===t.key?(l(),k(i,{key:1},{overlay:m((()=>[p(s,null,{default:m((()=>[(l(!0),c(g,null,f(d(J),((t,e)=>(l(),k(o,{key:t.value,onClick:o=>function(t,e,a){let o="0000000";if("0"!==e){let s=t.sign.split("");s[a]=s[a]==e?"0":e,o=s.join("")}A(t.id,{sign:o}).then((e=>{t.signArray=o.split("").filter((t=>"0"!=t)),t.sign=o,V.success(e.msg)}))}(a,t.value,e)},{default:m((()=>[u("span",{style:h({color:t.color})},x(t.text),5)])),_:2},1032,["onClick"])))),128))])),_:2},1024)])),default:m((()=>[u("a",{class:"ant-dropdown-link",onClick:e[1]||(e[1]=j((()=>{}),["prevent"]))},[e[2]||(e[2]=y(" 项目标记")),p(d(v))])])),_:2},1024)):_("",!0)])),toolbar:m((()=>[p(n,{placement:"top"},{title:m((()=>[u("span",null,x(d(W)("common.redo")),1)])),default:m((()=>[p(d(b),{onClick:it})])),_:1})])),_:1},8,["onRegister","dataSource","pagination"])])])]),p(Q,{onRegister:d(et),onReload:it},null,8,["onRegister"])],64)}}});export{G as default};
