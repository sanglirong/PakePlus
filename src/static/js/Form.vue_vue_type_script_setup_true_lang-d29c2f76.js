import{b as e,B as a}from"./index-143f5813.js";import{u as t,B as s}from"./useForm-1d28ee0b.js";import"./componentMap-c91676b4.js";import{a as o,b as r,c as n}from"./document-763aa4ad.js";import{d,ad as i,M as l,o as m,p,l as c,j as u,k as g,V as f,ah as h}from"./index-920db443.js";const y=d({__name:"Form",emits:["register","reload"],setup(d,{emit:y}){const F=i({dataForm:{},id:"",parentId:"",type:"0"}),j=l((()=>F.id?"重命名文件":"新建文件夹")),I=y,{createMessage:b}=h(),[k,{setFieldsValue:x,validate:M,resetFields:O}]=t({labelWidth:80,schemas:[{field:"fullName",label:"",component:"Input",componentProps:{placeholder:"请输入"},rules:[{required:!0,trigger:"blur",message:"必填"}]}]}),[R,{closeModal:_,changeLoading:w,changeOkLoading:B}]=e((function(e){O(),F.id=e.id,F.parentId=e.parentId,F.type="0",F.id&&(w(!0),o(F.id).then((e=>{F.dataForm=e.data,F.type=F.dataForm.type||"0",x({fullName:F.dataForm.fullName}),w(!1)})))}));async function N(){const e=await M();if(!e)return;B(!0);const a={...e,id:F.id,parentId:F.parentId,type:F.type};(F.id?r:n)(a).then((e=>{b.success(e.msg),B(!1),_(),I("reload")})).catch((()=>{B(!1)}))}return(e,t)=>(m(),p(g(a),f(e.$attrs,{onRegister:g(R),title:j.value,showOkBtn:"",onOk:N,destroyOnClose:""}),{default:c((()=>[u(g(s),{onRegister:g(k)},null,8,["onRegister"])])),_:1},16,["onRegister","title"]))}});export{y as _};
