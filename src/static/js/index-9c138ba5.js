import{bh as e,u as n,d as o,aM as t,T as s,a5 as a,e as l,o as i,g as p,a4 as u,j as r,af as c,q as d,aL as f,p as g,l as y,m,t as P,V as h,ab as k,r as C,U as B,a1 as x,M as b,aQ as v,k as O,al as T,w,n as L,Z as S,a9 as $,aR as j,h as _,aS as I,aT as A,i as F,am as M,ad as R,aU as z,aV as H,aj as V,at as E,a2 as U,a3 as W}from"./index-920db443.js";import{A as q}from"./ArrowLeftOutlined-3fbf15bc.js";import{e as D}from"./log-2a5f2c26.js";const{t:K}=n(),N={title:{type:String,default:""},helpMessage:[String,Array],showBackIcon:{type:Boolean,default:!0},confirmLoading:{type:Boolean},showCancelBtn:{type:Boolean,default:!0},cancelButtonProps:Object,cancelText:{type:String,default:K("common.cancelText")},showOkBtn:{type:Boolean,default:!1},okButtonProps:Object,okText:{type:String,default:K("common.okText")},okType:{type:String,default:"primary"},continueText:{type:String,default:K("common.continueText")},continueType:{type:String,default:"default"},showContinueBtn:{type:Boolean,default:!1},continueButtonProps:Object,continueLoading:{type:Boolean}},Q={defaultFullscreen:{type:Boolean,default:!1},loadingText:{type:String},open:{type:Boolean},loading:{type:Boolean},getContainer:{type:[Object,String]},closeFunc:{type:[Function,Object],default:null},destroyOnClose:{type:Boolean},closable:{type:Boolean,default:!0},closeIcon:e.any,width:e.oneOfType([e.string,e.number]),zIndex:Number,...N},Z=o({name:"BasicPopupHeader",inheritAttrs:!1,components:{BasicTitle:t,ArrowLeftOutlined:q},props:{...N},emits:["close","ok","continue"],setup(e,{emit:n}){const{prefixCls:o}=s("basic-popup-header");return{prefixCls:o,handleOk:function(){n("ok")},handleContinue:function(e){n("continue",e)},handleClose:function(){n("close")}}}});const G=a(o({components:{ScrollContainer:k,PopupHeader:a(Z,[["render",function(e,n,o,t,s,a){const k=l("ArrowLeftOutlined"),C=l("BasicTitle"),B=l("a-button");return i(),p("div",{class:c(e.prefixCls)},[u("div",{class:c(`${e.prefixCls}-left`)},[e.showBackIcon?(i(),p("span",{key:0,onClick:n[0]||(n[0]=(...n)=>e.handleClose&&e.handleClose(...n))},[r(k,{class:c(`${e.prefixCls}__back`)},null,8,["class"])])):d("",!0),e.$slots.title?f(e.$slots,"title",{key:1}):d("",!0),e.$slots.title?d("",!0):(i(),g(C,{key:2,helpMessage:e.helpMessage},{default:y((()=>[m(P(e.title),1)])),_:1},8,["helpMessage"]))],2),u("div",{class:c(`${e.prefixCls}__toolbar`)},[f(e.$slots,"insertToolbar"),e.showContinueBtn?(i(),g(B,h({key:0,type:e.continueType,onClick:e.handleContinue,loading:e.continueLoading,disabled:e.confirmLoading,class:"ml-10px"},e.continueButtonProps),{default:y((()=>[m(P(e.continueText),1)])),_:1},16,["type","onClick","loading","disabled"])):d("",!0),e.showOkBtn?(i(),g(B,h({key:1,type:e.okType,onClick:e.handleOk},e.okButtonProps,{class:"ml-10px",loading:e.confirmLoading,disabled:e.okButtonProps?.disabled||e.continueLoading}),{default:y((()=>[m(P(e.okText),1)])),_:1},16,["type","onClick","loading","disabled"])):d("",!0),f(e.$slots,"centerToolbar"),e.showCancelBtn?(i(),g(B,h({key:2},e.cancelButtonProps,{onClick:e.handleClose,class:"ml-10px"}),{default:y((()=>[m(P(e.cancelText),1)])),_:1},16,["onClick"])):d("",!0),f(e.$slots,"appendToolbar")],2)],2)}]])},inheritAttrs:!1,props:Q,emits:["open-change","ok","close","register"],setup(e,{emit:o}){const t=C(!1),a=C(!1),l=B({excludeDefaultKeys:!1}),i=C(null),{t:p}=n(),{prefixCls:u}=s("basic-popup"),r={setPopupProps:function(e){i.value=v(O(i)||{},e),Reflect.has(e,"open")&&(t.value=!!e.open);Reflect.has(e,"defaultFullscreen")&&(a.value=!!e.defaultFullscreen)},emitOpen:void 0},c=x();c&&o("register",r,c.uid);const d=b((()=>v(e,O(i)))),f=b((()=>({...O(l),...O(d),open:O(t)}))),g=b((()=>({...l,...O(f)}))),y=b((()=>[u,O(l).class,{"fullscreen-popup":!!O(a)}])),m=b((()=>{const{width:e,zIndex:n}=O(f);return{zIndex:n,width:e?T(e)?`${e}px`:e:"100%",margin:"0 auto"}})),P=b((()=>({position:"relative",height:"100%"}))),h=b((()=>!!O(f)?.loading));return w((()=>e.open),((e,n)=>{e!==n&&(t.value=e)}),{deep:!0}),w((()=>t.value),(n=>{L((()=>{n&&(a.value=!!e.defaultFullscreen),o("open-change",n),c&&r.emitOpen?.(n,c.uid)}))})),{openRef:t,onClose:async function(e){const{closeFunc:n}=O(f);if(o("close",e),n&&S(n)){const e=await n();t.value=!e}else t.value=!1},t:p,prefixCls:u,getMergeProps:d,getBodyStyle:m,getScrollContentStyle:P,getProps:f,getWrapperClass:y,getLoading:h,getBindValues:g,handleOk:function(){o("ok")}}}}),[["render",function(e,n,o,t,s,a){const m=l("PopupHeader"),P=l("ScrollContainer"),k=$("loading");return e.openRef?(i(),p("div",{key:0,class:c(e.getWrapperClass)},[r(m,h(e.getProps,{onClose:e.onClose,onOk:e.handleOk}),j({_:2},[_(Object.keys(e.$slots),(n=>({name:n,fn:y((o=>[f(e.$slots,n,I(A(o||{})))]))})))]),1040,["onClose","onOk"]),u("div",{class:c(e.prefixCls+"-body")},[F((i(),g(P,{style:M(e.getScrollContentStyle),"loading-tip":e.loadingText||e.t("common.loadingText")},{default:y((()=>[u("div",{style:M(e.getBodyStyle)},[f(e.$slots,"default")],4)])),_:3},8,["style","loading-tip"])),[[k,e.getLoading]])],2)],2)):d("",!0)}]]),J=R({}),X=R({});function Y(){if(!x())throw new Error("usePopup() can only be used inside setup() or functional components!");const e=C(null),n=C(!1),o=C("");const t=()=>{const n=O(e);return n||D("usePopup instance is undefined!"),n};return[function(t,s){E((()=>{e.value=null,n.value=null,J[O(o)]=null})),O(n)&&U()&&t===O(e)||(o.value=s,e.value=t,n.value=!0,t.emitOpen=(e,n)=>{X[n]=e})},{setPopupProps:e=>{t()?.setPopupProps(e)},getOpen:b((()=>X[~~O(o)])),openPopup:(e=!0,n,s=!0)=>{if(t()?.setPopupProps({open:e,confirmLoading:!1}),!n)return;if(s)return J[O(o)]=null,void(J[O(o)]=z(n));H(z(J[O(o)]),z(n))||(J[O(o)]=z(n))},closePopup:()=>{t()?.setPopupProps({open:!1})}}]}const ee=e=>{const n=C(null),o=x(),t=C("");if(!x())throw new Error("usePopupInner() can only be used inside setup() or functional components!");const s=()=>{const e=O(n);if(e)return e;D("usePopupInner instance is undefined!")};return V((()=>{const n=J[O(t)];n&&e&&S(e)&&L((()=>{e(n)}))})),[(e,s)=>{E((()=>{n.value=null})),t.value=s,n.value=e,o?.emit("register",e,s)},{changeLoading:(e=!0)=>{s()?.setPopupProps({loading:e})},changeOkLoading:(e=!0)=>{s()?.setPopupProps({confirmLoading:e})},changeContinueLoading:(e=!0)=>{s()?.setPopupProps({continueLoading:e})},getOpen:b((()=>X[~~O(t)])),closePopup:()=>{s()?.setPopupProps({open:!1})},setPopupProps:e=>{s()?.setPopupProps(e)}}]},ne=W(G);export{ne as B,ee as a,Y as u};
