import{d as e,u as t,fg as o,gF as n,e as r,o as i,g as a,a4 as s,j as l,l as p,m,t as u,k as d,p as c,q as _,gG as g,ah as f}from"./index-920db443.js";import{u as j,B as y}from"./useTable-dc8c9d84.js";import{T as b}from"./TableAction-adbe36f2.js";import{u as v}from"./index-143f5813.js";import{u as x}from"./index-9c138ba5.js";import{_ as k}from"./Form.vue_vue_type_script_setup_true_lang-f4501d20.js";import{_ as w}from"./Member.vue_vue_type_script_setup_true_lang-3c3d314f.js";import{_ as R}from"./GlobalMember.vue_vue_type_script_setup_true_lang-88ed7e95.js";import h from"./Permission-c66b6a38.js";import{_ as M}from"./ImportModal.vue_vue_type_script_setup_true_lang-772d2a6b.js";import{_ as I}from"./ExportModal.vue_vue_type_script_setup_true_lang-295b5f0e.js";import"./useForm-1d28ee0b.js";import"./componentMap-c91676b4.js";import"./visualDev-8f54ab4b.js";import"./index.vue_vue_type_script_setup_true_lang-69353133.js";import"./index-999abbee.js";import"./ArrowLeftOutlined-3fbf15bc.js";import"./log-2a5f2c26.js";import"./Parser.vue_vue_type_script_setup_true_lang-6ddfe448.js";import"./Item.vue_vue_type_script_setup_true_lang-fef56f78.js";import"./Form.vue_vue_type_script_setup_true_lang-63005a4d.js";import"./createAsyncComponent-7e8f72ac.js";import"./DataLogList.vue_vue_type_script_setup_true_lang-c225eb8c.js";import"./index-0be8277c.js";import"./jquery-6353a699.js";import"./useDefineSetting-7df030ff.js";import"./CustomForm.vue_vue_type_script_setup_true_lang-1aa664f4.js";import"./config-06ca91cd.js";import"./upperFirst-2cd1a2f7.js";import"./useTabs-ceeccdba.js";import"./uniqBy-e868edd7.js";import"./useWindowSizeFn-05f906e2.js";import"./sortable.esm-02d0fe44.js";import"./SettingOutlined-dd6150a2.js";import"./index-1cfe4e28.js";import"./formValidate-c8ab8d29.js";import"./userRelation-654fbd05.js";import"./permissionGroup-129512c4.js";import"./import-e198d900.js";import"./tip-b30e67af.js";import"./config-900ef1e2.js";const T={class:"jnpf-content-wrapper"},C={class:"jnpf-content-wrapper-center"},z={class:"jnpf-content-wrapper-content"},F=e({name:"permission-role",__name:"index",setup(e){const{createMessage:F}=f(),{t:N}=t(),P=o(),[S,{openModal:D}]=v(),[A,{openModal:O}]=v(),[G,{openModal:L}]=v(),[Y,{openPopup:q}]=x(),[B,{openModal:E}]=v(),[H,{openModal:K}]=v(),[Q,{reload:J,getFetchParams:V}]=j({api:n,beforeFetch:e=>(e.organizeId=e.organizeTree?.length?e.organizeTree[e.organizeTree.length-1]:"",delete e.organizeTree,e),columns:[{title:"角色名称",dataIndex:"fullName",width:200},{title:"角色编码",dataIndex:"enCode",width:150},{title:"角色类型",dataIndex:"type",width:90,align:"center"},{title:"所属组织",dataIndex:"organizeInfo"},{title:"创建时间",dataIndex:"creatorTime",width:150,format:"date|YYYY-MM-DD HH:mm:ss"},{title:"排序",dataIndex:"sortCode",width:70,align:"center"},{title:"状态",dataIndex:"enabledMark",width:70,align:"center"}],useSearchForm:!0,formConfig:{schemas:[{field:"keyword",label:N("common.keyword"),component:"Input",componentProps:{placeholder:N("common.enterKeyword"),submitOnPressEnter:!0}},{field:"organizeTree",label:"所属组织",component:"OrganizeSelect",componentProps:{placeholder:"请选择",auth:!0}},{field:"type",label:"角色类型",component:"Select",componentProps:{placeholder:"请选择",options:[{fullName:"全局",id:1},{fullName:"组织",id:0}]}},{field:"enabledMark",label:"状态",component:"Select",componentProps:{placeholder:"请选择",options:[{fullName:"启用",id:1},{fullName:"禁用",id:0}]}}]},actionColumn:{width:150,title:"操作",dataIndex:"action"}});function W(e){return[{label:N("common.editText"),onClick:Z.bind(null,e.id)},{label:N("common.delText"),color:"error",modelConfirm:{onOk:$.bind(null,e.id)}}]}function U(e){return e.enabledMark?[{label:"角色成员",onClick:ee.bind(null,e)},{label:"查看权限",onClick:X.bind(null,e.id,e.fullName)}]:[]}function X(e,t){q(!0,{id:e,fullName:t,objectType:"role"})}function Z(e=""){L(!0,{id:e})}function $(e){g(e).then((e=>{F.success(e.msg),P.resetState(),J()}))}function ee(e){const{id:t,fullName:o,type:n}=e;"全局"===n?O(!0,{id:t,fullName:o,type:"Role"}):D(!0,{id:t,fullName:o})}function te(){E(!0,{type:"role"})}function oe(){const e={...V(),organizeId:V().organizeId||"",keyword:V().keyword||""};K(!0,{listQuery:e,type:"role"})}return(e,t)=>{const o=r("a-button"),n=r("a-tag");return i(),a("div",T,[s("div",C,[s("div",z,[l(d(y),{onRegister:d(Q)},{tableTitle:p((()=>[l(o,{type:"primary",preIcon:"icon-ym icon-ym-btn-add",onClick:t[0]||(t[0]=e=>Z())},{default:p((()=>[m(u(d(N)("common.addText")),1)])),_:1}),l(o,{type:"link",onClick:oe},{default:p((()=>[t[1]||(t[1]=s("i",{class:"icon-ym icon-ym-btn-download button-preIcon"},null,-1)),m(u(d(N)("common.exportText")),1)])),_:1,__:[1]}),l(o,{type:"link",onClick:te},{default:p((()=>[t[2]||(t[2]=s("i",{class:"icon-ym icon-ym-btn-upload button-preIcon"},null,-1)),m(u(d(N)("common.importText")),1)])),_:1,__:[2]})])),bodyCell:p((({column:e,record:t})=>["enabledMark"===e.key?(i(),c(n,{key:0,color:1==t.enabledMark?"success":"error"},{default:p((()=>[m(u(1==t.enabledMark?"启用":"禁用"),1)])),_:2},1032,["color"])):_("",!0),"action"===e.key?(i(),c(d(b),{key:1,actions:W(t),dropDownActions:U(t)},null,8,["actions","dropDownActions"])):_("",!0)])),_:1},8,["onRegister"])])]),l(k,{onRegister:d(G),onReload:d(J)},null,8,["onRegister","onReload"]),l(w,{onRegister:d(S)},null,8,["onRegister"]),l(R,{onRegister:d(A)},null,8,["onRegister"]),l(h,{onRegister:d(Y)},null,8,["onRegister"]),l(I,{onRegister:d(H)},null,8,["onRegister"]),l(M,{onRegister:d(B),onReload:d(J)},null,8,["onRegister","onReload"])])}}});export{F as default};
