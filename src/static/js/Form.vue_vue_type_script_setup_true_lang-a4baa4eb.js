import{b as e,B as a}from"./index-143f5813.js";import{u as o,B as r}from"./useForm-1d28ee0b.js";import"./componentMap-c91676b4.js";import{d as t,ad as s,M as l,u as n,o as d,p as i,l as p,j as m,k as c,V as u,ah as g}from"./index-920db443.js";import{g as h,u as f,c as b}from"./accountConfig-5422c027.js";import{f as F}from"./formValidate-c8ab8d29.js";const I=t({__name:"Form",emits:["register","reload"],setup(t,{emit:I}){const x=s({dataForm:{}}),P=[{field:"fullName",label:"名称",component:"Input",componentProps:{placeholder:"请输入",maxlength:50},rules:[{required:!0,trigger:"blur",message:"必填"}]},{field:"enCode",label:"编码",component:"Input",componentProps:{placeholder:"请输入",maxlength:50},rules:[{required:!0,trigger:"blur",message:"必填"},{validator:F("enCode"),trigger:"blur"}]},{field:"appKey",label:"原始ID",component:"Input",helpMessage:"请在“微信公众号管理后台-设置与开发-公众号设置”页中获得",componentProps:{placeholder:"请输入"},rules:[{required:!0,trigger:"change",message:"必填"}]},{field:"appId",label:"AppID",component:"Input",helpMessage:"请在“微信公众号管理后台-设置与开发-基本配置”页中获得",componentProps:{placeholder:"请输入"},rules:[{required:!0,trigger:"blur",message:"必填"}]},{field:"appSecret",label:"Secret",component:"InputPassword",helpMessage:"请在“微信公众号管理后台-设置与开发-基本配置”页中获得",componentProps:{placeholder:"请输入"},rules:[{required:!0,trigger:"change",message:"必填"}]},{field:"agentId",label:"Token",component:"Input",componentProps:{placeholder:"请输入"},rules:[{required:!0,trigger:"blur",message:"必填"}]},{field:"bearer",label:"EncodingAESKey",component:"Input",componentProps:{placeholder:"请输入"},rules:[{required:!0,trigger:"blur",message:"必填"}]},{field:"sortCode",label:"排序",component:"InputNumber",defaultValue:0,componentProps:{min:"0",max:"999999",placeholder:"请输入"}},{field:"enabledMark",label:"状态",component:"Switch",defaultValue:1},{field:"description",label:"说明",component:"Textarea",componentProps:{rows:3,placeholder:"请输入"}}],M=l((()=>x.dataForm.id?k("common.editText"):k("common.addText"))),j=I,{createMessage:q}=g(),{t:k}=n(),[w,{setFieldsValue:V,validate:y,resetFields:C}]=o({labelWidth:130,schemas:P}),[R,{closeModal:S,changeLoading:T,changeOkLoading:_}]=e((function(e){C(),x.dataForm.id=e.id,x.dataForm.id&&(T(!0),h(x.dataForm.id).then((e=>{const a=e.data;x.dataForm=a,V(a),T(!1)})))}));async function v(){const e=await y();if(!e)return;_(!0);let a={...e,id:x.dataForm.id,type:7};(x.dataForm.id?f:b)(a).then((e=>{q.success(e.msg),_(!1),S(),j("reload")})).catch((()=>{_(!1)}))}return(e,o)=>(d(),i(c(a),u(e.$attrs,{onRegister:c(R),title:M.value,showOkBtn:"",onOk:v}),{default:p((()=>[m(c(r),{onRegister:c(w)},null,8,["onRegister"])])),_:1},16,["onRegister","title"]))}});export{I as _};
