import{e,f as t,r as n,h as i,i as a,j as s,k as o}from"./email-d835ba48.js";import{u as r}from"./index-143f5813.js";import{u as c}from"./index-9c138ba5.js";import{u as l,B as m}from"./useForm-1d28ee0b.js";import"./componentMap-c91676b4.js";import{u as d,B as p}from"./useTable-dc8c9d84.js";import{T as u}from"./TableAction-adbe36f2.js";import{d as y,u as _,ad as f,M as g,w as v,n as k,a0 as x,co as j,a7 as b,e as h,o as w,g as T,a4 as C,j as R,l as I,k as K,m as D,ae as M,F as Y,q as B,t as H,p as F,ah as L,a5 as P}from"./index-920db443.js";import{_ as S}from"./Config.vue_vue_type_script_setup_true_lang-310ba77d.js";import{_ as O}from"./Form.vue_vue_type_script_setup_true_lang-87825954.js";import{_ as A}from"./Detail.vue_vue_type_script_setup_true_lang-9ed52f9d.js";import"./useWindowSizeFn-05f906e2.js";import"./log-2a5f2c26.js";import"./ArrowLeftOutlined-3fbf15bc.js";import"./useTabs-ceeccdba.js";import"./upperFirst-2cd1a2f7.js";import"./uniqBy-e868edd7.js";import"./visualDev-8f54ab4b.js";import"./index.vue_vue_type_script_setup_true_lang-69353133.js";import"./index-999abbee.js";import"./Parser.vue_vue_type_script_setup_true_lang-6ddfe448.js";import"./Item.vue_vue_type_script_setup_true_lang-fef56f78.js";import"./Form.vue_vue_type_script_setup_true_lang-63005a4d.js";import"./createAsyncComponent-7e8f72ac.js";import"./DataLogList.vue_vue_type_script_setup_true_lang-c225eb8c.js";import"./index-0be8277c.js";import"./jquery-6353a699.js";import"./useDefineSetting-7df030ff.js";import"./CustomForm.vue_vue_type_script_setup_true_lang-1aa664f4.js";import"./config-06ca91cd.js";import"./sortable.esm-02d0fe44.js";import"./SettingOutlined-dd6150a2.js";import"./index-1cfe4e28.js";import"./DetailMain-d56257c6.js";const E={class:"jnpf-content-wrapper bg-white"},q={class:"jnpf-content-wrapper-center email-wrapper"},z={class:"email-container"},V={class:"jnpf-common-search-box"},G={class:"jnpf-common-search-box-right"},J={key:0},N={key:0},W=["onClick"],Q={key:1},U=["onClick"],X={key:1},Z={key:0},$={key:1},ee=["onClick"],te=["onClick"],ne={key:0},ie=["onClick"],ae={key:1},se=["onClick"],oe=P(y({name:"extend-email",__name:"index",setup(y){const{t:P}=_(),{createMessage:oe}=L(),re=f({activeKey:"inBox",keyword:"",startTime:0,endTime:0,btnLoading:!1}),ce=g((()=>({keyword:re.keyword,type:re.activeKey,startTime:re.startTime||null,endTime:re.endTime||null}))),le=g((()=>"inBox"===re.activeKey||"star"===re.activeKey?[{title:"",dataIndex:"isRead",width:40,align:"center"},{title:"",dataIndex:"attachment",width:40,align:"center"},{title:"发件人",dataIndex:"sender",width:180},{title:"主题",dataIndex:"subject"},{title:"时间",dataIndex:"fdate",width:150,format:"date|YYYY-MM-DD HH:mm:ss"},{title:"",dataIndex:"starred",width:40,align:"center"}]:[{title:"",dataIndex:"isRead",width:40,align:"center"},{title:"",dataIndex:"attachment",width:40,align:"center"},{title:"收件人",dataIndex:"recipient",width:180},{title:"主题",dataIndex:"subject"},{title:"时间",dataIndex:"creatorTime",width:150,format:"date|YYYY-MM-DD HH:mm:ss"}]));v((()=>re.activeKey),(()=>{k((()=>ve()))}));const{activeKey:me}=x(re),[de,{openModal:pe}]=r(),[ue,{openPopup:ye}]=c(),[_e,{openPopup:fe}]=c(),[ge,{resetFields:ve}]=l({baseColProps:{span:6},showActionButtonGroup:!0,showAdvancedButton:!0,compact:!0,schemas:[{field:"keyword",label:P("common.keyword"),component:"Input",componentProps:{placeholder:P("common.enterKeyword"),submitOnPressEnter:!0}},{field:"pickerVal",label:"时间",component:"DateRange",componentProps:{format:"YYYY-MM-DD HH:mm:ss",showTime:{defaultValue:[j("00:00:00","HH:mm:ss"),j("23:59:59","HH:mm:ss")]},placeholder:["开始时间","结束时间"]}}],fieldMapToTime:[["pickerVal",["startTime","endTime"]]]}),[ke,{reload:xe,deleteTableDataRecord:je}]=d({api:e,showTableSetting:!1,immediate:!1,resizeHeightOffset:10,actionColumn:{width:50,title:"操作",dataIndex:"action"}});function be(e){return[{label:P("common.delText"),color:"error",modelConfirm:{onOk:he.bind(null,e.id)}}]}function he(e){t(e).then((e=>{oe.success(e.msg).then((()=>{xe()}))}))}function we(e){re.keyword=e?.keyword||"",re.startTime=e?.startTime||0,re.endTime=e?.endTime||0,Ce()}function Te(){re.keyword="",re.startTime=0,re.endTime=0,Ce()}function Ce(){k((()=>{xe()}))}function Re(){re.btnLoading=!0,n().then((e=>{re.btnLoading=!1,oe.success(`收件成功${e.data}条`),"inBox"==re.activeKey?ve():re.activeKey="inBox"})).catch((()=>{re.btnLoading=!1}))}function Ie(e){e?"sent"===re.activeKey?ve():re.activeKey="sent":"draft"===re.activeKey?ve():re.activeKey="draft"}return b((()=>{ve()})),(e,t)=>{const n=h("a-tab-pane"),r=h("a-tabs"),c=h("a-button");return w(),T("div",E,[C("div",q,[R(r,{activeKey:K(me),"onUpdate:activeKey":t[2]||(t[2]=e=>M(me)?me.value=e:null),"tab-position":"left",class:"common-left-tabs"},{leftExtra:I((()=>[C("div",{class:"tab-tem",onClick:t[0]||(t[0]=e=>K(ye)(!0,{id:""}))},t[3]||(t[3]=[C("i",{class:"icon-ym icon-ym-btn-edit"},null,-1),D("写邮件")]))])),rightExtra:I((()=>[C("div",{class:"tab-tem mt-2px",onClick:t[1]||(t[1]=e=>K(pe)(!0,{}))},t[8]||(t[8]=[C("i",{class:"icon-ym icon-ym-extend-cog"},null,-1),D("邮箱配置")]))])),default:I((()=>[R(n,{key:"inBox"},{tab:I((()=>t[4]||(t[4]=[C("i",{class:"icon-ym icon-ym-extend-envelope"},null,-1),D("收件箱")]))),_:1}),R(n,{key:"star"},{tab:I((()=>t[5]||(t[5]=[C("i",{class:"icon-ym icon-ym-extend-star"},null,-1),D("星标件")]))),_:1}),R(n,{key:"draft"},{tab:I((()=>t[6]||(t[6]=[C("i",{class:"icon-ym icon-ym-extend-exclamation-triangle"},null,-1),D("草稿箱")]))),_:1}),R(n,{key:"sent"},{tab:I((()=>t[7]||(t[7]=[C("i",{class:"icon-ym icon-ym-extend-paper-plane"},null,-1),D("已发送")]))),_:1})])),_:1},8,["activeKey"]),C("div",z,[C("div",V,[R(K(m),{class:"search-form",onRegister:K(ge),onSubmit:we,onReset:Te},null,8,["onRegister"]),C("div",G,[R(c,{type:"primary",preIcon:"icon-ym icon-ym-btn-download",onClick:Re,loading:re.btnLoading},{default:I((()=>t[9]||(t[9]=[D("收邮件")]))),_:1,__:[9]},8,["loading"])])]),R(K(p),{onRegister:K(ke),searchInfo:ce.value,columns:le.value},{bodyCell:I((({column:e,record:n})=>["isRead"===e.key?(w(),T(Y,{key:0},["inBox"===K(me)||"star"===K(me)?(w(),T("span",J,[n.isRead?(w(),T("span",N,[C("i",{class:"icon-ym icon-ym-extend-envelope-open-o i-default",title:"点击标记为未读",onClick:e=>function(e){i(e.id).then((t=>{e.isRead=0,oe.success(t.msg)}))}(n)},null,8,W)])):(w(),T("span",Q,[C("i",{class:"icon-ym icon-ym-extend-envelope text-warning",title:"点击标记为已读",onClick:e=>function(e){a(e.id).then((t=>{e.isRead=1,oe.success(t.msg)}))}(n)},null,8,U)]))])):(w(),T("span",X,t[10]||(t[10]=[C("i",{class:"icon-ym icon-ym-extend-envelope-open-o i-default"},null,-1)])))],64)):B("",!0),"attachment"===e.key?(w(),T(Y,{key:1},[n.attachment&&JSON.parse(n.attachment).length?(w(),T("span",Z,t[11]||(t[11]=[C("i",{class:"icon-ym icon-ym-extend-paperclip i-default"},null,-1)]))):(w(),T("span",$))],64)):B("",!0),"subject"===e.key?(w(),T(Y,{key:2},["draft"===K(me)?(w(),T("p",{key:0,class:"link-text",onClick:e=>{return t=n.id,void ye(!0,{id:t});var t}},H(n.subject),9,ee)):(w(),T("p",{key:1,class:"link-text",onClick:e=>function(e,t){fe(!0,{id:e.id,isSend:t}),t||(e.isRead=1)}(n,"sent"===K(me))},H(n.subject),9,te))],64)):B("",!0),"starred"===e.key?(w(),T(Y,{key:3},[n.starred?(w(),T("span",ne,[C("i",{class:"icon-ym icon-ym-extend-star text-warning img-star",title:"点击取消星标",onClick:e=>function(e){s(e.id).then((t=>{"star"===re.activeKey?je(e.id):e.starred=0,oe.success(t.msg)}))}(n)},null,8,ie)])):(w(),T("span",ae,[C("i",{class:"icon-ym icon-ym-extend-star-o i-default img-star",title:"点击标记为星标邮件",onClick:e=>function(e){o(e.id).then((t=>{e.starred=1,oe.success(t.msg)}))}(n)},null,8,se)]))],64)):B("",!0),"action"===e.key?(w(),F(K(u),{key:4,actions:be(n)},null,8,["actions"])):B("",!0)])),_:1},8,["onRegister","searchInfo","columns"])])]),R(S,{onRegister:K(de)},null,8,["onRegister"]),R(O,{onRegister:K(ue),onReload:Ie},null,8,["onRegister"]),R(A,{onRegister:K(_e)},null,8,["onRegister"])])}}}),[["__scopeId","data-v-b91984be"]]);export{oe as default};
