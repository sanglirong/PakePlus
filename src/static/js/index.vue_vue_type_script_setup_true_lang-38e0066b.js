import{g as e,_ as a,d as n,c as t}from"./Form.vue_vue_type_script_setup_true_lang-a83a7ef4.js";import{a as l,B as o}from"./index-999abbee.js";import{u as d,B as i}from"./useTable-dc8c9d84.js";import{T as s}from"./TableAction-adbe36f2.js";import{u as r}from"./index-143f5813.js";import{d as u,ad as m,a0 as c,u as f,n as b,e as _,o as p,g,j as k,l as y,k as N,m as h,t as x,F as C,h as I,bN as w,p as R,q as M,V as j,ah as T}from"./index-920db443.js";const v=u({__name:"index",setup(u){const v=m({id:"",title:"",loading:!1}),{title:B,loading:F}=c(v),{createMessage:$}=T(),{t:q}=f(),[z,{}]=l((function(e){v.id=e.id,v.title=`按钮权限 - ${e.fullName}`,V.id=e.id,b((()=>{E()}))})),[A,{openModal:O}]=r(),P=[{fullName:"新增",id:"btn_add"},{fullName:"编辑",id:"btn_edit"},{fullName:"详情",id:"btn_detail"},{fullName:"删除",id:"btn_remove"},{fullName:"批量删除",id:"btn_batchRemove"},{fullName:"批量打印",id:"btn_batchPrint"},{fullName:"复制",id:"btn_copy"},{fullName:"导入",id:"btn_upload"},{fullName:"导出",id:"btn_download"}],V=m({id:""}),[D,{reload:E}]=d({api:e,searchInfo:V,columns:[{title:"按钮名称",dataIndex:"fullName",width:160},{title:"按钮编码",dataIndex:"enCode"},{title:"排序",dataIndex:"sortCode",width:70,align:"center"},{title:"状态",dataIndex:"enabledMark",width:70,align:"center"}],pagination:!1,immediate:!1,showIndexColumn:!1,actionColumn:{width:100,title:"操作",dataIndex:"action"}});function G(e){return[{label:q("common.editText"),onClick:J.bind(null,e.id)},{label:q("common.delText"),color:"error",disabled:1==e.isMain,modelConfirm:{onOk:H.bind(null,e.id)}}]}function H(e){n(e).then((e=>{$.success(e.msg),E()}))}function J(e=""){O(!0,{moduleId:v.id,id:e})}return(e,n)=>{const l=_("a-button"),d=_("a-menu-item"),r=_("a-menu"),u=_("a-dropdown"),m=_("a-tag");return p(),g(C,null,[k(N(o),j(e.$attrs,{onRegister:N(z),title:N(B),width:700,class:"full-drawer"}),{default:y((()=>[k(N(i),{onRegister:N(D)},{tableTitle:y((()=>[k(l,{type:"primary",preIcon:"icon-ym icon-ym-btn-add",onClick:n[0]||(n[0]=e=>J())},{default:y((()=>[h(x(N(q)("common.addText")),1)])),_:1}),k(u,null,{overlay:y((()=>[k(r,null,{default:y((()=>[(p(),g(C,null,I(P,((e,a)=>k(d,{key:a,onClick:a=>function(e){v.loading=!0;let a={parentId:"-1",moduleId:v.id,fullName:e.fullName,enCode:e.id,sortCode:0,icon:"",enabledMark:1,description:""};t(a).then((e=>{$.success(e.msg),E(),v.loading=!1})).catch((()=>{v.loading=!1}))}(e)},{default:y((()=>[h(x(e.fullName),1)])),_:2},1032,["onClick"]))),64))])),_:1})])),default:y((()=>[k(l,{type:"link",loading:N(F),preIcon:"icon-ym icon-ym-btn-add"},{default:y((()=>[n[1]||(n[1]=h("常用按钮权限")),k(N(w))])),_:1,__:[1]},8,["loading"])])),_:1})])),bodyCell:y((({column:e,record:a})=>["enabledMark"===e.key?(p(),R(m,{key:0,color:1==a.enabledMark?"success":"error"},{default:y((()=>[h(x(1==a.enabledMark?"启用":"禁用"),1)])),_:2},1032,["color"])):M("",!0),"action"===e.key?(p(),R(N(s),{key:1,actions:G(a)},null,8,["actions"])):M("",!0)])),_:1},8,["onRegister"])])),_:1},16,["onRegister","title"]),k(a,{onRegister:N(A),onReload:N(E)},null,8,["onRegister","onReload"])],64)}}});export{v as _};
