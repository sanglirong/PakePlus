import{d as e,ac as t,aw as a,r as s,M as o,e as n,o as l,p as i,l as r,a4 as u,k as c,dj as m,g as d,t as p,V as f,bz as g,bA as y,ax as k,dl as h,bh as _,T as x,e5 as b,a6 as j,u as v,fQ as C,eF as M,ah as I,a5 as w,j as U,af as L,F as A,h as S,q as D,cl as R}from"./index-920db443.js";import{u as $}from"./lock-efa36e19.js";import{u as B}from"./index-00a8e634.js";import{c as O}from"./createAsyncComponent-7e8f72ac.js";import{b as N,B as P,u as q}from"./index-143f5813.js";import"./index-999abbee.js";import"./ArrowLeftOutlined-3fbf15bc.js";import"./log-2a5f2c26.js";import"./message-22b8b6a8.js";import"./emoji-a68b5251.js";import"./index-1cfe4e28.js";import"./Detail-4e2b49fe.js";import"./useWindowSizeFn-05f906e2.js";import"./Detail.vue_vue_type_script_setup_true_lang-645a467a.js";import"./schedule-74da51ff.js";import"./CopyOutlined-8d46c8b2.js";import"./index-e1b7f8ad.js";import"./uniqBy-e868edd7.js";import"./useTabs-ceeccdba.js";const F="https://www.jnpfsoft.com",K={class:"about-modal-main"},V=["src"],z={class:"title"},E={href:"https://www.jnpfsoft.com",target:"_blank"},T=e({__name:"AboutModal",setup(e){const[g]=N(),y=t(),k=a(),h=s(k.apiUrl),_=o((()=>y.getSysConfigInfo));return(e,t)=>{const a=n("a-image");return l(),i(c(P),f(e.$attrs,{onRegister:c(g),title:"关于平台",footer:null,width:400,class:"about-modal"}),{default:r((()=>[u("div",K,[_.value&&_.value.logoIcon?(l(),i(a,{key:0,class:"about-logo",src:h.value+_.value.logoIcon,fallback:c(m),preview:!1},null,8,["src","fallback"])):(l(),d("img",{key:1,class:"about-logo",src:c(m)},null,8,V)),u("div",null,[u("p",z,[u("a",E,p(_.value.sysName),1)]),u("p",null,"版本："+p(_.value.sysVersion),1),t[0]||(t[0]=u("p",null,"作者：引迈软件",-1)),t[1]||(t[1]=u("p",null,"引迈信息技术有限公司出品",-1))])]),t[2]||(t[2]=u("p",{class:"about-modal-main-tip"},"解放90%重复性的代码编写工作，让你更加专注于业务和体验！",-1))])),_:1,__:[2]},16,["onRegister"])}}}),J=e({__name:"StatementModal",setup(e){const[t]=N();return(e,a)=>(l(),i(c(P),f(e.$attrs,{onRegister:c(t),title:"官方声明",footer:null,width:400,class:"about-modal"}),{default:r((()=>a[0]||(a[0]=[u("div",{class:"about-modal-main"}," JNPF是对外开放性体验产品，平台内所有数据为我司虚构的测试数据，是随机生成非敏感数据，所以严禁任何人在JNPF平台上修改数据内容、扭曲数据目的、传播或售卖测试数据，特此警告。 ",-1)]))),_:1,__:[0]},16,["onRegister"]))}}),Q=e({name:"UserDropdown",components:{Dropdown:g,Menu:y,Avatar:k,MenuItem:O((()=>h((()=>import("./DropMenuItem-2f2756c8.js")),["static/js/DropMenuItem-2f2756c8.js","static/js/index-920db443.js","static/css/index-648461a4.css"]))),MenuDivider:y.Divider,AboutModal:T,StatementModal:J},props:{theme:_.oneOf(["dark","light"])},setup(){const e=a().apiUrl,{prefixCls:t}=x("header-user-dropdown"),{t:s}=v(),{createMessage:n}=I(),l=b(),{getUseLockPage:i}=B(),r=j(),u=$(),[c,{openModal:m}]=q(),[d,{openModal:p}]=q();return{apiUrl:e,prefixCls:t,t:s,getUserInfo:o((()=>r.getUserInfo||{})),handleMenuClick:function(e){if("logout"!==e.key)if("doc"!==e.key)if("lock"!==e.key){if("profile"===e.key)return l("/profile");if("feedBack"!==e.key)return"statement"===e.key?p(!0):"about"===e.key?m(!0):void 0;C("http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=dA0dGhkVHQcbEgA0BQVaFxsZ")}else u.setLockInfo({isLock:!0});else C(F);else r.confirmLoginOut()},getUseLockPage:i,registerAboutModal:c,registerStatementModal:d,toggleStanding:function(e,t){M({majorId:e,majorType:t}).then((e=>{n.success(e.msg).then((()=>{location.reload()}))}))}}}}),G={class:"dropdown-user-info"},H={class:"flex items-center"},W={class:"flex items-center"};const Z=w(Q,[["render",function(e,t,a,s,o,c){const m=n("Avatar"),f=n("MenuDivider"),g=n("MenuItem"),y=n("a-menu-item"),k=n("a-sub-menu"),h=n("Menu"),_=n("Dropdown"),x=n("AboutModal"),b=n("StatementModal");return l(),d(A,null,[U(_,{placement:"bottomLeft",overlayClassName:`${e.prefixCls}-dropdown-overlay`},{overlay:r((()=>[U(h,{onClick:e.handleMenuClick},{default:r((()=>[u("div",G,[U(m,{class:L(`${e.prefixCls}__header mr-8px`),src:e.apiUrl+e.getUserInfo.headIcon,size:30},null,8,["class","src"]),u("span",{class:L(`${e.prefixCls}__info block`)},[u("span",{class:L(`${e.prefixCls}__name truncate`)},p(e.getUserInfo.userName),3)],2)]),U(f),U(g,{key:"profile",itemKey:"profile",text:e.t("layout.header.profile"),icon:"icon-ym icon-ym-header-userInfo"},null,8,["text"]),e.getUserInfo.standingList?.length>1?(l(),i(k,{key:"system",class:"standing-menu-item",popupClassName:"standing-menu-list"},{title:r((()=>[u("span",H,[t[0]||(t[0]=u("i",{class:"icon-ym icon-ym-header-role-toggle mr-8px"},null,-1)),u("span",null,p(e.t("layout.header.standingChange")),1)])])),default:r((()=>[(l(!0),d(A,null,S(e.getUserInfo.standingList,(t=>(l(),i(y,{key:t.id,onClick:R((a=>e.toggleStanding(t.id,"Standing")),["stop"]),disabled:!!t.currentStanding},{default:r((()=>[u("span",W,[u("span",null,p(t.name),1)])])),_:2},1032,["onClick","disabled"])))),128))])),_:1})):D("",!0),U(g,{key:"feedBack",itemKey:"feedBack",text:e.t("layout.header.feedback"),icon:"icon-ym icon-ym-header-feedBack"},null,8,["text"]),U(g,{key:"about",itemKey:"about",text:e.t("layout.header.about"),icon:"icon-ym icon-ym-header-about"},null,8,["text"]),U(g,{key:"statement",itemKey:"statement",text:e.t("layout.header.statement"),icon:"icon-ym icon-ym-generator-card"},null,8,["text"]),e.getUseLockPage?(l(),i(g,{key:"lock",itemKey:"lock",text:e.t("layout.header.tooltipLock"),icon:"icon-ym icon-ym-header-lockScreen"},null,8,["text"])):D("",!0),U(f),U(g,{key:"logout",itemKey:"logout",text:e.t("layout.header.dropdownItemLoginOut"),icon:"icon-ym icon-ym-header-loginOut"},null,8,["text"])])),_:1},8,["onClick"])])),default:r((()=>[u("span",{class:L([[e.prefixCls,`${e.prefixCls}--${e.theme}`],"flex"])},[U(m,{class:L(`${e.prefixCls}__header`),src:e.apiUrl+e.getUserInfo.headIcon,size:30},null,8,["class","src"])],2)])),_:1},8,["overlayClassName"]),U(x,{onRegister:e.registerAboutModal},null,8,["onRegister"]),U(b,{onRegister:e.registerStatementModal},null,8,["onRegister"])],64)}]]);export{Z as default};
