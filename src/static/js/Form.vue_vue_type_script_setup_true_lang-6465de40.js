import{g as e,u as a,c as o}from"./permissionGroup-129512c4.js";import{b as t,B as r}from"./index-143f5813.js";import{u as l,B as s}from"./useForm-1d28ee0b.js";import"./componentMap-c91676b4.js";import{d as n,ad as d,u as i,M as m,o as p,p as c,l as u,j as f,k as g,V as b,ah as h}from"./index-920db443.js";import{f as F}from"./formValidate-c8ab8d29.js";const x=n({__name:"Form",emits:["register","reload"],setup(n,{emit:x}){const j=x,M=d({dataForm:{id:"",fullName:"",enCode:"",type:"",enabledMark:1,globalMark:null,organizeIdsTree:[],sortCode:0,description:""}}),[k,{setFieldsValue:V,resetFields:C,validate:N}]=l({labelWidth:110,schemas:[{field:"fullName",label:"权限组名称",component:"Input",componentProps:{placeholder:"请输入",maxlength:50},rules:[{required:!0,trigger:"blur",message:"必填"}]},{field:"enCode",label:"权限组编码",component:"Input",componentProps:{placeholder:"请输入",maxlength:50},rules:[{required:!0,trigger:"blur",message:"必填"},{validator:F("enCode"),trigger:"blur"}]},{field:"type",label:"权限组类型",component:"Radio",defaultValue:0,componentProps:{options:[{fullName:"全部成员",id:0},{fullName:"自定义",id:1}]}},{field:"sortCode",label:"排序",defaultValue:0,component:"InputNumber",componentProps:{min:0,max:999999,placeholder:"请输入"}},{field:"enabledMark",label:"状态",defaultValue:1,component:"Switch"},{field:"description",label:"说明",component:"Textarea",componentProps:{placeholder:"请输入"}}]}),[P,{closeModal:R,changeLoading:I,changeOkLoading:T}]=t((function(a){C(),M.dataForm.id=a.id,M.dataForm.id&&(I(!0),e(M.dataForm.id).then((e=>{V(e.data),I(!1)})))})),{createMessage:_}=h(),{t:v}=i(),w=m((()=>M.dataForm.id?v("common.editText"):v("common.addText")));async function y(){const e=await N();if(!e)return;T(!0);const t={...M.dataForm,...e};(M.dataForm.id?a:o)(t).then((e=>{_.success(e.msg),T(!1),R(),j("reload")})).catch((()=>{T(!1)}))}return(e,a)=>(p(),c(g(r),b(e.$attrs,{onRegister:g(P),title:w.value,onOk:y}),{default:u((()=>[f(g(s),{onRegister:g(k)},null,8,["onRegister"])])),_:1},16,["onRegister","title"]))}});export{x as _};
