import{d as t,ad as e,a0 as i,r,u as s,aD as a,a7 as n,o,g as d,a4 as p,j as m,k as u,n as l}from"./index-920db443.js";import{B as c}from"./BasicLeftTree-cd55d444.js";import{u as j,B as y}from"./useTable-dc8c9d84.js";import{l as _}from"./table-3a9e3e55.js";import"./useForm-1d28ee0b.js";import"./componentMap-c91676b4.js";import"./visualDev-8f54ab4b.js";import"./index.vue_vue_type_script_setup_true_lang-69353133.js";import"./index-9c138ba5.js";import"./ArrowLeftOutlined-3fbf15bc.js";import"./log-2a5f2c26.js";import"./index-143f5813.js";import"./useWindowSizeFn-05f906e2.js";import"./index-999abbee.js";import"./Parser.vue_vue_type_script_setup_true_lang-6ddfe448.js";import"./Item.vue_vue_type_script_setup_true_lang-fef56f78.js";import"./Form.vue_vue_type_script_setup_true_lang-63005a4d.js";import"./createAsyncComponent-7e8f72ac.js";import"./DataLogList.vue_vue_type_script_setup_true_lang-c225eb8c.js";import"./index-0be8277c.js";import"./jquery-6353a699.js";import"./useDefineSetting-7df030ff.js";import"./CustomForm.vue_vue_type_script_setup_true_lang-1aa664f4.js";import"./config-06ca91cd.js";import"./upperFirst-2cd1a2f7.js";import"./useTabs-ceeccdba.js";import"./uniqBy-e868edd7.js";import"./sortable.esm-02d0fe44.js";import"./SettingOutlined-dd6150a2.js";import"./index-1cfe4e28.js";const f={class:"jnpf-content-wrapper"},g={class:"jnpf-content-wrapper-left"},w={class:"jnpf-content-wrapper-center"},I={class:"jnpf-content-wrapper-content"},x=t({name:"extend-tableDemo-treeTable",__name:"index",setup(t){const x=e({industryTypeList:[],treeLoading:!1}),{industryTypeList:h,treeLoading:v}=i(x),D=r(null),{t:L}=s(),T=a(),b=[{title:"项目名称",dataIndex:"projectName",width:200},{title:"项目编码",dataIndex:"projectCode",width:160},{title:"项目类型",dataIndex:"projectType",width:120,customRender:({record:t})=>{let e=x.industryTypeList.filter((e=>e.id==t.projectType))[0];return e&&e.fullName?e.fullName:""}},{title:"项目阶段",dataIndex:"projectPhase",width:120},{title:"客户名称",dataIndex:"customerName",width:200},{title:"负责人",dataIndex:"principal",width:80},{title:"立项人",dataIndex:"jackStands",width:80},{title:"交互时间",dataIndex:"interactionDate",width:100,format:"date|YYYY-MM-DD"},{title:"费用金额",dataIndex:"costAmount",width:100},{title:"已用金额",dataIndex:"tunesAmount",width:100},{title:"预计收入",dataIndex:"projectedIncome",width:100},{title:"登记人",dataIndex:"registrant",width:80},{title:"登记时间",dataIndex:"registerDate",width:150,format:"date|YYYY-MM-DD HH:mm:ss"},{title:"备注",dataIndex:"description",width:100}],F=e({typeId:""}),[S,{reload:Y,setLoading:M,getForm:R}]=j({api:_,columns:b,searchInfo:F,useSearchForm:!0,immediate:!1,formConfig:{schemas:[{field:"keyword",label:L("common.keyword"),component:"Input",componentProps:{placeholder:L("common.enterKeyword"),submitOnPressEnter:!0}}]}});async function k(t=!1){x.treeLoading=!0,t&&M(!0);const e=await T.getDictionaryData("IndustryType");e.map((t=>(t.children=[],t))),x.industryTypeList=e,l((()=>{t&&(F.typeId=x.industryTypeList[0].id);const e=u(D);e?.setSelectedKeys([F.typeId]),t&&F.typeId&&Y(),x.treeLoading=!1}))}function A(){x.industryTypeList=[],k()}function B(t){t&&F.typeId!==t&&(F.typeId=t,R().resetFields())}return n((()=>k(!0))),(t,e)=>(o(),d("div",f,[p("div",g,[m(u(c),{title:"项目分类",ref_key:"leftTreeRef",ref:D,treeData:u(h),loading:u(v),onReload:A,onSelect:B,showToolbar:""},null,8,["treeData","loading"])]),p("div",w,[p("div",I,[m(u(y),{onRegister:u(S)},null,8,["onRegister"])])])]))}});export{x as default};
