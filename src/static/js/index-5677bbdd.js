import{u as e,B as t}from"./useTable-dc8c9d84.js";import{T as n}from"./TableAction-adbe36f2.js";import{d as a,u as s,r as o,ad as r,gV as i,e as l,o as p,g as d,a4 as u,p as m,l as c,j as _,m as j,t as g,k as f,q as v,gW as y,ah as x}from"./index-920db443.js";import{u as b}from"./index-143f5813.js";import{_ as h}from"./Form.vue_vue_type_script_setup_true_lang-0fcd4e5f.js";import"./useForm-1d28ee0b.js";import"./componentMap-c91676b4.js";import"./visualDev-8f54ab4b.js";import"./index.vue_vue_type_script_setup_true_lang-69353133.js";import"./index-9c138ba5.js";import"./ArrowLeftOutlined-3fbf15bc.js";import"./log-2a5f2c26.js";import"./index-999abbee.js";import"./Parser.vue_vue_type_script_setup_true_lang-6ddfe448.js";import"./Item.vue_vue_type_script_setup_true_lang-fef56f78.js";import"./Form.vue_vue_type_script_setup_true_lang-63005a4d.js";import"./createAsyncComponent-7e8f72ac.js";import"./DataLogList.vue_vue_type_script_setup_true_lang-c225eb8c.js";import"./index-0be8277c.js";import"./jquery-6353a699.js";import"./useDefineSetting-7df030ff.js";import"./CustomForm.vue_vue_type_script_setup_true_lang-1aa664f4.js";import"./config-06ca91cd.js";import"./upperFirst-2cd1a2f7.js";import"./useTabs-ceeccdba.js";import"./uniqBy-e868edd7.js";import"./useWindowSizeFn-05f906e2.js";import"./sortable.esm-02d0fe44.js";import"./SettingOutlined-dd6150a2.js";import"./index-1cfe4e28.js";import"./formValidate-c8ab8d29.js";const k={class:"jnpf-content-wrapper"},w={class:"jnpf-content-wrapper-center"},C={class:"jnpf-content-wrapper-content"},I=a({name:"system-task",__name:"index",setup(a){const{t:I}=s(),T=o(+new Date),{createMessage:F}=x(),[M,{openModal:R}]=b(),D=r({nodeId:-1}),A=o(!1),[S,{reload:L}]=e({api:i,columns:[{title:"区域名称",dataIndex:"fullName"},{title:"区域编码",dataIndex:"enCode"},{title:"排序",dataIndex:"sortCode",width:70},{title:"状态",dataIndex:"enabledMark",width:70}],searchInfo:{nodeId:-1},isTreeTable:!0,defaultExpandAllRows:!1,pagination:!1,tableSetting:{expand:!1,redo:!1},afterFetch:e=>e.map((e=>{const t=e;return t.hasChildren&&(t.children=[]),t})),onExpand:async(e,t)=>{if(e){if(t.children?.length)return;A.value=!0,D.nodeId=t.id;const e=(await i(D)).data.list.map((e=>{const t=e;return t.hasChildren&&(t.children=[]),t}));A.value=!1,t.children=e}},actionColumn:{width:100,title:"操作",dataIndex:"action"}});function O(e){return[{label:I("common.editText"),onClick:q.bind(null,e.id)},{label:I("common.delText"),color:"error",modelConfirm:{onOk:B.bind(null,e.id)}}]}function q(e=""){R(!0,{id:e})}function B(e){y(e).then((e=>{F.success(e.msg),E()}))}function E(){T.value=+new Date,L()}return(e,a)=>{const s=l("a-button"),o=l("a-tag");return p(),d("div",k,[u("div",w,[u("div",C,[(p(),m(f(t),{onRegister:f(S),loading:A.value,key:T.value},{tableTitle:c((()=>[_(s,{type:"primary",preIcon:"icon-ym icon-ym-btn-add",onClick:a[0]||(a[0]=e=>q())},{default:c((()=>[j(g(f(I)("common.addText")),1)])),_:1})])),bodyCell:c((({column:e,record:t})=>["enabledMark"===e.key?(p(),m(o,{key:0,color:1==t.enabledMark?"success":"error"},{default:c((()=>[j(g(1==t.enabledMark?"启用":"禁用"),1)])),_:2},1032,["color"])):v("",!0),"action"===e.key?(p(),m(f(n),{key:1,actions:O(t)},null,8,["actions"])):v("",!0)])),_:1},8,["onRegister","loading"]))])]),_(h,{onRegister:f(M),onReload:E},null,8,["onRegister"])])}}});export{I as default};
