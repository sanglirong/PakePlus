import{d as e,r as l,o as a,p as t,l as n,a4 as o,j as i,k as c,m as u,V as s,e as d,g as r,F as p,h as m,t as f,ah as v,ad as y,c as h,a0 as _,i as g,v as b,q as k,n as A,eg as C,aY as I,fl as U,am as w,fE as D,a5 as F,ac as S,M as T,a7 as K,af as N,be as x,fI as L,ab as B,ec as j,dn as R,ci as O,T as Q,aP as M}from"./index-920db443.js";import{a as E,_ as J}from"./index-c37d2476.js";import{n as P,d as H,a as V,b as z,c as q,e as G,g as Z,f as W,h as Y,i as X,j as $}from"./config-a2a35532.js";import{n as ee}from"./jquery-6353a699.js";import{d as le}from"./vuedraggable.umd-11acc51f.js";import{b as ae,B as te,u as ne}from"./index-143f5813.js";import{M as oe}from"./index-3b5bee70.js";import{_ as ie}from"./InitiatorUserSelect.vue_vue_type_script_setup_true_lang-dfa9afb0.js";import{s as ce,c as ue,n as se,d as de,h as re,i as pe}from"./config-06ca91cd.js";import{v as me,w as fe}from"./visualDev-8f54ab4b.js";import{t as ve,i as ye,s as he}from"./define-8efdf20f.js";import{_ as _e,a as ge}from"./ComplexHeaderModal.vue_vue_type_style_index_0_lang-cb4acf18.js";import{S as be}from"./sortable.esm-02d0fe44.js";import{B as ke}from"./BatchOperate-c1982233.js";import{a as Ae}from"./index-7e2f1b8c.js";const Ce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAABFCAYAAACmLqNJAAAABHNCSVQICAgIfAhkiAAAAgxJREFUeF7tnc1NQlEQRu917U8MC40V2IA1uLAGe7AUe7AKarABl64EI2geuPYKujIRIpMvw/fksCSZmY9znMdl461l8Xqadpf1o9yUWs5LqUfL93hti0DrSisPba/cng2OhnX00l2VWu+2FYe5awi0dl3Hk/mwlXYBKD8CtdT7Opp0j4vH2qFfPBKV0mYLQbNXUPgSQJCvm69kCEKQOQHzeGxQnwWdDg6OzfP/i3jj6fxt1QdZu0EIyvGPoBzO4SkICqPLKURQDufwFASF0eUUIiiHc3gKgsLocgoRlMM5PAVBYXQ5hQjK4RyeIhf0PH0Ph9nlwpPB/q8fH0EmfxUIMhGxKkaaIHMOvYsnf8T1joB5YAQhyJyAeTw2CEHmBMzjyTeIH6ox42nHbAQhKEbAvCptg8w59C6e/DuodwTMAyMIQeYEzOOxQbsmiGN2zHjaKQ5BCIoRMK9K2yBzDr2LxyHBXBmCEGROwDweG4QgcwLm8eQbxO+gmPG0YzaCzAXF4lG1ioD8EQdqLQEEaXnKuyFIjlTbEEFanvJuCJIj1TZEkJanvBuC5Ei1DRGk5SnvhiA5Um1DBGl5yrshSI5U2zAsSBuDbhEC/FPZCLXEGgQlwo6MQlCEWmINghJhR0Zx+0mEWlrN4vYT7g9Ko73xoO/7g7iBa2NwaQXLG7iWw7jDLg35Hwb9vMPuE4euCW8hOV+uAAAAAElFTkSuQmCC",Ie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAABFCAYAAACmLqNJAAAABHNCSVQICAgIfAhkiAAAAf5JREFUeF7tncFNw0AQRXEDILqgAS52ARyQ7ArogVLogQp8TAHOJQ1wpAIQNGDWviFhUEZfk7/k5RaUmfl5jwmbC9tclMcwDHfzPD82TXNTnl4tP+NxMgIfxcVLcfE0juOu6fv+vjx5PlkcBm8SKKIemrI9u/KKWzhZEjgsgl5LtEvLeIT6XAS9wcGXAIJ83azJEIQgcwLm8digmgXt9/tr8/z/Il7btu9bb+TXDUJQjn8E5XAOT0FQGF1OIYJyOIenICiMLqcQQTmcw1MQFEaXU4igHM7hKQgKo8spRFAO5/AUuaCu68JhzrlwmqYf3z6CTH4rEGQiYitGmiBzDtXFk3/EVUfAPDCCEGROwDweG4QgcwLm8eQbxBfVmPG0YzaCEBQjYF6VtkHmHKqLJ/8bVB0B88AIQpA5AfN4bNC5CeKYHTOedopDEIJiBMyr0jbInEN18TgkmCtDEILMCZjHY4MQZE7APJ58g/geFDOedsxGkLmgWDyqtgjIP+JArSWAIC1PeTcEyZFqGyJIy1PeDUFypNqGCNLylHdDkByptiGCtDzl3RAkR6ptiCAtT3k3BMmRahuGBWlj0C1CgH8qG6GWWIOgRNiRUQiKUEusQVAi7Mgobj+JUMurWW8/4f6gPODHTjpwA9exyBJfv97AtczjDrtE6n+P+naH3RcAlo3ULmqOrQAAAABJRU5ErkJggg==",Ue={class:"form-script-modal-body"},we={class:"main-board"},De={class:"main-board-editor"},Fe={class:"main-board-tips"},Se=e({__name:"FormScript",emits:["register","confirm"],setup(e,{emit:d}){const r=d,[p,{closeModal:m}]=ae((function(e){v.value=e.text,y.value=e.funcName,h.value=function(e){let l="";switch(e){case"afterOnload":l="表格事件";break;case"rowStyle":l="表格行样式";break;case"cellStyle":l="单元格样式";break;case"btnEnableRule":l="启用规则配置";break;default:l=""}return l}(e.funcName)})),f=l(null),v=l(""),y=l(""),h=l("");function _(){r("confirm",v.value,y.value),m()}return(e,l)=>(a(),t(c(te),s(e.$attrs,{onRegister:c(p),title:h.value,helpMessage:"小程序不支持在线JS脚本",width:1e3,onOk:_,destroyOnClose:"",class:"form-script-modal"}),{default:n((()=>[o("div",Ue,[o("div",we,[o("div",De,[i(c(oe),{ref_key:"editorRef",ref:f,modelValue:v.value,"onUpdate:modelValue":l[0]||(l[0]=e=>v.value=e)},null,8,["modelValue"])]),o("div",Fe,[o("p",null,[l[1]||(l[1]=u("支持JavaScript的脚本，")),i(ie,{type:y.value},null,8,["type"])])])])])])),_:1},16,["onRegister","title"]))}}),Te=e({__name:"UpLoadTpl",emits:["register","confirm"],setup(e,{emit:y}){const h=y,[_,{closeModal:g}]=ae((function(e){k.value=e.dataType||"1",I.value=[],U.value=[],A.value=!1,C.value=!1,w.value=[];for(let l=0;l<e.fieldsOptions.length;l++){const a=e.fieldsOptions[l],t=a.__config__.required,n=a.__config__.jnpfKey;[...P,...ce].includes(n)||(I.value.push({id:a.id,fullName:a.fullName,disabled:t}),t&&(U.value.push(a.id),w.value.push(a.id)))}e.selectKey?.length&&(U.value=[...U.value,...e.selectKey],U.value=Array.from(new Set(U.value)));if(!U.value.length)return;F(U.value)})),{createMessage:b}=v(),k=l("1"),A=l(!1),C=l(!1),I=l([]),U=l([]),w=l([]);function D(e){const l=e.target.checked;U.value=l?I.value.map((e=>e.id)):w.value,A.value=!l&&!!w.value.length}function F(e){const l=e.length;C.value=l===I.value.length,A.value=!!l&&l<I.value.length}function S(){if(!U.value.length)return b.warning("请至少选择一个导入字段");h("confirm",{dataType:k.value,selectKey:U.value}),g()}return(e,l)=>{const v=d("BasicHelp"),y=d("a-radio"),h=d("a-radio-group"),g=d("a-form-item"),b=d("a-checkbox"),w=d("a-checkbox-group"),T=d("a-form");return a(),t(c(te),s(e.$attrs,{onRegister:c(_),title:"模板设置",width:600,onOk:S,destroyOnClose:"",class:"export-modal"}),{default:n((()=>[i(T,{colon:!1,labelAlign:"left",labelCol:{style:{width:"90px"}}},{default:n((()=>[i(g,{label:"导入模式"},{default:n((()=>[i(h,{value:k.value,"onUpdate:value":l[0]||(l[0]=e=>k.value=e)},{default:n((()=>[i(y,{value:"1"},{default:n((()=>[l[3]||(l[3]=u("仅新增数据")),i(v,{text:"导入数据只能进行新增，同一条数据无法重复导入"})])),_:1,__:[3]}),i(y,{value:"2"},{default:n((()=>[l[4]||(l[4]=u("更新和新增数据")),i(v,{text:"允许新增数据的同时支持导入数据更新"})])),_:1,__:[4]})])),_:1},8,["value"])])),_:1}),l[6]||(l[6]=o("div",{class:"export-line"},[o("p",{class:"export-label"},[u("表单数据"),o("span",null,"请选择要导入的字段")])],-1)),i(b,{indeterminate:A.value,checked:C.value,"onUpdate:checked":l[1]||(l[1]=e=>C.value=e),onChange:D},{default:n((()=>l[5]||(l[5]=[u("全选")]))),_:1,__:[5]},8,["indeterminate","checked"]),i(w,{value:U.value,"onUpdate:value":l[2]||(l[2]=e=>U.value=e),class:"options-list",onChange:F},{default:n((()=>[(a(!0),r(p,null,m(I.value,(e=>(a(),t(b,{key:e.id,value:e.id,disabled:e.disabled,class:"options-item"},{default:n((()=>[u(f(e.fullName),1)])),_:2},1032,["value","disabled"])))),128))])),_:1},8,["value"])])),_:1,__:[6]})])),_:1},16,["onRegister"])}}}),Ke={class:"required-sign"},Ne={class:"form-script-editor"},xe={class:"form-script-tips"},Le={class:"required-sign"},Be=e({__name:"BtnEvent",emits:["register","confirm"],setup(e,{emit:A}){const C=A,{createMessage:I}=v(),[U,{closeModal:w}]=ae((function(e){x.value=e.showType||"pc",L.dataForm={...h(N),...h(e.dataForm)},Q.value=h(e.formFieldsOptions).filter((e=>!V.includes(e.__config__.jnpfKey)&&e.id.indexOf("-")<0)).map((e=>({...e,disabled:!1}))),M.value=[{fullName:"@表单ID",id:"@formId"},...Q.value],J.value=[{fullName:"@表单ID",id:"@formId"},...h(e.formFieldsOptions).map((e=>({...e,disabled:!1})))],me({type:1,webType:"1,2",enableFlow:0,isRelease:1}).then((e=>{R.value=e.data.list})),Z()})),[D,{openModal:F}]=ne(),S=[{id:"dialog",fullName:"居中弹窗"},{id:"drawer",fullName:"右侧弹窗"}],T=["600px","800px","1000px","40%","50%","60%","70%","80%"],K=[{width:50,title:"序号",align:"center",customRender:({index:e})=>e+1},{title:"当前表单值",dataIndex:"currentField",key:"currentField",width:250},{title:"赋值给",dataIndex:"type",key:"type",align:"center"},{title:"弹窗表单值",dataIndex:"field",key:"field",width:250},{title:"操作",dataIndex:"action",key:"action",width:50}],N={btnType:1,modelId:"",popupTitle:"自定义操作",popupType:"dialog",popupWidth:"800px",formOptions:[],customBtn:!1,func:"({ data, index, refresh, onlineUtils }) => {\r\n   \r\n}",enableFunc:H,interfaceId:"",interfaceName:"",templateJson:[],useConfirm:!1,confirmTitle:"此操作将通过接口处理",isRefresh:!1,position:1,btnShowType:"",btnIcon:"",launchFlow:{flowId:"",flowName:"",currentUser:1,customUser:0,initiator:[],transferList:[],formFieldList:[]},dataRequired:!0},x=l("pc"),L=y({dataForm:h(N),formRules:{btnType:[{required:!0,message:"必填",trigger:"change"}],modelId:[{required:!0,message:"必填",trigger:"change"}],popupTitle:[{required:!0,message:"必填",trigger:"change"}],interfaceId:[{required:!0,message:"必填",trigger:"change"}],confirmTitle:[{required:!0,message:"必填",trigger:"change"}]}}),{dataForm:B,formRules:j}=_(L),R=l([]),O=l([]),Q=l([]),M=l([]),J=l([]),P=l(),V=ue.filter((e=>"billRule"!=e));function z(){2===L.dataForm.position&&1===L.dataForm.btnType&&(L.dataForm.btnType=2,q())}function q(){L.dataForm={...L.dataForm,modelId:"",popupTitle:"自定义操作",popupType:"dialog",popupWidth:"800px",formOptions:[],customBtn:!1,func:"({ data, index, refresh, onlineUtils }) => {\r\n   \r\n}",interfaceId:"",interfaceName:"",templateJson:[],useConfirm:!1,confirmTitle:"此操作将通过接口处理",isRefresh:!1},L.dataForm.formOptions=[],L.dataForm.templateJson=[],O.value=[],P.value?.clearValidate()}function G(e){L.dataForm.formOptions=L.dataForm.formOptions.map((e=>({...e,field:""}))),L.dataForm.templateJson=L.dataForm.templateJson.map((e=>({...e,relationField:1===e.sourceType?"":e.relationField}))),e?Z():O.value=[]}function Z(){L.dataForm.modelId&&fe(L.dataForm.modelId,1).then((e=>{O.value=e.data.list.map((e=>({...e,id:e.vmodel,fullName:e.label})))}))}function W(e){e&&(L.dataForm.modelId||I.warning("请先选择关联功能"))}function Y(e,l){if(!e)return L.dataForm.interfaceId="",L.dataForm.interfaceName="",void(L.dataForm.templateJson=[]);L.dataForm.interfaceId!==e&&(L.dataForm.interfaceId=e,L.dataForm.interfaceName=l.fullName,L.dataForm.templateJson=l.templateJson?l.templateJson.map((e=>({...e,relationField:"",sourceType:1}))):[])}async function X(){try{if(!(await(P.value?.validate())))return;if(1==L.dataForm.btnType){if(!L.dataForm.formOptions.length)return I.warning("赋值规则不能为空");if(L.dataForm.formOptions.length)for(let e=0;e<L.dataForm.formOptions.length;e++){const l=L.dataForm.formOptions[e];if(!l.currentField)return I.warning(`赋值规则第${e+1}行当前表单值不能为空`);if(!l.field)return I.warning(`赋值规则第${e+1}行弹窗表单值不能为空`)}}if(4==L.dataForm.btnType){const e=L.dataForm.launchFlow;if(!e.transferList.length)return I.warning("请至少设置一个字段");for(let l=0;l<e.transferList.length;l++){const a=e.transferList[l];if(!a.targetField)return I.warning(`第${l+1}行目标表单值不能为空`);if(!a.sourceValue)return I.warning(`第${l+1}行值不能为空`)}if(e.customUser&&!e.initiator?.length)return I.warning("请选择自定义发起人")}C("confirm",L.dataForm),w()}catch(e){}}function $(e){e.relationField=4==e.sourceType?ye[0]?.id:""}function ee(e){return e?he.filter((e=>3!=e.id)):he}function le(){F(!0,{text:L.dataForm.enableFunc,funcName:"btnEnableRule"})}function ce(e){L.dataForm.enableFunc=e}return(e,l)=>{const v=d("a-radio"),y=d("BasicHelp"),h=d("a-radio-group"),_=d("a-form-item"),A=d("jnpf-icon-picker"),C=d("a-switch"),I=d("a-button"),w=d("jnpf-group-title"),F=d("jnpf-tree-select"),N=d("a-input"),H=d("jnpf-select"),V=d("a-select-option"),Z=d("a-select"),ae=d("a-table"),ne=d("jnpf-input-number"),ue=d("jnpf-date-picker"),se=d("a-form");return a(),r(p,null,[i(c(te),s(e.$attrs,{onRegister:c(U),title:"按钮事件配置",helpMessage:"小程序不支持在线JS脚本",width:800,onOk:X,destroyOnClose:"",class:"btn-event-modal"}),{default:n((()=>[i(se,{colon:!1,labelAlign:"left",labelCol:{style:{width:"90px"}},model:c(B),rules:c(j),ref_key:"formElRef",ref:P,hideRequiredMark:""},{default:n((()=>[i(_,{label:"按钮位置",name:"position"},{default:n((()=>[i(h,{value:c(B).position,"onUpdate:value":l[0]||(l[0]=e=>c(B).position=e),onChange:z},{default:n((()=>[i(v,{value:1},{default:n((()=>l[15]||(l[15]=[u("列表中")]))),_:1,__:[15]}),i(v,{value:2},{default:n((()=>[l[16]||(l[16]=u("列表头部")),i(y,{text:"树形表格自定义按钮不支持列表头部"})])),_:1,__:[16]})])),_:1},8,["value"])])),_:1}),g(i(_,{label:"按钮图标"},{default:n((()=>[i(A,{value:c(B).btnIcon,"onUpdate:value":l[1]||(l[1]=e=>c(B).btnIcon=e),placeholder:"请选择"},null,8,["value"])])),_:1},512),[[b,2===c(B).position]]),g(i(_,{label:"必选提示"},{default:n((()=>[i(C,{checked:c(B).dataRequired,"onUpdate:checked":l[2]||(l[2]=e=>c(B).dataRequired=e)},null,8,["checked"])])),_:1},512),[[b,2===c(B).position]]),g(i(_,{label:"启用规则"},{default:n((()=>[i(I,{block:"",onClick:le},{default:n((()=>l[17]||(l[17]=[u("启用规则配置")]))),_:1,__:[17]})])),_:1},512),[[b,2!==c(B).position]]),i(w,{content:"动作设置",bordered:!1}),i(_,{label:"类型选择",name:"btnType"},{default:n((()=>[i(h,{value:c(B).btnType,"onUpdate:value":l[3]||(l[3]=e=>c(B).btnType=e),onChange:q},{default:n((()=>[2!=c(B).position?(a(),t(v,{key:0,value:1},{default:n((()=>l[18]||(l[18]=[u("弹窗配置")]))),_:1,__:[18]})):k("",!0),i(v,{value:2},{default:n((()=>l[19]||(l[19]=[u("JS脚本")]))),_:1,__:[19]}),i(v,{value:3},{default:n((()=>l[20]||(l[20]=[u("数据接口")]))),_:1,__:[20]}),i(v,{value:4},{default:n((()=>l[21]||(l[21]=[u("发起审批")]))),_:1,__:[21]})])),_:1},8,["value"])])),_:1}),1==c(B).btnType?(a(),r(p,{key:0},[i(_,{label:"选择表单",name:"modelId"},{default:n((()=>[i(F,{value:c(B).modelId,"onUpdate:value":l[4]||(l[4]=e=>c(B).modelId=e),options:R.value,placeholder:"请选择",lastLevel:"",allowClear:"",onChange:G},null,8,["value","options"])])),_:1}),i(_,{label:"弹窗标题",name:"popupTitle"},{default:n((()=>[i(N,{value:c(B).popupTitle,"onUpdate:value":l[5]||(l[5]=e=>c(B).popupTitle=e),placeholder:"请输入",allowClear:""},null,8,["value"])])),_:1}),"pc"===x.value?(a(),t(_,{key:0,label:"弹窗类型",name:"popupType"},{default:n((()=>[i(H,{value:c(B).popupType,"onUpdate:value":l[6]||(l[6]=e=>c(B).popupType=e),placeholder:"请选择",options:S},null,8,["value"])])),_:1})):k("",!0),"pc"===x.value?(a(),t(_,{key:1,label:"弹窗宽度",name:"popupWidth"},{default:n((()=>[i(Z,{value:c(B).popupWidth,"onUpdate:value":l[7]||(l[7]=e=>c(B).popupWidth=e)},{default:n((()=>[(a(),r(p,null,m(T,(e=>i(V,{key:e,value:e},{default:n((()=>[u(f(e),1)])),_:2},1032,["value"]))),64))])),_:1},8,["value"])])),_:1})):k("",!0),i(_,{label:"赋值规则",style:{"margin-bottom":"0"}}),i(ae,{"data-source":c(B).formOptions,columns:K,size:"small",pagination:!1},{bodyCell:n((({column:e,record:o,index:i})=>["currentField"===e.key?(a(),t(H,{key:0,value:o.currentField,"onUpdate:value":e=>o.currentField=e,placeholder:"请选择",options:M.value,fieldNames:{options:"options1"},allowClear:"",showSearch:""},null,8,["value","onUpdate:value","options"])):k("",!0),"type"===e.key?(a(),r(p,{key:1},[u("赋值给")],64)):k("",!0),"field"===e.key?(a(),t(H,{key:2,value:o.field,"onUpdate:value":e=>o.field=e,placeholder:"请选择",options:O.value,showSearch:"",onDropdownVisibleChange:W},null,8,["value","onUpdate:value","options"])):k("",!0),"action"===e.key?(a(),t(I,{key:3,class:"action-btn",type:"link",color:"error",onClick:e=>function(e){L.dataForm.formOptions.splice(e,1)}(i),size:"small"},{default:n((()=>l[22]||(l[22]=[u("删除")]))),_:2,__:[22]},1032,["onClick"])):k("",!0)])),emptyText:n((()=>l[23]||(l[23]=[o("p",{class:"leading-60px"},"暂无数据",-1)]))),_:1},8,["data-source"]),o("div",{class:"table-add-action mb-20px",onClick:l[8]||(l[8]=e=>{L.dataForm.formOptions.push({currentField:"",field:""})})},[i(I,{type:"link",preIcon:"icon-ym icon-ym-btn-add"},{default:n((()=>l[24]||(l[24]=[u("新增")]))),_:1,__:[24]})]),i(_,{label:"自定义按钮事件",labelCol:{style:{width:"110px"}}},{default:n((()=>[i(C,{checked:c(B).customBtn,"onUpdate:checked":l[9]||(l[9]=e=>c(B).customBtn=e)},null,8,["checked"]),l[25]||(l[25]=o("span",{class:"tip"},"（开启后，弹窗中按钮事件失效，调用接口事件。）",-1))])),_:1,__:[25]}),c(B).customBtn?(a(),r(p,{key:2},[i(_,{label:"数据接口",name:"interfaceId"},{default:n((()=>[i(c(E),{value:c(B).interfaceId,title:c(B).interfaceName,sourceType:3,onChange:Y},null,8,["value","title"])])),_:1}),i(_,{label:"参数设置",style:{"margin-bottom":"0"}}),i(ae,{"data-source":c(B).templateJson,columns:c(ve),size:"small",pagination:!1,class:"mb-20px"},{bodyCell:n((({column:e,record:l})=>["field"===e.key?(a(),r(p,{key:0},[o("span",Ke,f(l.required?"*":""),1),u(" "+f(l.field)+f(l.fieldName?"("+l.fieldName+")":""),1)],64)):k("",!0),"sourceType"===e.key?(a(),t(H,{key:1,value:l.sourceType,"onUpdate:value":e=>l.sourceType=e,placeholder:"请选择",options:ee(l.required),class:"!w-100px",onChange:e=>$(l)},null,8,["value","onUpdate:value","options","onChange"])):k("",!0),"relationField"===e.key?(a(),r(p,{key:2},[1===l.sourceType?(a(),t(H,{key:0,value:l.relationField,"onUpdate:value":e=>l.relationField=e,placeholder:"请选择",options:O.value,allowClear:"",showSearch:"",onDropdownVisibleChange:W},null,8,["value","onUpdate:value","options"])):2==l.sourceType?(a(),r(p,{key:1},[["int","decimal"].includes(l.dataType)?(a(),t(ne,{key:0,value:l.relationField,"onUpdate:value":e=>l.relationField=e,placeholder:"请输入",allowClear:""},null,8,["value","onUpdate:value"])):"datetime"==l.dataType?(a(),t(ue,{key:1,class:"!w-full",value:l.relationField,"onUpdate:value":e=>l.relationField=e,placeholder:"请选择",format:"YYYY-MM-DD HH:mm:ss",allowClear:""},null,8,["value","onUpdate:value"])):(a(),t(N,{key:2,value:l.relationField,"onUpdate:value":e=>l.relationField=e,placeholder:"请输入",allowClear:""},null,8,["value","onUpdate:value"]))],64)):4===l.sourceType?(a(),t(H,{key:2,value:l.relationField,"onUpdate:value":e=>l.relationField=e,placeholder:"请选择",options:c(ye),fieldNames:{options:"options1"},allowClear:"",class:"!w-204px",disabled:l.disabled},null,8,["value","onUpdate:value","options","disabled"])):k("",!0)],64)):k("",!0)])),emptyText:n((()=>l[26]||(l[26]=[o("p",{class:"leading-60px"},"暂无数据",-1)]))),_:1},8,["data-source","columns"])],64)):k("",!0),i(_,{label:"刷新数据列表",labelCol:{style:{width:"110px"}}},{default:n((()=>[i(C,{checked:c(B).isRefresh,"onUpdate:checked":l[10]||(l[10]=e=>c(B).isRefresh=e)},null,8,["checked"])])),_:1})],64)):k("",!0),2==c(B).btnType?(a(),r(p,{key:1},[o("div",Ne,[i(c(oe),{modelValue:c(B).func,"onUpdate:modelValue":l[11]||(l[11]=e=>c(B).func=e)},null,8,["modelValue"])]),o("div",xe,[o("p",null,[l[27]||(l[27]=u("支持JavaScript的脚本，")),i(ie,{type:"btnEvent"})])])],64)):k("",!0),3==c(B).btnType?(a(),r(p,{key:2},[i(_,{label:"数据接口",name:"interfaceId"},{default:n((()=>[i(c(E),{value:c(B).interfaceId,title:c(B).interfaceName,sourceType:3,onChange:Y},null,8,["value","title"])])),_:1}),i(_,{label:"参数设置",style:{"margin-bottom":"0"}}),i(ae,{"data-source":c(B).templateJson,columns:c(ve),size:"small",pagination:!1,class:"mb-20px"},{bodyCell:n((({column:e,record:l})=>["field"===e.key?(a(),r(p,{key:0},[o("span",Le,f(l.required?"*":""),1),u(" "+f(l.field)+f(l.fieldName?"("+l.fieldName+")":""),1)],64)):k("",!0),"sourceType"===e.key?(a(),t(H,{key:1,value:l.sourceType,"onUpdate:value":e=>l.sourceType=e,placeholder:"请选择",options:ee(l.required),class:"!w-100px",onChange:e=>$(l)},null,8,["value","onUpdate:value","options","onChange"])):k("",!0),"relationField"===e.key?(a(),r(p,{key:2},[1===l.sourceType?(a(),t(H,{key:0,value:l.relationField,"onUpdate:value":e=>l.relationField=e,placeholder:"请选择",options:Q.value,fieldNames:{options:"options1"},allowClear:"",showSearch:""},null,8,["value","onUpdate:value","options"])):2==l.sourceType?(a(),r(p,{key:1},[["int","decimal"].includes(l.dataType)?(a(),t(ne,{key:0,value:l.relationField,"onUpdate:value":e=>l.relationField=e,placeholder:"请输入",allowClear:""},null,8,["value","onUpdate:value"])):"datetime"==l.dataType?(a(),t(ue,{key:1,class:"!w-full",value:l.relationField,"onUpdate:value":e=>l.relationField=e,placeholder:"请选择",format:"YYYY-MM-DD HH:mm:ss",allowClear:""},null,8,["value","onUpdate:value"])):(a(),t(N,{key:2,value:l.relationField,"onUpdate:value":e=>l.relationField=e,placeholder:"请输入",allowClear:""},null,8,["value","onUpdate:value"]))],64)):4===l.sourceType?(a(),t(H,{key:2,value:l.relationField,"onUpdate:value":e=>l.relationField=e,placeholder:"请选择",options:c(ye),fieldNames:{options:"options1"},allowClear:"",class:"!w-204px"},null,8,["value","onUpdate:value","options"])):k("",!0)],64)):k("",!0)])),emptyText:n((()=>l[28]||(l[28]=[o("p",{class:"leading-60px"},"暂无数据",-1)]))),_:1},8,["data-source","columns"]),i(_,{label:"启用确认框"},{default:n((()=>[i(C,{checked:c(B).useConfirm,"onUpdate:checked":l[12]||(l[12]=e=>c(B).useConfirm=e)},null,8,["checked"])])),_:1}),c(B).useConfirm?(a(),t(_,{key:0,name:"confirmTitle"},{default:n((()=>[i(N,{value:c(B).confirmTitle,"onUpdate:value":l[13]||(l[13]=e=>c(B).confirmTitle=e),placeholder:"请输入",allowClear:""},null,8,["value"])])),_:1})):k("",!0),i(_,{label:"刷新数据列表"},{default:n((()=>[i(C,{checked:c(B).isRefresh,"onUpdate:checked":l[14]||(l[14]=e=>c(B).isRefresh=e)},null,8,["checked"])])),_:1})],64)):k("",!0),4==c(B).btnType?(a(),t(_e,{key:3,dataForm:c(B),allFormFieldsOptions:J.value},null,8,["dataForm","allFormFieldsOptions"])):k("",!0)])),_:1},8,["model","rules"])])),_:1},16,["onRegister"]),i(Se,{onRegister:c(D),onConfirm:ce},null,8,["onRegister"])],64)}}}),je=e({__name:"ConditionModal",emits:["register","confirm"],setup(e,{emit:o}){const u=o,[d,{closeModal:r,changeLoading:p}]=ae((function(e){p(!0),A((()=>{m.value?.init(e),p(!1)}))})),m=l();function f(){const e=m.value?.confirm();e&&(u("confirm",e),r())}return(e,l)=>(a(),t(c(te),s(e.$attrs,{onRegister:c(d),title:"过滤规则配置",width:700,onOk:f,destroyOnClose:"",class:"jnpf-condition-modal"}),{default:n((()=>[i(J,{ref_key:"conditionMainRef",ref:m,defaultAddEmpty:"",showFieldValueType:"",isCustomFieldValueType:""},null,512)])),_:1},16,["onRegister"]))}}),Re={key:0,class:"drag-handler icon-ym icon-ym-darg",title:"点击拖动"},Oe=e({__name:"DefaultSortConfigModal",emits:["register","confirm"],setup(e,{emit:l}){const{createMessage:p}=v(),m=y({list:[],columnOptions:[]}),{list:f}=_(m),g=[{id:"asc",fullName:"升序"},{id:"desc",fullName:"降序"}],b=l,[I,{closeModal:U}]=ae((function(e){m.list=h(e.list),m.columnOptions=h(e.columnOptions).map((e=>({...e,disabled:!1}))),A((()=>function(){const e=document.querySelector(".sort-table .ant-table-tbody");be.create(e,{handle:".drag-handler",animation:150,easing:"cubic-bezier(1, 0, 0, 1)",onStart:()=>{},onEnd:({newIndex:e,oldIndex:l})=>{const a=m.list.splice(l,1)[0];m.list.splice(e,0,a)}})}()))})),w=[{title:"拖动",dataIndex:"drag",key:"drag",align:"center",width:50},{title:"字段",dataIndex:"field",key:"field",width:300},{title:"类型",dataIndex:"sort",key:"sort",width:200},{title:"操作",dataIndex:"action",key:"action",width:50}];function D(){let e=!0;for(let l=0;l<m.list.length;l++)if(!m.list[l].field){p.warning("字段不能为空"),e=!1;break}e&&(b("confirm",m.list),A((()=>U())))}function F(e){let l=m.columnOptions;for(let a=0;a<m.list.length;a++){const t=m.list[a];t.field&&e!==a&&(l=l.filter((e=>e.id!==t.field)))}return l}return(e,l)=>{const p=d("JnpfSelect"),v=d("JnpfRadio"),y=d("a-button"),h=d("a-table");return a(),t(c(te),s(e.$attrs,{class:"JNPF-complex-header-Modal",onRegister:c(I),title:"默认排序配置",onOk:D,destroyOnClose:""}),{default:n((()=>[i(h,{size:"small",rowKey:"id",class:"sort-table","data-source":c(f),columns:w,pagination:!1},{bodyCell:n((({column:e,record:o,index:i})=>["drag"===e.key?(a(),r("i",Re)):k("",!0),"field"===e.key?(a(),t(p,{key:1,value:o.field,"onUpdate:value":e=>o.field=e,fieldNames:{options:"options1"},placeholder:"请选择",showSearch:"",allowClear:"",options:F(i)},null,8,["value","onUpdate:value","options"])):k("",!0),"sort"===e.key?(a(),t(v,{key:2,value:o.sort,"onUpdate:value":e=>o.sort=e,options:g},null,8,["value","onUpdate:value"])):k("",!0),"action"===e.key?(a(),t(y,{key:3,class:"action-btn",type:"link",color:"error",onClick:e=>function(e){m.list.splice(e,1)}(i),size:"small"},{default:n((()=>l[1]||(l[1]=[u("删除")]))),_:2,__:[1]},1032,["onClick"])):k("",!0)])),_:1},8,["data-source"]),o("div",{class:"table-add-action",onClick:l[0]||(l[0]=e=>function(){const e={field:"",sort:"desc",id:"sort"+C()};m.list.push(e)}())},[i(y,{type:"link",preIcon:"icon-ym icon-ym-btn-add"},{default:n((()=>l[2]||(l[2]=[u("添加")]))),_:1,__:[2]})])])),_:1},16,["onRegister"])}}}),Qe={key:0,class:"options-list"},Me={class:"select-item"},Ee=["onClick"],Je={key:1,class:"add-btn"},Pe={key:2},He={key:3},Ve=F(e({__name:"ExtraConfigModal",emits:["register","confirm"],setup(e,{emit:l}){const m=l,v=[{id:"static",fullName:"静态数据"},{id:"dictionary",fullName:"数据字典"},{id:"dynamic",fullName:"数据接口"}],g=[{id:"id",fullName:"id"},{id:"enCode",fullName:"enCode"}],b=[{id:"yyyy",fullName:"yyyy"},{id:"yyyy-MM",fullName:"yyyy-MM"},{id:"yyyy-MM-dd",fullName:"yyyy-MM-dd"},{id:"yyyy-MM-dd HH:mm",fullName:"yyyy-MM-dd HH:mm"},{id:"yyyy-MM-dd HH:mm:ss",fullName:"yyyy-MM-dd HH:mm:ss"}],A=[{id:"HH:mm:ss",fullName:"HH:mm:ss"},{id:"HH:mm",fullName:"HH:mm"}],F=y({activeData:{__config__:{}},dicOptions:[],options:[],allOptions:[]}),{activeData:S,dicOptions:T,options:K}=_(F),[N,{closeModal:x}]=ae((function(e){F.activeData=h(e),"select"===e.jnpfKey&&(U().then((e=>{F.dicOptions=e.data.list})),V())})),[L,{openModal:B}]=ne(),j=()=>{F.activeData.options=[],F.activeData.props.value="id",F.activeData.props.label="fullName",Reflect.has(F.activeData.props,"children")&&(F.activeData.props.children="children"),F.activeData.__config__.dictionaryType="",F.activeData.__config__.propsUrl="",F.activeData.__config__.propsName="",F.activeData.__config__.templateJson=[]},R=()=>{F.activeData.options=[]},O=(e,l)=>{if(F.activeData.options=[],!e)return F.activeData.__config__.propsUrl="",F.activeData.__config__.propsName="",F.activeData.__config__.templateJson=[],F.options=[],void(F.allOptions=[]);if(F.activeData.__config__.propsUrl===e)return;const a=l.parameterJson?JSON.parse(l.parameterJson):[];F.activeData.__config__.propsUrl=e,F.activeData.__config__.propsName=l.fullName,F.activeData.__config__.templateJson=a.map((e=>({...e,relationField:""}))),V()},Q=()=>{const e=C();F.activeData.options.push({fullName:"选项"+e,id:e})},M=e=>{F.activeData.options=e},J=I(P,300);function P(e){F.options=F.allOptions.filter((l=>-1!==l.value.toLowerCase().indexOf(e.toLowerCase())))}function H(e){P(e)}function V(){if("dynamic"!==F.activeData.__config__.dataType||!F.activeData.__config__.propsUrl)return F.allOptions=[];D(F.activeData.__config__.propsUrl).then((e=>{const l=e.data;let a=l.fieldJson?JSON.parse(l.fieldJson):[];F.allOptions=a.map((e=>({...e,value:e.defaultValue})))}))}function z(){m("confirm",F.activeData),x()}return(e,l)=>{const m=d("jnpf-radio"),y=d("a-form-item"),h=d("a-input"),_=d("a-button"),C=d("a-divider"),I=d("jnpf-tree-select"),U=d("jnpf-select"),D=d("a-auto-complete"),F=d("a-checkbox"),x=d("a-form");return a(),t(c(te),s(e.$attrs,{onRegister:c(N),title:"组件属性配置",onOk:z,destroyOnClose:"",class:"extra-config-modal"}),{default:n((()=>[o("div",{class:"extra-config-modal-body",style:w({"min-height":"select"===c(S).jnpfKey?"300px":"150px"})},[i(x,{colon:!1,labelAlign:"left",labelCol:{style:{width:"90px"}},class:"right-board-form"},{default:n((()=>["select"===c(S).jnpfKey?(a(),r(p,{key:0},[i(y,{label:"数据来源"},{default:n((()=>[i(m,{value:c(S).__config__.dataType,"onUpdate:value":l[0]||(l[0]=e=>c(S).__config__.dataType=e),options:v,optionType:"button",buttonStyle:"solid",onChange:j},null,8,["value"])])),_:1}),"static"===c(S).__config__.dataType?(a(),r("div",Qe,[i(c(le),{modelValue:c(S).options,"onUpdate:modelValue":l[1]||(l[1]=e=>c(S).options=e),animation:300,group:"selectItem",handle:".option-drag",itemKey:"uuid"},{item:n((({element:e,index:a})=>[o("div",Me,[l[15]||(l[15]=o("div",{class:"select-line-icon option-drag"},[o("i",{class:"icon-ym icon-ym-darg"})],-1)),i(h,{value:e.fullName,"onUpdate:value":l=>e.fullName=l,placeholder:"选项名"},null,8,["value","onUpdate:value"]),i(h,{value:e.id,"onUpdate:value":l=>e.id=l,placeholder:"选项值"},null,8,["value","onUpdate:value"]),o("div",{class:"close-btn select-line-icon",onClick:e=>c(S).options.splice(a,1)},l[14]||(l[14]=[o("i",{class:"icon-ym icon-ym-btn-clearn"},null,-1)]),8,Ee)])])),_:1},8,["modelValue"])])):k("",!0),"static"===c(S).__config__.dataType?(a(),r("div",Je,[i(_,{type:"link",preIcon:"icon-ym icon-ym-btn-add",onClick:Q,class:"!px-0"},{default:n((()=>l[16]||(l[16]=[u("添加选项")]))),_:1,__:[16]}),i(C,{type:"vertical"}),i(_,{type:"link",onClick:l[2]||(l[2]=e=>c(B)(!0,{options:c(S).options})),class:"!px-0"},{default:n((()=>l[17]||(l[17]=[u("批量编辑")]))),_:1,__:[17]})])):k("",!0),"dictionary"===c(S).__config__.dataType?(a(),r("div",Pe,[i(y,{label:"数据字典"},{default:n((()=>[i(I,{options:c(T),value:c(S).__config__.dictionaryType,"onUpdate:value":l[3]||(l[3]=e=>c(S).__config__.dictionaryType=e),placeholder:"请选择",lastLevel:"",allowClear:"",onChange:R},null,8,["options","value"])])),_:1}),i(y,{label:"存储字段"},{default:n((()=>[i(U,{value:c(S).props.value,"onUpdate:value":l[4]||(l[4]=e=>c(S).props.value=e),placeholder:"请选择",options:g},null,8,["value"])])),_:1})])):k("",!0),"dynamic"===c(S).__config__.dataType?(a(),r("div",He,[i(y,{label:"数据接口"},{default:n((()=>[i(c(E),{value:c(S).__config__.propsUrl,title:c(S).__config__.propsName,popupTitle:"数据接口",onChange:O},null,8,["value","title"])])),_:1}),i(y,{label:"存储字段"},{default:n((()=>[i(D,{value:c(S).props.value,"onUpdate:value":l[5]||(l[5]=e=>c(S).props.value=e),placeholder:"请输入",options:c(K),onFocus:l[6]||(l[6]=e=>H(c(S).props.value)),onSearch:l[7]||(l[7]=e=>c(J)(c(S).props.value))},null,8,["value","options"])])),_:1}),i(y,{label:"回显字段"},{default:n((()=>[i(D,{value:c(S).props.label,"onUpdate:value":l[8]||(l[8]=e=>c(S).props.label=e),placeholder:"请输入",options:c(K),onFocus:l[9]||(l[9]=e=>H(c(S).props.label)),onSearch:l[10]||(l[10]=e=>c(J)(c(S).props.label))},null,8,["value","options"])])),_:1})])):k("",!0)],64)):k("",!0),"datePicker"===c(S).jnpfKey?(a(),t(y,{key:1,label:"日期类型"},{default:n((()=>[i(U,{value:c(S).format,"onUpdate:value":l[11]||(l[11]=e=>c(S).format=e),placeholder:"请选择",options:b},null,8,["value"])])),_:1})):k("",!0),"timePicker"===c(S).jnpfKey?(a(),t(y,{key:2,label:"时间类型"},{default:n((()=>[i(U,{value:c(S).format,"onUpdate:value":l[12]||(l[12]=e=>c(S).format=e),placeholder:"请选择",options:A},null,8,["value"])])),_:1})):k("",!0),["organizeSelect","depSelect","userSelect"].includes(c(S).jnpfKey)?(a(),t(y,{key:3,label:""},{default:n((()=>[i(F,{checked:c(S).isIncludeSubordinate,"onUpdate:checked":l[13]||(l[13]=e=>c(S).isIncludeSubordinate=e)},{default:n((()=>[u(" 查询当前"+f("organizeSelect"===c(S).jnpfKey?"组织及子组织":"depSelect"===c(S).jnpfKey?"部门及子部门":"用户及下属"),1)])),_:1},8,["checked"])])),_:1})):k("",!0)])),_:1}),i(ke,{onRegister:c(L),onConfirm:M},null,8,["onRegister"])],4)])),_:1},16,["onRegister"])}}}),[["__scopeId","data-v-8ed695b0"]]),ze={class:"column-design-container"},qe={class:"main-board"},Ge={key:0,class:"drag-handler icon-ym icon-ym-darg",title:"点击拖动"},Ze=["onClick"],We={key:1},Ye={key:0,class:"drag-handler icon-ym icon-ym-darg",title:"点击拖动"},Xe={class:"right-board"},$e={class:"right-main"},el={class:"h-full"},ll={class:"h-full"},al={class:"typeList"},tl=["onClick"],nl=["src"],ol={key:0,class:"icon-checked"},il={class:"item-name"},cl={key:0},ul={key:0},sl={key:1},dl={key:2},rl={class:"required-sign"},pl={key:7},ml={class:"btnsList"},fl={key:0,class:"btnsList-cell"},vl={class:"flex-1 overflow-hidden"},yl={key:0,class:"btn-upload"},hl={key:1,class:"btn-upload"},_l={class:"btnsList"},gl=["onClick"],bl={class:"btn-cap"},kl={class:"custom-btns-list"},Al={class:"custom-item"},Cl={class:"custom-line-value"},Il=["onClick"],Ul=["onClick"],wl={class:"add-btn"},Dl={key:10},Fl=e({__name:"Main",props:["conf","formInfo","viewFields","interfaceParam","interfaceHasPage"],setup(e,{expose:s}){s({getData:function(){if(!Ke.columnData.columnList.length)return void Q.warning("列表字段不允许为空");if(2==Ke.columnData.type){if("dictionary"===Ke.columnData.treeDataSource&&!Ke.columnData.treeDictionary)return void Q.warning("请选择数据字典");if("api"===Ke.columnData.treeDataSource){if(!Ke.columnData.treePropsValue)return void Q.warning("请输入主键字段");if(!Ke.columnData.treePropsLabel)return void Q.warning("请输入回显字段");if(!Ke.columnData.treePropsChildren)return void Q.warning("请输入子级字段")}if(!Ke.columnData.treeRelation)return void Q.warning("请选择关联字段");if(!Ke.columnData.treeSyncInterfaceId&&1==Ke.columnData.treeSyncType)return void Q.warning("请选择异步数据接口")}if(3==Ke.columnData.type&&!Ke.columnData.groupField)return void Q.warning("请选择分组字段");if(5==Ke.columnData.type&&!Ke.columnData.parentField)return void Q.warning("请选择父级字段");if(5!==Ke.columnData.type&&Ke.columnData.btnsList.some((e=>"upload"===e.value&&e.show))&&!Ke.columnData.uploaderTemplateJson?.selectKey)return void Q.warning("请设置导入模板");if(5!==Ke.columnData.type&&Ke.columnData.btnsList.some((e=>"batchPrint"===e.value&&e.show))&&!Ke.columnData.printIds?.length)return void Q.warning("请选择打印模板");return Ke.columnData.defaultColumnList=Ke.columnOptions.map((e=>({...e,checked:Ke.columnData.columnList.some((l=>l.prop===e.prop))}))),Ke.columnData}});const w=e,F=S(),{createMessage:Q}=v(),M=I(ga,300),J=[{id:"dictionary",fullName:"数据字典"},{id:"api",fullName:"数据接口"},{id:"organize",fullName:"组织数据"},{id:"formField",fullName:"表单控件"}],X=[{id:0,fullName:"同步"},{id:1,fullName:"异步"}],$=[{id:1,fullName:"分组展示"},{id:2,fullName:"折叠展示"}],ae=[{id:20,fullName:"20条"},{id:50,fullName:"50条"},{id:80,fullName:"80条"},{id:100,fullName:"100条"}],te=[{width:50,title:"序号",align:"center",customRender:({index:e})=>e+1},{title:"参数名称",dataIndex:"field",key:"field",width:135},{title:"表单字段",dataIndex:"relationField",key:"relationField",width:135}],oe=[{title:"拖动",dataIndex:"drag",key:"drag",align:"center",width:50},{title:"列名",dataIndex:"label",key:"label",width:200},{title:"字段",dataIndex:"prop",key:"prop"},{title:"排序",dataIndex:"sortable",key:"sortable",width:60,align:"center"},{title:"拖动列",dataIndex:"resizable",key:"resizable",width:60,align:"center"},{title:"冻结",dataIndex:"fixed",key:"fixed",width:150},{title:"对齐",dataIndex:"align",key:"align",width:150},{title:"宽度",dataIndex:"width",key:"width",width:150}],ie=[{title:"字段",dataIndex:"fullName",key:"fullName"}],ce=T((()=>{const e="light"===F.getDarkMode;let l=[{url:e?Ce:Ie,value:1,name:"普通表格"},{url:e?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAABFCAYAAACmLqNJAAAABHNCSVQICAgIfAhkiAAAAoRJREFUeF7tnUFSAkEMRdOuVcqahZYn8AKewYVn8A4exTt4Cs7gBVy6EixBa8C17aCFhYqQmIR042dpZZLwXvdMhoWdqPvcj9uz9EqXlOiEKPVmf8MnikBuKdNt3qGr46bXT4PH9pxSuo5qB3VXEMj5Ig1H036mfApQ5RFIlG7SYNTedbe1/fLaQ0dEedIJmjwBRbkEIKhcN++dQRAEFU6g8Pawg2oWdNTsHVj1PxxPn+e5LPNa9ReZZ5HN9z5W7iBLkBD0+xKAoMjtwagNQQxIkSEQFEmfURuCGJAiQ8wEPYxfRN/jsNn9jMeQsIEhAYJE65MdjB3ERhUTaCZI0z5ucRu4xUGQhsAWCJI+43xw+WZdHJzmlaq5xUHQz8Uh+i1OClA6Zkvz+651n+yuO0gKUCrIB0n5Wc1ucRDkI9tMkKY9jNlbMMVpFkDN12IHFW4Pgv6LIO8hQZq/cO5L26t6zIYgvKiGbzrXHaT5dhizMWZr1k/otZjiQvGvLw5B6xmFRpgJkk5Z+LGU570aQdIFwPv6ZUW5TnFSgNIdJM1fFnpeN66CeC0sj+KM2RCkfFH1FqTJX/O1Zs8gDQTODtLkr/laCCrcnpkg6TNCOiQUztGtPQhyQ2uTGIJsOLplMROk6ZAzJEhvoZp+oq7Fe1AUeWZdCGKCigqrWlAUtOi61TyDokFF1YegKPLMuhDEBBUVBkFR5Jl1IYgJKioMgqLIM+tCEBNUVBgERZFn1oUgJqioMAiKIs+s+2dBzPwIcySAfyrrCNciNQRZUHTMAUGOcC1SQ5AFRcccOP3EEa4+dXf6Cc4P0mP0yvBxfhBO4PLiq887O4FrlgVn2OlZ2mX4eobdG+0CBX5OkIlQAAAAAElFTkSuQmCC":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAABFCAYAAACmLqNJAAAABHNCSVQICAgIfAhkiAAAAnVJREFUeF7tncFRQkEMQP0N6NiFDXiBAjw4AxXYg6XYgxVwpAC40IBHK9DRBnD/n8FBBUnchGTxccPJT8J7u/8HDm53Vl7T6fRmvV7fd113Vd5e9H/jFUbgrbh4Ki4eZrPZvJtMJrflzWNYOxTeS6CIuuvK7pmXiGs4pSSw6gU9l9bOU7ZHU++9oBc45CWAoLxuhs4QhKDkBJK3xw5qWdByuby06n80Gr1uclnmteovMs82m+99/LqDLEEiaP8SQFDk9hDURpAAUmQIgiLpC2ojSAApMsRM0Hg8Vn2OxWLxGc+QcIQhAUGq9SkOZgeJUcUEmgmqaZ9b3BFucQiqIXACgrTPOB9cvlm3B6dNpWZucQj6uThUv8VpAWrHbG1+37Xuk911B2kBagX5IMmf1ewWhyAf2WaCatpjzD6BKa5mAbR8LTsouT0E/RdB3kOCNn9y7jvba3rMRhBfVMM3nesOqvl0jNmM2TXrJ/RaprhQ/IeLI+gwo9AIM0HaKYsfS2XemxGkXQCyj58rynWK0wLU7iBt/lzoZd24CpK1sDtKMmYjqPKLqregmvwtX2v2DKqBINlBNflbvhZBye2ZCdI+I7RDQnKObu0hyA2tTWIE2XB0y2ImqKZDyZCgvYXW9BN1Ld+DosgL6yJICCoqrGlBUdCi6zbzDIoGFVUfQVHkhXURJAQVFYagKPLCuggSgooKQ1AUeWFdBAlBRYUhKIq8sC6ChKCiwhAURV5Y98+ChPkJcyTAP5V1hGuRGkEWFB1zIMgRrkVqBFlQdMzB6SeOcA1SD6efcH6QAUmnFCtO4HIia5F2OIGrT8QZdhY4zXJ8OcPuAy0fiePWUf3ZAAAAAElFTkSuQmCC",value:2,name:"左侧树+普通表格"},{url:e?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAABFCAYAAACmLqNJAAAABHNCSVQICAgIfAhkiAAAA9pJREFUeF7tnUFuEzEUhu2ZLaVCKbTQTRECIkAICfUMLDgDd+Ao3IFT9AqkO7pgWYmWJrRJSNJtxvjZccaThCjjeTN10D9VonQSP7/8n5/9bFe1FPr61R99kJn4LKRoCyF36R6uu1JAjYQSP1Qivjxp7Z7Iq+vRRyHl17tyB/WuUUCpT7J7MzlRQh1DqPgUkEJ25NXN6Fx3a/fjcw8eCaHGGtB4ACniVQCA4mVjPAMgAIpcgcjdQwRtM6CD1s6DyP3/L9zr9ifDf32RtREEQM3wB6BmdA6upTZASqlgp1BQp9BSGhnYARXBSAFQ5ZqbBZM37t7glmcMykEUoczvmwYBYIu45kBmTFzkGLU0rG5/bAD5952NUkkCgfj2/aJcc8GnCwq8f31oVwg8IL2BzeIqAbJRIjWgn+LoENl3SLs7vxyKd+3HGoSFYR7aEHVxLsoWIW0cQQSIGHXOLgAohI4uQ4DevjiYA0oSAiQ1oIkB5MD55jcC5KJHIxId3cUhgsIIEaA3z/cNiEQ/JUmiHx4gE0+q0NWVApSpTJyeXQJQGB8TQa+ePZoDSlMClIjfQ0oSNDCZAFCgtizFCFD76UMNxUZQmqYmgq7/UJJQERCNP5QmnGIMCoZFgF4e7VlA+okiKDURZJMEm9kVs7mNuzgfULCHKFgfIApBGoMoYcgyoR9KTKdTfc/+bu7r9zFRXW6FLoWmMYZe19LF+YCU0rA0lek0M4BMdBlAdqqMpZ8iJDe3oXHHpdN2DGJOEijNdvMhiiCC5ANyoNCTrY6ifILKnGa7qHAA7HhEgHJgBpxJI+wKLa5FBfT8hn68CSnbRDXvtuxCqIVhuzIXUf5nAGeVAvkEtJalHgeg1781Y848qma+zMcd7BGtbp+zvZ+DvR3zPvtiqQ9oMVPDdsP6PsPfbthv3Ssu5XBuN5AbNoL8nVTs/5Tp0nNANWzYLQ176M7KsFn6bG1b3pW8QuElBdj/JgEa8yoAQLx6slsDIHZJeQ0CEK+e7NYAiF1SXoOsgGgehCtcAZoHLV4AFK4ne0kAYpeU12DtgHjdhTVSgLWLg6T8CgAQv6asFlkBIYurxqb2MQiAAKiaApGXrj2CIv/+W+ke6xi0lQpE7jQAAVDkCkTuHmsEIYurRrv2JAGAIgdUzT2UXqUAaxcHifkVACB+TVktAhCrnPzGAIhfU1aLAMQqJ78xAOLXlNViMCBWL2AsSAH8U9kg2ZorBEDNaR1UEwAFydZcIQBqTuugmnD6SZBsTRXSp5/g/KCmxC5fjz0/CCdwlVeuqRJ0AhfVhTPsmlJ8k3qKZ9j9BYyLLX7zB1iYAAAAAElFTkSuQmCC":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAABFCAYAAACmLqNJAAAABHNCSVQICAgIfAhkiAAAAxxJREFUeF7tnU9uWjEQxnkcIFVXTXYN6aIXiPh3gCwqwQl6hx6ld+gJWOYAwCIX6KoBUqnNplV7AKjnSUPN4z1i7LHfPPiQWLxo7Bl/P489mAhnLfMaj8d3m83mU5Zl783jK/obXrUp8Mew+GpYfJ5MJvfZaDT6YB6+1BYOHFcqYEB9zEz23BuLW+ikUoEHArQwoV2oDA9B/SVAv6CDXgUASC+bPDIAAiDlCigPDxnUZECz2ey18vhPIrzBYPC7aiAHMwiA0vAHoDQ6e3sBIG/p0jSMCsic46UZxYl5Meds2xGJAzoEBcDKZ5INpGjR7/flioTOzbsTm8tph7N4/JY7tIGJAaLsuO7ctK4u36Qd1Yl4+/HzucWAeEgEigCRtmVZdlSZDUBhM4UALRePeyB6vV74Esd7CzLIHxIBWi0XOSB6c9YwoLIscs4gAPIHwy0J0NNquQXEkLrdbp5BABSucVAPBOj706q1Xq93ljkxQET47XUHRYInJhuQXcnxEhdUJBAcBuQZH5oZBTiDogBihdvt9lZsglZ8PvSh7BwpFfeWaEucDYg3OM4s3uTOEYDrmHnichUXpUhgEDwrAMgVz//Tgyhltp0hxfM2+xlnceXA7GW/uAWIfFAtLmFVIADoZUC2hehRD3U8HA53ImAgKAzclrr5fJ4bRjksZUBVB3soFKohMRDzbwR7RmKn2VUZhOxxyx6yYkBRv7BzDweWLgqIf6Pq4hQ27goAkLtWtVgCUC2yuzsFIHetarEEoFpkd3cKQO5a1WIpCqh4klDLiBrsdDqd7kUPQIqAApAiGGWhRAekfPyNDE90iWukAsqDBqBzAoQqLox29D0IgAAoTAHlraNnkPLxNzI8FAnKsQEQAClXQHl4ohmEKi6MdvQiAYCUAwoLD63LFBBd4iCxvAIAJK+paI8AJCqnfGcAJK+paI8AJCqnfGcAJK+paI/egESjQGdeCuBHZb1kS9cIgNJp7eUJgLxkS9cIgNJp7eUJt594yZasUX77Ce4PSqb30Y4ecAPX0Zqla5DfwEXucIddOtEdPO3cYfcPu4NQ4yG/41EAAAAASUVORK5CYII=",value:4,name:"编辑表格"},{url:e?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAABFCAYAAACmLqNJAAAABHNCSVQICAgIfAhkiAAAAipJREFUeF7tncFNAzEQRcecgQjtAUQFNEANHKiBHiiFHqgiNdAAR04kiCRoE86YXXJCYiNrbI+/8d9jtPaM39vxTnKInQzX67q/cV9yL06uRNxs/IxXKQK+Fy/P/kgeLrvZ3C3e+1tx7rFUOox7gID3d2652s29+GuCwiPgxD25xap/Gba1U7z0mJGI3w6CthuiwCVAQbhufjKjIAoCJwCeHiuoZkEX3ckZeP7/Ir3levcxtZCDFURBNv4pyIazOgoFqdHZDKQgG87qKBSkRmczkIJsOKujJBf0tv5UJ9PywPPu+M/lUxDIU0FBICKm0jATBM6huvSSb3HVEQBPmIIoCJwAeHqwFdRau15dk0BB+9JmBYFscdVVEAi34mnAVlBxMiAJUBCIiKk0KIiCdATYxbGL0z05mUZV18WxgsArKNODWt20bBLAlVEQBYETAE8veQW19nJP5desi6MgnTIK0nEzG2UmyGxFjQRK/g5qhJvZMinIDLUuEAXpuJmNghXUWjdYXZNAQeA/llIQuCCzTR48EOw7CJybWXoUZIZaF4iCdNzMRsEKYpMA3iRQEAWZbVMhgar7ohqyqBbugX0HtQA/ZI0UFEKp4D0UVBB+SGgKCqFU8B4KKgg/JLRaUMjkvCcvAf6pbF6+0bNTUDTCvBNQUF6+0bNTUDTCvBPw9JO8fCNnH04/4flBkQwzDt+fH8QTuDIijpx6PIFrnIJn2EWCTDr89xl23/vhHm/sDT+fAAAAAElFTkSuQmCC":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAABFCAYAAACmLqNJAAAABHNCSVQICAgIfAhkiAAAAhtJREFUeF7tncFNxDAQRUkDILqgAS67BXBAylZAD5RCD1SQ4xaQXLYBjlQAggYWJ5yQCLLG8fgbv70timfG72WSgQPuLsLncDjcnc/nx67rbsLXq/lnfIoR+AguXoKLp2EYjl3f9/fhy3Oxcki8SiCIeuhC9xzDFbdwkiRwmgW9htIuJcujqM9Z0BscdAkgSNfNUhmCECROQLw8OqhmQdM0XYvX/y/K2+1272sb+bODEOTjH0E+nM1ZEGRG57MQQT6czVkQZEbnsxBBPpzNWTYXtN/vzcW0vHAcx1+3jyCRuwJBIiLWynATJM6huvI2f8RVR0C8YAQhSJyAeHmyHdTauF7dkICg79amg0QecdV1kAi34mXIdlBxMiIFIEhExFoZCEKQjQBTHFOc7c7JtKq6KY4OEu+gTDdqdWEZEsSVIQhB4gTEy9u8g1p7uW/l122KQ5BNGYJs3NxWuQly21EjiTZ/BzXCzW2bCHJDbUuEIBs3t1WyglqbBqsbEhAk/sdSBIkLcnvIiyeSfQeJc3MrD0FuqG2JEGTj5rZKVhBDgviQgCAEuT2mYhJV94tqzKZauEb2HdQC/Jg9IiiGUsFrEFQQfkxqBMVQKngNggrCj0ltFhQTnGvyEuCfyublmxwdQckI8wZAUF6+ydERlIwwbwBOP8nLNzX6cvoJ5welYsy3/sQJXPngJkdeTuCao3CGXTLLLQP8OMPuC6M8otSzXo43AAAAAElFTkSuQmCC",value:3,name:"分组表格"},{url:e?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAABFCAYAAACmLqNJAAAABHNCSVQICAgIfAhkiAAAAipJREFUeF7tncFNAzEQRcecgQjlAKICGqAGDtRAD5RCD1SRGmiAIycSRALahDNmQ05IbESsP85gvRwj+Xv8nr07yiFO1n+eF91V+rRbS3Zhlkbr7/jsi0DuLNtjPrC78/Fokqav3bWldL+vcph3C4Gcb9Jsvppky5eAikcgWXpI03n31D/WjuOVR0VmedkLWr6BIi4BBMV1810ZghAUnEDw8jhB/1nQ2fjoJHj9TZQ3W6zehxay9QQhqI5/BNXhXDwLgorR1RmIoDqci2dBUDG6OgPlgl4WH3Uqb2yW0/HhrytCUBDRCAoiYqgMBCFoQ4B3UNlOqHaCyspj1BABeZMAai0BBGl5ytMQJEeqDUSQlqc8DUFypNrAEIJozc1Ct9kIQpD2ueOQFvoEOay3mcgQ76BmaDosBEEOUJWRCFLSdMhCkANUZWQIQbTZtNnKTe2SFbrN5gQFP0EuW7KR0BDvoEZYuiwDQS5YdaEI0rF0SUKQC1ZdKIJ0LF2SQgiizQ7eZiMIQS6PH2Vo6F8SlAttLSvEO6g1qMr1IEhJ0yELQQ5QlZEIUtJ0yAohiDabNtthb2sjQ7fZnKDgJ0i7F9tKC/EOagupdjUI0vKUpyFIjlQbiCAtT3kaguRItYHFgrRlkFZCgD+VLaFWcQyCKsIumQpBJdQqjkFQRdglU3H7SQm1amP620+4P6ga7Z0n2twfxA1cO4OrNmB9A9d6Mu6wq4b8DxP9vMPuC0ZPG2+C5BfVAAAAAElFTkSuQmCC":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAABFCAYAAACmLqNJAAAABHNCSVQICAgIfAhkiAAAAh1JREFUeF7tncFNQkEURfkNaOzCBtxAAS5MoAJ7sBR7sAKWFAAbGnBpBRptAOfjysSv4eW+x3Vy2GGYO2/OmeG/sHCGWXutVqvbw+HwMAzDdXt7Of6N19kIvDcXz83F43q93gzL5fKuvXk6WzlMPEmgibof2unZtE/cwMmSwH4U9NJKu7Asj6I+RkGvcPAlgCBfN8fKEIQgcwLm5XGC/rOg3W53ZV5/F+XN5/O3qYX8eoIQVOMfQTWcw7MgKIyuZiCCajiHZ0FQGF3NQLmgxWJRU3lns2y32x9XhCAT0QgyETFVBoIQ9EWAZ1BsJ5SdoFh5jJoiIG8SQK0lgCAtT3kaguRItYEI0vKUpyFIjlQbaCGI1nw2s26zEYQg7fdOQpr1CUpYbzeRFs+gbmgmLARBCVCVkQhS0kzIQlACVGWkhSDabNps5aZOybJuszlB5icoZUt2EmrxDOqEZcoyEJSCVReKIB3LlCQEpWDVhSJIxzIlyUIQbbZ5m40gBKV8/ShDrX9JUC60tyyLZ1BvUJXrQZCSZkIWghKgKiMRpKSZkGUhiDabNjthb2sjrdtsTpD5CdLuxb7SLJ5BfSHVrgZBWp7yNATJkWoDEaTlKU9DkBypNjAsSFsGaREC/FPZCLXCMQgqhB2ZCkERaoVjEFQIOzIVt59EqNWNOd5+wv1BdcBPnWnPDVynIiv8/PEGrnE+7rArpP73VN/usPsEhLKf1GQXaPUAAAAASUVORK5CYII=",value:5,name:"树形表格"}];return 4==c(Rl)&&(l=l.filter((e=>1==e.value||3==e.value))),l})),ue=T((()=>{let e=[{title:"拖动",dataIndex:"drag",key:"drag",align:"center",width:50},{title:"列名",dataIndex:"label",key:"label",width:200},{title:"字段",dataIndex:"prop",key:"prop"},{title:"输入类型",dataIndex:"jnpfKey",key:"jnpfKey",width:200},{title:"条件类型",dataIndex:"searchType",key:"searchType",width:200},{title:"默认值",dataIndex:"value",key:"value",width:200},{title:"关键词",dataIndex:"isKeyword",key:"isKeyword",width:70,align:"center"},{title:"是否多选",dataIndex:"searchMultiple",key:"searchMultiple",width:80,align:"center"},{title:"是否隐藏",dataIndex:"noShow",key:"noShow",width:80,align:"center"}];return e=4==c(Rl)?e.filter((e=>"value"!=e.dataIndex&&"isKeyword"!=e.dataIndex)):e.filter((e=>"jnpfKey"!=e.dataIndex)),e})),me=["select","depSelect","roleSelect","userSelect","usersSelect","organizeSelect","posSelect","groupSelect"],fe=["input","textarea","autoComplete"],ve=["select","datePicker","timePicker","organizeSelect","depSelect","userSelect"],ye=[{id:1,fullName:"等于查询"},{id:2,fullName:"模糊查询"},{id:3,fullName:"范围查询"}],he=[{id:"input",fullName:"单行输入"},{id:"inputNumber",fullName:"数字输入"},{id:"select",fullName:"下拉选择"},{id:"datePicker",fullName:"日期选择"},{id:"timePicker",fullName:"时间选择"},{id:"organizeSelect",fullName:"组织选择"},{id:"depSelect",fullName:"部门选择"},{id:"roleSelect",fullName:"角色选择"},{id:"posSelect",fullName:"岗位选择"},{id:"groupSelect",fullName:"分组选择"},{id:"userSelect",fullName:"用户选择"}],_e=[{id:"left",fullName:"left"},{id:"center",fullName:"center"},{id:"right",fullName:"right"}],ke=[{id:"none",fullName:"none"},{id:"left",fullName:"left"},{id:"right",fullName:"right"}],Ue=["input","billRule"],we=["checkbox","radio","select"],De=l("column"),Fe=l([]),Ke=y({columnData:h(V),groupFieldOptions:[],treeFieldOptions:[],tabRelationFieldOptions:[],columnOptions:[],searchOptions:[],defaultBtnsList:[],defaultColumnBtnsList:[],activeFunc:"",activeBtn:"",searchSelectedRowKeys:[],columnSelectedRowKeys:[],printTplOptions:[],allOptions:[],options:[],activeSearchRowIndex:0}),{columnData:Ne,searchSelectedRowKeys:xe,columnSelectedRowKeys:Le,printTplOptions:Re,options:Qe}=_(Ke),[Me,{openModal:Ee}]=ne(),[Je,{openModal:Pe}]=ne(),[He,{openModal:Fl}]=ne(),[Sl,{openModal:Tl}]=ne(),[Kl,{openModal:Nl}]=ne(),[xl,{openModal:Ll}]=ne(),[Bl,{openModal:jl}]=ne(),Rl=T((()=>w.formInfo?.webType)),Ol=T((()=>{if(!w.formInfo||!w.formInfo.formData)return[];return(w.formInfo?.formData&&JSON.parse(w.formInfo.formData)).fields||[]})),Ql=T((()=>Ke.columnData?.ruleList?.conditionList?.length?"编辑过滤条件":"添加过滤条件")),Ml=T((()=>{let e=[];const l=(a,t)=>{if(a&&(a.__config__&&a.__config__.children&&Array.isArray(a.__config__.children)&&l(a.__config__.children,a),Array.isArray(a)&&a.forEach((e=>l(e,t))),a.__config__&&a.__config__.jnpfKey)){const l=!a.__config__.visibility||Array.isArray(a.__config__.visibility)&&a.__config__.visibility.includes("pc");if("colFormItem"===a.__config__.layout&&a.__vModel__&&l){const l=t&&t.__config__&&"table"===t.__config__.jnpfKey;e.push({id:l?t.__vModel__+"-"+a.__vModel__:a.__vModel__,fullName:l?t.__config__.label+"-"+a.__config__.label:a.__config__.label,fullNameI18nCode:l?[t.__config__.labelI18nCode||"",a.__config__.labelI18nCode||""]:[a.__config__.labelI18nCode||""],...a})}}};return l(c(Ol)),e})),El=T((()=>w.viewFields?w.viewFields.map((e=>({id:e.defaultValue,fullName:e.field,__vModel__:e.defaultValue,__config__:{jnpfKey:"input"}}))):[])),Jl=T((()=>{let e=c(Ml).map((e=>({...e,disabled:!1})));return"formField"===Ke.columnData.treeDataSource&&(e=e.filter((e=>["organizeSelect","depSelect"].includes(e.__config__.jnpfKey)))),e})),Pl=T((()=>Ke.groupFieldOptions.filter((e=>["input","inputNumber","calculate"].includes(e.__config__.jnpfKey)&&e.__vModel__&&!e.useMask)))),Hl=T((()=>2==Ke.columnData.type&&Ke.columnData.treeRelation?Ke.searchOptions.filter((e=>e.id!==Ke.columnData.treeRelation)):[1,4].includes(Ke.columnData.type)&&Ke.columnData.tabConfig.relationField&&Ke.columnData.tabConfig.on?Ke.searchOptions.filter((e=>e.id!==Ke.columnData.tabConfig.relationField)):Ke.searchOptions)),Vl=T((()=>Ke.columnData.searchList.filter((e=>e.isKeyword)).length>=3));function zl(e){let l="";switch(e){case"download":l="导出";break;case"batchRemove":l="批量删除";break;case"batchPrint":l="批量打印";break;case"edit":l="编辑";break;case"remove":l="删除";break;case"detail":l="详情";break;case"upload":l="导入";break;default:l="新增"}return l}function ql(e){let l="";switch(e){case"afterOnload":l="表格事件";break;case"rowStyle":l="表格行样式";break;case"cellStyle":l="单元格样式";break;default:l=""}return l}function Gl(e){Ke.columnData.type!=e&&(Ke.columnData.type=e,2==e&&Ca(Ke.columnData.treeRelation),3!=e&&5!=e||(Ke.columnData.childTableStyle=1),5==e&&function(){for(let e=0;e<Ke.columnData.btnsList.length;e++){let l=Ke.columnData.btnsList[e];"add"!=l.value&&(l.show=!1,Ke.columnData.printIds=[],Ke.columnData.uploaderTemplateJson={})}}())}function Zl(e){Ke.columnData.treePropsValue="id",Ke.columnData.treePropsLabel="fullName",Ke.columnData.treePropsChildren="children","formField"===e&&(Ke.columnData.treeRelation="")}function Wl(e,l){if(!e)return Ke.columnData.treePropsUrl="",Ke.columnData.treePropsName="",Ke.columnData.treeTemplateJson=[],void _a();Ke.columnData.treePropsUrl!==e&&(Ke.columnData.treePropsUrl=e,Ke.columnData.treePropsName=l.fullName,Ke.columnData.treeTemplateJson=l.parameterJson?JSON.parse(l.parameterJson).map((e=>({...e,relationField:"",sourceType:2}))):[],_a())}function Yl(e,l){if(!e)return Ke.columnData.treeSyncInterfaceId="",Ke.columnData.treeSyncInterfaceName="",void(Ke.columnData.treeSyncTemplateJson=[]);Ke.columnData.treeSyncInterfaceId!==e&&(Ke.columnData.treeSyncInterfaceId=e,Ke.columnData.treeSyncInterfaceName=l.fullName,Ke.columnData.treeSyncTemplateJson=l.templateJson?l.templateJson.map((e=>({...e,relationField:"",sourceType:1}))):[])}function Xl(){const e=C();Ke.columnData.customBtnsList.push({show:!0,value:"btn_"+e,label:"按钮"+e,labelI18nCode:"",event:{}})}function $l(e){Ke.columnData.customBtnsList[Ke.activeBtn].event=e}function ea(){Ke.columnData.ruleList&&Ke.columnData.ruleList.matchLogic||(Ke.columnData.ruleList={matchLogic:"and",conditionList:[]}),Tl(!0,{...Ke.columnData.ruleList,fieldOptions:4==c(Rl)?Ke.columnOptions:c(Ml)})}function la(){const e=Ke.columnData.columnList.filter((e=>"none"===e.fixed&&e.id.indexOf("-")<0));Nl(!0,{list:Ke.columnData.complexHeaderList,columnOptions:e})}function aa(){Ll(!0,{list:Ke.columnData.defaultSortConfig,columnOptions:Ke.groupFieldOptions.filter((e=>e.id.indexOf("_jnpf_")<0))})}function ta(){ca()}function na(e){Ke.columnData.ruleList=e}function oa(e){Ke.columnData.complexHeaderList=e}function ia(e){Ke.columnData.defaultSortConfig=e}function ca(){if(!Ke.columnData?.complexHeaderList?.length)return;const e=Ke.columnData.columnList.filter((e=>"none"===e.fixed&&e.id.indexOf("-")<0));for(let l=0;l<Ke.columnData.complexHeaderList.length;l++){const a=Ke.columnData.complexHeaderList[l];a.childColumns=a.childColumns.filter((l=>e.some((e=>e.id==l))))}}function ua(e,l){"btnEnableRule"==l?Ke.columnData.columnBtnsList[Ke.activeBtn].event.enableFunc=e:Ke.columnData.funcs[Ke.activeFunc]=e}function sa(){const e={selectKey:[],dataType:"1",...Ke.columnData.uploaderTemplateJson,fieldsOptions:c(Ml)};Pe(!0,e)}function da(e){Ke.columnData.uploaderTemplateJson=e}function ra(e){Ke.columnData.searchList[Ke.activeSearchRowIndex]=e}function pa(e,l){for(let a=0;a<l.length;a++)e:for(let t=0;t<e.length;t++)if(l[a].value===e[t].value){l[a]=e[t],Reflect.has(l[a],"show")||(l[a].show=!0);break e}return l}function ma(e,l,a){e=e.filter((e=>l.some((l=>e.prop==l.prop))));for(let t=0;t<e.length;t++)e:for(let n=0;n<l.length;n++)if(e[t].prop===l[n].prop){"column"===a&&(l[n].fixed=e[t].fixed,l[n].align=e[t].align,l[n].width=e[t].width,l[n].sortable=e[t].sortable,l[n].resizable=e[t].resizable,4==c(Rl)&&(l[n].label=e[t].label,l[n].labelI18nCode=e[t].labelI18nCode)),"search"===a&&(e[t].jnpfKey===l[n].jnpfKey&&(l[n].searchType=e[t].searchType,l[n].searchMultiple=e[t].searchMultiple,l[n].noShow=e[t].noShow,l[n].value=e[t].value),l[n].label=e[t].label,l[n].labelI18nCode=e[t].labelI18nCode,l[n].isKeyword=e[t].isKeyword,4==c(Rl)&&(l[n]=e[t])),e[t]=l[n];break e}return Ke[a+"SelectedRowKeys"]=e.map((e=>e.prop)),e}function fa(e,l,a){if(Ke[a+"SelectedRowKeys"]=e,!e.length)return Ke.columnData[a+"List"]=[];Ke.columnData[a+"List"]=Ke.columnData[a+"List"].filter((l=>e.some((e=>l.prop==e))));for(let t=0;t<l.length;t++)Ke.columnData[a+"List"].some((e=>e.prop===l[t].prop))||(Ke.columnData[a+"List"].push(h(l[t])),"search"==a&&ka([l[t]]))}function va(e,l){fa(e,l,"search")}function ya(e,l){fa(e,l,"column"),ca()}function ha(e){const l=(e=e.map((e=>(e.__config__&&de.includes(e.__config__.jnpfKey)&&"static"!==e.__config__.dataType&&(e.options=[]),e)))).filter((e=>!re.includes(e.__config__.jnpfKey)||e.isStorage));let a=e.filter((e=>!pe.includes(e.__config__.jnpfKey)));if(4==c(Rl)){const e=(w.interfaceParam||[]).filter((e=>e.useSearch)).map((e=>{let l="input";return"int"!==e.dataType&&"decimal"!==e.dataType||(l="inputNumber"),"datetime"===e.dataType&&(l="datePicker"),{id:e.field,fullName:e.fieldName||e.field,__vModel__:e.field,__config__:{isFromParam:!0,jnpfKey:l}}}));w.interfaceHasPage?a=e:(a=a.filter((l=>!e.some((e=>e.id===l.id)))),a=[...e,...a])}Ke.groupFieldOptions=e.filter((e=>e.id.indexOf("-")<0&&!se.includes(e.__config__.jnpfKey))).map((e=>({...e,disabled:!1}))),Ke.treeFieldOptions=e.filter((e=>e.id.indexOf("-")<0&&"treeSelect"==e.__config__.jnpfKey)),Ke.tabRelationFieldOptions=e.filter((e=>e.id.indexOf("-")<0&&["radio","select"].includes(e.__config__.jnpfKey)&&"dynamic"!=e.__config__.dataType&&!e.multiple)),Ke.columnOptions=l.map((e=>({label:e.fullName,labelI18nCode:e.__config__.labelI18nCode||"",prop:e.id,fixed:"none",align:"left",jnpfKey:e.__config__.jnpfKey,sortable:!1,resizable:!0,width:null,...e}))),Ke.searchOptions=a.map((e=>({label:e.fullName,labelI18nCode:e.__config__.labelI18nCode||"",prop:e.id,jnpfKey:e.__config__.jnpfKey,value:Z(e),searchType:W(e),searchMultiple:Y(e.__config__.jnpfKey),isKeyword:!1,...e}))),Ke.columnData.columnOptions=l,Ke.columnOptions.length||(Ke.columnData.columnList=[]),Ke.searchOptions.length||(Ke.columnData.searchList=[]),Ke.columnData.btnsList=pa(Ke.columnData.btnsList,h(Ke.defaultBtnsList)),Ke.columnData.columnBtnsList=pa(Ke.columnData.columnBtnsList,h(Ke.defaultColumnBtnsList)),A((()=>{Ke.columnData.btnsList.some((e=>"upload"===e.value&&e.show))&&function(){const e=Ke.columnData.uploaderTemplateJson?.selectKey||[],l=[];for(let a=0;a<e.length;a++)c(Ml).some((l=>l.id==e[a]))&&l.push(e[a]);for(let a=0;a<c(Ml).length;a++){const e=c(Ml)[a],t=e.__config__.required,n=e.__config__.jnpfKey;P.includes(n)||!t||l.includes(e.id)||l.push(e.id)}Ke.columnData.uploaderTemplateJson.selectKey=l}(),function(){if(!Ke.columnData.treeRelation)return;for(let e=0;e<c(Jl).length;e++){const l=c(Jl)[e];if(l.id===Ke.columnData.treeRelation&&l.__config__?.jnpfKey&&["organizeSelect","depSelect"].includes(l.__config__.jnpfKey)){Ke.columnData.treeRelationFieldSelectType=l.selectType,Ke.columnData.treeRelationFieldAbleIds=l.ableIds;break}}}(),Ke.columnData.searchList=ma(Ke.columnData.searchList,h(Ke.searchOptions),"search"),Ke.columnData.columnList=ma(Ke.columnData.columnList,h(Ke.columnOptions),"column"),function(){const e=document.querySelector(".search-table .ant-table-tbody");be.create(e,{handle:".drag-handler",animation:150,easing:"cubic-bezier(1, 0, 0, 1)",onStart:()=>{},onEnd:({newIndex:e,oldIndex:l})=>{const a=Ke.columnData.searchList.splice(l,1)[0];Ke.columnData.searchList.splice(e,0,a)}});const l=document.querySelector(".column-table .ant-table-tbody");be.create(l,{handle:".drag-handler",animation:150,easing:"cubic-bezier(1, 0, 0, 1)",onStart:()=>{},onEnd:({newIndex:e,oldIndex:l})=>{const a=Ke.columnData.columnList.splice(l,1)[0];Ke.columnData.columnList.splice(e,0,a)}})}(),setTimeout((()=>{ka(Ke.columnData.searchList),_a()}),300)})),Ke.columnData.summaryField=Ke.columnData.summaryField.filter((e=>c(Pl).some((l=>l.id==e))))}function _a(){if(!Ke.columnData.treePropsUrl)return Ke.allOptions=[];D(Ke.columnData.treePropsUrl).then((e=>{const l=e.data;let a=l.fieldJson?JSON.parse(l.fieldJson):[];Ke.allOptions=a.map((e=>({...e,value:e.defaultValue})))}))}function ga(e){Ke.options=Ke.allOptions.filter((l=>-1!==l.value.toLowerCase().indexOf(e.toLowerCase())))}function ba(e){ga(e)}function ka(e){4!=c(Rl)&&e.forEach((e=>{const l=e.__config__;if(de.includes(l.jnpfKey)&&("dictionary"===l.dataType&&l.dictionaryType&&(e.options=[],j(l.dictionaryType).then((l=>{e.options=l.data.list}))),"dynamic"===l.dataType&&l.propsUrl)){e.options=[];const a={paramList:R(l.templateJson)};O(l.propsUrl,a).then((l=>{e.options=Array.isArray(l.data)?l.data:[]}))}}))}function Aa(e,l){l.__config__?.jnpfKey&&["organizeSelect","depSelect"].includes(l.__config__.jnpfKey)&&(Ke.columnData.treeRelationFieldSelectType=l.selectType,Ke.columnData.treeRelationFieldAbleIds=l.ableIds),Ca(e)}function Ca(e){e&&(Ke.columnData.searchList=Ke.columnData.searchList.filter((l=>l.id!==e)),Ke.columnData.searchList=ma(Ke.columnData.searchList,h(Ke.searchOptions),"search"))}function Ia(e){e||(Ke.columnData.tabConfig.relationField="")}return K((()=>{U().then((e=>{Fe.value=e.data.list.filter((e=>e.children&&e.children.length))})),ee().then((e=>{Ke.printTplOptions=e.data.list.filter((e=>e.children&&e.children.length)).map((e=>({...e,hasChildren:!0})))})),"object"==typeof w.conf&&null!==w.conf&&(Ke.columnData=h(Object.assign({},V,w.conf))),4!=c(Rl)?(Ke.defaultBtnsList=z,Ke.defaultColumnBtnsList=q,ha(c(Ml))):(Ke.defaultBtnsList=z.filter((e=>"download"===e.value)),Ke.defaultColumnBtnsList=[],ha(c(El)))})),(l,s)=>{const v=d("jnpf-group-title"),y=d("jnpf-i18n-input"),_=d("jnpf-select"),A=d("a-input"),C=d("jnpf-number-range"),I=d("jnpf-date-range"),U=d("jnpf-time-range"),w=d("jnpf-role-select"),D=d("jnpf-group-select"),F=d("jnpf-area-select"),S=d("jnpf-organize-select"),T=d("jnpf-cascader"),K=d("jnpf-dep-select"),j=d("jnpf-pos-select"),R=d("jnpf-user-select"),O=d("jnpf-users-select"),Q=d("jnpf-auto-complete"),P=d("a-checkbox"),V=d("a-table"),z=d("a-input-number"),q=d("a-tab-pane"),ee=d("a-tabs"),ne=d("a-divider"),de=d("BasicHelp"),re=d("a-switch"),pe=d("a-form-item"),be=d("jnpf-tree-select"),Ce=d("a-select-option"),Ie=d("a-select"),Pe=d("a-auto-complete"),Tl=d("jnpf-radio"),Nl=d("a-button"),Ll=d("a-form");return a(),r("div",ze,[o("div",qe,[i(v,{content:"查询字段",bordered:!1}),i(V,{"data-source":c(Ne).searchList,columns:ue.value,size:"small",pagination:!1,rowKey:"id",class:"search-table"},{bodyCell:n((({column:e,record:l,index:n})=>["drag"===e.key?(a(),r("i",Ge)):k("",!0),"label"===e.key?(a(),t(y,{key:1,value:l.label,"onUpdate:value":e=>l.label=e,i18n:l.labelI18nCode,"onUpdate:i18n":e=>l.labelI18nCode=e,placeholder:"请输入",allowClear:""},null,8,["value","onUpdate:value","i18n","onUpdate:i18n"])):k("",!0),"jnpfKey"===e.key?(a(),r(p,{key:2},[i(_,{value:l.jnpfKey,"onUpdate:value":e=>l.jnpfKey=e,options:he,disabled:l.__config__.isFromParam,class:"!w-160px",onChange:e=>function(e,l,a){l.__config__.jnpfKey=e;let t={id:l.id,fullName:l.fullName,label:l.label,prop:l.prop,jnpfKey:l.jnpfKey,value:Z(l),searchType:W(l),__vModel__:l.__vModel__,searchMultiple:Y(e),isKeyword:!1,__config__:{label:l.label,jnpfKey:e}};"datePicker"===e&&(t.format="yyyy-MM-dd"),"timePicker"===e&&(t.format="HH:mm:ss"),"select"===e&&(t.options=[],t.props={label:"fullName",value:"id"},t.__config__={...t.__config__,dataType:"static",propsUrl:"",propsName:"",templateJson:[],dictionaryType:""}),["organizeSelect","depSelect","userSelect"].includes(e)&&(t.isIncludeSubordinate=!1),Ke.columnData.searchList[a]=h(t)}(e,l,n)},null,8,["value","onUpdate:value","disabled","onChange"]),ve.includes(l.jnpfKey)&&!l.__config__.isFromParam?(a(),r("i",{key:0,class:"icon-ym icon-ym-shezhi cursor-pointer ml-8px leading-30px",title:"组件属性设置",onClick:e=>function(e,l){Ke.activeSearchRowIndex=l,jl(!0,{...e})}(l,n)},null,8,Ze)):k("",!0)],64)):k("",!0),"searchType"===e.key?(a(),r(p,{key:3},[l.__config__.isFromParam?(a(),r("span",We)):(a(),t(_,{key:0,value:l.searchType,"onUpdate:value":e=>l.searchType=e,options:ye,disabled:!["input","textarea"].includes(l.jnpfKey)},null,8,["value","onUpdate:value","disabled"]))],64)):k("",!0),"value"===e.key?(a(),r(p,{key:4},[Ue.includes(l.jnpfKey)?(a(),t(A,{key:0,value:l.value,"onUpdate:value":e=>l.value=e,placeholder:"请输入",allowClear:""},null,8,["value","onUpdate:value"])):k("",!0),"inputNumber"===l.jnpfKey?(a(),t(C,{key:1,value:l.value,"onUpdate:value":e=>l.value=e,precision:l.precision,disabled:l.disabled},null,8,["value","onUpdate:value","precision","disabled"])):k("",!0),["rate","slider"].includes(l.jnpfKey)?(a(),t(C,{key:2,value:l.value,"onUpdate:value":e=>l.value=e,precision:l.allowHalf?1:0,disabled:l.disabled},null,8,["value","onUpdate:value","precision","disabled"])):k("",!0),we.includes(l.jnpfKey)?(a(),t(_,{key:3,value:l.value,"onUpdate:value":e=>l.value=e,options:l.options,fieldNames:l.props,multiple:l.searchMultiple,showSearch:"",allowClear:""},null,8,["value","onUpdate:value","options","fieldNames","multiple"])):k("",!0),"datePicker"===l.jnpfKey?(a(),t(I,{key:4,value:l.value,"onUpdate:value":e=>l.value=e,format:l.format,allowClear:""},null,8,["value","onUpdate:value","format"])):k("",!0),"timePicker"===l.jnpfKey?(a(),t(U,{key:5,value:l.value,"onUpdate:value":e=>l.value=e,format:l.format,allowClear:""},null,8,["value","onUpdate:value","format"])):k("",!0),"roleSelect"===l.jnpfKey?(a(),t(w,{key:6,value:l.value,"onUpdate:value":e=>l.value=e,selectType:l.selectType,ableIds:l.ableIds,multiple:l.searchMultiple,allowClear:""},null,8,["value","onUpdate:value","selectType","ableIds","multiple"])):k("",!0),"groupSelect"===l.jnpfKey?(a(),t(D,{key:7,value:l.value,"onUpdate:value":e=>l.value=e,selectType:l.selectType,ableIds:l.ableIds,multiple:l.searchMultiple,allowClear:""},null,8,["value","onUpdate:value","selectType","ableIds","multiple"])):k("",!0),"areaSelect"===l.jnpfKey?(a(),t(F,{value:l.value,"onUpdate:value":e=>l.value=e,level:l.level,multiple:l.searchMultiple,key:l.cellKey,allowClear:""},null,8,["value","onUpdate:value","level","multiple"])):k("",!0),"organizeSelect"===l.jnpfKey?(a(),t(S,{key:9,value:l.value,"onUpdate:value":e=>l.value=e,selectType:l.selectType,ableIds:l.ableIds,multiple:l.searchMultiple,allowClear:""},null,8,["value","onUpdate:value","selectType","ableIds","multiple"])):k("",!0),"cascader"===l.jnpfKey?(a(),t(T,{key:10,value:l.value,"onUpdate:value":e=>l.value=e,placeholder:"请选择",options:l.options,fieldNames:l.props,showAllLevels:l.showAllLevels,multiple:l.searchMultiple,showSearch:"",allowClear:""},null,8,["value","onUpdate:value","options","fieldNames","showAllLevels","multiple"])):k("",!0),"depSelect"===l.jnpfKey?(a(),t(K,{key:11,value:l.value,"onUpdate:value":e=>l.value=e,selectType:l.selectType,ableIds:l.ableIds,multiple:l.searchMultiple,allowClear:""},null,8,["value","onUpdate:value","selectType","ableIds","multiple"])):k("",!0),"posSelect"===l.jnpfKey?(a(),t(j,{key:12,value:l.value,"onUpdate:value":e=>l.value=e,selectType:l.selectType,ableIds:l.ableIds,multiple:l.searchMultiple,allowClear:""},null,8,["value","onUpdate:value","selectType","ableIds","multiple"])):k("",!0),"userSelect"===l.jnpfKey?(a(),t(R,{key:13,value:l.value,"onUpdate:value":e=>l.value=e,selectType:"all"!=l.selectType&&"custom"!=l.selectType?"all":l.selectType,ableIds:l.ableIds,multiple:l.searchMultiple,allowClear:""},null,8,["value","onUpdate:value","selectType","ableIds","multiple"])):k("",!0),"usersSelect"===l.jnpfKey?(a(),t(O,{key:14,value:l.value,"onUpdate:value":e=>l.value=e,selectType:l.selectType,ableIds:l.ableIds,multiple:l.searchMultiple,allowClear:""},null,8,["value","onUpdate:value","selectType","ableIds","multiple"])):k("",!0),"autoComplete"===l.jnpfKey?(a(),t(Q,{key:15,value:l.value,"onUpdate:value":e=>l.value=e,placeholder:l.placeholder,allowClear:l.clearable,disabled:l.disabled,interfaceId:l.interfaceId,relationField:l.relationField,templateJson:l.templateJson,total:l.total},null,8,["value","onUpdate:value","placeholder","allowClear","disabled","interfaceId","relationField","templateJson","total"])):k("",!0)],64)):k("",!0),"isKeyword"===e.key?(a(),t(P,{key:5,checked:l.isKeyword,"onUpdate:checked":e=>l.isKeyword=e,disabled:!fe.includes(l.jnpfKey)||Vl.value&&!l.isKeyword},null,8,["checked","onUpdate:checked","disabled"])):k("",!0),"searchMultiple"===e.key?(a(),t(P,{key:6,checked:l.searchMultiple,"onUpdate:checked":e=>l.searchMultiple=e,disabled:!me.includes(l.jnpfKey),onChange:e=>function(e,l){Ke.columnData.searchList[l].value=Z(e)}(l,n)},null,8,["checked","onUpdate:checked","disabled","onChange"])):k("",!0),"noShow"===e.key?(a(),t(P,{key:7,checked:l.noShow,"onUpdate:checked":e=>l.noShow=e},null,8,["checked","onUpdate:checked"])):k("",!0)])),_:1},8,["data-source","columns"]),i(v,{content:"列表字段",bordered:!1,class:"mt-20px"}),i(V,{"data-source":c(Ne).columnList,columns:oe,size:"small",pagination:!1,rowKey:"id",class:"column-table"},{bodyCell:n((({column:e,record:l})=>["drag"===e.key?(a(),r("i",Ye)):k("",!0),"label"===e.key&&4==Rl.value?(a(),t(y,{key:1,value:l.label,"onUpdate:value":e=>l.label=e,i18n:l.labelI18nCode,"onUpdate:i18n":e=>l.labelI18nCode=e,placeholder:"请输入",allowClear:""},null,8,["value","onUpdate:value","i18n","onUpdate:i18n"])):k("",!0),"sortable"===e.key?(a(),t(P,{key:2,checked:l.sortable,"onUpdate:checked":e=>l.sortable=e,disabled:l.id.indexOf("_jnpf_")>0||l.__config__&&l.__config__.isSubTable||c(se).includes(l.__config__.jnpfKey)},null,8,["checked","onUpdate:checked","disabled"])):k("",!0),"resizable"===e.key?(a(),t(P,{key:3,checked:l.resizable,"onUpdate:checked":e=>l.resizable=e,disabled:l.id.indexOf("_jnpf_")>0||l.__config__&&l.__config__.isSubTable||c(se).includes(l.__config__.jnpfKey)},null,8,["checked","onUpdate:checked","disabled"])):k("",!0),"fixed"===e.key?(a(),t(_,{key:4,value:l.fixed,"onUpdate:value":e=>l.fixed=e,options:ke,disabled:l.__config__&&l.__config__.isSubTable,onChange:ta},null,8,["value","onUpdate:value","disabled"])):k("",!0),"align"===e.key?(a(),t(_,{key:5,value:l.align,"onUpdate:value":e=>l.align=e,options:_e},null,8,["value","onUpdate:value"])):k("",!0),"width"===e.key?(a(),t(z,{key:6,value:l.width,"onUpdate:value":e=>l.width=e,placeholder:"请输入",min:0,precision:0},null,8,["value","onUpdate:value"])):k("",!0)])),_:1},8,["data-source"])]),o("div",Xe,[i(ee,{activeKey:De.value,"onUpdate:activeKey":s[0]||(s[0]=e=>De.value=e),tabBarGutter:11,class:"average-tabs"},{default:n((()=>[i(q,{key:"search",tab:"查询字段"}),i(q,{key:"field",tab:"列表字段"}),i(q,{key:"column",tab:"列表属性"})])),_:1},8,["activeKey"]),o("div",$e,[g(o("div",el,[i(V,{"data-source":Hl.value,columns:ie,size:"small",pagination:!1,scroll:{y:"calc(100vh - 161px)"},rowKey:"id","row-selection":{columnWidth:50,selectedRowKeys:c(xe),onChange:va}},{headerCell:n((()=>s[35]||(s[35]=[u("查询字段")]))),_:1},8,["data-source","row-selection"])],512),[[b,"search"===De.value]]),g(o("div",ll,[i(V,{"data-source":Ke.columnOptions,columns:ie,size:"small",pagination:!1,scroll:{y:"calc(100vh - 161px)"},rowKey:"id","row-selection":{columnWidth:50,selectedRowKeys:c(Le),onChange:ya}},{headerCell:n((()=>s[36]||(s[36]=[u("列表字段")]))),_:1},8,["data-source","row-selection"])],512),[[b,"field"===De.value]]),g(i(c(B),null,{default:n((()=>[i(Ll,{colon:!1,layout:"vertical",class:"right-board-form"},{default:n((()=>[o("div",al,[(a(!0),r(p,null,m(ce.value,((e,l)=>(a(),r("div",{class:N(["item",{"view-item":4==Rl.value}]),key:l,onClick:l=>Gl(e.value)},[o("div",{class:N(["item-img",{checked:c(Ne).type==e.value}])},[o("img",{src:e.url},null,8,nl),c(Ne).type==e.value?(a(),r("div",ol,[i(c(x))])):k("",!0)],2),o("p",il,f(e.name),1)],10,tl)))),128))]),2==c(Ne).type?(a(),r("div",cl,[i(ne,null,{default:n((()=>s[37]||(s[37]=[u("左侧配置")]))),_:1,__:[37]}),i(pe,null,{label:n((()=>[s[38]||(s[38]=u("左侧查询")),i(de,{text:"暂不支持异步的左侧查询"})])),default:n((()=>[i(re,{checked:c(Ne).hasTreeQuery,"onUpdate:checked":s[1]||(s[1]=e=>c(Ne).hasTreeQuery=e)},null,8,["checked"])])),_:1}),i(pe,{label:"左侧标题"},{default:n((()=>[i(y,{value:c(Ne).treeTitle,"onUpdate:value":s[2]||(s[2]=e=>c(Ne).treeTitle=e),i18n:c(Ne).treeTitleI18nCode,"onUpdate:i18n":s[3]||(s[3]=e=>c(Ne).treeTitleI18nCode=e),placeholder:"请输入"},null,8,["value","i18n"])])),_:1}),i(pe,{label:"数据来源"},{default:n((()=>[i(_,{value:c(Ne).treeDataSource,"onUpdate:value":s[4]||(s[4]=e=>c(Ne).treeDataSource=e),options:J,showSearch:"",placeholder:"请选择",onChange:Zl},null,8,["value"])])),_:1}),"dictionary"===c(Ne).treeDataSource?(a(),r("div",ul,[i(pe,{label:"数据字典"},{default:n((()=>[i(be,{value:c(Ne).treeDictionary,"onUpdate:value":s[5]||(s[5]=e=>c(Ne).treeDictionary=e),options:Fe.value,lastLevel:"",allowClear:"",placeholder:"请选择"},null,8,["value","options"])])),_:1}),i(pe,{label:"主键字段"},{default:n((()=>[i(Ie,{value:c(Ne).treePropsValue,"onUpdate:value":s[6]||(s[6]=e=>c(Ne).treePropsValue=e),placeholder:"请选择"},{default:n((()=>[i(Ce,{value:"id"},{default:n((()=>s[39]||(s[39]=[u("id")]))),_:1,__:[39]}),i(Ce,{value:"enCode"},{default:n((()=>s[40]||(s[40]=[u("enCode")]))),_:1,__:[40]})])),_:1},8,["value"])])),_:1})])):k("",!0),"api"===c(Ne).treeDataSource?(a(),r("div",sl,[i(pe,{label:"数据接口"},{default:n((()=>[i(c(E),{value:c(Ne).treePropsUrl,title:c(Ne).treePropsName,popupTitle:"数据接口",onChange:Wl},null,8,["value","title"])])),_:1}),c(Ne).treeTemplateJson?.length?(a(),t(pe,{key:0,label:"参数设置"},{default:n((()=>[i(c(Ae),{templateJson:c(Ne).treeTemplateJson,showSystemFormId:!1,type:2},null,8,["templateJson"])])),_:1})):k("",!0),i(pe,{label:"主键字段"},{default:n((()=>[i(Pe,{value:c(Ne).treePropsValue,"onUpdate:value":s[7]||(s[7]=e=>c(Ne).treePropsValue=e),placeholder:"请输入",options:c(Qe),onFocus:s[8]||(s[8]=e=>ba(c(Ne).treePropsValue)),onSearch:s[9]||(s[9]=e=>c(M)(c(Ne).treePropsValue))},null,8,["value","options"])])),_:1}),i(pe,{label:"回显字段"},{default:n((()=>[i(Pe,{value:c(Ne).treePropsLabel,"onUpdate:value":s[10]||(s[10]=e=>c(Ne).treePropsLabel=e),placeholder:"请输入",options:c(Qe),onFocus:s[11]||(s[11]=e=>ba(c(Ne).treePropsLabel)),onSearch:s[12]||(s[12]=e=>c(M)(c(Ne).treePropsLabel))},null,8,["value","options"])])),_:1}),i(pe,{label:"子级字段"},{default:n((()=>[i(A,{value:c(Ne).treePropsChildren,"onUpdate:value":s[13]||(s[13]=e=>c(Ne).treePropsChildren=e),placeholder:"请输入"},null,8,["value"])])),_:1})])):k("",!0),i(pe,{label:"关联字段"},{default:n((()=>[i(_,{value:c(Ne).treeRelation,"onUpdate:value":s[14]||(s[14]=e=>c(Ne).treeRelation=e),options:Jl.value,placeholder:"请选择",fieldNames:{options:"options1"},showSearch:"",onChange:Aa},null,8,["value","options"])])),_:1}),"api"===c(Ne).treeDataSource?(a(),r("div",dl,[i(pe,{label:"数据加载"},{default:n((()=>[i(Tl,{value:c(Ne).treeSyncType,"onUpdate:value":s[15]||(s[15]=e=>c(Ne).treeSyncType=e),options:X},null,8,["value"])])),_:1}),1==c(Ne).treeSyncType?(a(),t(pe,{key:0},{label:n((()=>[s[41]||(s[41]=u("数据接口")),i(de,{text:"提供异步调用的数据接口"})])),default:n((()=>[i(c(E),{value:c(Ne).treeSyncInterfaceId,title:c(Ne).treeSyncInterfaceName,popupTitle:"数据接口",onChange:Yl},null,8,["value","title"])])),_:1})):k("",!0),c(Ne).treeSyncTemplateJson.length&&1==c(Ne).treeSyncType?(a(),t(V,{key:1,"data-source":c(Ne).treeSyncTemplateJson,columns:te,size:"small",pagination:!1},{bodyCell:n((({column:e,record:l})=>["field"===e.key?(a(),r(p,{key:0},[o("span",rl,f(l.required?"*":""),1),u(" "+f(l.field)+f(l.fieldName?"("+l.fieldName+")":""),1)],64)):k("",!0),"relationField"===e.key?(a(),t(A,{key:1,value:l.relationField,"onUpdate:value":e=>l.relationField=e,placeholder:"请输入"},null,8,["value","onUpdate:value"])):k("",!0)])),_:1},8,["data-source"])):k("",!0)])):k("",!0)])):k("",!0),i(ne,null,{default:n((()=>s[42]||(s[42]=[u("表格配置")]))),_:1,__:[42]}),4!=Rl.value?(a(),t(pe,{key:1,label:"数据过滤"},{default:n((()=>[i(Nl,{block:"",onClick:ea},{default:n((()=>[u(f(Ql.value),1)])),_:1})])),_:1})):k("",!0),3!==c(Ne).type&&5!==c(Ne).type?(a(),t(pe,{key:2,label:"复杂表头"},{default:n((()=>[i(Nl,{block:"",onClick:la},{default:n((()=>[u(f(Ke.columnData.complexHeaderList?.length?"编辑复杂表头":"复杂表头配置"),1)])),_:1})])),_:1})):k("",!0),3==c(Ne).type?(a(),t(pe,{key:3,label:"分组字段"},{default:n((()=>[i(_,{value:c(Ne).groupField,"onUpdate:value":s[16]||(s[16]=e=>c(Ne).groupField=e),options:Ke.groupFieldOptions,placeholder:"请选择",fieldNames:{options:"options1"},showSearch:""},null,8,["value","options"])])),_:1})):k("",!0),5==c(Ne).type?(a(),t(pe,{key:4,label:"父级字段"},{default:n((()=>[i(_,{value:c(Ne).parentField,"onUpdate:value":s[17]||(s[17]=e=>c(Ne).parentField=e),options:Ke.treeFieldOptions,placeholder:"请选择",fieldNames:{options:"options1"},showSearch:""},null,8,["value","options"])])),_:1})):k("",!0),i(pe,{label:"默认排序"},{default:n((()=>[i(Nl,{block:"",onClick:aa},{default:n((()=>s[43]||(s[43]=[u("默认排序配置")]))),_:1,__:[43]})])),_:1}),4!=Rl.value?(a(),t(pe,{key:5,label:"高级查询"},{default:n((()=>[i(re,{checked:c(Ne).hasSuperQuery,"onUpdate:checked":s[18]||(s[18]=e=>c(Ne).hasSuperQuery=e)},null,8,["checked"])])),_:1})):k("",!0),i(pe,null,{label:n((()=>[s[44]||(s[44]=u("溢出省略")),i(de,{text:["启用：溢出省略号显示；","禁用：显示全部信息，溢出换行显示"]})])),default:n((()=>[i(re,{checked:c(Ne).showOverflow,"onUpdate:checked":s[19]||(s[19]=e=>c(Ne).showOverflow=e)},null,8,["checked"])])),_:1}),4==Rl.value?(a(),t(pe,{key:6},{label:n((()=>[s[45]||(s[45]=u("视图主键")),i(de,{text:"视图主键用于当前选中的数据导出，设置的主键必须是唯一值才能确保数据正常导出"})])),default:n((()=>[i(_,{value:c(Ne).viewKey,"onUpdate:value":s[20]||(s[20]=e=>c(Ne).viewKey=e),options:Ke.columnOptions},null,8,["value","options"])])),_:1})):k("",!0),3!==c(Ne).type&&5!==c(Ne).type?(a(),r("div",pl,[i(pe,{label:"分页设置"},{default:n((()=>[i(re,{checked:c(Ne).hasPage,"onUpdate:checked":s[21]||(s[21]=e=>c(Ne).hasPage=e),disabled:!!e.interfaceHasPage},null,8,["checked","disabled"])])),_:1}),c(Ne).hasPage?(a(),t(pe,{key:0,label:"分页条数"},{default:n((()=>[i(Tl,{value:c(Ne).pageSize,"onUpdate:value":s[22]||(s[22]=e=>c(Ne).pageSize=e),options:ae,optionType:"button","button-style":"solid",class:"right-radio"},null,8,["value"])])),_:1})):k("",!0),i(pe,{label:"合计配置"},{default:n((()=>[i(re,{checked:c(Ne).showSummary,"onUpdate:checked":s[23]||(s[23]=e=>c(Ne).showSummary=e)},null,8,["checked"])])),_:1}),c(Ne).showSummary?(a(),t(pe,{key:1,label:"合计字段"},{default:n((()=>[i(_,{value:c(Ne).summaryField,"onUpdate:value":s[24]||(s[24]=e=>c(Ne).summaryField=e),options:Pl.value,placeholder:"请选择",fieldNames:{options:"options1"},showSearch:"",allowClear:"",multiple:""},null,8,["value","options"])])),_:1})):k("",!0)])):k("",!0),4!=Rl.value&&[1,4].includes(c(Ne).type)?(a(),r(p,{key:8},[i(pe,{label:"标签面板"},{default:n((()=>[i(re,{checked:c(Ne).tabConfig.on,"onUpdate:checked":s[25]||(s[25]=e=>c(Ne).tabConfig.on=e),onChange:Ia},null,8,["checked"])])),_:1}),c(Ne)?.tabConfig?.on?(a(),r(p,{key:0},[i(pe,{label:"筛选字段"},{default:n((()=>[i(_,{value:c(Ne).tabConfig.relationField,"onUpdate:value":s[26]||(s[26]=e=>c(Ne).tabConfig.relationField=e),options:Ke.tabRelationFieldOptions,fieldNames:{options:"options1"},showSearch:"",onChange:Aa},null,8,["value","options"])])),_:1}),i(pe,{label:"全部标签"},{default:n((()=>[i(re,{checked:c(Ne).tabConfig.hasAllTab,"onUpdate:checked":s[27]||(s[27]=e=>c(Ne).tabConfig.hasAllTab=e)},null,8,["checked"])])),_:1})],64)):k("",!0)],64)):k("",!0),1!=c(Ne).type&&2!=c(Ne).type||4==Rl.value?k("",!0):(a(),t(pe,{key:9,label:"子表样式"},{default:n((()=>[i(_,{value:c(Ne).childTableStyle,"onUpdate:value":s[28]||(s[28]=e=>c(Ne).childTableStyle=e),options:$,placeholder:"请选择"},null,8,["value"])])),_:1})),i(ne,null,{default:n((()=>s[46]||(s[46]=[u("按钮配置")]))),_:1,__:[46]}),o("div",ml,[(a(!0),r(p,null,m(c(Ne).btnsList,(e=>(a(),r(p,{key:e.value},[5!==c(Ne).type||5==c(Ne).type&&"add"===e.value?(a(),r("div",fl,[i(P,{checked:e.show,"onUpdate:checked":l=>e.show=l},{default:n((()=>[u(f(zl(e.value)),1)])),_:2},1032,["checked","onUpdate:checked"]),o("div",vl,[i(y,{value:e.label,"onUpdate:value":l=>e.label=l,i18n:e.labelI18nCode,"onUpdate:i18n":l=>e.labelI18nCode=l,placeholder:"按钮名称"},null,8,["value","onUpdate:value","i18n","onUpdate:i18n"]),"upload"===e.value&&e.show?(a(),r("div",yl,[i(Nl,{block:"",onClick:sa},{default:n((()=>s[47]||(s[47]=[u("请设置导入模板")]))),_:1,__:[47]})])):k("",!0),"batchPrint"===e.value&&e.show?(a(),r("div",hl,[i(be,{value:c(Ne).printIds,"onUpdate:value":s[29]||(s[29]=e=>c(Ne).printIds=e),placeholder:"请选择",multiple:"",options:c(Re),lastLevel:"",showCheckedStrategy:c(L).SHOW_CHILD,class:"w-full"},null,8,["value","options","showCheckedStrategy"])])):k("",!0)])])):k("",!0)],64)))),128))]),o("div",_l,[(a(!0),r(p,null,m(c(Ne).columnBtnsList,((e,l)=>(a(),r("div",{key:e.value,class:"btnsList-cell"},[i(P,{checked:e.show,"onUpdate:checked":l=>e.show=l},{default:n((()=>[u(f(zl(e.value)),1)])),_:2},1032,["checked","onUpdate:checked"]),i(y,{value:e.label,"onUpdate:value":l=>e.label=l,i18n:e.labelI18nCode,"onUpdate:i18n":l=>e.labelI18nCode=l,placeholder:"按钮名称"},{addonBefore:n((()=>[o("span",{class:"cursor-pointer px-11px",onClick:a=>function(e,l){Ke.activeBtn=l,e?.event?.enableFunc||(e.event={enableFunc:H}),Ee(!0,{text:e.event.enableFunc,funcName:"btnEnableRule"})}(e,l)},[s[48]||(s[48]=u("启用规则")),i(de,{text:"不支持代码生成"})],8,gl)])),_:2},1032,["value","onUpdate:value","i18n","onUpdate:i18n"])])))),128))]),o("div",null,[o("p",bl,[s[49]||(s[49]=u("自定义按钮区")),i(de,{text:"不支持代码生成"})]),o("div",kl,[i(c(le),{modelValue:c(Ne).customBtnsList,"onUpdate:modelValue":s[30]||(s[30]=e=>c(Ne).customBtnsList=e),animation:300,group:"selectItem",handle:".option-drag",itemKey:"value"},{item:n((({element:e,index:l})=>[o("div",Al,[s[51]||(s[51]=o("div",{class:"custom-line-icon option-drag"},[o("i",{class:"icon-ym icon-ym-darg"})],-1)),o("p",Cl,f(e.value),1),i(y,{value:e.label,"onUpdate:value":l=>e.label=l,i18n:e.labelI18nCode,"onUpdate:i18n":l=>e.labelI18nCode=l,placeholder:"按钮名称"},{addonBefore:n((()=>[o("span",{class:"cursor-pointer",onClick:a=>function(e,l){Ke.activeBtn=l,Fl(!0,{showType:"pc",formFieldsOptions:4==c(Rl)?Ke.columnOptions:c(Ml),dataForm:e.event})}(e,l)},"事件",8,Il)])),_:2},1032,["value","onUpdate:value","i18n","onUpdate:i18n"]),o("div",{class:"close-btn custom-line-icon",onClick:e=>c(Ne).customBtnsList.splice(l,1)},s[50]||(s[50]=[o("i",{class:"icon-ym icon-ym-btn-clearn"},null,-1)]),8,Ul)])])),_:1},8,["modelValue"]),o("div",wl,[i(Nl,{type:"link",preIcon:"icon-ym icon-ym-btn-add",onClick:Xl},{default:n((()=>s[52]||(s[52]=[u("添加按钮")]))),_:1,__:[52]})])])]),4!=Rl.value?(a(),r("div",Dl,[i(ne,null,{default:n((()=>s[53]||(s[53]=[u("权限设置")]))),_:1,__:[53]}),i(pe,{label:"按钮权限"},{default:n((()=>[i(re,{checked:c(Ne).useBtnPermission,"onUpdate:checked":s[31]||(s[31]=e=>c(Ne).useBtnPermission=e)},null,8,["checked"])])),_:1}),i(pe,{label:"列表权限"},{default:n((()=>[i(re,{checked:c(Ne).useColumnPermission,"onUpdate:checked":s[32]||(s[32]=e=>c(Ne).useColumnPermission=e)},null,8,["checked"])])),_:1}),i(pe,{label:"表单权限"},{default:n((()=>[i(re,{checked:c(Ne).useFormPermission,"onUpdate:checked":s[33]||(s[33]=e=>c(Ne).useFormPermission=e)},null,8,["checked"])])),_:1}),i(pe,{label:"数据权限"},{default:n((()=>[i(re,{checked:c(Ne).useDataPermission,"onUpdate:checked":s[34]||(s[34]=e=>c(Ne).useDataPermission=e)},null,8,["checked"])])),_:1})])):k("",!0),i(ne,null,{default:n((()=>[s[54]||(s[54]=u("脚本事件")),i(de,{text:"不支持代码生成"})])),_:1,__:[54]}),(a(!0),r(p,null,m(c(Ne).funcs,((e,l)=>(a(),t(pe,{label:ql(l),key:l},{default:n((()=>[i(Nl,{block:"",onClick:e=>{return a=l,Ke.activeFunc=a,Ke.columnData.funcs[Ke.activeFunc]||(Ke.columnData.funcs[Ke.activeFunc]=G[Ke.activeFunc]),void Ee(!0,{text:Ke.columnData.funcs[Ke.activeFunc],funcName:a});var a}},{default:n((()=>s[55]||(s[55]=[u("脚本编写")]))),_:2,__:[55]},1032,["onClick"])])),_:2},1032,["label"])))),128))])),_:1})])),_:1},512),[[b,"column"===De.value]])])]),i(Se,{onRegister:c(Me),onConfirm:ua},null,8,["onRegister"]),i(Te,{onRegister:c(Je),onConfirm:da},null,8,["onRegister"]),i(Be,{onRegister:c(He),onConfirm:$l},null,8,["onRegister"]),i(je,{onRegister:c(Sl),onConfirm:na},null,8,["onRegister"]),i(ge,{onRegister:c(Kl),onConfirm:oa},null,8,["onRegister"]),i(Oe,{onRegister:c(xl),onConfirm:ia},null,8,["onRegister"]),i(Ve,{onRegister:c(Bl),onConfirm:ra},null,8,["onRegister"])])}}}),Sl={class:"column-design-container"},Tl={class:"main-board"},Kl={key:0,class:"drag-handler icon-ym icon-ym-darg",title:"点击拖动"},Nl=["onClick"],xl={key:1},Ll={key:0,class:"drag-handler icon-ym icon-ym-darg",title:"点击拖动"},Bl={class:"right-board"},jl={class:"right-main"},Rl={class:"h-full"},Ol={class:"h-full"},Ql={key:4,class:"btnsList"},Ml={key:5,class:"btnsList"},El=["onClick"],Jl={class:"btn-cap"},Pl={class:"custom-btns-list"},Hl={class:"custom-item"},Vl={class:"custom-line-value"},zl=["onClick"],ql=["onClick"],Gl={class:"add-btn"},Zl={key:6},Wl=e({__name:"MainApp",props:["conf","formInfo","viewFields","interfaceParam","interfaceHasPage"],setup(e,{expose:s}){const v=e;s({getData:function(){return E.columnData.defaultColumnList=E.columnOptions.map((e=>({...e,checked:E.columnData.columnList.some((l=>l.prop===e.prop))}))),E.columnData}});const I=[{id:20,fullName:"20条"},{id:50,fullName:"50条"},{id:80,fullName:"80条"},{id:100,fullName:"100条"}],U=[{title:"字段",dataIndex:"fullName",key:"fullName"}],w=[{title:"拖动",dataIndex:"drag",key:"drag",align:"center",width:50},{title:"列名",dataIndex:"label",key:"label",width:"40%"},{title:"字段",dataIndex:"prop",key:"prop"},{title:"排序",dataIndex:"sortable",key:"sortable",width:60,align:"center"}],D=["select","depSelect","roleSelect","userSelect","usersSelect","organizeSelect","posSelect","groupSelect"],F=["input","textarea","autoComplete"],S=["select","datePicker","timePicker","organizeSelect","depSelect","userSelect"],N=[{id:1,fullName:"等于查询"},{id:2,fullName:"模糊查询"},{id:3,fullName:"范围查询"}],x=[{id:"input",fullName:"单行输入"},{id:"inputNumber",fullName:"数字输入"},{id:"select",fullName:"下拉选择"},{id:"datePicker",fullName:"日期选择"},{id:"timePicker",fullName:"时间选择"},{id:"organizeSelect",fullName:"组织选择"},{id:"depSelect",fullName:"部门选择"},{id:"roleSelect",fullName:"角色选择"},{id:"posSelect",fullName:"岗位选择"},{id:"groupSelect",fullName:"分组选择"},{id:"userSelect",fullName:"用户选择"}],L=["input","billRule"],Q=["checkbox","radio","select"],M=l("column"),E=y({columnData:h(X),groupFieldOptions:[],tabRelationFieldOptions:[],columnOptions:[],searchOptions:[],defaultBtnsList:[],defaultColumnBtnsList:[],activeFunc:"",activeBtn:"",searchSelectedRowKeys:[],columnSelectedRowKeys:[],activeSearchRowIndex:0}),{columnData:J,searchSelectedRowKeys:P,columnSelectedRowKeys:V}=_(E),[z,{openModal:ee}]=ne(),[ae,{openModal:te}]=ne(),[oe,{openModal:ie}]=ne(),[ce,{openModal:ue}]=ne(),[me,{openModal:fe}]=ne(),ve=T((()=>v.formInfo?.webType)),ye=T((()=>{if(!v.formInfo||!v.formInfo.formData)return[];return(v.formInfo?.formData&&JSON.parse(v.formInfo.formData)).fields||[]})),he=T((()=>E.columnData?.ruleListApp?.conditionList?.length?"编辑过滤条件":"添加过滤条件")),_e=T((()=>{let e=[];const l=(a,t)=>{if(a&&(a.__config__&&a.__config__.children&&Array.isArray(a.__config__.children)&&l(a.__config__.children,a),Array.isArray(a)&&a.forEach((e=>l(e,t))),a.__config__&&a.__config__.jnpfKey)){const l=!a.__config__.visibility||Array.isArray(a.__config__.visibility)&&a.__config__.visibility.includes("app");if("colFormItem"===a.__config__.layout&&a.__vModel__&&l){const l=t&&t.__config__&&"table"===t.__config__.jnpfKey;e.push({id:l?t.__vModel__+"-"+a.__vModel__:a.__vModel__,fullName:l?t.__config__.label+"-"+a.__config__.label:a.__config__.label,fullNameI18nCode:l?[t.__config__.labelI18nCode||"",a.__config__.labelI18nCode||""]:[a.__config__.labelI18nCode||""],...a})}}};return l(c(ye)),e})),ge=T((()=>v.viewFields?v.viewFields.map((e=>({id:e.defaultValue,fullName:e.field,__vModel__:e.defaultValue,__config__:{jnpfKey:"input"}}))):[])),ke=T((()=>{let e=[{title:"拖动",dataIndex:"drag",key:"drag",align:"center",width:50},{title:"列名",dataIndex:"label",key:"label",width:200},{title:"字段",dataIndex:"prop",key:"prop"},{title:"输入类型",dataIndex:"jnpfKey",key:"jnpfKey",width:200},{title:"条件类型",dataIndex:"searchType",key:"searchType",width:200},{title:"默认值",dataIndex:"value",key:"value",width:200},{title:"关键词",dataIndex:"isKeyword",key:"isKeyword",width:70,align:"center"},{title:"是否多选",dataIndex:"searchMultiple",key:"searchMultiple",width:80,align:"center"},{title:"是否隐藏",dataIndex:"noShow",key:"noShow",width:80,align:"center"}];return e=4==c(ve)?e.filter((e=>"value"!=e.dataIndex&&"isKeyword"!=e.dataIndex)):e.filter((e=>"jnpfKey"!=e.dataIndex)),e})),Ae=T((()=>E.columnData.tabConfig.relationField&&E.columnData.tabConfig.on?E.searchOptions.filter((e=>e.id!==E.columnData.tabConfig.relationField)):E.searchOptions)),Ce=T((()=>E.columnData.searchList.filter((e=>e.isKeyword)).length>=3));function Ie(e){let l="";switch(e){case"download":l="导出";break;case"batchRemove":l="批量删除";break;case"edit":l="编辑";break;case"remove":l="删除";break;case"detail":l="详情";break;case"upload":l="导入";break;default:l="新增"}return l}function Ue(e){let l="";switch(e){case"afterOnload":l="表格事件";break;case"rowStyle":l="表格行样式";break;case"cellStyle":l="单元格样式";break;default:l=""}return l}function we(){const e=C();E.columnData.customBtnsList.push({show:!0,value:"btn_"+e,label:"按钮"+e,labelI18nCode:"",event:{}})}function De(e){E.columnData.customBtnsList[E.activeBtn].event=e}function Fe(){E.columnData.ruleListApp&&E.columnData.ruleListApp.matchLogic||(E.columnData.ruleListApp={matchLogic:"and",conditionList:[]}),ie(!0,{...E.columnData.ruleListApp,fieldOptions:4==c(ve)?E.columnOptions:c(_e)})}function Te(e){E.columnData.ruleListApp=e}function Ke(e,l){"btnEnableRule"==l?E.columnData.columnBtnsList[E.activeBtn].event.enableFunc=e:E.columnData.funcs[E.activeFunc]=e}function Ne(){ue(!0,{list:E.columnData.defaultSortConfig,columnOptions:E.groupFieldOptions.filter((e=>e.id.indexOf("_jnpf_")<0))})}function xe(e){E.columnData.defaultSortConfig=e}function Le(e){E.columnData.searchList[E.activeSearchRowIndex]=e}function Re(e,l){for(let a=0;a<l.length;a++)e:for(let t=0;t<e.length;t++)if(l[a].value===e[t].value){l[a]=e[t],Reflect.has(l[a],"show")||(l[a].show=!0);break e}return l}function Qe(e,l,a){e=e.filter((e=>l.some((l=>e.prop==l.prop))));for(let t=0;t<e.length;t++)e:for(let n=0;n<l.length;n++)if(e[t].prop===l[n].prop){"column"===a&&(l[n].fixed=e[t].fixed,l[n].align=e[t].align,l[n].width=e[t].width,l[n].sortable=e[t].sortable,4==c(ve)&&(l[n].label=e[t].label,l[n].labelI18nCode=e[t].labelI18nCode)),"search"===a&&(e[t].jnpfKey===l[n].jnpfKey&&(l[n].searchType=e[t].searchType,l[n].searchMultiple=e[t].searchMultiple,l[n].noShow=e[t].noShow,l[n].value=e[t].value),l[n].label=e[t].label,l[n].labelI18nCode=e[t].labelI18nCode,l[n].isKeyword=e[t].isKeyword,4==c(ve)&&(l[n]=e[t])),e[t]=l[n];break e}return E[a+"SelectedRowKeys"]=e.map((e=>e.prop)),e}function Me(e,l,a){if(E[a+"SelectedRowKeys"]=e,!e.length)return E.columnData[a+"List"]=[];E.columnData[a+"List"]=E.columnData[a+"List"].filter((l=>e.some((e=>l.prop==e))));for(let t=0;t<l.length;t++)E.columnData[a+"List"].some((e=>e.prop===l[t].prop))||(E.columnData[a+"List"].push(h(l[t])),"search"==a&&He([l[t]]))}function Ee(e,l){Me(e,l,"search")}function Je(e,l){Me(e,l,"column")}function Pe(e){const l=(e=e.map((e=>(e.__config__&&de.includes(e.__config__.jnpfKey)&&"static"!==e.__config__.dataType&&(e.options=[]),e)))).filter((e=>!re.includes(e.__config__.jnpfKey)||e.isStorage));let a=e.filter((e=>!pe.includes(e.__config__.jnpfKey)));if(4==c(ve)){const e=(v.interfaceParam||[]).filter((e=>e.useSearch)).map((e=>{let l="input";return"int"!==e.dataType&&"decimal"!==e.dataType||(l="inputNumber"),"datetime"===e.dataType&&(l="datePicker"),{id:e.field,fullName:e.fieldName||e.field,__vModel__:e.field,__config__:{isFromParam:!0,jnpfKey:l}}}));v.interfaceHasPage?a=e:(a=a.filter((l=>!e.some((e=>e.id===l.id)))),a=[...e,...a])}E.groupFieldOptions=e.filter((e=>e.id.indexOf("-")<0&&!se.includes(e.__config__.jnpfKey))).map((e=>({...e,disabled:!1}))),E.tabRelationFieldOptions=e.filter((e=>e.id.indexOf("-")<0&&["radio","select"].includes(e.__config__.jnpfKey)&&"dynamic"!=e.__config__.dataType&&!e.multiple)),E.columnOptions=l.map((e=>({label:e.fullName,labelI18nCode:e.__config__.labelI18nCode||"",prop:e.id,fixed:"none",align:"left",jnpfKey:e.__config__.jnpfKey,sortable:!1,resizable:!0,width:null,...e}))),E.searchOptions=a.map((e=>({label:e.fullName,labelI18nCode:e.__config__.labelI18nCode||"",prop:e.id,jnpfKey:e.__config__.jnpfKey,value:Z(e),searchType:W(e),searchMultiple:Y(e.__config__.jnpfKey),isKeyword:!1,...e}))),E.columnData.columnOptions=l,E.columnOptions.length||(E.columnData.columnList=[]),E.searchOptions.length||(E.columnData.searchList=[]),E.columnData.btnsList=Re(E.columnData.btnsList,h(E.defaultBtnsList)),E.columnData.columnBtnsList=Re(E.columnData.columnBtnsList,h(E.defaultColumnBtnsList)),A((()=>{E.columnData.searchList=Qe(E.columnData.searchList,h(E.searchOptions),"search"),E.columnData.columnList=Qe(E.columnData.columnList,h(E.columnOptions),"column"),function(){const e=document.querySelector(".search-table-app .ant-table-tbody");be.create(e,{handle:".drag-handler",animation:150,easing:"cubic-bezier(1, 0, 0, 1)",onStart:()=>{},onEnd:({newIndex:e,oldIndex:l})=>{const a=E.columnData.searchList.splice(l,1)[0];E.columnData.searchList.splice(e,0,a)}});const l=document.querySelector(".column-table-app .ant-table-tbody");be.create(l,{handle:".drag-handler",animation:150,easing:"cubic-bezier(1, 0, 0, 1)",onStart:()=>{},onEnd:({newIndex:e,oldIndex:l})=>{const a=E.columnData.columnList.splice(l,1)[0];E.columnData.columnList.splice(e,0,a)}})}(),He(E.columnData.searchList)}))}function He(e){4!=c(ve)&&e.forEach((e=>{const l=e.__config__;if(de.includes(l.jnpfKey)&&("dictionary"===l.dataType&&l.dictionaryType&&(e.options=[],j(l.dictionaryType).then((l=>{e.options=l.data.list}))),"dynamic"===l.dataType&&l.propsUrl)){e.options=[];const a={paramList:R(l.templateJson)};O(l.propsUrl,a).then((l=>{e.options=Array.isArray(l.data)?l.data:[]}))}}))}function ze(e){e&&(E.columnData.searchList=E.columnData.searchList.filter((l=>l.id!==e)),E.columnData.searchList=Qe(E.columnData.searchList,h(E.searchOptions),"search"))}function qe(e){e||(E.columnData.tabConfig.relationField="")}return K((()=>{"object"==typeof v.conf&&null!==v.conf&&(E.columnData=h(Object.assign({},X,v.conf))),E.defaultBtnsList=$,E.defaultColumnBtnsList=q,4!=c(ve)?Pe(c(_e)):Pe(c(ge))})),(l,s)=>{const v=d("jnpf-group-title"),y=d("jnpf-i18n-input"),_=d("jnpf-select"),A=d("a-input"),C=d("jnpf-number-range"),T=d("jnpf-date-range"),K=d("jnpf-time-range"),j=d("jnpf-role-select"),R=d("jnpf-group-select"),O=d("jnpf-area-select"),q=d("jnpf-organize-select"),X=d("jnpf-cascader"),$=d("jnpf-dep-select"),ne=d("jnpf-pos-select"),ie=d("jnpf-user-select"),ue=d("jnpf-users-select"),de=d("jnpf-auto-complete"),re=d("a-checkbox"),pe=d("a-table"),ye=d("a-tab-pane"),ge=d("a-tabs"),be=d("a-divider"),Re=d("a-button"),Qe=d("a-form-item"),Me=d("BasicHelp"),Pe=d("a-switch"),He=d("jnpf-radio"),Ge=d("a-form");return a(),r("div",Sl,[o("div",Tl,[i(v,{content:"查询字段",bordered:!1}),i(pe,{"data-source":c(J).searchList,columns:ke.value,size:"small",pagination:!1,rowKey:"id",class:"search-table-app"},{bodyCell:n((({column:e,record:l,index:n})=>["drag"===e.key?(a(),r("i",Kl)):k("",!0),"label"===e.key?(a(),t(y,{key:1,value:l.label,"onUpdate:value":e=>l.label=e,i18n:l.labelI18nCode,"onUpdate:i18n":e=>l.labelI18nCode=e,placeholder:"请输入",allowClear:""},null,8,["value","onUpdate:value","i18n","onUpdate:i18n"])):k("",!0),"jnpfKey"===e.key?(a(),r(p,{key:2},[i(_,{value:l.jnpfKey,"onUpdate:value":e=>l.jnpfKey=e,options:x,disabled:l.__config__.isFromParam,class:"!w-160px",onChange:e=>function(e,l,a){l.__config__.jnpfKey=e;let t={id:l.id,fullName:l.fullName,label:l.label,prop:l.prop,jnpfKey:l.jnpfKey,value:Z(l),searchType:W(l),__vModel__:l.__vModel__,searchMultiple:Y(e),isKeyword:!1,__config__:{label:l.label,jnpfKey:e}};"datePicker"===e&&(t.format="yyyy-MM-dd"),"timePicker"===e&&(t.format="HH:mm:ss"),"select"===e&&(t.options=[],t.props={label:"fullName",value:"id"},t.__config__={...t.__config__,dataType:"static",propsUrl:"",propsName:"",templateJson:[],dictionaryType:""}),["organizeSelect","depSelect","userSelect"].includes(e)&&(t.isIncludeSubordinate=!1),E.columnData.searchList[a]=h(t)}(e,l,n)},null,8,["value","onUpdate:value","disabled","onChange"]),S.includes(l.jnpfKey)&&!l.__config__.isFromParam?(a(),r("i",{key:0,class:"icon-ym icon-ym-shezhi cursor-pointer ml-8px leading-30px",title:"组件属性设置",onClick:e=>function(e,l){E.activeSearchRowIndex=l,fe(!0,{...e})}(l,n)},null,8,Nl)):k("",!0)],64)):k("",!0),"searchType"===e.key?(a(),r(p,{key:3},[l.__config__.isFromParam?(a(),r("span",xl)):(a(),t(_,{key:0,value:l.searchType,"onUpdate:value":e=>l.searchType=e,options:N,disabled:!["input","textarea"].includes(l.jnpfKey)},null,8,["value","onUpdate:value","disabled"]))],64)):k("",!0),"value"===e.key?(a(),r(p,{key:4},[L.includes(l.jnpfKey)?(a(),t(A,{key:0,value:l.value,"onUpdate:value":e=>l.value=e,placeholder:"请输入",allowClear:""},null,8,["value","onUpdate:value"])):k("",!0),"inputNumber"===l.jnpfKey?(a(),t(C,{key:1,value:l.value,"onUpdate:value":e=>l.value=e,precision:l.precision,disabled:l.disabled},null,8,["value","onUpdate:value","precision","disabled"])):k("",!0),["rate","slider"].includes(l.jnpfKey)?(a(),t(C,{key:2,value:l.value,"onUpdate:value":e=>l.value=e,precision:l.allowHalf?1:0,disabled:l.disabled},null,8,["value","onUpdate:value","precision","disabled"])):k("",!0),Q.includes(l.jnpfKey)?(a(),t(_,{key:3,value:l.value,"onUpdate:value":e=>l.value=e,options:l.options,fieldNames:l.props,multiple:l.searchMultiple,showSearch:"",allowClear:""},null,8,["value","onUpdate:value","options","fieldNames","multiple"])):k("",!0),"datePicker"===l.jnpfKey?(a(),t(T,{key:4,value:l.value,"onUpdate:value":e=>l.value=e,format:l.format,allowClear:""},null,8,["value","onUpdate:value","format"])):k("",!0),"timePicker"===l.jnpfKey?(a(),t(K,{key:5,value:l.value,"onUpdate:value":e=>l.value=e,format:l.format,allowClear:""},null,8,["value","onUpdate:value","format"])):k("",!0),"roleSelect"===l.jnpfKey?(a(),t(j,{key:6,value:l.value,"onUpdate:value":e=>l.value=e,selectType:l.selectType,ableIds:l.ableIds,multiple:l.searchMultiple,allowClear:""},null,8,["value","onUpdate:value","selectType","ableIds","multiple"])):k("",!0),"groupSelect"===l.jnpfKey?(a(),t(R,{key:7,value:l.value,"onUpdate:value":e=>l.value=e,selectType:l.selectType,ableIds:l.ableIds,multiple:l.searchMultiple,allowClear:""},null,8,["value","onUpdate:value","selectType","ableIds","multiple"])):k("",!0),"areaSelect"===l.jnpfKey?(a(),t(O,{value:l.value,"onUpdate:value":e=>l.value=e,level:l.level,multiple:l.searchMultiple,key:l.cellKey,allowClear:""},null,8,["value","onUpdate:value","level","multiple"])):k("",!0),"organizeSelect"===l.jnpfKey?(a(),t(q,{key:9,value:l.value,"onUpdate:value":e=>l.value=e,selectType:l.selectType,ableIds:l.ableIds,multiple:l.searchMultiple,allowClear:""},null,8,["value","onUpdate:value","selectType","ableIds","multiple"])):k("",!0),"cascader"===l.jnpfKey?(a(),t(X,{key:10,value:l.value,"onUpdate:value":e=>l.value=e,placeholder:"请选择",options:l.options,fieldNames:l.props,showAllLevels:l.showAllLevels,multiple:l.searchMultiple,showSearch:"",allowClear:""},null,8,["value","onUpdate:value","options","fieldNames","showAllLevels","multiple"])):k("",!0),"depSelect"===l.jnpfKey?(a(),t($,{key:11,value:l.value,"onUpdate:value":e=>l.value=e,selectType:l.selectType,ableIds:l.ableIds,multiple:l.searchMultiple,allowClear:""},null,8,["value","onUpdate:value","selectType","ableIds","multiple"])):k("",!0),"posSelect"===l.jnpfKey?(a(),t(ne,{key:12,value:l.value,"onUpdate:value":e=>l.value=e,selectType:l.selectType,ableIds:l.ableIds,multiple:l.searchMultiple,allowClear:""},null,8,["value","onUpdate:value","selectType","ableIds","multiple"])):k("",!0),"userSelect"===l.jnpfKey?(a(),t(ie,{key:13,value:l.value,"onUpdate:value":e=>l.value=e,selectType:"all"!=l.selectType&&"custom"!=l.selectType?"all":l.selectType,ableIds:l.ableIds,multiple:l.searchMultiple,allowClear:""},null,8,["value","onUpdate:value","selectType","ableIds","multiple"])):k("",!0),"usersSelect"===l.jnpfKey?(a(),t(ue,{key:14,value:l.value,"onUpdate:value":e=>l.value=e,selectType:l.selectType,ableIds:l.ableIds,multiple:l.searchMultiple,allowClear:""},null,8,["value","onUpdate:value","selectType","ableIds","multiple"])):k("",!0),"autoComplete"===l.jnpfKey?(a(),t(de,{key:15,value:l.value,"onUpdate:value":e=>l.value=e,placeholder:l.placeholder,allowClear:l.clearable,disabled:l.disabled,interfaceId:l.interfaceId,relationField:l.relationField,templateJson:l.templateJson,total:l.total},null,8,["value","onUpdate:value","placeholder","allowClear","disabled","interfaceId","relationField","templateJson","total"])):k("",!0)],64)):k("",!0),"isKeyword"===e.key?(a(),t(re,{key:5,checked:l.isKeyword,"onUpdate:checked":e=>l.isKeyword=e,disabled:!F.includes(l.jnpfKey)||Ce.value&&!l.isKeyword},null,8,["checked","onUpdate:checked","disabled"])):k("",!0),"searchMultiple"===e.key?(a(),t(re,{key:6,checked:l.searchMultiple,"onUpdate:checked":e=>l.searchMultiple=e,disabled:!D.includes(l.jnpfKey),onChange:e=>function(e,l){E.columnData.searchList[l].value=Z(e)}(l,n)},null,8,["checked","onUpdate:checked","disabled","onChange"])):k("",!0),"noShow"===e.key?(a(),t(re,{key:7,checked:l.noShow,"onUpdate:checked":e=>l.noShow=e},null,8,["checked","onUpdate:checked"])):k("",!0)])),_:1},8,["data-source","columns"]),i(v,{content:"列表字段",bordered:!1,class:"mt-20px"}),i(pe,{"data-source":c(J).columnList,columns:w,size:"small",pagination:!1,rowKey:"id",class:"column-table-app"},{bodyCell:n((({column:e,record:l})=>["drag"===e.key?(a(),r("i",Ll)):k("",!0),"label"===e.key&&4==ve.value?(a(),t(y,{key:1,value:l.label,"onUpdate:value":e=>l.label=e,i18n:l.labelI18nCode,"onUpdate:i18n":e=>l.labelI18nCode=e,placeholder:"请输入",allowClear:""},null,8,["value","onUpdate:value","i18n","onUpdate:i18n"])):k("",!0),"sortable"===e.key?(a(),t(re,{key:2,checked:l.sortable,"onUpdate:checked":e=>l.sortable=e,disabled:l.id.indexOf("_jnpf_")>0||l.__config__&&l.__config__.isSubTable||c(se).includes(l.__config__.jnpfKey)},null,8,["checked","onUpdate:checked","disabled"])):k("",!0)])),_:1},8,["data-source"])]),o("div",Bl,[i(ge,{activeKey:M.value,"onUpdate:activeKey":s[0]||(s[0]=e=>M.value=e),tabBarGutter:11,class:"average-tabs"},{default:n((()=>[i(ye,{key:"search",tab:"查询字段"}),i(ye,{key:"field",tab:"列表字段"}),i(ye,{key:"column",tab:"列表属性"})])),_:1},8,["activeKey"]),o("div",jl,[g(o("div",Rl,[i(pe,{"data-source":Ae.value,columns:U,size:"small",pagination:!1,scroll:{y:"calc(100vh - 161px)"},rowKey:"id","row-selection":{columnWidth:50,selectedRowKeys:c(P),onChange:Ee}},{headerCell:n((()=>s[12]||(s[12]=[u("查询字段")]))),_:1},8,["data-source","row-selection"])],512),[[b,"search"===M.value]]),g(o("div",Ol,[i(pe,{"data-source":E.columnOptions,columns:U,size:"small",pagination:!1,scroll:{y:"calc(100vh - 161px)"},rowKey:"id","row-selection":{columnWidth:50,selectedRowKeys:c(V),onChange:Je}},{headerCell:n((()=>s[13]||(s[13]=[u("列表字段")]))),_:1},8,["data-source","row-selection"])],512),[[b,"field"===M.value]]),g(i(c(B),null,{default:n((()=>[i(Ge,{colon:!1,layout:"vertical",class:"right-board-form !-mt-10px"},{default:n((()=>[i(be,null,{default:n((()=>s[14]||(s[14]=[u("表格配置")]))),_:1,__:[14]}),4!=ve.value?(a(),t(Qe,{key:0,label:"数据过滤"},{default:n((()=>[i(Re,{block:"",onClick:Fe},{default:n((()=>[u(f(he.value),1)])),_:1})])),_:1})):k("",!0),i(Qe,{label:"默认排序"},{default:n((()=>[i(Re,{block:"",onClick:Ne},{default:n((()=>s[15]||(s[15]=[u("默认排序配置")]))),_:1,__:[15]})])),_:1}),4==ve.value?(a(),t(Qe,{key:1},{label:n((()=>[s[16]||(s[16]=u("视图主键")),i(Me,{text:"视图主键用于当前选中的数据导出，设置的主键必须是唯一值才能确保数据正常导出"})])),default:n((()=>[i(_,{value:c(J).viewKey,"onUpdate:value":s[1]||(s[1]=e=>c(J).viewKey=e),options:E.columnOptions},null,8,["value","options"])])),_:1})):k("",!0),i(Qe,{label:"分页设置"},{default:n((()=>[i(Pe,{checked:c(J).hasPage,"onUpdate:checked":s[2]||(s[2]=e=>c(J).hasPage=e),disabled:!!e.interfaceHasPage},null,8,["checked","disabled"])])),_:1}),c(J).hasPage?(a(),t(Qe,{key:2,label:"分页条数"},{default:n((()=>[i(He,{value:c(J).pageSize,"onUpdate:value":s[3]||(s[3]=e=>c(J).pageSize=e),options:I,optionType:"button","button-style":"solid",class:"right-radio"},null,8,["value"])])),_:1})):k("",!0),4!=ve.value&&[1,4].includes(c(J).type)?(a(),r(p,{key:3},[i(Qe,{label:"标签面板"},{default:n((()=>[i(Pe,{checked:c(J).tabConfig.on,"onUpdate:checked":s[4]||(s[4]=e=>c(J).tabConfig.on=e),onChange:qe},null,8,["checked"])])),_:1}),c(J)?.tabConfig?.on?(a(),r(p,{key:0},[i(Qe,{label:"筛选字段"},{default:n((()=>[i(_,{value:c(J).tabConfig.relationField,"onUpdate:value":s[5]||(s[5]=e=>c(J).tabConfig.relationField=e),options:E.tabRelationFieldOptions,fieldNames:{options:"options1"},showSearch:"",onChange:ze},null,8,["value","options"])])),_:1}),i(Qe,{label:"全部标签"},{default:n((()=>[i(Pe,{checked:c(J).tabConfig.hasAllTab,"onUpdate:checked":s[6]||(s[6]=e=>c(J).tabConfig.hasAllTab=e)},null,8,["checked"])])),_:1})],64)):k("",!0)],64)):k("",!0),i(be,null,{default:n((()=>s[17]||(s[17]=[u("按钮配置")]))),_:1,__:[17]}),4!=ve.value?(a(),r("div",Ql,[(a(!0),r(p,null,m(c(J).btnsList,(e=>(a(),r("div",{key:e.value,class:"btnsList-cell"},[i(re,{checked:e.show,"onUpdate:checked":l=>e.show=l},{default:n((()=>[u(f(Ie(e.value)),1)])),_:2},1032,["checked","onUpdate:checked"]),i(y,{value:e.label,"onUpdate:value":l=>e.label=l,i18n:e.labelI18nCode,"onUpdate:i18n":l=>e.labelI18nCode=l,placeholder:"按钮名称"},null,8,["value","onUpdate:value","i18n","onUpdate:i18n"])])))),128))])):k("",!0),4!=ve.value?(a(),r("div",Ml,[(a(!0),r(p,null,m(c(J).columnBtnsList,((e,l)=>(a(),r("div",{key:e.value,class:"btnsList-cell"},[i(re,{checked:e.show,"onUpdate:checked":l=>e.show=l},{default:n((()=>[u(f(Ie(e.value)),1)])),_:2},1032,["checked","onUpdate:checked"]),i(y,{value:e.label,"onUpdate:value":l=>e.label=l,i18n:e.labelI18nCode,"onUpdate:i18n":l=>e.labelI18nCode=l,placeholder:"按钮名称"},{addonBefore:n((()=>[o("span",{class:"cursor-pointer px-11px",onClick:a=>function(e,l){E.activeBtn=l,e?.event?.enableFunc||(e.event={enableFunc:H}),ee(!0,{text:e.event.enableFunc,funcName:"btnEnableRule"})}(e,l)},[s[18]||(s[18]=u("启用规则")),i(Me,{text:"不支持代码生成"})],8,El)])),_:2},1032,["value","onUpdate:value","i18n","onUpdate:i18n"])])))),128))])):k("",!0),o("div",null,[o("p",Jl,[s[19]||(s[19]=u("自定义按钮区")),i(Me,{text:"不支持代码生成"})]),o("div",Pl,[i(c(le),{modelValue:c(J).customBtnsList,"onUpdate:modelValue":s[7]||(s[7]=e=>c(J).customBtnsList=e),animation:300,group:"selectItem",handle:".option-drag",itemKey:"value"},{item:n((({element:e,index:l})=>[o("div",Hl,[s[21]||(s[21]=o("div",{class:"custom-line-icon option-drag"},[o("i",{class:"icon-ym icon-ym-darg"})],-1)),o("p",Vl,f(e.value),1),i(y,{value:e.label,"onUpdate:value":l=>e.label=l,i18n:e.labelI18nCode,"onUpdate:i18n":l=>e.labelI18nCode=l,placeholder:"按钮名称"},{addonBefore:n((()=>[o("span",{class:"cursor-pointer",onClick:a=>function(e,l){E.activeBtn=l,te(!0,{showType:"app",formFieldsOptions:4==c(ve)?E.columnOptions:c(_e),dataForm:e.event})}(e,l)},"事件",8,zl)])),_:2},1032,["value","onUpdate:value","i18n","onUpdate:i18n"]),o("div",{class:"close-btn custom-line-icon",onClick:e=>c(J).customBtnsList.splice(l,1)},s[20]||(s[20]=[o("i",{class:"icon-ym icon-ym-btn-clearn"},null,-1)]),8,ql)])])),_:1},8,["modelValue"]),o("div",Gl,[i(Re,{type:"link",preIcon:"icon-ym icon-ym-btn-add",onClick:we},{default:n((()=>s[22]||(s[22]=[u("添加按钮")]))),_:1,__:[22]})])])]),4!=ve.value?(a(),r("div",Zl,[i(be,null,{default:n((()=>s[23]||(s[23]=[u("权限设置")]))),_:1,__:[23]}),i(Qe,{label:"按钮权限"},{default:n((()=>[i(Pe,{checked:c(J).useBtnPermission,"onUpdate:checked":s[8]||(s[8]=e=>c(J).useBtnPermission=e)},null,8,["checked"])])),_:1}),i(Qe,{label:"列表权限"},{default:n((()=>[i(Pe,{checked:c(J).useColumnPermission,"onUpdate:checked":s[9]||(s[9]=e=>c(J).useColumnPermission=e)},null,8,["checked"])])),_:1}),i(Qe,{label:"表单权限"},{default:n((()=>[i(Pe,{checked:c(J).useFormPermission,"onUpdate:checked":s[10]||(s[10]=e=>c(J).useFormPermission=e)},null,8,["checked"])])),_:1}),i(Qe,{label:"数据权限"},{default:n((()=>[i(Pe,{checked:c(J).useDataPermission,"onUpdate:checked":s[11]||(s[11]=e=>c(J).useDataPermission=e)},null,8,["checked"])])),_:1})])):k("",!0),i(be,null,{default:n((()=>[s[24]||(s[24]=u("脚本事件")),i(Me,{text:"不支持代码生成"})])),_:1,__:[24]}),(a(!0),r(p,null,m(c(J).funcs,((e,l)=>(a(),t(Qe,{label:Ue(l),key:l},{default:n((()=>[i(Re,{block:"",onClick:e=>{return a=l,E.activeFunc=a,E.columnData.funcs[E.activeFunc]||(E.columnData.funcs[E.activeFunc]=G[E.activeFunc]),void ee(!0,{text:E.columnData.funcs[E.activeFunc],funcName:a});var a}},{default:n((()=>s[25]||(s[25]=[u("脚本编写")]))),_:2,__:[25]},1032,["onClick"])])),_:2},1032,["label"])))),128))])),_:1})])),_:1},512),[[b,"column"===M.value]])])]),i(Se,{onRegister:c(z),onConfirm:Ke},null,8,["onRegister"]),i(Be,{onRegister:c(ae),onConfirm:De},null,8,["onRegister"]),i(je,{onRegister:c(oe),onConfirm:Te},null,8,["onRegister"]),i(Oe,{onRegister:c(ce),onConfirm:xe},null,8,["onRegister"]),i(Ve,{onRegister:c(me),onConfirm:Le},null,8,["onRegister"])])}}}),Yl={class:"h-full"},Xl={class:"head-tabs"},$l={class:"column-empty-box"},ea=["src"],la=e({__name:"BasicColumnDesign",props:["columnData","appColumnData","formInfo","viewFields","interfaceParam","interfaceHasPage"],emits:["toggleWebType"],setup(e,{expose:t,emit:p}){const m=e,f=p;t({getData:function(){return new Promise(((e,l)=>{const a=c(y).getData();a||l({msg:"",target:2});const t=c(h).getData();t.columnList&&t.columnList.length||(t.columnList=a.columnList),e({columnData:a,appColumnData:t,target:2})}))}});const{prefixCls:v}=Q("basic-column-design"),y=l(null),h=l(null),_=l("pc"),k=S(),A=T((()=>({...M(m,["columnData","appColumnData"]),conf:m.columnData}))),C=T((()=>({...M(m,["columnData","appColumnData"]),conf:m.appColumnData}))),I=T((()=>"light"===k.getDarkMode?Ce:Ie));function U(){f("toggleWebType",2)}return(l,t)=>{const p=d("a-button");return a(),r("div",{class:N(`${c(v)}`)},[g(o("div",Yl,[g(i(Fl,s({ref_key:"columnMain",ref:y},A.value),null,16),[[b,"pc"===_.value]]),g(i(Wl,s({ref_key:"columnMainApp",ref:h},C.value),null,16),[[b,"app"===_.value]]),o("div",Xl,[i(p,{"pre-icon":"icon-ym icon-ym-pc",type:"link",class:N({"unActive-btn":"pc"!=_.value}),onClick:t[0]||(t[0]=e=>_.value="pc")},{default:n((()=>t[2]||(t[2]=[u("桌面端")]))),_:1,__:[2]},8,["class"]),i(p,{"pre-icon":"icon-ym icon-ym-mobile",type:"link",class:N({"unActive-btn":"app"!=_.value}),onClick:t[1]||(t[1]=e=>_.value="app")},{default:n((()=>t[3]||(t[3]=[u("移动端")]))),_:1,__:[3]},8,["class"])])],512),[[b,2==e.formInfo.webType||4==e.formInfo.webType]]),g(o("div",$l,[o("img",{src:I.value,class:"empty-img"},null,8,ea),t[5]||(t[5]=o("p",null,"开启后，表单带有数据列表",-1)),i(p,{type:"primary",class:"w-150px",size:"large",onClick:U},{default:n((()=>t[4]||(t[4]=[u("开启列表")]))),_:1,__:[4]})],512),[[b,1==e.formInfo.webType]])],2)}}});export{la as _};
