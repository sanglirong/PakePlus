import{u as e,d as t,T as o,M as n,a5 as a,e as s,o as l,g as r,F as i,aL as c,p as u,l as p,m as d,t as f,V as g,q as y,af as h,am as w,aM as C,bh as k,a4 as m,j as D,ce as B,ab as x,r as b,U as $,a1 as O,aQ as T,k as P,al as v,w as S,n as L,Z as _,a9 as F,aR as j,i as H,h as A,aS as N,aT as V,ad as M,aU as E,aV as I,aj as R,at as U,a2 as q,a3 as K}from"./index-920db443.js";import{A as Q}from"./ArrowLeftOutlined-3fbf15bc.js";import{e as Z}from"./log-2a5f2c26.js";const{t:z}=e(),G={confirmLoading:{type:Boolean},showCancelBtn:{type:Boolean,default:!0},cancelButtonProps:Object,cancelText:{type:String,default:z("common.cancelText")},showOkBtn:{type:Boolean,default:!0},okButtonProps:Object,okText:{type:String,default:z("common.okText")},okType:{type:String,default:"primary"},continueText:{type:String,default:z("common.continueText")},continueType:{type:String,default:"default"},showContinueBtn:{type:Boolean,default:!1},continueButtonProps:Object,continueLoading:{type:Boolean},showFooter:{type:Boolean},footerHeight:{type:[String,Number],default:60}},J={isDetail:{type:Boolean},title:{type:String,default:""},loadingText:{type:String},showDetailBack:{type:Boolean,default:!0},open:{type:Boolean},loading:{type:Boolean},maskClosable:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!1},getContainer:{type:[Object,String]},closeFunc:{type:[Function,Object],default:null},destroyOnClose:{type:Boolean},...G};const W=a(t({name:"BasicDrawerFooter",props:{...G,height:{type:String,default:"60px"}},emits:["close","ok","continue"],setup(e,{emit:t}){const{prefixCls:a}=o("basic-drawer-footer");return{handleOk:function(){t("ok")},handleContinue:function(e){t("continue",e)},prefixCls:a,handleClose:function(){t("close")},getStyle:n((()=>{const t=`${e.height}`;return{height:t,lineHeight:`calc(${t} - 1px)`}}))}}}),[["render",function(e,t,o,n,a,C){const k=s("a-button");return e.showFooter||e.$slots.footer?(l(),r("div",{key:0,class:h(e.prefixCls),style:w(e.getStyle)},[e.$slots.footer?c(e.$slots,"footer",{key:1}):(l(),r(i,{key:0},[c(e.$slots,"insertFooter"),e.showContinueBtn?(l(),u(k,g({key:0,type:e.continueType,onClick:e.handleContinue,loading:e.continueLoading,disabled:e.confirmLoading,class:"mr-10px"},e.continueButtonProps),{default:p((()=>[d(f(e.continueText),1)])),_:1},16,["type","onClick","loading","disabled"])):y("",!0),e.showCancelBtn?(l(),u(k,g({key:1},e.cancelButtonProps,{onClick:e.handleClose,class:"mr-10px"}),{default:p((()=>[d(f(e.cancelText),1)])),_:1},16,["onClick"])):y("",!0),c(e.$slots,"centerFooter"),e.showOkBtn?(l(),u(k,g({key:2,type:e.okType,onClick:e.handleOk},e.okButtonProps,{class:"mr-10px",loading:e.confirmLoading,disabled:e.okButtonProps?.disabled||e.continueLoading}),{default:p((()=>[d(f(e.okText),1)])),_:1},16,["type","onClick","loading","disabled"])):y("",!0),c(e.$slots,"appendFooter")],64))],6)):y("",!0)}]]),X=t({name:"BasicDrawerHeader",components:{BasicTitle:C,ArrowLeftOutlined:Q},props:{isDetail:k.bool,showDetailBack:k.bool,title:k.string},emits:["close"],setup(e,{emit:t}){const{prefixCls:n}=o("basic-drawer-header");return{prefixCls:n,handleClose:function(){t("close")}}}}),Y={key:1};const ee=a(t({components:{Drawer:B,ScrollContainer:x,DrawerFooter:W,DrawerHeader:a(X,[["render",function(e,t,o,n,a,i){const g=s("BasicTitle"),w=s("ArrowLeftOutlined");return e.isDetail?(l(),r("div",{key:1,class:h([e.prefixCls,`${e.prefixCls}--detail`])},[m("span",{class:h(`${e.prefixCls}__twrap`)},[e.showDetailBack?(l(),r("span",{key:0,onClick:t[0]||(t[0]=(...t)=>e.handleClose&&e.handleClose(...t))},[D(w,{class:h(`${e.prefixCls}__back`)},null,8,["class"])])):y("",!0),e.title?(l(),r("span",Y,f(e.title),1)):y("",!0)],2),m("span",{class:h(`${e.prefixCls}__toolbar`)},[c(e.$slots,"titleToolbar")],2)],2)):(l(),u(g,{key:0,class:h(e.prefixCls)},{default:p((()=>[c(e.$slots,"title"),d(" "+f(e.$slots.title?"":e.title),1)])),_:3},8,["class"]))}]])},inheritAttrs:!1,props:J,emits:["open-change","ok","close","register"],setup(t,{emit:a}){const s=b(!1),l=$({excludeDefaultKeys:!1}),r=b(null),{t:i}=e(),{prefixVar:c,prefixCls:u}=o("basic-drawer"),p={setDrawerProps:function(e){r.value=T(P(r)||{},e),Reflect.has(e,"open")&&(s.value=!!e.open)},emitOpen:void 0},d=O();d&&a("register",p,d.uid);const f=n((()=>T(t,P(r)))),g=n((()=>{const e={placement:"right",...P(l),...P(f),open:P(s)};e.title=void 0;const{isDetail:t,width:o,wrapClassName:n,getContainer:a}=e;if(t){o||(e.width="100%");const t=`${u}__detail`;e.rootClassName=n?`${n} ${t}`:t,a||(e.getContainer=`.${c}-layout-content`)}return e})),y=n((()=>({...l,...P(g)}))),h=n((()=>{const{footerHeight:e,showFooter:t}=P(g);return t&&e?v(e)?`${e}px`:`${e.replace("px","")}px`:"0px"})),w=n((()=>({position:"relative",height:`calc(100% - ${P(h)})`}))),C=n((()=>!!P(g)?.loading));return S((()=>t.open),((e,t)=>{e!==t&&(s.value=e)}),{deep:!0}),S((()=>s.value),(e=>{L((()=>{a("open-change",e),d&&p.emitOpen?.(e,d.uid)}))})),{onClose:async function(e){const{closeFunc:t}=P(g);if(a("close",e),t&&_(t)){const e=await t();s.value=!e}else s.value=!1},t:i,prefixCls:u,getMergeProps:f,getScrollContentStyle:w,getProps:g,getLoading:C,getBindValues:y,getFooterHeight:h,handleOk:function(){a("ok")}}}}),[["render",function(e,t,o,n,a,r){const i=s("DrawerHeader"),d=s("ScrollContainer"),f=s("DrawerFooter"),y=s("Drawer"),h=F("loading");return l(),u(y,g({rootClassName:e.prefixCls,onClose:e.onClose},e.getBindValues),j({default:p((()=>[H((l(),u(d,{style:w(e.getScrollContentStyle),"loading-tip":e.loadingText||e.t("common.loadingText")},{default:p((()=>[c(e.$slots,"default")])),_:3},8,["style","loading-tip"])),[[h,e.getLoading]]),D(f,g(e.getProps,{onClose:e.onClose,onOk:e.handleOk,height:e.getFooterHeight}),j({_:2},[A(Object.keys(e.$slots),(t=>({name:t,fn:p((o=>[c(e.$slots,t,N(V(o||{})))]))})))]),1040,["onClose","onOk","height"])])),_:2},[e.$slots.title?{name:"title",fn:p((()=>[c(e.$slots,"title")])),key:"1"}:{name:"title",fn:p((()=>[D(i,{title:e.getMergeProps.title,isDetail:e.isDetail,showDetailBack:e.showDetailBack,onClose:e.onClose},{titleToolbar:p((()=>[c(e.$slots,"titleToolbar")])),_:3},8,["title","isDetail","showDetailBack","onClose"])])),key:"0"}]),1040,["rootClassName","onClose"])}]]),te=M({}),oe=M({});function ne(){if(!O())throw new Error("useDrawer() can only be used inside setup() or functional components!");const e=b(null),t=b(!1),o=b("");const a=()=>{const t=P(e);return t||Z("useDrawer instance is undefined!"),t};return[function(n,a){U((()=>{e.value=null,t.value=null,te[P(o)]=null})),P(t)&&q()&&n===P(e)||(o.value=a,e.value=n,t.value=!0,n.emitOpen=(e,t)=>{oe[t]=e})},{setDrawerProps:e=>{a()?.setDrawerProps(e)},getOpen:n((()=>oe[~~P(o)])),openDrawer:(e=!0,t,n=!0)=>{if(a()?.setDrawerProps({open:e}),!t)return;if(n)return te[P(o)]=null,void(te[P(o)]=E(t));I(E(te[P(o)]),E(t))||(te[P(o)]=E(t))},closeDrawer:()=>{a()?.setDrawerProps({open:!1})}}]}const ae=e=>{const t=b(null),o=O(),a=b("");if(!O())throw new Error("useDrawerInner() can only be used inside setup() or functional components!");const s=()=>{const e=P(t);if(e)return e;Z("useDrawerInner instance is undefined!")};return R((()=>{const t=te[P(a)];t&&e&&_(e)&&L((()=>{e(t)}))})),[(e,n)=>{U((()=>{t.value=null})),a.value=n,t.value=e,o?.emit("register",e,n)},{changeLoading:(e=!0)=>{s()?.setDrawerProps({loading:e})},changeOkLoading:(e=!0)=>{s()?.setDrawerProps({confirmLoading:e})},changeContinueLoading:(e=!0)=>{s()?.setDrawerProps({continueLoading:e})},getOpen:n((()=>oe[~~P(a)])),closeDrawer:()=>{s()?.setDrawerProps({open:!1})},setDrawerProps:e=>{s()?.setDrawerProps(e)}}]},se=K(ee);export{se as B,W as D,ae as a,ne as u};
