import{u as e,B as t}from"./useTable-dc8c9d84.js";import{T as s}from"./TableAction-adbe36f2.js";import{i as o,d as r}from"./projectGantt-30c2203e.js";import{u as n}from"./index-143f5813.js";import{u as a}from"./index-9c138ba5.js";import{d as i,u as l,aw as p,e as m,o as u,g as c,a4 as d,j as _,l as j,m as y,t as f,k as g,F as k,q as v,co as x,p as b,h,ah as w}from"./index-920db443.js";import{_ as I}from"./Form.vue_vue_type_script_setup_true_lang-30116341.js";import T from"./Task-6bde1794.js";import"./useForm-1d28ee0b.js";import"./componentMap-c91676b4.js";import"./visualDev-8f54ab4b.js";import"./index.vue_vue_type_script_setup_true_lang-69353133.js";import"./index-999abbee.js";import"./ArrowLeftOutlined-3fbf15bc.js";import"./log-2a5f2c26.js";import"./Parser.vue_vue_type_script_setup_true_lang-6ddfe448.js";import"./Item.vue_vue_type_script_setup_true_lang-fef56f78.js";import"./Form.vue_vue_type_script_setup_true_lang-63005a4d.js";import"./createAsyncComponent-7e8f72ac.js";import"./DataLogList.vue_vue_type_script_setup_true_lang-c225eb8c.js";import"./index-0be8277c.js";import"./jquery-6353a699.js";import"./useDefineSetting-7df030ff.js";import"./CustomForm.vue_vue_type_script_setup_true_lang-1aa664f4.js";import"./config-06ca91cd.js";import"./upperFirst-2cd1a2f7.js";import"./useTabs-ceeccdba.js";import"./uniqBy-e868edd7.js";import"./useWindowSizeFn-05f906e2.js";import"./sortable.esm-02d0fe44.js";import"./SettingOutlined-dd6150a2.js";import"./index-1cfe4e28.js";import"./TaskForm.vue_vue_type_script_setup_true_lang-a13f9d99.js";const C={class:"jnpf-content-wrapper"},F={class:"jnpf-content-wrapper-center"},D={class:"jnpf-content-wrapper-content"},R={class:"text-grey"},M={class:"text-grey"},Y=i({name:"extend-tableDemo-projectGantt",__name:"index",setup(i){const{t:Y}=l(),{createMessage:L}=w(),O=p(),[P,{openModal:S}]=n(),[A,{openPopup:N}]=a(),[q,{reload:z}]=e({api:o,columns:[{title:"项目名称/项目编码",dataIndex:"fullName",width:180},{title:"开始日期/结束日期",dataIndex:"startTime",width:160},{title:"项目工期/完成进度",dataIndex:"schedule",width:160},{title:"状态",dataIndex:"state",width:100},{title:"参与人员",dataIndex:"managersInfo",width:750}],useSearchForm:!0,formConfig:{schemas:[{field:"keyword",label:Y("common.keyword"),component:"Input",componentProps:{placeholder:Y("common.enterKeyword"),submitOnPressEnter:!0}}]},actionColumn:{width:150,title:"操作",dataIndex:"action"}});function B(e){return[{label:Y("common.editText"),onClick:G.bind(null,e.id)},{label:Y("common.delText"),color:"error",modelConfirm:{onOk:E.bind(null,e.id)}},{label:"项目任务",onClick:K.bind(null,e)}]}function G(e=""){S(!0,{id:e})}function E(e){r(e).then((e=>{L.success(e.msg),z()}))}function K(e){N(!0,e)}return(e,o)=>{const r=m("a-button"),n=m("a-progress"),a=m("a-tag"),i=m("a-avatar");return u(),c("div",C,[d("div",F,[d("div",D,[_(g(t),{onRegister:g(q)},{tableTitle:j((()=>[_(r,{type:"primary",preIcon:"icon-ym icon-ym-btn-add",onClick:o[0]||(o[0]=e=>G())},{default:j((()=>[y(f(g(Y)("common.addText")),1)])),_:1})])),bodyCell:j((({column:e,record:t})=>["fullName"===e.key?(u(),c(k,{key:0},[d("p",null,f(t.fullName),1),d("p",R,f(t.enCode),1)],64)):v("",!0),"startTime"===e.key?(u(),c(k,{key:1},[d("p",null,f(g(x)(t.startTime).format("YYYY-MM-DD")),1),d("p",M,f(g(x)(t.endTime).format("YYYY-MM-DD")),1)],64)):v("",!0),"schedule"===e.key?(u(),c(k,{key:2},[d("p",null,f(t.timeLimit)+"天",1),_(n,{percent:t.schedule},null,8,["percent"])],64)):v("",!0),"state"===e.key?(u(),c(k,{key:3},[100===t.schedule?(u(),b(a,{key:0,color:"success"},{default:j((()=>o[1]||(o[1]=[y("已完成")]))),_:1,__:[1]})):(u(),c(k,{key:1},[1===t.state?(u(),b(a,{key:0,color:"processing"},{default:j((()=>o[2]||(o[2]=[y("进行中")]))),_:1,__:[2]})):v("",!0),2===t.state?(u(),b(a,{key:1,color:"error"},{default:j((()=>o[3]||(o[3]=[y("已暂停")]))),_:1,__:[3]})):v("",!0)],64))],64)):v("",!0),"managersInfo"===e.key?(u(!0),c(k,{key:4},h(t.managersInfo,((e,t)=>(u(),b(i,{size:30,src:g(O).apiUrl+e.headIcon,key:t,title:e.account,class:"!mr-6px"},null,8,["src","title"])))),128)):v("",!0),"action"===e.key?(u(),b(g(s),{key:5,actions:B(t)},null,8,["actions"])):v("",!0)])),_:1},8,["onRegister"])])]),_(I,{onRegister:g(P),onReload:g(z)},null,8,["onRegister","onReload"]),_(T,{onRegister:g(A)},null,8,["onRegister"])])}}});export{Y as default};
