import{a as e,B as t}from"./index-9c138ba5.js";import{d as o,u as s,ad as n,M as a,k as r,n as i,e as l,o as u,p as m,l as d,a4 as p,j as c,m as _,t as f,g as y,af as j,q as b,V as g,ea as x,ah as k,a5 as w}from"./index-920db443.js";import{u as v,B as h}from"./useForm-1d28ee0b.js";import"./componentMap-c91676b4.js";import{u as I,B as M}from"./useTable-dc8c9d84.js";import{T as R}from"./TableAction-adbe36f2.js";import{b as T,d as C,e as D,f as A}from"./variate-1d177fc7.js";import{u as O}from"./index-143f5813.js";import{_ as Y}from"./Form.vue_vue_type_script_setup_true_lang-ebd8eecb.js";import"./ArrowLeftOutlined-3fbf15bc.js";import"./log-2a5f2c26.js";import"./useTabs-ceeccdba.js";import"./upperFirst-2cd1a2f7.js";import"./uniqBy-e868edd7.js";import"./visualDev-8f54ab4b.js";import"./index.vue_vue_type_script_setup_true_lang-69353133.js";import"./index-999abbee.js";import"./Parser.vue_vue_type_script_setup_true_lang-6ddfe448.js";import"./Item.vue_vue_type_script_setup_true_lang-fef56f78.js";import"./Form.vue_vue_type_script_setup_true_lang-63005a4d.js";import"./createAsyncComponent-7e8f72ac.js";import"./DataLogList.vue_vue_type_script_setup_true_lang-c225eb8c.js";import"./index-0be8277c.js";import"./jquery-6353a699.js";import"./useDefineSetting-7df030ff.js";import"./CustomForm.vue_vue_type_script_setup_true_lang-1aa664f4.js";import"./config-06ca91cd.js";import"./useWindowSizeFn-05f906e2.js";import"./sortable.esm-02d0fe44.js";import"./SettingOutlined-dd6150a2.js";import"./index-1cfe4e28.js";const B={class:"jnpf-content-wrapper-search-box pl-10px mt-10px"},F=w(o({__name:"index",setup(o){const{createMessage:w}=k(),{t:F}=s(),S=n({listQuery:{keyword:""},id:""}),Q=a((()=>({id:r(S.id),keyword:S.listQuery.keyword}))),H=[{title:"变量名",dataIndex:"fullName",width:260},{title:"变量值",dataIndex:"value",width:260},{title:"创建人",dataIndex:"creatorUser",width:100},{title:"创建时间",dataIndex:"creatorTime",width:150,format:"date|YYYY-MM-DD HH:mm:ss"},{title:"最后修改时间",dataIndex:"lastModifyTime",width:150,format:"date|YYYY-MM-DD HH:mm:ss"}],[P]=e((function(e){S.id=e.id,S.listQuery.keyword="",i((()=>G({page:1})))})),[L]=v({baseColProps:{span:6},showActionButtonGroup:!0,showAdvancedButton:!0,compact:!0,schemas:[{field:"keyword",label:F("common.keyword"),component:"Input",componentProps:{placeholder:F("common.enterKeyword"),submitOnPressEnter:!0}}]}),[q,{openModal:z}]=O(),[E,{reload:G}]=I({api:T,searchInfo:Q,immediate:!1,actionColumn:{width:150,title:"操作",dataIndex:"action"},pagination:!1});function K(e){return[{label:F("common.editText"),onClick:Z.bind(null,e.id)},{label:F("common.delText"),color:"error",modelConfirm:{onOk:W.bind(null,e.id)}}]}function N(e){return[{label:F("common.copyText"),modelConfirm:{content:"您确定要复制该功能模板, 是否继续?",onOk:$.bind(null,e.id)}},{label:F("common.exportText"),modelConfirm:{content:"您确定要导出该变量, 是否继续?",onOk:X.bind(null,e.id)}}]}function V(e){S.listQuery.keyword=e?.keyword||"",U()}function J(){S.listQuery.keyword="",U()}function U(){i((()=>G()))}function W(e){C(e).then((e=>{w.success(e.msg),G()}))}function $(e){D(e).then((e=>{w.success(e.msg),G()}))}function X(e){A(e).then((e=>{x({url:e.data.url})}))}function Z(e=""){z(!0,{id:e,interfaceId:S.id})}return(e,o)=>{const s=l("a-button"),n=l("jnpf-upload-btn"),a=l("a-tag");return u(),m(r(t),g(e.$attrs,{onRegister:r(P),title:"提取变量",class:"full-popup"}),{default:d((()=>[p("div",B,[c(r(h),{class:"search-form",onRegister:r(L),onSubmit:V,onReset:J},null,8,["onRegister"])]),c(r(M),{onRegister:r(E),columns:H,searchInfo:Q.value},{tableTitle:d((()=>[c(s,{type:"primary",preIcon:"icon-ym icon-ym-btn-add",onClick:o[0]||(o[0]=e=>Z())},{default:d((()=>[_(f(r(F)("common.addText")),1)])),_:1}),c(n,{url:"/api/system/DataInterfaceVariate/Actions/Import",accept:".ffa",onOnSuccess:r(G)},null,8,["onOnSuccess"])])),bodyCell:d((({column:e,record:t})=>["icon"===e.key?(u(),y("i",{key:0,class:j(t.icon+" table-icon")},null,2)):b("",!0),"enabledMark"===e.key?(u(),m(a,{key:1,color:1==t.enabledMark?"success":"error"},{default:d((()=>[_(f(1==t.enabledMark?"启用":"禁用"),1)])),_:2},1032,["color"])):b("",!0),"action"===e.key?(u(),m(r(R),{key:2,actions:K(t),dropDownActions:N(t)},null,8,["actions","dropDownActions"])):b("",!0)])),_:1},8,["onRegister","searchInfo"]),c(Y,{onRegister:r(q),onReload:r(G)},null,8,["onRegister","onReload"])])),_:1},16,["onRegister"])}}}),[["__scopeId","data-v-dab20879"]]);export{F as default};
