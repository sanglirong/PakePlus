import{b as e,B as s}from"./index-143f5813.js";import{u as a,B as t}from"./useForm-1d28ee0b.js";import"./componentMap-c91676b4.js";import{d as o,ad as r,M as n,u as i,hf as l,o as d,p as m,l as c,j as g,k as p,V as u,hg as h,hh as f,ah as x}from"./index-920db443.js";const b=o({__name:"Form",emits:["register","reload"],setup(o,{emit:b}){const F=r({dataForm:{},id:""}),j=n((()=>F.id?y("common.editText"):y("common.addText"))),k=b,{createMessage:q}=x(),{t:y}=i(),[I,{setFieldsValue:M,validate:P,resetFields:R}]=a({labelWidth:80,schemas:[{field:"fullName",label:"名称",component:"Input",componentProps:{placeholder:"请输入",maxlength:50},rules:[{required:!0,trigger:"blur",message:"必填"}]},{field:"enCode",label:"编码",component:"Input",componentProps:{placeholder:"请输入",maxlength:50},rules:[{required:!0,trigger:"blur",message:"必填"}]},{field:"userIds",label:"授权人",component:"UserSelect",componentProps:{multiple:!0},rules:[{required:!0,trigger:"change",message:"必填",type:"array"}]},{field:"icon",label:"签章",component:"UploadImgSingle",componentProps:{type:"signature",tipText:"电子签章"},rules:[{required:!0,trigger:"change",message:"必填"}]}]}),[_,{closeModal:w,changeLoading:B,changeOkLoading:O}]=e((function(e){R(),F.id=e.id,F.id&&(B(!0),l(F.id).then((e=>{const s=e.data;F.dataForm=s,M(s),B(!1)})))}));async function T(){const e=await P();if(!e)return;O(!0);const s={...e,id:F.id};(F.id?h:f)(s).then((e=>{q.success(e.msg),O(!1),w(),k("reload")})).catch((()=>{O(!1)}))}return(e,a)=>(d(),m(p(s),u(e.$attrs,{onRegister:p(_),title:j.value,showOkBtn:"",onOk:T}),{default:c((()=>[g(p(t),{onRegister:p(I)},null,8,["onRegister"])])),_:1},16,["onRegister","title"]))}});export{b as _};
