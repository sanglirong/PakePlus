import{h as e,i as l,j as a,l as t,a as n,k as o,u as i,e as r,d as s}from"./visualDev-8f54ab4b.js";import{a as d,u as p,c as u}from"./task-ee77df5a.js";import{j as c,ar as m,d as f,aA as y,u as h,a6 as v,aD as g,r as b,ad as w,a0 as T,c as I,n as D,K as k,M as _,k as j,ch as C,ci as x,cn as L,cm as S,dn as U,eZ as K,a7 as F,e as R,o as O,g as P,V as A,q as N,a4 as M,p as V,l as B,F as J,h as z,ae as H,aR as E,t as Q,m as $,ea as q,aU as W,dm as G,e_ as X,ah as Z,e$ as Y,co as ee,cp as le}from"./index-920db443.js";import{u as ae}from"./index-143f5813.js";import{u as te}from"./index-9c138ba5.js";import{B as ne}from"./BasicLeftTree-cd55d444.js";import{a as oe,u as ie,B as re}from"./useForm-1d28ee0b.js";import{J as se,g as de}from"./componentMap-c91676b4.js";import{u as pe,B as ue}from"./useTable-dc8c9d84.js";import{T as ce}from"./TableAction-adbe36f2.js";import{a as me}from"./Form.vue_vue_type_script_setup_true_lang-63005a4d.js";import{_ as fe}from"./CustomForm.vue_vue_type_script_setup_true_lang-1aa664f4.js";import{_ as ye,P as he,a as ve}from"./index.vue_vue_type_script_setup_true_lang-69353133.js";import{_ as ge}from"./ChildTableColumn.vue_vue_type_script_setup_true_lang-1a28ca33.js";import{_ as be}from"./FlowParser.vue_vue_type_style_index_0_lang-43859d45.js";import{_ as we}from"./CandidateModal.vue_vue_type_script_setup_true_lang-79d2d529.js";import{E as Te,I as Ie,S as De}from"./index-c37d2476.js";import{d as ke,s as _e}from"./config-06ca91cd.js";import{u as je}from"./useDefineSetting-7df030ff.js";import{_ as Ce}from"./ViewSetting.vue_vue_type_style_index_0_lang-557ecbe6.js";import{_ as xe}from"./ViewList.vue_vue_type_style_index_0_lang-5ec9876e.js";const Le={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"};function Se(e){for(var l=1;l<arguments.length;l++){var a=null!=arguments[l]?Object(arguments[l]):{},t=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),t.forEach((function(l){Ue(e,l,a[l])}))}return e}function Ue(e,l,a){return l in e?Object.defineProperty(e,l,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[l]=a,e}var Ke=function(e,l){var a=Se({},e,l.attrs);return c(m,Se({},a,{icon:Le}),null)};Ke.displayName="FilterOutlined",Ke.inheritAttrs=!1;const Fe=Ke,Re={class:"jnpf-content-wrapper"},Oe={key:0,class:"jnpf-content-wrapper-left"},Pe={class:"jnpf-content-wrapper-center"},Ae={key:0,class:"jnpf-content-wrapper-search-box"},Ne={class:"jnpf-content-wrapper-content bg-white"},Me=["onClick"],Ve={key:0,class:"edit-row-action"},Be={class:"edit-row-index"},Je=["onClick"],ze={key:1},He=["onClick"],Ee=["onClick"],Qe=f({__name:"index",props:["config","modelId","isPreview","isDataManage"],setup(m){const f=m,Le=y(),{hasBtnP:Se}=oe(),{createMessage:Ue,createConfirm:Ke}=Z(),{t:Qe}=h(),$e=v(),qe=g(),[We,{openPopup:Ge}]=te(),[Xe,{openModal:Ze,closeModal:Ye,setModalProps:el}]=ae(),[ll,{openModal:al}]=ae(),[tl,{openModal:nl}]=ae(),[ol,{openModal:il,closeModal:rl}]=ae(),[sl,{openModal:dl}]=ae(),[pl,{openModal:ul}]=ae(),cl=b(null),ml=b(null),fl=b(null),yl=b(null),hl=b(null),vl=w({modelId:"",menuId:"",queryJson:"",superQueryJson:""}),gl=w({config:{},columnData:{},formConf:{},headerBtnsList:[],columnBtnsList:[],customHeaderBtnsList:[],customColumnBtnsList:[],columnOptions:[],treeFieldNames:{children:"children",title:"fullName",key:"id",isLeaf:"isLeaf"},leftTreeData:[],leftTreeLoading:!1,isLeftTreeLazy:!1,treeActiveId:"",treeActiveNodePath:[],columns:[],complexColumns:[],childColumnList:[],exportList:[],cacheList:[],currRow:{},workFlowFormData:{},expandObj:{},columnSettingList:[],searchSchemas:[],treeRelationObj:null,treeQueryJson:{},leftTreeActiveInfo:{},customRow:null,customCell:null,tabActiveKey:"",tabList:[],tabQueryJson:{},viewList:[],currentView:{}}),{columnData:bl,childColumnList:wl,tabActiveKey:Tl,tabList:Il,viewList:Dl,currentView:kl}=T(gl),{getFlowStatusContent:_l,getFlowStatusColor:jl}=je(),[Cl,{updateSchema:xl,resetFields:Ll,submit:Sl}]=ie({baseColProps:{span:6},showActionButtonGroup:!0,showAdvancedButton:!0,compact:!0}),[Ul,{reload:Kl,setLoading:Fl,insertTableDataRecord:Rl,updateTableDataRecord:Ol,deleteTableDataRecord:Pl,getFetchParams:Al,getSelectRowKeys:Nl,getSelectRows:Ml,clearSelectedRowKeys:Vl,redoHeight:Bl}]=pe({api:e,immediate:!1,clickToRowSelect:!1,tableSetting:{setting:!1,redo:!f.isPreview},afterFetch:e=>{if(4===gl.columnData.type){const l=e.map((e=>({...e,rowEdit:!1})));return gl.cacheList=I(l),D((()=>{gl.columnData.funcs?.afterOnload&&ba()})),l}let l=e.map((e=>({...e,...gl.expandObj})));return gl.cacheList=I(l),3===gl.columnData.type&&l.map((e=>{e.children&&e.children.length&&(e.children=e.children.map((e=>({...e,...gl.expandObj}))))})),D((()=>{gl.columnData.funcs?.afterOnload&&ba()})),l}}),[Jl]=pe({pagination:!1,canResize:!1,showTableSetting:!1});k("getLeftTreeActiveInfo",(()=>gl.leftTreeActiveInfo));const zl=_((()=>5!=gl.columnData.type&&(gl.headerBtnsList.some((e=>["batchRemove","batchPrint","download"].includes(e.value)))||gl.customHeaderBtnsList.length))),Hl=_((()=>{const e=+new Date,l={title:gl.columnData.treeTitleI18nCode?Qe(gl.columnData.treeTitleI18nCode,gl.columnData.treeTitle):gl.columnData.treeTitle,showSearch:gl.columnData.hasTreeQuery&&0==gl.columnData.treeSyncType&&!gl.isLeftTreeLazy,fieldNames:gl.treeFieldNames,defaultExpandAll:0==gl.columnData.treeSyncType&&!gl.isLeftTreeLazy,treeData:gl.leftTreeData,loading:gl.leftTreeLoading,key:e};return(1==gl.columnData.treeSyncType||gl.isLeftTreeLazy)&&(l.loadData=Ia),l})),El=_((()=>!([3,5].includes(gl.columnData.type)||!gl.columnData.hasPage)&&{pageSize:gl.columnData.pageSize})),Ql=_((()=>3==gl.columnData.type||5==gl.columnData.type?1:gl.columnData.childTableStyle)),$l=_((()=>{const e=2==j(Ql)||4==gl.columnData.type?gl.columns:gl.complexColumns;return f.isDataManage?e:xa(gl.currentView?.columnList,e,"prop")})),ql=_((()=>{const e=I(gl.searchSchemas).map((e=>({...e,show:!0}))),l=xa(gl.currentView?.searchList,e,"field");return function(e){e.forEach((e=>{const l=e.__config__;if(ke.includes(l.jnpfKey)&&("dictionary"===l.dataType&&l.dictionaryType&&qe.getDicDataSelector(l.dictionaryType).then((l=>{xl([{field:e.field,componentProps:{options:l}}])})),"dynamic"===l.dataType&&l.propsUrl)){const a={paramList:l.templateJson||[]};x(l.propsUrl,a).then((l=>{const a=Array.isArray(l.data)?l.data:[];xl([{field:e.field,componentProps:{options:a}}])}))}(Array.isArray(e.value)&&e.value.length||e.value||0===e.value||!1===e.value)&&(e.defaultValue=e.value)}))}(l),f.isDataManage?e:l})),Wl=_((()=>4==gl.config.webType&&gl.columnData.viewKey?gl.columnData.viewKey:"id")),Gl=_((()=>{let e=j($l);if(gl.config.enableFlow){e.some((e=>"flowState"===e.dataIndex))||e.push({title:Qe("component.table.status"),dataIndex:"flowState",width:100,align:"center",fixed:e.some((e=>"right"==e.fixed))?"right":"none"})}const l=(gl.columnData.defaultSortConfig||[]).map((e=>("desc"===e.sort?"-":"")+e.field)),a={pagination:j(El),searchInfo:j(vl),defSort:{sidx:l.join(",")},sortFn:e=>{if(Array.isArray(e)){return{sidx:e.map((e=>("descend"===e.order?"-":"")+e.field)).join(",")}}{const{field:l,order:a}=e;return l&&a?{sidx:("descend"===a?"-":"")+l}:{}}},columns:e,clearSelectOnPageChange:!0,ellipsis:!!gl.columnData.showOverflow,isTreeTable:[3,5].includes(gl.columnData.type),bordered:2!=j(Ql)&&!!gl.childColumnList?.length||!!gl.columnData.complexHeaderList?.length,rowKey:j(Wl)};if(j(zl)){const e={type:"checkbox"};3===gl.columnData.type&&(e.getCheckboxProps=e=>({disabled:!!e.top})),a.rowSelection=e}if(gl.columnBtnsList.length||gl.customColumnBtnsList.length){let e=gl.customColumnBtnsList.length?50:0;4==gl.columnData.type&&gl.config.enableFlow&&(e+=50);let l=gl.columnBtnsList.length;const t=l?50*l+e:e+20;a.actionColumn={width:t,title:Qe("component.table.action"),dataIndex:"action",fixed:"right"}}return gl.customRow&&(a.customRow=gl.customRow),a})),Xl=_((()=>{let e=j($l);if(gl.columnSettingList?.length){for(let l=0;l<e.length;l++)e:for(let a=0;a<gl.columnSettingList.length;a++)if(e[l].dataIndex===gl.columnSettingList[a].dataIndex){e[l].fixed=gl.columnSettingList[a].fixed,e[l].visible=gl.columnSettingList[a].visible;break e}e=e.filter((e=>e.visible))}let l=[];for(let n=0;n<e.length;n++){const a=e[n];if("table"===a.jnpfKey||"complexHeader"===a.jnpfKey?a.children?.length&&l.push(...a.children):l.push(a),a.fixed&&a.children?.length)for(let e=0;e<a.children.length;e++)a.children[e].fixed=a.fixed}const a=l.filter((e=>"left"===e.fixed)),t=l.filter((e=>"right"===e.fixed));return[...a,...l.filter((e=>"left"!==e.fixed&&"right"!==e.fixed)),...t]})),Zl=_((()=>{const e=[];return j(Xl).forEach(((l,a)=>{let t=gl.cacheList.reduce(((e,a)=>e+function(e,l){const a=e=>gl.columnData.summaryField.includes(e);if(!gl.columnData.summaryField.length||!a(l))return 0;const t=e[l];if(!t)return 0;return isNaN(t)?0:Number(t)}(a,l.prop)),0);var n;n=l.prop,gl.columnData.summaryField.includes(n)||(t=""),t=Number.isNaN(t)?"":t;const o=t&&!Number.isInteger(t)?Number(t).toFixed(2):t;e[a]=(e=>j(Xl).some((l=>l.__vModel__===e&&l.thousands)))(l.prop)?C(o):o})),[1,2].includes(gl.columnData.type)&&2===j(Ql)&&gl.childColumnList.length&&e.unshift(""),e}));function Yl(e){if(j(Xl).length)return j(Xl)[e]?.align||"left"}function ea(e,l){const a=gl.columnBtnsList.map((a=>{const t={label:a.labelI18nCode?Qe(a.labelI18nCode,a.label):a.label,onClick:sa.bind(null,a.value,e)};if("remove"===a.value&&(t.color="error"),gl.config.enableFlow)"edit"===a.value&&(t.disabled=![0,8,9].includes(e.flowState)),"remove"===a.value&&(t.disabled=![0,9].includes(e.flowState)),"detail"===a.value&&(t.disabled=!e.flowState);else if(a?.event?.enableFunc){const n={row:e,rowIndex:l,onlineUtils:L},o=S(a.event.enableFunc);t.disabled=o&&!o(n)||!1}return t}));if(e.rowEdit){let a=[{label:Qe("common.saveText"),onClick:pa.bind(null,e,0)},{label:Qe("common.cancelText"),color:"error",onClick:da.bind(null,e,l)}];return gl.config.enableFlow&&a.push({label:Qe("common.submitText"),onClick:ua.bind(null,e)}),a}return a}function la(e,l){return gl.customColumnBtnsList.map((a=>{const t={label:a.labelI18nCode?Qe(a.labelI18nCode,a.label):a.label,onClick:ma.bind(null,a,e,l)};if(a?.event?.enableFunc){const n={row:e,rowIndex:l,onlineUtils:L},o=S(a.event?.enableFunc);t.disabled=o&&!o(n)||!1}return t}))}function aa(e,l,a){if(f.isPreview)return;if(gl.treeActiveId==e)return;gl.treeActiveId=e,gl.treeActiveNodePath=a;let t={},n={};const o=!!gl.treeRelationObj&&gl.treeRelationObj.searchMultiple;if(gl.treeRelationObj?.jnpfKey&&["organizeSelect","cascader","areaSelect"].includes(gl.treeRelationObj.jnpfKey)){let e=[];e="formField"===gl.columnData.treeDataSource&&"organizeSelect"===gl.treeRelationObj.jnpfKey?gl.treeActiveNodePath[gl.treeActiveNodePath.length-1].organizeIds:gl.treeActiveNodePath.map((e=>e[gl.treeFieldNames.key])),t={[gl.columnData.treeRelation]:o?[e]:e},n={[gl.columnData.treeRelation]:gl.treeRelationObj.multiple?[e]:e}}else t={[gl.columnData.treeRelation]:o?[gl.treeActiveId]:gl.treeActiveId},n={[gl.columnData.treeRelation]:gl.treeRelationObj.multiple?[gl.treeActiveId]:gl.treeActiveId};gl.treeQueryJson=t,gl.leftTreeActiveInfo=n,j(ql)?.length?Ll():ka({})}function ta(){if(4===gl.columnData.type)return function(){let e={rowEdit:!0,id:"jnpfAdd"};const l=$e.getUserInfo,a=new Date;for(let t=0;t<gl.columnData.columnList.length;t++){let n=gl.columnData.columnList[t];const o=n.__config__;o.defaultCurrent&&("datePicker"===o.jnpfKey&&(o.defaultValue=ee(a).startOf(le(n.format)).valueOf()),"timePicker"===o.jnpfKey&&(o.defaultValue=ee(a).format(n.format||"HH:mm:ss")),"organizeSelect"===o.jnpfKey&&l.organizeIdList?.length&&(o.defaultValue=n.multiple?[l.organizeIdList]:l.organizeIdList),"depSelect"===o.jnpfKey&&l.departmentId&&(o.defaultValue=n.multiple?[l.departmentId]:l.departmentId),"userSelect"===o.jnpfKey&&l.userId&&(o.defaultValue=n.multiple?[l.userId]:l.userId),"usersSelect"===o.jnpfKey&&l.userId&&(o.defaultValue=n.multiple?[l.userId+"--user"]:l.userId+"--user"),"posSelect"===o.jnpfKey&&l.positionIds?.length&&(o.defaultValue=n.multiple?l.positionIds.map((e=>e.id)):l.positionIds[0].id),"roleSelect"===o.jnpfKey&&l.roleIds?.length&&(o.defaultValue=n.multiple?l.roleIds:l.roleIds[0]),"groupSelect"===o.jnpfKey&&l.groupIds?.length&&(o.defaultValue=n.multiple?l.groupIds:l.groupIds[0]),"sign"===o.jnpfKey&&l.signImg&&(o.defaultValue=l.signImg)),o.isSubTable||(e[n.__vModel__]=o.defaultValue)}Rl(I(e),0)}();if(1==gl.config.enableFlow)return function(){const e={id:"",flowId:gl.config.flowId,opType:"-1"};Ge(!0,e)}();const e={id:"",formConf:gl.formConf,modelId:f.modelId,isPreview:f.isPreview,isDataManage:f.isDataManage,useFormPermission:gl.columnData.useFormPermission,showMoreBtn:![3,5].includes(gl.columnData.type),menuId:vl.menuId,allList:gl.cacheList};ml.value?.init(e)}function na(e){return"add"===e?ta():"download"==e?Ze(!0,{columnList:gl.exportList,selectIds:Nl(),showExportSelected:4!=gl.config.webType||gl.columnData.viewKey}):"upload"==e?al(!0,{modelId:f.modelId,menuId:vl.menuId,flowId:gl.config.flowId}):void(f.isPreview||("batchRemove"===e&&function(){const e=Nl();if(!e.length)return Ue.error(Qe("common.selectDataTip"));const l={ids:e,flowId:gl.config.flowId||""};Ke({iconType:"warning",title:Qe("common.tipTitle"),content:Qe("common.batchDelTip"),onOk:()=>{a(f.modelId,l).then((e=>{Ue.success(e.msg),Vl(),Kl()}))}})}(),"batchPrint"===e&&function(){if(gl.config.isPreview)return Ue.warning("功能预览不支持打印");if(!gl.columnData.printIds?.length)return Ue.error("未配置打印模板");if(!Nl().length)return Ue.error(Qe("common.selectDataTip"));if(1===gl.columnData.printIds?.length)return ra(gl.columnData.printIds[0]);dl(!0,gl.columnData.printIds)}()))}function oa(e){if(f.isPreview)return;const l=Ml();if(!l.length&&e.event.dataRequired)return Ue.error(Qe("common.selectDataTip"));2==e.event.btnType&&fa(e.event,l,0),3==e.event.btnType&&function(e,l){const a=(e,l)=>{if(!e?.length)return[];for(let a=0;a<e.length;a++){const t=e[a];1==t.sourceType&&l?.length&&(t.defaultValue=l.map((e=>"4"==gl.config.webType?e[t.relationField]:e[t.relationField+"_jnpfId"]))),4==t.sourceType&&"@formId"==t.relationField&&(t.defaultValue=l.map((e=>e.id)))}return e},t=l=>{const t={paramList:a(e.templateJson,l)||[]};x(e.interfaceId,t).then((l=>{Ue.success(l.msg),e.isRefresh&&Kl()}))};if(!e.useConfirm)return t(l);Ke({iconType:"warning",title:Qe("common.tipTitle"),content:e.confirmTitle||"确认执行此操作?",onOk:()=>{t(l)}})}(e.event,l),4==e.event.btnType&&ya(e,l)}function ia(e){if(f.isPreview)return el({confirmLoading:!1}),void Ue.warning("功能预览不支持数据导出");let a={...Al(),...e};l(f.modelId,a).then((e=>{el({confirmLoading:!1}),e.data.url&&(q({url:e.data.url}),Ye())})).catch((()=>{el({confirmLoading:!1})}))}function ra(e){const l=(Ml()||[]).map((e=>{const l={formId:e.id};return gl.config.enableFlow&&(l.flowTaskId=e.flowTaskId||e.id),l}));ul(!0,{id:e,formInfo:l})}function sa(e,l){return"edit"===e?function(e){if(4===gl.columnData.type)return function(e){e.rowEdit=!0}(e);if(1==gl.config.enableFlow){let l={id:e.flowTaskId||e.id,flowId:gl.config.flowId,opType:"-1"};Ge(!0,l)}else{const l={id:e.id,formConf:gl.formConf,modelId:f.modelId,isPreview:f.isPreview,isDataManage:f.isDataManage,useFormPermission:gl.columnData.useFormPermission,showMoreBtn:![3,5].includes(gl.columnData.type),menuId:vl.menuId,allList:gl.cacheList};ml.value?.init(l)}}(l):"detail"===e?function(e){if(1==gl.config.enableFlow){const l={id:e.flowTaskId||e.id,flowId:gl.config.flowId,opType:0};Ge(!0,l)}else{const l={id:e.id,formConf:gl.formConf,modelId:f.modelId,menuId:vl.menuId,useFormPermission:gl.columnData.useFormPermission,title:gl.config.fullName,isDataManage:f.isDataManage,hideExtra:f.isDataManage};hl.value?.init(l)}}(l):void("remove"==e&&(t=l.id,Ke({iconType:"warning",title:Qe("common.tipTitle"),content:Qe("common.delTip"),onOk:()=>{const e={ids:[t],flowId:gl.config.flowId||""};a(f.modelId,e).then((e=>{Ue.success(e.msg),Kl()}))}})));var t}function da(e,l){if(!(e.id&&"jnpfAdd"!==e.id?e.id:""))return Pl("jnpfAdd");e.rowEdit=!1;const a=I(gl.cacheList[l]);Ol(a.id,a)}function pa(e,l=0,a=null){if(f.isPreview)return Ue.warning("功能预览不支持数据保存");const t=e.id&&"jnpfAdd"!==e.id?e.id:"";if(1==gl.config.enableFlow){let n={id:e.flowTaskId||t,status:l||0,formData:e,flowId:gl.config.flowId,flowUrgent:1};a&&(n={...n,...a});(t?p:u)(n).then((e=>{Ue.success(e.msg),rl(),Kl({page:1})}))}else{const l={id:t,data:JSON.stringify(e),menuId:vl.menuId};(t?i:r)(f.modelId,l).then((e=>{Ue.success(e.msg),Kl({page:1})}))}}function ua(e){if(f.isPreview)return Ue.warning("功能预览不支持数据保存");gl.currRow=e;const l=e.id&&"jnpfAdd"!==e.id?e.id:"";gl.workFlowFormData={id:e.flowTaskId||l,formData:e,flowId:gl.config.flowId},d(0,gl.workFlowFormData).then((l=>{const a=l?.data?.list.filter((e=>!e.isBranchFlow&&e.isCandidates)),t=l.data.list.filter((e=>e.isBranchFlow));a.length||3!=l.data.type?il(!0,{branchList:t,candidateList:a,formData:gl.workFlowFormData}):Ke({iconType:"warning",title:"提示",content:"您确定要提交当前流程吗, 是否继续?",onOk:()=>{pa(e,1)}})}))}function ca(e){pa(gl.currRow,1,e)}function ma(e,l,a){1==e.event.btnType&&function(e,l){const a={...e,recordModelId:f.modelId,record:W(l),isPreview:f.isPreview,webType:gl.config.webType,rowKey:j(Wl)};fl.value?.init(a)}(e.event,l),2==e.event.btnType&&fa(e.event,l,a),3==e.event.btnType&&function(e,l){const a=()=>{s(f.modelId,l[j(Wl)]).then((e=>{const a=e.data||{};if(!a.data)return;const n={...JSON.parse(a.data),id:l[j(Wl)]};t(n)}))},t=a=>{const t={paramList:U(e.templateJson,{...a,id:l[j(Wl)]},j(Wl))||[]};x(e.interfaceId,t).then((l=>{Ue.success(l.msg),e.isRefresh&&Kl()}))},n=()=>{"4"==gl.config.webType?t(l):a()};if(!e.useConfirm)return n();Ke({iconType:"warning",title:Qe("common.tipTitle"),content:e.confirmTitle||"确认执行此操作?",onOk:()=>{n()}})}(e.event,l),4==e.event.btnType&&function(e,l){ya(e,[l])}(e,l)}function fa(e,l,a){const t={data:l,index:a,refresh:Kl,onlineUtils:L},n=S(e.func);n&&n(t)}function ya(e,l){const a=I(e.event.launchFlow);let n=[];for(let t=0;t<l.length;t++)n.push(G(a.transferList,l[t],j(Wl)));const o={template:a.flowId,btnCode:e.value,currentUser:a.currentUser,customUser:a.customUser,initiator:a.initiator,dataList:n};t(f.modelId,o).then((e=>{Ue.success(e.msg)}))}async function ha(){if(gl.config={modelId:f.modelId,isPreview:f.isPreview,...f.config},vl.modelId=f.modelId,vl.menuId=Le.meta.modelId,f.isPreview&&(vl.menuId="270579315303777093"),!gl.config.columnData||"4"!=gl.config.webType&&!gl.config.formData)return;gl.columnData=JSON.parse(gl.config.columnData),3===gl.columnData.type&&(gl.columnData.columnList=gl.columnData.columnList.filter((e=>e.prop!=gl.columnData.groupField))),gl.formConf=gl.config.formData?JSON.parse(gl.config.formData):{};const e=gl.columnData.customBtnsList||[],l=gl.columnData.columnBtnsList||[];if(function(e){if(e=e.filter((e=>e.show||!Reflect.has(e,"show"))),f.isPreview||f.isDataManage||!gl.columnData.useBtnPermission)return gl.headerBtnsList=e;let l=[];for(let a=0;a<e.length;a++)Se("btn_"+e[a].value)&&l.push(e[a]);gl.headerBtnsList=l}(gl.columnData.btnsList||[]),function(e,l){e=e.filter((e=>e.show||!Reflect.has(e,"show")));let a=[],t=[];if(f.isPreview||f.isDataManage||!gl.columnData.useBtnPermission)a=e,t=l;else{const n=$e.getPermissionList.filter((e=>e.modelId===vl.menuId)),o=n[0]&&n[0].button?n[0].button:[];for(let l=0;l<e.length;l++)e:for(let t=0;t<o.length;t++)if("btn_"+e[l].value===o[t].enCode){a.push(e[l]);break e}for(let e=0;e<l.length;e++)e:for(let a=0;a<o.length;a++)if(l[e].value===o[a].enCode){t.push(l[e]);break e}}gl.columnBtnsList=a,gl.customHeaderBtnsList=t.filter((e=>2===e.event?.position)),gl.customColumnBtnsList=t.filter((e=>2!==e.event?.position)),5==gl.columnData.type&&(gl.customHeaderBtnsList=[])}(l,e),gl.columnOptions=gl.columnData.columnOptions||[],j(El)||(vl.pageSize=1e6),Fl(!0),gl.columnData.funcs.rowStyle&&(gl.customRow=(e,l)=>{const a={row:e,rowIndex:l},t=S(gl.columnData.funcs.rowStyle),n=t?t(a):null;return n?{style:n}:{}}),gl.columnData.funcs.cellStyle&&(gl.customCell=(e,l,a)=>{const t={row:e,rowIndex:l,column:a,columnIndex:a.key},n=S(gl.columnData.funcs.cellStyle),o=n?n(t):null;return o?{style:o}:{}}),function(){if(gl.columnData.treeRelation)for(let e=0;e<gl.columnData.columnOptions.length;e++){const l=gl.columnData.columnOptions[e];if(l.id===gl.columnData.treeRelation){gl.treeRelationObj={...l,searchMultiple:!1,jnpfKey:l.__config__.jnpfKey};break}}gl.searchSchemas=de(gl.columnData.searchList)}(),function(){let e=[];if(f.isPreview||f.isDataManage||!gl.columnData.useColumnPermission)e=gl.columnData.columnList;else{const l=$e.getPermissionList.filter((e=>e.modelId===vl.menuId)),a=l[0]&&l[0].column?l[0].column:[];for(let t=0;t<gl.columnData.columnList.length;t++)e:for(let l=0;l<a.length;l++)if(gl.columnData.columnList[t].prop===a[l].enCode){e.push(gl.columnData.columnList[t]);break e}}let l=e.map((e=>({...e,placeholder:4==gl.columnData.type&&e.placeholderI18nCode?Qe(e.placeholderI18nCode,e.placeholder):e.placeholder,title:e.labelI18nCode?Qe(e.labelI18nCode,e.label):e.label,dataIndex:e.prop,align:e.align,fixed:"none"!=e.fixed&&e.fixed,sorter:e.sortable?{multiple:1}:e.sortable,width:e.width||100,customCell:gl.customCell||null})));3!==gl.columnData.type&&5!==gl.columnData.type&&(l=function(e){let l=gl.columnData.complexHeaderList||[];if(!l.length)return e;let a=[],t=[];for(let o=0;o<l.length;o++){const n=l[o];if(n.label=n.fullName,n.labelI18nCode=n.fullNameI18nCode,n.title=n.fullNameI18nCode?Qe(n.fullNameI18nCode,n.fullName):n.fullName,n.align=n.align,n.dataIndex=n.id,n.prop=n.id,n.children=[],n.jnpfKey="complexHeader",n.childColumns?.length){a.push(...n.childColumns);for(let l=0;l<n.childColumns.length;l++){const a=n.childColumns[l];for(let l=0;l<e.length;l++){const t=e[l];t.prop==a&&"left"!==t.fixed&&"right"!==t.fixed&&n.children.push({...t})}}}n.children.length&&t.push(n.children[0].prop)}l=l.filter((e=>e.children.length));let n=[];for(let o=0;o<e.length;o++){const i=e[o];if(a.includes(i.prop)&&"left"!==i.fixed&&"right"!==i.fixed){if(t.includes(i.prop)){const e=l.find((e=>e.childColumns.includes(i.prop)));n.push(e)}}else n.push(i)}return n}(l));gl.columns=l.filter((e=>e.prop.indexOf("-")<0)),4==gl.columnData.type&&function(){const e=l=>{for(let a=0;a<l.length;a++){let t=l[a];t.children?.length&&e(t.children);const n=t?.__config__;if(n){if("datePicker"===n.jnpfKey){if(n.startTimeRule&&(1==n.startTimeType&&(t.startTime=n.startTimeValue),3==n.startTimeType&&(t.startTime=(new Date).getTime()),4==n.startTimeType||5==n.startTimeType)){const e=Y(n.startTimeTarget),l=4==n.startTimeType?"subtract":"add",a=ee()[l](n.startTimeValue,e);let o=a.startOf("day").valueOf();4==n.startTimeTarget&&(o=a.startOf("minute").valueOf()),5==n.startTimeTarget&&(o=a.startOf("second").valueOf()),6==n.startTimeTarget&&(o=a.valueOf()),t.startTime=o}if(n.endTimeRule&&(1==n.endTimeType&&(t.endTime=n.endTimeValue),3==n.endTimeType&&(t.endTime=(new Date).getTime()),4==n.endTimeType||5==n.endTimeType)){const e=Y(n.endTimeTarget),l=4==n.endTimeType?"subtract":"add",a=ee()[l](n.endTimeValue,e);let o=a.endOf("day").valueOf();4==n.endTimeTarget&&(o=a.endOf("minute").valueOf()),5==n.endTimeTarget&&(o=a.endOf("second").valueOf()),6==n.endTimeTarget&&(o=a.valueOf()),t.endTime=o}}if("timePicker"===n.jnpfKey){if(n.startTimeRule&&(1==n.startTimeType&&(t.startTime=n.startTimeValue||null),3==n.startTimeType&&(t.startTime=ee().format(t.format)),4==n.startTimeType||5==n.startTimeType)){const e=Y(n.startTimeTarget+3),l=4==n.startTimeType?"subtract":"add",a=ee()[l](n.startTimeValue,e).format(t.format);t.startTime=a}if(n.endTimeRule&&(1==n.endTimeType&&(t.endTime=n.endTimeValue||null),3==n.endTimeType&&(t.endTime=ee().format(t.format)),4==n.endTimeType||5==n.endTimeType)){const e=Y(n.endTimeTarget+3),l=4==n.endTimeType?"subtract":"add",a=ee()[l](n.endTimeValue,e).format(t.format);t.endTime=a}}}}};e(gl.columns)}();!function(e){let l=[];for(let a=0;a<e.length;a++){const t=e[a];if(t.prop.includes("-")){let e=t.prop.split("-")[0],a=t.prop.split("-")[1],n=t.label.split("-")[0],o=t.label.replace(n+"-","");t.fullNameI18nCode&&Array.isArray(t.fullNameI18nCode)&&t.fullNameI18nCode[0]&&(n=Qe(t.fullNameI18nCode[0],n));let i={align:"center",jnpfKey:"table",prop:e,label:n,title:n,dataIndex:e,children:[],customCell:gl.customCell||null};t.dataIndex=a,t.title=t.labelI18nCode?Qe(t.labelI18nCode,o):o,gl.expandObj.hasOwnProperty(`${e}Expand`)||(gl.expandObj[`${e}Expand`]=!1),l.some((l=>l.prop===e))||l.push(i);for(let r=0;r<l.length;r++)if(l[r].prop===e){l[r].children.push(t);break}}else l.push(t)}2!=j(Ql)&&function(e){e.forEach((e=>{"table"===e.jnpfKey&&e.children&&e.children.length&&e.children.forEach(((l,a)=>{l.customCell=0==a?(l,a,t)=>({...gl.customCell?gl.customCell(l,a,t):{},rowspan:1,colspan:e.children.length,class:"child-table-box"}):()=>({rowspan:0,colspan:0})}))}))}(l);if(function(e){let l=[];for(let a=0;a<e.length;a++)"table"===e[a].jnpfKey?4!=gl.columnData.type&&l.push(...e[a].children):"complexHeader"===e[a].jnpfKey?l.push(...e[a].children):l.push(e[a]);gl.exportList=l}(l),gl.complexColumns=l,gl.childColumnList=l.filter((e=>"table"===e.jnpfKey)),2!==j(Ql))for(let a=0;a<gl.childColumnList.length;a++){const e=gl.childColumnList[a];e.children?.length&&(e.children=e.children.map((e=>({...e,width:100}))))}}(l)}(),!f.isDataManage&&await ja(),4==gl.columnData.type&&function(){const e=l=>{for(let a=0;a<l.length;a++){const t=l[a];t.children?.length&&e(t.children);const n=t.__config__;if(n&&(ke.includes(n.jnpfKey)&&("dictionary"===n.dataType&&n.dictionaryType&&(t.options=[],qe.getDicDataSelector(n.dictionaryType).then((e=>{t.options=e}))),"dynamic"===n.dataType&&n.propsUrl))){t.options=[];const e={paramList:n.templateJson||[]};x(n.propsUrl,e).then((e=>{t.options=Array.isArray(e.data)?e.data:[]}))}}};e(gl.columns)}(),[1,4].includes(gl.columnData.type)&&async function(){if(gl.tabList=[],!gl.columnData.tabConfig||!gl.columnData.tabConfig.on||!gl.columnData.tabConfig.relationField)return;gl.columnData.tabConfig?.hasAllTab&&gl.tabList.push({fullName:"全部",id:""});const e=gl.columnData.columnOptions.filter((e=>e.__vModel__==gl.columnData.tabConfig.relationField))||[];if(e?.length)if("dictionary"==e[0].__config__.dataType&&e[0].__config__.dictionaryType){const l=await qe.getDicDataSelector(e[0].__config__.dictionaryType)||[],a="enCode"==e[0].props.value?l.map((e=>({...e,id:e.enCode}))):l;gl.tabList=[...gl.tabList,...a]}else gl.tabList=[...gl.tabList,...e[0].options];gl.tabList?.length&&(gl.tabActiveKey=gl.tabList[0].id||"",gl.tabQueryJson={[gl.columnData.tabConfig.relationField]:gl.tabList[0].id})}(),f.isPreview)return Fl(!1);2===gl.columnData.type?(gl.treeFieldNames.key=gl.columnData.treePropsValue||"id",gl.treeFieldNames.title=gl.columnData.treePropsLabel||"fullName",gl.treeFieldNames.children=gl.columnData.treePropsChildren||"children",va()):D((()=>{j(ql)?.length?Sl():ka({})}))}async function va(){gl.isLeftTreeLazy=!1,gl.leftTreeLoading=!0,gl.leftTreeActiveInfo={},gl.treeQueryJson={},gl.leftTreeData=[],gl.treeActiveId="",gl.treeActiveNodePath=[];let e=[];if("dictionary"===gl.columnData.treeDataSource){if(!gl.columnData.treeDictionary)return gl.leftTreeLoading=!1;e=await qe.getDicDataSelector(gl.columnData.treeDictionary)}if("organize"===gl.columnData.treeDataSource){gl.isLeftTreeLazy=!0;e=(await K()).data.list}if("api"===gl.columnData.treeDataSource){if(!gl.columnData.treePropsUrl)return gl.leftTreeLoading=!1;const l={paramList:U(gl.columnData.treeTemplateJson)||[]},a=await x(gl.columnData.treePropsUrl,l);e=Array.isArray(a.data)?a.data:[]}if("formField"===gl.columnData.treeDataSource){const l=gl.treeRelationObj,a=l?.__config__?.jnpfKey||"";if(gl.columnData.treeRelation&&["organizeSelect","depSelect"].includes(a)){if("all"===l.selectType){gl.isLeftTreeLazy=!0;e=(await K()).data.list}if("custom"===l.selectType&&l.ableIds?.length){const t="organizeSelect"===a?l.ableIds.map((e=>e[e.length-1])):l.ableIds;e=(await X({departIds:t})).data.list}}}gl.leftTreeData=e,gl.leftTreeLoading=!1,D((()=>{gl.leftTreeData.length&&cl.value?.setExpandedKeys([gl.leftTreeData[0].id]),j(ql)?.length?Sl():Kl({page:1})}))}function ga(e){f.isPreview||(gl.tabQueryJson={[gl.columnData.tabConfig.relationField]:e},j(ql)?.length?Ll():ka({}))}function ba(){const e={data:gl.cacheList,tableRef:yl.value,onlineUtils:L},l=S(gl.columnData.funcs.afterOnload);l&&l(e)}function wa(e,l,a){l&&n(e).then((t=>{if(!t.data||!t.data.formData)return;const n=JSON.parse(t.data.formData);n.popupType="general",n.customBtns=[],n.hasPrintBtn=!1;const o={id:l,formConf:n,modelId:e,propsValue:a};hl.value?.init(o)}))}function Ta(e){gl.columnSettingList=e}function Ia(e){return new Promise((l=>{if("api"===gl.columnData.treeDataSource){if(!gl.columnData.treeSyncInterfaceId)return l();if(gl.columnData.treeSyncTemplateJson?.length)for(let l=0;l<gl.columnData.treeSyncTemplateJson.length;l++){const a=gl.columnData.treeSyncTemplateJson[l];a.defaultValue=e[a.relationField]||""}const a={paramList:U(gl.columnData.treeSyncTemplateJson)||[]};x(gl.columnData.treeSyncInterfaceId,a).then((a=>{const t=Array.isArray(a.data)?a.data:[];cl.value?.updateNodeByKey(e.eventKey,{children:t,isLeaf:!t.length}),l()}))}else K(e.id).then((a=>{const t=a.data.list;cl.value?.updateNodeByKey(e.eventKey,{children:t,isLeaf:!t.length}),l()}))}))}function Da(e){f.isPreview||(vl.superQueryJson=e,Kl({page:1}))}function ka(e){if(f.isPreview)return;Vl();let l={};for(let[a,t]of Object.entries(e))(t||0===t||!1===t)&&(Array.isArray(t)?t.length&&(l[a]=t):l[a]=t);l={...l,...gl.treeQueryJson||{},...gl.tabQueryJson||{}},vl.queryJson="{}"===JSON.stringify(l)?"":JSON.stringify(l),Kl({page:1})}function _a(){Sl()}async function ja(e=""){const l={menuId:vl.menuId};await o(l).then((l=>{const a=2==j(Ql)||4==gl.columnData.type?gl.columns:gl.complexColumns,t=gl.searchSchemas.map((e=>({label:e.label,id:e.field,show:e.show}))),n=a.map((e=>({label:e.label,id:e.prop,show:!0,fixed:e.fixed||"none",labelI18nCode:e.labelI18nCode})));gl.viewList=(l.data||[]).map((e=>0==e.type?{...e,searchList:t,columnList:n}:{...e,searchList:e.searchList?JSON.parse(e.searchList):[],columnList:e.columnList?JSON.parse(e.columnList):[]})),gl.currentView=e?gl.viewList.filter((l=>l.id===e))[0]||gl.viewList[0]:gl.viewList.filter((e=>1===e.status))[0]||gl.viewList[0]}))}function Ca(e){gl.currentView=e}function xa(e=[],l=[],a){let t=[];for(let n=0;n<e.length;n++)for(let o=0;o<l.length;o++)e[n].show&&e[n].id==l[o][a]&&t.push(l[o]);return t}return F((()=>{ha()})),(e,l)=>{const a=R("a-tab-pane"),t=R("a-tabs"),n=R("a-button"),o=R("a-tooltip"),i=R("jnpf-input-number"),r=R("jnpf-calculate"),s=R("jnpf-sign"),d=R("jnpf-signature"),p=R("jnpf-rate"),u=R("jnpf-slider"),y=R("jnpf-upload-img"),h=R("jnpf-upload-file"),v=R("jnpf-input"),g=R("jnpf-switch"),b=R("jnpf-time-picker"),w=R("jnpf-date-picker"),T=R("jnpf-organize-select"),I=R("jnpf-dep-select"),D=R("jnpf-role-select"),k=R("jnpf-group-select"),_=R("jnpf-pos-select"),C=R("jnpf-user-select"),x=R("jnpf-users-select"),L=R("jnpf-area-select"),S=R("jnpf-select"),U=R("jnpf-cascader"),K=R("jnpf-tree-select"),F=R("jnpf-popup-select"),q=R("jnpf-auto-complete"),G=R("jnpf-location"),X=R("JnpfTextTag"),Z=R("a-table-summary-cell"),Y=R("a-table-summary-row"),ee=R("a-table-summary");return O(),P("div",Re,[2===j(bl).type?(O(),P("div",Oe,[c(j(ne),A(Hl.value,{ref_key:"leftTreeRef",ref:cl,onReload:l[0]||(l[0]=e=>va()),onSelect:aa}),null,16)])):N("",!0),M("div",Pe,[ql.value?.length?(O(),P("div",Ae,[c(j(re),{onRegister:j(Cl),schemas:ql.value,onAdvancedChange:j(Bl),onSubmit:ka,onReset:_a,class:"search-form"},null,8,["onRegister","schemas","onAdvancedChange"])])):N("",!0),M("div",Ne,[[1,4].includes(j(bl).type)&&j(Il).length?(O(),V(t,{key:0,activeKey:j(Tl),"onUpdate:activeKey":l[1]||(l[1]=e=>H(Tl)?Tl.value=e:null),class:"jnpf-content-wrapper-tabs",destroyInactiveTabPane:"",onChange:ga},{default:B((()=>[(O(!0),P(J,null,z(j(Il),(e=>(O(),V(a,{key:e.id,tab:e.fullName},null,8,["tab"])))),128))])),_:1},8,["activeKey"])):N("",!0),c(j(ue),A({onRegister:j(Ul)},Gl.value,{ref_key:"tableRef",ref:yl,onColumnsChange:Ta}),E({tableTitle:B((()=>[(O(!0),P(J,null,z(gl.headerBtnsList,(e=>(O(),V(n,{key:e.value,type:"add"===e.value?"primary":"link",preIcon:e.icon,onClick:l=>na(e.value)},{default:B((()=>[$(Q(e.labelI18nCode?j(Qe)(e.labelI18nCode,e.label):e.label),1)])),_:2},1032,["type","preIcon","onClick"])))),128)),(O(!0),P(J,null,z(gl.customHeaderBtnsList,(e=>(O(),V(n,{key:e.value,type:"link",preIcon:e.event?.btnIcon,onClick:l=>oa(e)},{default:B((()=>[$(Q(e.labelI18nCode?j(Qe)(e.labelI18nCode,e.label):e.label),1)])),_:2},1032,["preIcon","onClick"])))),128))])),bodyCell:B((({column:e={},record:l,index:a})=>["INDEX"===e.flag?(O(),P(J,{key:0},[4!==j(bl).type||m.config.enableFlow?(O(),P("span",ze,Q(a+1),1)):(O(),P("div",Ve,[M("span",Be,Q(a+1),1),M("i",{class:"ym-custom ym-custom-arrow-expand",onClick:e=>function(e){let l=[];for(let n=0;n<j($l).length;n++){const e=j($l)[n];if(e.children?.length)for(let a=0;a<e.children.length;a++){const t=e.children[a];t.__config__.span=24,t.__config__.label=t.label,l.push(W(t))}else e.__config__.span=24,e.__config__.label=e.label,l.push(W(e))}l=l.map((e=>(e.__config__?.templateJson&&e.__config__?.templateJson.length&&(e.__config__.templateJson=e.__config__.templateJson.map((e=>({...e,relationField:""})))),e.templateJson&&e.templateJson.length&&(e.templateJson=e.templateJson.map((e=>({...e,relationField:""})))),e)));const a={...gl.formConf,fields:l,popupType:"general"},t={id:e.id,formConf:a,modelId:f.modelId,isPreview:f.isPreview,isDataManage:f.isDataManage,useFormPermission:gl.columnData.useFormPermission,showMoreBtn:!1,menuId:vl.menuId,allList:gl.cacheList,formData:e};ml.value?.init(t)}(l)},null,8,Je)]))],64)):N("",!0),4===j(bl).type?(O(),P(J,{key:1},[l.rowEdit?(O(),P(J,{key:0},["inputNumber"===e.jnpfKey?(O(),V(i,{key:0,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,placeholder:e.placeholder,min:e.min,max:e.max,step:e.step,controls:e.controls,addonBefore:e.addonBefore,addonAfter:e.addonAfter,precision:e.precision,thousands:e.thousands,disabled:e.disabled},null,8,["value","onUpdate:value","placeholder","min","max","step","controls","addonBefore","addonAfter","precision","thousands","disabled"])):"calculate"===e.jnpfKey?(O(),V(r,{key:1,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,isStorage:e.isStorage,precision:e.precision,thousands:e.thousands,roundType:e.roundType,detailed:""},null,8,["value","onUpdate:value","isStorage","precision","thousands","roundType"])):"rate"===e.jnpfKey?(O(),V(p,{key:2,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,count:e.count,allowHalf:e.allowHalf,disabled:e.disabled},null,8,["value","onUpdate:value","count","allowHalf","disabled"])):"slider"===e.jnpfKey?(O(),V(u,{key:3,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,min:e.min,max:e.max,step:e.step,disabled:e.disabled},null,8,["value","onUpdate:value","min","max","step","disabled"])):"uploadImg"===e.jnpfKey?(O(),V(y,{key:4,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,fileSize:e.fileSize,sizeUnit:e.sizeUnit,buttonText:e.buttonText,limit:e.limit,pathType:e.pathType,sortRule:e.sortRule,timeFormat:e.timeFormat,folder:e.folder,tipText:e.tipText,showType:e.showType,disabled:e.disabled},null,8,["value","onUpdate:value","fileSize","sizeUnit","buttonText","limit","pathType","sortRule","timeFormat","folder","tipText","showType","disabled"])):"uploadFile"===e.jnpfKey?(O(),V(h,{key:5,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,accept:e.accept,fileSize:e.fileSize,sizeUnit:e.sizeUnit,buttonText:e.buttonText,limit:e.limit,pathType:e.pathType,sortRule:e.sortRule,timeFormat:e.timeFormat,folder:e.folder,tipText:e.tipText,disabled:e.disabled},null,8,["value","onUpdate:value","accept","fileSize","sizeUnit","buttonText","limit","pathType","sortRule","timeFormat","folder","tipText","disabled"])):"switch"===e.jnpfKey?(O(),V(g,{key:6,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,disabled:e.disabled},null,8,["value","onUpdate:value","disabled"])):"timePicker"===e.jnpfKey?(O(),V(b,{key:7,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,format:e.format,startTime:e.startTime,endTime:e.endTime,placeholder:e.placeholder,allowClear:e.clearable,disabled:e.disabled},null,8,["value","onUpdate:value","format","startTime","endTime","placeholder","allowClear","disabled"])):"datePicker"===e.jnpfKey?(O(),V(w,{key:8,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,format:e.format,startTime:e.startTime,endTime:e.endTime,allowClear:e.clearable,placeholder:e.placeholder,disabled:e.disabled},null,8,["value","onUpdate:value","format","startTime","endTime","allowClear","placeholder","disabled"])):"organizeSelect"===e.jnpfKey?(O(),V(T,{key:9,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,placeholder:e.placeholder,multiple:e.multiple,allowClear:e.clearable,disabled:e.disabled,selectType:e.selectType,ableIds:e.ableIds},null,8,["value","onUpdate:value","placeholder","multiple","allowClear","disabled","selectType","ableIds"])):"depSelect"===e.jnpfKey?(O(),V(I,{key:10,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,placeholder:e.placeholder,multiple:e.multiple,allowClear:e.clearable,disabled:e.disabled,selectType:e.selectType,ableIds:e.ableIds},null,8,["value","onUpdate:value","placeholder","multiple","allowClear","disabled","selectType","ableIds"])):"roleSelect"===e.jnpfKey?(O(),V(D,{key:11,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,placeholder:e.placeholder,multiple:e.multiple,allowClear:e.clearable,disabled:e.disabled,selectType:e.selectType,ableIds:e.ableIds},null,8,["value","onUpdate:value","placeholder","multiple","allowClear","disabled","selectType","ableIds"])):"groupSelect"===e.jnpfKey?(O(),V(k,{key:12,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,placeholder:e.placeholder,multiple:e.multiple,allowClear:e.clearable,disabled:e.disabled,selectType:e.selectType,ableIds:e.ableIds},null,8,["value","onUpdate:value","placeholder","multiple","allowClear","disabled","selectType","ableIds"])):"posSelect"===e.jnpfKey?(O(),V(_,{key:13,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,placeholder:e.placeholder,multiple:e.multiple,allowClear:e.clearable,disabled:e.disabled,selectType:e.selectType,ableIds:e.ableIds},null,8,["value","onUpdate:value","placeholder","multiple","allowClear","disabled","selectType","ableIds"])):"userSelect"===e.jnpfKey?(O(),V(C,{key:14,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,placeholder:e.placeholder,multiple:e.multiple,allowClear:e.clearable,disabled:e.disabled,selectType:["all","custom"].includes(e.selectType)?e.selectType:"all",ableIds:e.ableIds},null,8,["value","onUpdate:value","placeholder","multiple","allowClear","disabled","selectType","ableIds"])):"usersSelect"===e.jnpfKey?(O(),V(x,{key:15,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,placeholder:e.placeholder,multiple:e.multiple,allowClear:e.clearable,disabled:e.disabled,selectType:e.selectType,ableIds:e.ableIds},null,8,["value","onUpdate:value","placeholder","multiple","allowClear","disabled","selectType","ableIds"])):"areaSelect"===e.jnpfKey?(O(),V(L,{key:16,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,level:e.level,placeholder:e.placeholder,multiple:e.multiple,allowClear:e.clearable,disabled:e.disabled},null,8,["value","onUpdate:value","level","placeholder","multiple","allowClear","disabled"])):["select","radio","checkbox"].includes(e.jnpfKey)?(O(),V(S,{key:17,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,placeholder:e.placeholder,multiple:e.multiple||"checkbox"===e.jnpfKey,allowClear:e.clearable||["radio","checkbox"].includes(e.jnpfKey),showSearch:e.filterable,disabled:e.disabled,options:e.options,fieldNames:e.props},null,8,["value","onUpdate:value","placeholder","multiple","allowClear","showSearch","disabled","options","fieldNames"])):"cascader"===e.jnpfKey?(O(),V(U,{key:18,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,placeholder:e.placeholder,multiple:e.multiple,allowClear:e.clearable,showSearch:e.filterable,disabled:e.disabled,options:e.options,fieldNames:e.props,showAllLevels:e.showAllLevels},null,8,["value","onUpdate:value","placeholder","multiple","allowClear","showSearch","disabled","options","fieldNames","showAllLevels"])):"treeSelect"===e.jnpfKey?(O(),V(K,{key:19,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,placeholder:e.placeholder,multiple:e.multiple,allowClear:e.clearable,showSearch:e.filterable,disabled:e.disabled,options:e.options,fieldNames:e.props},null,8,["value","onUpdate:value","placeholder","multiple","allowClear","showSearch","disabled","options","fieldNames"])):"relationForm"===e.jnpfKey?(O(),V(j(se),{key:20,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,placeholder:e.placeholder,allowClear:e.clearable,disabled:e.disabled,modelId:e.modelId,columnOptions:e.columnOptions,relationField:e.relationField,hasPage:e.hasPage,pageSize:e.pageSize,popupType:e.popupType,popupTitle:e.popupTitle,popupWidth:e.popupWidth,propsValue:e.propsValue,queryType:e.queryType},null,8,["value","onUpdate:value","placeholder","allowClear","disabled","modelId","columnOptions","relationField","hasPage","pageSize","popupType","popupTitle","popupWidth","propsValue","queryType"])):"popupSelect"===e.jnpfKey||"popupTableSelect"===e.jnpfKey?(O(),V(F,{key:21,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,placeholder:e.placeholder,multiple:e.multiple,allowClear:e.clearable,disabled:e.disabled,interfaceId:e.interfaceId,templateJson:e.templateJson,columnOptions:e.columnOptions,propsValue:e.propsValue,relationField:e.relationField,hasPage:e.hasPage,pageSize:e.pageSize,popupType:e.popupType,popupTitle:e.popupTitle,popupWidth:e.popupWidth},null,8,["value","onUpdate:value","placeholder","multiple","allowClear","disabled","interfaceId","templateJson","columnOptions","propsValue","relationField","hasPage","pageSize","popupType","popupTitle","popupWidth"])):"autoComplete"===e.jnpfKey?(O(),V(q,{key:22,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,placeholder:e.placeholder,allowClear:e.clearable,disabled:e.disabled,interfaceId:e.interfaceId,relationField:e.relationField,templateJson:e.templateJson,total:e.total},null,8,["value","onUpdate:value","placeholder","allowClear","disabled","interfaceId","relationField","templateJson","total"])):["input","textarea"].includes(e.jnpfKey)?(O(),V(v,{key:23,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,placeholder:e.placeholder,allowClear:e.clearable,disabled:e.disabled,readonly:e.readonly,prefixIcon:e.prefixIcon,suffixIcon:e.suffixIcon,addonBefore:e.addonBefore,addonAfter:e.addonAfter,maxlength:e.maxlength,showCount:e.showCount,showPassword:e.showPassword},null,8,["value","onUpdate:value","placeholder","allowClear","disabled","readonly","prefixIcon","suffixIcon","addonBefore","addonAfter","maxlength","showCount","showPassword"])):"location"===e.jnpfKey?(O(),V(G,{key:24,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,autoLocation:e.autoLocation,enableLocationScope:e.enableLocationScope,adjustmentScope:e.adjustmentScope,enableDesktopLocation:e.enableDesktopLocation,locationScope:e.locationScope,clearable:e.clearable,disabled:e.disabled},null,8,["value","onUpdate:value","autoLocation","enableLocationScope","adjustmentScope","enableDesktopLocation","locationScope","clearable","disabled"])):"sign"===e.jnpfKey?(O(),V(s,{key:25,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,isInvoke:e.isInvoke,disabled:e.disabled},null,8,["value","onUpdate:value","isInvoke","disabled"])):"signature"===e.jnpfKey?(O(),V(d,{key:26,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,ableIds:e.ableIds,disabled:e.disabled},null,8,["value","onUpdate:value","ableIds","disabled"])):j(_e).includes(e.jnpfKey)?(O(),P(J,{key:27},[$(Q(l[e.prop+"_name"]||l[e.prop]),1)],64)):(O(),P(J,{key:28},[$(Q(l[e.prop]),1)],64))],64)):(O(),P(J,{key:1},["inputNumber"===e.jnpfKey?(O(),V(i,{key:0,value:l[e.prop+"_name"],"onUpdate:value":a=>l[e.prop+"_name"]=a,precision:e.precision,thousands:e.thousands,disabled:"",detailed:""},null,8,["value","onUpdate:value","precision","thousands"])):"calculate"===e.jnpfKey?(O(),V(r,{key:1,value:l[e.prop+"_name"],"onUpdate:value":a=>l[e.prop+"_name"]=a,isStorage:e.isStorage,precision:e.precision,thousands:e.thousands,roundType:e.roundType,detailed:""},null,8,["value","onUpdate:value","isStorage","precision","thousands","roundType"])):"sign"===e.jnpfKey?(O(),V(s,{key:2,value:l[e.prop+"_name"],"onUpdate:value":a=>l[e.prop+"_name"]=a,detailed:""},null,8,["value","onUpdate:value"])):"signature"===e.jnpfKey?(O(),V(d,{key:3,value:l[e.prop+"_name"],"onUpdate:value":a=>l[e.prop+"_name"]=a,detailed:""},null,8,["value","onUpdate:value"])):"rate"===e.jnpfKey?(O(),V(p,{key:4,value:l[e.prop+"_name"],"onUpdate:value":a=>l[e.prop+"_name"]=a,count:e.count,allowHalf:e.allowHalf,disabled:""},null,8,["value","onUpdate:value","count","allowHalf"])):"slider"===e.jnpfKey?(O(),V(u,{key:5,value:l[e.prop+"_name"],"onUpdate:value":a=>l[e.prop+"_name"]=a,min:e.min,max:e.max,step:e.step,disabled:""},null,8,["value","onUpdate:value","min","max","step"])):"uploadImg"===e.jnpfKey?(O(),P(J,{key:6},[l[e.prop]?.length?(O(),V(y,{key:0,value:l[e.prop+"_name"],"onUpdate:value":a=>l[e.prop+"_name"]=a,disabled:"",detailed:"",simple:""},null,8,["value","onUpdate:value"])):N("",!0)],64)):"uploadFile"===e.jnpfKey?(O(),P(J,{key:7},[l[e.prop]?.length?(O(),V(h,{key:0,value:l[e.prop+"_name"],"onUpdate:value":a=>l[e.prop+"_name"]=a,disabled:"",detailed:"",simple:""},null,8,["value","onUpdate:value"])):N("",!0)],64)):"input"===e.jnpfKey?(O(),V(v,{key:8,value:l[e.prop+"_name"],"onUpdate:value":a=>l[e.prop+"_name"]=a,useMask:e.useMask,maskConfig:e.maskConfig,showOverflow:j(bl).showOverflow,detailed:""},null,8,["value","onUpdate:value","useMask","maskConfig","showOverflow"])):"relationForm"===e.jnpfKey?(O(),P("p",{key:9,class:"link-text",onClick:a=>wa(e.modelId,l[`${e.prop}_id`],e.propsValue)},Q(l[e.prop+"_name"]||l[e.prop]),9,He)):(O(),P(J,{key:10},[$(Q(l[e.prop+"_name"]||l[e.prop]),1)],64))],64))],64)):(O(),P(J,{key:2},[2!==Ql.value&&j(wl).length?(O(!0),P(J,{key:0},z(j(wl),((a,t)=>(O(),P(J,null,[e.id?.includes("-")&&a.children&&a.children[0]&&e.id===a.children[0]?.id?(O(),V(ge,{data:l[a.prop],head:a.children,onToggleExpand:e=>{return t=l,n=`${a.prop}Expand`,void(t[n]=!t[n]);var t,n},onToDetail:wa,expand:l[`${a.prop}Expand`],showOverflow:j(bl).showOverflow,key:t},null,8,["data","head","onToggleExpand","expand","showOverflow"])):N("",!0)],64)))),256)):N("",!0),l.top||e.id?.includes("-")?N("",!0):(O(),P(J,{key:1},["relationForm"===e.jnpfKey?(O(),P("p",{key:0,class:"link-text",onClick:a=>wa(e.modelId,l[`${e.prop}_id`],e.propsValue)},Q(l[e.prop]),9,Ee)):N("",!0),"inputNumber"===e.jnpfKey?(O(),V(i,{key:1,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,precision:e.precision,thousands:e.thousands,disabled:"",detailed:""},null,8,["value","onUpdate:value","precision","thousands"])):N("",!0),"calculate"===e.jnpfKey?(O(),V(r,{key:2,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,isStorage:e.isStorage,precision:e.precision,thousands:e.thousands,roundType:e.roundType,detailed:""},null,8,["value","onUpdate:value","isStorage","precision","thousands","roundType"])):N("",!0),"sign"===e.jnpfKey?(O(),V(s,{key:3,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,detailed:""},null,8,["value","onUpdate:value"])):N("",!0),"signature"===e.jnpfKey?(O(),V(d,{key:4,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,detailed:""},null,8,["value","onUpdate:value"])):N("",!0),"rate"===e.jnpfKey?(O(),V(p,{key:5,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,count:e.count,allowHalf:e.allowHalf,disabled:""},null,8,["value","onUpdate:value","count","allowHalf"])):N("",!0),"slider"===e.jnpfKey?(O(),V(u,{key:6,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,min:e.min,max:e.max,step:e.step,disabled:""},null,8,["value","onUpdate:value","min","max","step"])):N("",!0),"uploadImg"===e.jnpfKey?(O(),P(J,{key:7},[l[e.prop]?.length?(O(),V(y,{key:0,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,disabled:"",detailed:"",simple:""},null,8,["value","onUpdate:value"])):N("",!0)],64)):N("",!0),"uploadFile"===e.jnpfKey?(O(),P(J,{key:8},[l[e.prop]?.length?(O(),V(h,{key:0,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,disabled:"",detailed:"",simple:""},null,8,["value","onUpdate:value"])):N("",!0)],64)):N("",!0),"input"===e.jnpfKey?(O(),V(v,{key:9,value:l[e.prop],"onUpdate:value":a=>l[e.prop]=a,useMask:e.useMask,maskConfig:e.maskConfig,showOverflow:j(bl).showOverflow,detailed:""},null,8,["value","onUpdate:value","useMask","maskConfig","showOverflow"])):N("",!0)],64))],64)),"flowState"!==e.key||1!=m.config.enableFlow||l.top&&5!=j(bl).type?N("",!0):(O(),V(X,{key:3,content:j(_l)(l.flowState),color:j(jl)(l.flowState)},null,8,["content","color"])),"action"!==e.key||l.top&&5!=j(bl).type?N("",!0):(O(),V(j(ce),{key:4,actions:ea(l,a),dropDownActions:la(l,a)},null,8,["actions","dropDownActions"]))])),_:2},[j(bl).hasSuperQuery&&"4"!=m.config.webType?{name:"toolbar",fn:B((()=>[c(o,{placement:"top"},{title:B((()=>[M("span",null,Q(j(Qe)("common.superQuery")),1)])),default:B((()=>[c(j(Fe),{onClick:l[2]||(l[2]=e=>j(nl)(!0,{columnOptions:gl.columnOptions,hidePlan:m.isDataManage}))})])),_:1})])),key:"0"}:void 0,m.isDataManage?void 0:{name:"toolbarAfter",fn:B((()=>[c(xe,{menuId:vl.menuId,viewList:j(Dl),onItemClick:Ca,onReload:ja},null,8,["menuId","viewList"]),c(Ce,{menuId:vl.menuId,viewList:j(Dl),currentView:j(kl),onReload:ja},null,8,["menuId","viewList","currentView"])])),key:"1"},[1,2].includes(j(bl).type)&&2===Ql.value&&j(wl).length?{name:"expandedRowRender",fn:B((({record:e})=>[c(t,{size:"small"},{default:B((()=>[(O(!0),P(J,null,z(j(wl),((l,t)=>(O(),V(a,{key:t,tab:l.label,label:l.label},{default:B((()=>[c(j(ue),{onRegister:j(Jl),ellipsis:!!j(bl).showOverflow,"data-source":e[l.prop],columns:l.children},{bodyCell:B((({column:e={},record:l})=>["relationForm"===e.jnpfKey?(O(),P("p",{key:0,class:"link-text",onClick:a=>wa(e.modelId,l[`${e.dataIndex}_id`],e.propsValue)},Q(l[e.dataIndex]),9,Me)):N("",!0),"inputNumber"===e.jnpfKey?(O(),V(i,{key:1,value:l[e.dataIndex],"onUpdate:value":a=>l[e.dataIndex]=a,precision:e.precision,thousands:e.thousands,disabled:"",detailed:""},null,8,["value","onUpdate:value","precision","thousands"])):N("",!0),"calculate"===e.jnpfKey?(O(),V(r,{key:2,value:l[e.dataIndex],"onUpdate:value":a=>l[e.dataIndex]=a,isStorage:e.isStorage,precision:e.precision,thousands:e.thousands,roundType:e.roundType,detailed:""},null,8,["value","onUpdate:value","isStorage","precision","thousands","roundType"])):N("",!0),"sign"===e.jnpfKey?(O(),V(s,{key:3,value:l[e.dataIndex],"onUpdate:value":a=>l[e.dataIndex]=a,detailed:""},null,8,["value","onUpdate:value"])):N("",!0),"signature"===e.jnpfKey?(O(),V(d,{key:4,value:l[e.dataIndex],"onUpdate:value":a=>l[e.dataIndex]=a,detailed:""},null,8,["value","onUpdate:value"])):N("",!0),"rate"===e.jnpfKey?(O(),V(p,{key:5,value:l[e.dataIndex],"onUpdate:value":a=>l[e.dataIndex]=a,count:e.count,allowHalf:e.allowHalf,disabled:""},null,8,["value","onUpdate:value","count","allowHalf"])):N("",!0),"slider"===e.jnpfKey?(O(),V(u,{key:6,value:l[e.dataIndex],"onUpdate:value":a=>l[e.dataIndex]=a,min:e.min,max:e.max,step:e.step,disabled:""},null,8,["value","onUpdate:value","min","max","step"])):N("",!0),"uploadImg"===e.jnpfKey?(O(),P(J,{key:7},[l[e.dataIndex]?.length?(O(),V(y,{key:0,value:l[e.dataIndex],"onUpdate:value":a=>l[e.dataIndex]=a,disabled:"",detailed:"",simple:""},null,8,["value","onUpdate:value"])):N("",!0)],64)):N("",!0),"uploadFile"===e.jnpfKey?(O(),P(J,{key:8},[l[e.dataIndex]?.length?(O(),V(h,{key:0,value:l[e.dataIndex],"onUpdate:value":a=>l[e.dataIndex]=a,disabled:"",detailed:"",simple:""},null,8,["value","onUpdate:value"])):N("",!0)],64)):N("",!0),"input"===e.jnpfKey?(O(),V(v,{key:9,value:l[e.dataIndex],"onUpdate:value":a=>l[e.dataIndex]=a,useMask:e.useMask,maskConfig:e.maskConfig,showOverflow:j(bl).showOverflow,detailed:""},null,8,["value","onUpdate:value","useMask","maskConfig","showOverflow"])):N("",!0)])),_:2},1032,["onRegister","ellipsis","data-source","columns"])])),_:2},1032,["tab","label"])))),128))])),_:2},1024)])),key:"2"}:void 0,j(bl).showSummary&&[1,2,4].includes(j(bl).type)?{name:"summary",fn:B((()=>[c(ee,{fixed:""},{default:B((()=>[c(Y,null,{default:B((()=>[zl.value?(O(),P(J,{key:0},[c(Z,{index:0,"col-span":2},{default:B((()=>[$(Q(j(Qe)("component.table.summary")),1)])),_:1}),c(Z,{index:1,"col-span":0}),(O(!0),P(J,null,z(Zl.value,((e,l)=>(O(),V(Z,{key:l,index:l+2,align:Yl(l)},{default:B((()=>[$(Q(e),1)])),_:2},1032,["index","align"])))),128)),c(Z,{index:Zl.value.length+2},null,8,["index"])],64)):(O(),P(J,{key:1},[c(Z,{index:0},{default:B((()=>[$(Q(j(Qe)("component.table.summary")),1)])),_:1}),(O(!0),P(J,null,z(Zl.value,((e,l)=>(O(),V(Z,{key:l,index:l+1,align:Yl(l)},{default:B((()=>[$(Q(e),1)])),_:2},1032,["index","align"])))),128)),c(Z,{index:Zl.value.length+1},null,8,["index"])],64))])),_:1})])),_:1})])),key:"3"}:void 0]),1040,["onRegister"])])]),c(me,{ref_key:"formRef",ref:ml,onReload:j(Kl)},null,8,["onReload"]),c(ye,{ref_key:"detailRef",ref:hl},null,512),c(we,{onRegister:j(ol),onConfirm:ca},null,8,["onRegister"]),c(be,{onRegister:j(We),onReload:j(Kl)},null,8,["onRegister","onReload"]),c(j(Te),{onRegister:j(Xe),onDownload:ia},null,8,["onRegister"]),c(j(Ie),{onRegister:j(ll),onReload:j(Kl)},null,8,["onRegister","onReload"]),c(j(De),{onRegister:j(tl),onSuperQuery:Da},null,8,["onRegister"]),c(fe,{ref_key:"customFormRef",ref:fl,onReload:j(Kl)},null,8,["onReload"]),c(he,{onRegister:j(sl),onChange:ra},null,8,["onRegister"]),c(ve,{onRegister:j(pl)},null,8,["onRegister"])])}}});export{Qe as _};
