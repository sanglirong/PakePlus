import{E as e,F as t,G as o,H as n,I as s}from"./visualDev-8f54ab4b.js";import{u as i,B as r}from"./useTable-dc8c9d84.js";import{T as a}from"./TableAction-adbe36f2.js";import{d as l,u as p,r as m,ad as d,e as u,o as c,g as _,a4 as f,j,l as g,m as v,t as y,k as b,p as w,q as x,ea as R,ah as h}from"./index-920db443.js";import{u as C}from"./index-143f5813.js";import{u as I}from"./index-9c138ba5.js";import{_ as k}from"./Form.vue_vue_type_script_setup_true_lang-df745e81.js";import{_ as T}from"./Preview.vue_vue_type_script_setup_true_lang-3f9e7a38.js";import{P as D}from"./index-c37d2476.js";import"./useForm-1d28ee0b.js";import"./componentMap-c91676b4.js";import"./index.vue_vue_type_script_setup_true_lang-69353133.js";import"./index-999abbee.js";import"./ArrowLeftOutlined-3fbf15bc.js";import"./log-2a5f2c26.js";import"./Parser.vue_vue_type_script_setup_true_lang-6ddfe448.js";import"./Item.vue_vue_type_script_setup_true_lang-fef56f78.js";import"./Form.vue_vue_type_script_setup_true_lang-63005a4d.js";import"./createAsyncComponent-7e8f72ac.js";import"./DataLogList.vue_vue_type_script_setup_true_lang-c225eb8c.js";import"./index-0be8277c.js";import"./jquery-6353a699.js";import"./useDefineSetting-7df030ff.js";import"./CustomForm.vue_vue_type_script_setup_true_lang-1aa664f4.js";import"./config-06ca91cd.js";import"./upperFirst-2cd1a2f7.js";import"./useTabs-ceeccdba.js";import"./uniqBy-e868edd7.js";import"./useWindowSizeFn-05f906e2.js";import"./sortable.esm-02d0fe44.js";import"./SettingOutlined-dd6150a2.js";import"./index-1cfe4e28.js";import"./formValidate-c8ab8d29.js";import"./FieldForm.vue_vue_type_script_setup_true_lang-48e53dae.js";import"./componentMap-a7ede5fc.js";import"./BasicLeftTree-cd55d444.js";import"./billRule-0363563b.js";import"./import-e198d900.js";import"./tip-b30e67af.js";import"./dataSource-ed26da12.js";import"./dataModel-ea807f46.js";import"./index-3b5bee70.js";import"./CopyOutlined-8d46c8b2.js";const M={class:"jnpf-content-wrapper"},O={class:"jnpf-content-wrapper-center"},F={class:"jnpf-content-wrapper-content"},P=l({name:"formDesign",__name:"index",setup(l){const{createMessage:P}=h(),{t:S}=p(),[Y,{openModal:A}]=C(),[N,{openModal:H}]=C(),[L,{openPopup:q}]=I(),B=m({}),E=d({type:2}),[z,{reload:G}]=i({api:e,columns:[{title:"表单名称",dataIndex:"fullName",width:200},{title:"表单编码",dataIndex:"enCode",width:200},{title:"表单类型",dataIndex:"type",width:100,align:"center",customRender:()=>"系统导入"},{title:"创建人",dataIndex:"creatorUser",width:120},{title:"创建时间",dataIndex:"creatorTime",width:150,format:"date|YYYY-MM-DD HH:mm:ss"},{title:"最后修改时间",dataIndex:"lastModifyTime",width:150,format:"date|YYYY-MM-DD HH:mm:ss"},{title:"排序",dataIndex:"sortCode",width:70,align:"center"},{title:"状态",dataIndex:"isRelease",width:80,align:"center"}],searchInfo:E,useSearchForm:!0,formConfig:{schemas:[{field:"keyword",label:S("common.keyword"),component:"Input",componentProps:{placeholder:S("common.enterKeyword"),submitOnPressEnter:!0}},{field:"isRelease",label:"状态",component:"Select",componentProps:{placeholder:"请选择",options:[{fullName:"未发布",id:0},{fullName:"已发布",id:1},{fullName:"已修改",id:2}]}}]},actionColumn:{width:150,title:"操作",dataIndex:"action"}});function K(e){return[{label:S("common.editText"),onClick:J.bind(null,e.id)},{label:"发布",color:"error",modelConfirm:{title:"发布确认",content:"发布表单会覆盖当前线上版本, 是否继续?",onOk:V.bind(null,e.id)}}]}function Q(e){return[{label:"预览表单",onClick:W.bind(null,e)},{label:"复制表单",modelConfirm:{content:"您确定要复制该表单, 是否继续?",onOk:Z.bind(null,e.id)}},{label:"导出表单",modelConfirm:{content:"您确定要导出该表单, 是否继续?",onOk:$.bind(null,e.id)}},{label:"删除表单",modelConfirm:{onOk:U.bind(null,e.id)}}]}function J(e=""){A(!0,{id:e,...E})}function U(e){t(e).then((e=>{P.success(e.msg),G()}))}function V(e){o(e).then((e=>{P.success(e.msg),G()}))}function W(e){B.value=e,H(!0,{type:"flow",id:e.id,isRelease:e.isRelease})}function X(e){const t={fullName:B.value.fullName,enCode:B.value.enCode,modelId:B.value.id,previewType:e.previewType};q(!0,t)}function Z(e){n(e).then((e=>{P.success(e.msg),G()}))}function $(e){s(e).then((e=>{R({url:e.data.url})}))}return(e,t)=>{const o=u("a-alert"),n=u("a-button"),s=u("jnpf-upload-btn"),i=u("a-tag");return c(),_("div",M,[f("div",O,[f("div",F,[j(b(r),{onRegister:b(z)},{headerTop:g((()=>[j(o,{message:"系统表单用于代码生成或自主编码的流程表单导入到系统！",type:"warning","show-icon":""})])),tableTitle:g((()=>[j(n,{type:"primary",preIcon:"icon-ym icon-ym-btn-add",onClick:t[0]||(t[0]=e=>J())},{default:g((()=>[v(y(b(S)("common.addText")),1)])),_:1}),j(s,{url:"/api/visualdev/OnlineDev/Actions/Import",accept:".vdd",onOnSuccess:b(G)},null,8,["onOnSuccess"])])),bodyCell:g((({column:e,record:t})=>["isRelease"===e.key?(c(),w(i,{key:0,color:1==t.isRelease?"success":2==t.isRelease?"warning":""},{default:g((()=>[v(y(1==t.isRelease?"已发布":2==t.isRelease?"已修改":"未发布"),1)])),_:2},1032,["color"])):x("",!0),"action"===e.key?(c(),w(b(a),{key:1,actions:K(t),dropDownActions:Q(t)},null,8,["actions","dropDownActions"])):x("",!0)])),_:1},8,["onRegister"])])]),j(k,{onRegister:b(Y),onReload:b(G)},null,8,["onRegister","onReload"]),j(b(D),{onRegister:b(N),onPreviewPc:X},null,8,["onRegister"]),j(T,{onRegister:b(L)},null,8,["onRegister"])])}}});export{P as default};
